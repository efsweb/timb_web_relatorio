(function(f){xcelsius.declare("xcelsius.charts.Chart");xcelsius.require("xcelsius.utils.NumberUtils");xcelsius.require("xcelsius.utils.StringUtils");xcelsius.require("xcelsius.core.UIComponent");xcelsius.require("xcelsius.charts.DataModel");xcelsius.require("xcelsius.charts.DataModelUtils");xcelsius.require("xcelsius.charts.ChartDataInsertion");xcelsius.require("xcelsius.charts.constant.ChartProperty");xcelsius.require("xcelsius.core.ValidatingStrategy");xcelsius.require("xcelsius.events.ApplicationEvent");var b=xcelsius.core.ValidatingStrategy;var d={};var g=xcelsius.charts.constant.ChartProperty;d[g.showBackground]={defaultValue:true,mapToController:true};d[g.title]={defaultValue:"Chart Title",mapToController:true};d[g.sameMarginOnAllSides]={defaultValue:true,propertyDefined:true};d[g.subtitle]={defaultValue:"Sample Sub Title",mapToController:true};d[g.titleNumberFormat]={defaultValue:null,mapToController:true};d[g.subtitleNumberFormat]={defaultValue:null,mapToController:true};d[g.showTitles]={defaultValue:true,mapToController:true};d[g.sortingEnabled]={defaultValue:false,propertyDefined:true};d[g.sortingSeriesIndex]={defaultValue:0,propertyDefined:true};d[g.dataSortingOrder]={defaultValue:"Ascending",propertyDefined:true};d[g.dataNumberFormats]={defaultValue:[],mapToController:true};d[g.seriesNames]={defaultValue:["Series 1"],propertyDefined:true};d[g.seriesNamesNumberFormats]={defaultValue:[],mapToController:true};d[g.data]={defaultValue:[58,25,70,45,100,10,20,30,40,50],propertyDefined:true};d[g.chartLabelSeparator]={defaultValue:["!NEW_LINE","!NEW_LINE","!NEW_LINE","!NEW_LINE","!NEW_LINE"],mapToController:true};d[g.enableHideShowSeries]={defaultValue:false,mapToController:true};d[g.ignoreSeriesEndBlanks]={defaultValue:false,propertyDefined:true};d[g.ignoreValueEndBlanks]={defaultValue:false,propertyDefined:true};d[g.legendPosition]={defaultValue:"right",mapToController:true};d[g.showLegend]={defaultValue:false,mapToController:true};d[g.dataLabelPosition]={defaultValue:["outsideEnd","right"],mapToController:true};d[g.dataLabelXoffset]={defaultValue:[0,0,0,0,0],mapToController:true};d[g.dataLabelYoffset]={defaultValue:[0,0,0,0,0],mapToController:true};d[g.legendXShift]={defaultValue:0,mapToController:true};d[g.legendYShift]={defaultValue:0,mapToController:true};d[g.showDataLabels]={defaultValue:[0,0,0,0,0],mapToController:true};d[g.showMarkLabels]={defaultValue:true,mapToController:true};d[g.markSymbolTypes]={defaultValue:[1,1],mapToController:true};d[g.showSeries]={defaultValue:[0,0,0,0,0],mapToController:true};d[g.showValue]={defaultValue:[1,1,1,1,1],mapToController:true};d[g.selectedSeries]={defaultValue:0,propertyDefined:true};d[g.selectedMarksBySeries]={defaultValue:[0,0],propertyDefined:true};d[g.selectionEnabled]={defaultValue:false,propertyDefined:true};d[g.selectedSeriesName]={defaultValue:"Series 1"};d[g.insertInSourcePoint]={defaultValue:"x values",propertyDefined:true};d[g.drillDownReturnType]={defaultValue:"position",propertyDefined:true};d[g.drillDownSourceData]={defaultValue:[],propertyDefined:true};d[g.insertIn]={defaultValue:[],propertyDefined:true};var c=xcelsius.charts.Chart=function(){xcelsius.charts.Chart.superclass.constructor.apply(this,arguments);this.__className="xcelsius.charts.Chart";this._dataModel=new xcelsius.charts.DataModel();this._dataModel.data=this._defaultData();this._dataModelChanged=true;this._dataInsertion=new xcelsius.charts.ChartDataInsertion();this._updateInsertion=false;this._selectionChanged=false;this.controller=this._createController();if(this.controller){this.controller.addEventListener("selectionChanged",this._selectionChangedHandler,this)}this._controllerPropertyChanged=false;this._changedProperties={};this._initDefaultValues(d);this._styleNames=this._getStyleNames();this._seriesCount=0;this._createTooltipMargin=true;this._isInsertionTriggerredForInitialization=false;this._itselfHasBeenVisible=false;this._insertInEnabled=false;this._forceToInsert=false};xcelsius.extend(c,xcelsius.core.UIComponent);c.prototype._getStyleNames=function(){return["margin","marginLeft","marginRight","marginTop","marginBottom","markColors","markAlpha","animationEnabled","borderStyleName.customColor","titleStyleName.fontSize","titleStyleName.fontStyle","titleStyleName.fontWeight","titleStyleName.fontFamily","titleStyleName.textAlign","titleStyleName.color","subTitleStyleName.fontSize","subTitleStyleName.fontStyle","subTitleStyleName.fontWeight","subTitleStyleName.fontFamily","subTitleStyleName.textAlign","subTitleStyleName.color","legendStyleName.fontSize","legendStyleName.fontStyle","legendStyleName.fontWeight","legendStyleName.fontFamily","legendStyleName.textAlign","legendStyleName.color","tooltipLabelStyleName.fontSize","tooltipLabelStyleName.fontStyle","tooltipLabelStyleName.fontWeight","tooltipLabelStyleName.fontFamily","tooltipLabelStyleName.textAlign","tooltipLabelStyleName.color","tooltipValueStyleName.fontSize","tooltipValueStyleName.fontStyle","tooltipValueStyleName.fontWeight","tooltipValueStyleName.fontFamily","tooltipValueStyleName.textAlign","tooltipValueStyleName.color","tooltipSeriesStyleName.fontSize","tooltipSeriesStyleName.fontStyle","tooltipSeriesStyleName.fontWeight","tooltipSeriesStyleName.fontFamily","tooltipSeriesStyleName.textAlign","tooltipSeriesStyleName.color"]};c.prototype._defaultData=function(){return[[25,70,45,100]]};c.prototype._createController=function(){return null};c._createProperty=function(i,h){i.prototype[h]=function(k){var j="_"+h;if(arguments.length>=1){if(this[j]!=k){this[j]=k}return this}else{return this[j]}}};c._createControllerSetter=function(i,h){i.prototype[h]=function(k){var j="_"+h;if(arguments.length>=1){this[j]=k;this._changedProperties[h]=k;this._controllerPropertyChanged=true;this.invalidateDisplayList();return this}else{return this[j]}}};for(var e in d){var a=d[e];if(a.mapToController){c._createControllerSetter(c,e)}else{if(!a.propertyDefined){c._createProperty(c,e)}}}c.prototype._createDom=function(){var i=c.superclass._createDom.apply(this,arguments);var h=xcelsius.utils.genUID();f(i).attr("id",h);return i};c.prototype._createInstance=function(){var h=f(this._dom).attr("id");this.controller.renderTo(h);this._runtime.addEventListener(xcelsius.events.ApplicationEvent.CONNECTIONS_COMPLETE,this._connectionsCompleteHandler,this)};c.prototype._connectionsCompleteHandler=function(h){h.target().removeEventListener(h.type(),arguments.callee,this);this._insertInEnabled=true;if(this._forceToInsert){this._forceToInsert=false;this._doInsertion()}};c.prototype._visibilityChanged=function(){if(this._insertInEnabled&&this.enableValidatingProperties()){this._doInsertion()}};c.prototype._selectionChangedHandler=function(h){var k=h.data;var i=k.series;var j=k.index;j=this._dataModel.originalIndex(j);this._dataInsertion.updateSelection(i,j);this._selectionChanged=true;this.invalidateProperties()};c.prototype._initDefaultValues=function(l){for(var k in l){var i=l[k];var j=i.defaultValue;if(j!=null){var h="_"+k;this[h]=j;this._changedProperties[k]=j}}};c.prototype.id=function(h){return this.uid.apply(this,arguments)};c.prototype.seriesNames=function(h){if(arguments.length>=1){this._seriesNames=h;this._changedProperties.seriesNames=h;this._controllerPropertyChanged=true;this._seriesNamesChanged=true;this.invalidateProperties();this.invalidateDisplayList();return this}else{return this._seriesNames}};c.prototype.data=function(h){if(arguments.length>=1){if(h==null){h=[[]]}this._dataModel.data=h;this._dataModelChanged=true;this._updateInsertion=true;this.invalidateProperties();this.invalidateDisplayList();return this}else{return this._dataModel.data}};c.prototype.categoryLabels=function(h){if(arguments.length>=1){if(this._dataModel.categoryLabels!=h){this._dataModel.categoryLabels=h;this._dataModelChanged=true;this.invalidateProperties();this.invalidateDisplayList()}return this}else{return this._dataModel.categoryLabels}};c.prototype.drillDownReturnType=function(h){if(arguments.length>=1){if(this._dataInsertion.drillDownReturnType()!=h){this._dataInsertion.drillDownReturnType(h)}return this}else{return this._dataInsertion.drillDownReturnType()}};c.prototype.selectedSeries=function(h){if(arguments.length>=1){this._dataInsertion.selectedSeries(h);this._selectedSeries=h;this._updateInsertion=true;this.invalidateProperties();return this}else{return this._dataInsertion.selectedSeries()}};c.prototype.selectedMarksBySeries=function(h){if(arguments.length>=1){if(this._dataInsertion.selectedMarksBySeries()!=h){this._dataInsertion.selectedMarksBySeries(h);this._changedProperties.selectedMarksBySeries=h;this._controllerPropertyChanged=true;this.invalidateDisplayList()}return this}else{return this._dataInsertion.selectedMarksBySeries()}};c.prototype.drillDownSourceData=function(h){if(arguments.length>=1){this._dataInsertion.sourceData(h);this._updateInsertion=true;this.invalidateProperties();return this}else{return this._dataInsertion.sourceData()}};c.prototype.insertInSourcePoint=function(h){if(arguments.length>=1){if(this._dataInsertion.insertionInSourcePoint()!=h){this._dataInsertion.insertionInSourcePoint(h)}return this}else{return this._dataInsertion.insertionInSourcePoint()}};c.prototype.insertIn=function(){return this._dataInsertion.insertIn()};c.prototype.ignoreValueEndBlanks=function(h){if(arguments.length>=1){if(this._dataModel.ignoreValueEndBlanks!=h){this._dataModel.ignoreValueEndBlanks=h;this._dataModelChanged=true;this._updateInsertion=true;this.invalidateProperties();this.invalidateDisplayList()}return this}else{return this._dataModel.ignoreValueEndBlanks}};c.prototype.ignoreSeriesEndBlanks=function(h){if(arguments.length>=1){if(this._dataModel.ignoreSeriesEndBlanks!=h){this._dataModel.ignoreSeriesEndBlanks=h;this._dataModelChanged=true;this._updateInsertion=true;this.invalidateProperties();this.invalidateDisplayList()}return this}else{return this._dataModel.ignoreSeriesEndBlanks}};c.prototype.sortingEnabled=function(h){if(arguments.length>=1){if(this._dataModel.sortingEnabled!=h){this._dataModel.sortingEnabled=h;this._dataModelChanged=true;this.invalidateProperties();this.invalidateDisplayList()}return this}else{return this._dataModel.sortingEnabled}};c.prototype.sortingByOption=function(h){if(arguments.length>=1){if(this._dataModel.sortingByOption!=h){this._dataModel.sortingByOption=h;this._dataModelChanged=true;this.invalidateProperties();this.invalidateDisplayList()}return this}else{return this._dataModel.sortingByOption}};c.prototype.dataSortingOrder=function(h){if(arguments.length>=1){if(this._dataModel.dataSortingOrder!=h){this._dataModel.dataSortingOrder=h;this._dataModelChanged=true;this.invalidateProperties();this.invalidateDisplayList()}return this}else{return this._dataModel.dataSortingOrder}};c.prototype.sortingSeriesIndex=function(h){if(arguments.length>=1){if(this._dataModel.sortingSeriesIndex!=h){this._dataModel.sortingSeriesIndex=h;this._dataModelChanged=true;this.invalidateProperties();this.invalidateDisplayList()}return this}else{return this._dataModel.sortingSeriesIndex}};c.prototype.categoryLabelsSortingOrder=function(h){if(arguments.length>=1){if(this._dataModel.categoryLabelsSortingOrder!=h){this._dataModel.categoryLabelsSortingOrder=h;this._dataModelChanged=true;this.invalidateProperties();this.invalidateDisplayList()}return this}else{return this._dataModel.categoryLabelsSortingOrder}};c.prototype.sameMarginOnAllSides=function(h){if(arguments.length>=1){if(this._sameMarginOnAllSides!=h){this._sameMarginOnAllSides=h;this._controllerPropertyChanged=true;this._changedProperties.sameMarginOnAllSides=h;this.invalidateDisplayList()}return this}else{return this._sameMarginOnAllSides}};c.prototype.selectionEnabled=function(h){if(arguments.length>=1){if(this._selectionEnabled!=h){this._selectionEnabled=h;this._changedProperties.selectionEnabled=h;if(h==true&&this._changedProperties.selectedMarksBySeries==null){this._changedProperties.selectedMarksBySeries=this.selectedMarksBySeries()}this._controllerPropertyChanged=true;this.invalidateDisplayList()}return this}else{return this._selectionEnabled}};c.prototype.styleChanged=function(i){c.superclass.styleChanged.apply(this,arguments);var h=i==null;if(h){this._applyAllStyles()}else{this._controllerPropertyChanged=true;this._changedProperties[i]=this.getStyle(i);this.invalidateDisplayList()}};c.prototype._applyAllStyles=function(){for(var j=0,h=this._styleNames.length;j<h;j++){this._applyStyle(this._styleNames[j])}};c.prototype._applyStyle=function(h){var i=this.getStyle(h);if(i!=null){this._controllerPropertyChanged=true;this._changedProperties[h]=i;this.invalidateDisplayList()}};c.prototype.enableValidatingProperties=function(){return b.CHART_VALIDATING_PROPERTIES_STRATEGY.apply(this,[this])};c.prototype.isInsertionTriggerredForInitialization=function(){return this._isInsertionTriggerredForInitialization};c.prototype.itselfHasBeenVisible=function(h){if(arguments.length>=1){if(this._itselfHasBeenVisible!=h){this._itselfHasBeenVisible=h}return this}else{return this._itselfHasBeenVisible}};c.prototype._checkChartVisible=function(){if(!this._itselfHasBeenVisible&&this.ancestorsContainerVisible()&&this.dynamicVisible()){this._itselfHasBeenVisible=true}};c.prototype.ancestorsContainerVisible=function(h){if(arguments.length>0){if(h!=this._ancestorsContainerVisible){this._ancestorsContainerVisible=h}if(h===true){this._checkChartVisible()}return this}else{return this._ancestorsContainerVisible}};c.prototype.commitProperties=function(){c.superclass.commitProperties.apply(this,arguments);if(this._dataModelChanged){this._dataModel.dirty()}if(this._dataModelChanged||this._seriesNamesChanged){this._commitDataModelChange();this._controllerPropertyChanged=true;this._dataModelChanged=false;this._seriesNamesChanged=false}this._checkChartVisible();if(this._selectionEnabled){if(this._selectionChanged||this._updateInsertion){this._selectedSeriesName=this._seriesNames[this._dataInsertion.selectedSeries()];this._propertyChanged("selectedSeriesName",this.selectedSeriesName(),null);this._doInsertion();this._selectionChanged=false;this._updateInsertion=false}}};c.prototype._commitDataModelChange=function(){var h=this._dataModel.model();this._changedProperties.data=h.data;this._changedProperties.categoryLabels=h.categoryLabels;this._changedProperties.indexOrder=h.indexOrder;if(this._dataModelChanged&&this._selectionEnabled){var i=this._buildCurrentSelection(h);if(i){this._changedProperties.currentSelection=i}}this._seriesCount=h.data?h.data.length:0};c.prototype._doInsertion=function(){if(!this._insertInEnabled){this._forceToInsert=true;return}this._dataInsertion.generateInsertIn(this._dataModel.data);this._propertyChanged("insertIn",this.insertIn(),null);this._isInsertionTriggerredForInitialization=true};c.prototype._buildCurrentSelection=function(h){var l=this._dataInsertion.selectedSeries();var k=this._dataInsertion.selectedDataIndex(l);if(h.indexOrder){for(var j=0;j<h.indexOrder.length;j++){if(h.indexOrder[j]===k){return{series:l,index:j}}}}else{return{series:l,index:k}}};c.prototype.updateDisplayList=function(i,h){c.superclass.updateDisplayList.apply(this,arguments);if(this._controllerPropertyChanged){this._validateChangedProperties();this.controller.update(this._changedProperties);this._changedProperties={};this._controllerPropertyChanged=false}};c.prototype._validateChangedProperties=function(){this._updateBoolProperty(this._changedProperties,g.showTitles);this._updateBoolProperty(this._changedProperties,g.showLegend);this._updateBoolProperty(this._changedProperties,g.showMarkLabels);var h=this._buildDefaultSelection(this._changedProperties);if(h!==null){this._changedProperties.defaultSelection=h}if(this._createTooltipMargin){var i=this._getTooltipMargin();if(i!=null){this._changedProperties.tooltipMargin=i}this._createTooltipMargin=false}if(this._changedProperties.hasOwnProperty("legendYShift")){this._changedProperties.legendYShift=-xcelsius.utils.NumberUtils.parseNumber(this._changedProperties.legendYShift,0)}var j=this._getMargin(this._changedProperties);if(j&&j.length==4){this._changedProperties.margin=j}if(this._changedProperties.hasOwnProperty(g.title)||this._changedProperties.hasOwnProperty(g.subtitle)){if(xcelsius.utils.StringUtils.isEmptyLabel(this[g.title]())&&xcelsius.utils.StringUtils.isEmptyLabel(this[g.subtitle]())){this._changedProperties[g.showTitles]=false}else{this._changedProperties[g.showTitles]=this[g.showTitles]();this._updateBoolProperty(this._changedProperties,g.showTitles)}}if(this._changedProperties.hasOwnProperty(g.seriesNamesNumberFormats)){this._changedProperties["legend.numberFormats"]=this._changedProperties[g.seriesNamesNumberFormats]}delete this._changedProperties.indexOrder};c.prototype._getTooltipMargin=function(){var j=this.parent();var i=this.x();var h=this.y();while(j!=null&&j.__className!="xcelsius.containers.RootCanvas"&&j.__className!="xcelsius.containers.Canvas"){i+=j.x();h+=j.y();j=j.parent()}if(j!=null){return{left:i,right:j.width()-i,top:h,bottom:j.height()-h}}else{return null}};c.prototype._buildDefaultSelection=function(j){var h=null;if(j.hasOwnProperty("selectedMarksBySeries")){if(this._selectedSeries>=0&&j.selectedMarksBySeries.length>this._selectedSeries){var i=this._getCurrentIndex(j.selectedMarksBySeries[this._selectedSeries]);j.selectedMarksBySeries=j.selectedMarksBySeries.slice();j.selectedMarksBySeries[this._selectedSeries]=i;if(i>=0){h={series:this._selectedSeries,index:i}}}}return h};c.prototype._getCurrentIndex=function(j){var h=this._dataModel.model();if(h.indexOrder){for(var k=0;k<h.indexOrder.length;k++){if(h.indexOrder[k]===j){return k}}}return j};c.prototype._updateBoolProperty=function(i,h){if(i.hasOwnProperty(h)){i[h]=xcelsius.charts.DataModelUtils.parseBoolean(i[h])}};c.prototype._getMargin=function(l){if(!l.hasOwnProperty("sameMarginOnAllSides")&&!l.hasOwnProperty("margin")&&!l.hasOwnProperty("marginLeft")&&!l.hasOwnProperty("marginRight")&&!l.hasOwnProperty("marginTop")&&!l.hasOwnProperty("marginBottom")){return null}var j=true;if(l.hasOwnProperty("sameMarginOnAllSides")){j=xcelsius.charts.DataModelUtils.parseBoolean(l.sameMarginOnAllSides)}var h;if(j){var m=this.getStyle("margin");h=[m,m,m,m]}else{var o=this.getStyle("marginLeft");var k=this.getStyle("marginRight");var n=this.getStyle("marginTop");var i=this.getStyle("marginBottom");h=[n,k,i,o]}delete l.sameMarginOnAllSides;delete l.margin;delete l.marginLeft;delete l.marginRight;delete l.marginTop;delete l.marginBottom;return h}})(jQuery);(function(){xcelsius.declare("xcelsius.utils.ObjectUtils");xcelsius.require("xcelsius.utils");xcelsius.require("xcelsius.utils.NumberUtils");xcelsius.require("xcelsius.utils.ColorUtil");var a=xcelsius.utils.ObjectUtils;a.updateOptions=function(b,e,d){if(!b||!e||!d){return}var h={};for(var g in e){var f=e[g];if(d.hasOwnProperty(g)){a.setProperties(b,d[g],f)}else{a.setProperties(h,g,f)}}for(var c in h){if(d.hasOwnProperty(c)){a.setProperties(b,d[c],h[c])}}};a._createObjectProperty=function(c,d){if(!c){throw new Error("property required")}if(typeof(c)!="string"){throw new Error("property has to be a string")}if(c.charAt(0)=="."||c.charAt(c.length-1)=="."||c.indexOf("..")!=-1){throw new Error("illegal property: "+c)}c=c.split(".");var e=d;for(var b=0;b<c.length;b++){e[c[b]]=e[c[b]]||{};e=e[c[b]]}return e};a.setProperties=function(f,d,e){if(xcelsius.utils.isArray(d)){for(var c=0,b=d.length;c<b;c++){a._setPropertyItem(f,d[c],e)}}else{a._setPropertyItem(f,d,e)}};a._setPropertyItem=function(h,f,e){var b;if(xcelsius.utils.isString(f)){b=f}else{b=f.property;if(f.converter!=null){e=f.converter(e)}}if(e===null){return}if(xcelsius.utils.isArray(b)){var g=h;for(var d=0;d<b.length-1;d++){g[b[d]]=g[b[d]]||{};g=g[b[d]]}g[b[b.length-1]]=e}else{var c=b.lastIndexOf(".");if(c>0&&c<(b.length-1)){var j=a._createObjectProperty(b.substr(0,c),h);j[b.substr(c+1)]=e}else{h[b]=e}}};a.appendProperties=function(d,b){if(d!=null&&b!=null){for(var c in b){d[c]=b[c]}}return d}})();(function(b){xcelsius.declare("xcelsius.charts.riv.ChartController");xcelsius.require("xcelsius.utils");xcelsius.require("xcelsius.utils.ArrayUtil");xcelsius.require("xcelsius.utils.ColorUtil");xcelsius.require("xcelsius.utils.FontUtils");xcelsius.require("xcelsius.utils.ObjectUtils");xcelsius.require("xcelsius.utils.StringUtils");xcelsius.require("xcelsius.utils.XCNumericFormatUtil");xcelsius.require("xcelsius.events.Event");xcelsius.require("xcelsius.events.EventDispatcher");var a=xcelsius.charts.riv.ChartController=function(){this._chartOptions=this._defaultOptions();this._chart=null;this._chartType=""};a._convertTooltipNumberFormat=function(g){var d=null;var c=xcelsius.utils.XCNumericFormatUtil.getFormatString;if(g&&g.length>0){d=[];for(var e=0,f=g.length;e<f;e++){d.push(c(g[e][0]))}}return d};a._buildTooltipCustomization=function(c){var d=function(){this.getZone=function(){return{left:-c.left,right:c.right,top:-c.top,bottom:c.bottom}}};return d};a.prototype._propertiesMap=function(){return{data:"dataset.data",categoryLabels:"dataset.categoryLabels",seriesNames:"dataset.seriesNames",animationEnabled:"animation.enable",enableHideShowSeries:"measure.visibilityChangeable",showBackground:"background.visible","borderStyleName.customColor":{property:"background.color",converter:xcelsius.utils.ColorUtil.toCSSColor},margin:"layout.padding",showTitles:["title.main.visible","title.sub.visible"],title:{property:"title.main.text",converter:xcelsius.utils.StringUtils.toValidString},titleNumberFormat:{property:"title.main.formatString",converter:xcelsius.utils.XCNumericFormatUtil.getFormatString},titleStyleName:{property:"title.main.font",converter:xcelsius.utils.FontUtils.toCSSString},"titleStyleName.textAlign":"title.main.horizontalAlign","titleStyleName.color":{property:"title.main.color",converter:xcelsius.utils.ColorUtil.toCSSColor},subtitle:{property:"title.sub.text",converter:xcelsius.utils.StringUtils.toValidString},subtitleNumberFormat:{property:"title.sub.formatString",converter:xcelsius.utils.XCNumericFormatUtil.getFormatString},subTitleStyleName:{property:"title.sub.font",converter:xcelsius.utils.FontUtils.toCSSString},"subTitleStyleName.textAlign":"title.sub.horizontalAlign","subTitleStyleName.color":{property:"title.sub.color",converter:xcelsius.utils.ColorUtil.toCSSColor},showLegend:"legend.visible",legendPosition:"legend.position",legendXShift:"legend.horizontalOffset",legendYShift:"legend.verticalOffset",legendStyleName:{property:"legend.labelFont",converter:xcelsius.utils.FontUtils.toCSSString},"legendStyleName.color":{property:"legend.labelColor",converter:xcelsius.utils.ColorUtil.toCSSColor},"legend.numberFormats":{property:"legend.formatString",converter:xcelsius.utils.XCNumericFormatUtil.convertToFormatStringArray},showMarkLabels:"tooltip.enable",tooltipMargin:{property:"tooltip.customization",converter:a._buildTooltipCustomization},dataNumberFormats:{property:"tooltip.mainValue.formatString",converter:a._convertTooltipNumberFormat},}};a.prototype._createChart=function(f,e,d){var c=this._createRIVDataset(e);this._chart=new sap.riv.viz.Visualization(this._chartType,b("#"+f),d,c);this._addEventListener(this._chart,this)};a.prototype._addEventListener=function(d,c){c._selectDataHandler=function(f){if(f&&f.data&&f.data[0]){var h=f.data[0];var g={index:h.dimensionItemIndex,value:h.measureValue,series:h.measureIndex,category:h.dimensionLabel};var i=new xcelsius.events.Event("selectionChanged",c,g);c.dispatchEvent(i)}};d.addListener("selectData",c._selectDataHandler)};a.prototype._defaultOptions=function(){return{allSelectable:false,allDeSelectable:false,theme:"XC-classic-day",animation:{enable:true,duration:400},layout:{legendFirst:true},selectability:{deSelectable:false},tooltip:{enable:true,zIndex:999},background:{visible:true,color:"#FFFFFF"},title:{main:{visible:true,color:"#000000",},sub:{visible:true,color:"#000000",}},legend:{visible:false,position:"right",horizontalOffset:0,verticalOffset:0,labelColor:"#000000"},xAxis:[{}],yAxis:[{}]}};a.prototype._commitChartOptions=function(c){};a.prototype._commitDataset=function(g){if(g&&g.dataset){var f={};f.dimensionLabels=g.dataset.categoryLabels;f.data=g.dataset.data;if(g.dataset.seriesNames){var h=g.dataset.seriesNames.slice();var e=g.dataset.data.length;h.length=e;for(var d=0;d<h.length;d++){h[d]=xcelsius.utils.StringUtils.toValidString(h[d])}f.measureNames=h}if(f.data&&f.data.length==0){if(f.dimensionLabels){f.dimensionLabels.length=0}}if(f.dimensionLabels){for(var c=0;c<f.dimensionLabels.length;c++){if(xcelsius.utils.type(f.dimensionLabels[c])==="object"){f.dimensionLabels[c]=f.dimensionLabels[c].toString()}}}delete g.dataset;return f}return null};a.prototype._createRIVDataset=function(d){var c=new sap.riv.viz.shared.dataConverter.SimpleDMDataset();c.dimensionLabels(d.dimensionLabels);c.data(d.data);if(d.hasOwnProperty("measureNames")){c.measureNames(d.measureNames)}return c};a.prototype.renderTo=function(c){this._renderTo=c};a.prototype.update=function(f){var d=this._chartOptions;var c=this._propertiesMap();var e=this._getCurrentSelection(f);xcelsius.utils.ObjectUtils.updateOptions(d,f,c);this._commitChartOptions(d);var g=this._commitDataset(d);if(this._chart){if(g){this._setDataset(g,d,e)}else{this._chart.updateProperties(d)}}else{this._createChart(this._renderTo,g,d)}this._chartOptions={}};a.prototype._getCurrentSelection=function(c){if(c.hasOwnProperty("currentSelection")){return[{measureIndex:c.currentSelection.series,dimensionItemIndex:c.currentSelection.index}]}else{return null}};a.prototype._setDataset=function(f,d,e){var c=this._createRIVDataset(f);this._chart.updateProperties(d);this._chart.setDataset(c);if(e){this._chart.removeListener("selectData",this._selectDataHandler);this._chart.selectData(e,true);this._addEventListener(this._chart,this)}};xcelsius.extend(a,xcelsius.events.EventDispatcher)})(jQuery);(function(){xcelsius.declare("xcelsius.charts.riv.PieChartController");xcelsius.require("xcelsius.events.Event");xcelsius.require("xcelsius.charts.riv.ChartController");xcelsius.require("xcelsius.utils.ColorUtil");xcelsius.require("xcelsius.utils.XCNumericFormatUtil");var a=xcelsius.charts.riv.PieChartController=function(){a.superclass.constructor.apply(this,arguments);this._chartType="riv/pie";this._pendingSelectionIndex=0};xcelsius.extend(a,xcelsius.charts.riv.ChartController);a.prototype._propertiesMap=function(){if(!a.__propertiesMap){a.__propertiesMap=a.superclass._propertiesMap.apply(this,arguments);a.__propertiesMap.selectionEnabled="allSelectable";a.__propertiesMap.selectedMarksBySeries={property:"selectedDataIndexes",converter:function(b){if(b&&b.length>1){b.length=1}return b}};a.__propertiesMap.markColors="mark.markColors";a.__propertiesMap.markAlpha="mark.markAlpha";a.__propertiesMap.tooltipLabelStyleName={property:"tooltip.text.font",converter:xcelsius.utils.FontUtils.toCSSString};a.__propertiesMap["tooltipLabelStyleName.color"]={property:"tooltip.text.color",converter:xcelsius.utils.ColorUtil.toCSSColor};a.__propertiesMap.categoryLabelsNumberFormats={property:"tooltip.text.formatString",converter:xcelsius.utils.XCNumericFormatUtil.convertToFormatStringArray},a.__propertiesMap.tooltipValueStyleName={property:"tooltip.mainValue.font",converter:xcelsius.utils.FontUtils.toCSSString};a.__propertiesMap["tooltipValueStyleName.color"]={property:"tooltip.mainValue.color",converter:xcelsius.utils.ColorUtil.toCSSColor};a.__propertiesMap.tooltipSeriesStyleName={property:"tooltip.subValue.font",converter:xcelsius.utils.FontUtils.toCSSString};a.__propertiesMap["tooltipSeriesStyleName.color"]={property:"tooltip.subValue.color",converter:xcelsius.utils.ColorUtil.toCSSColor}}return a.__propertiesMap};a.prototype._defaultOptions=function(){var b=a.superclass._defaultOptions.apply(this,arguments);b.selectionMode="single";b.legend.show=true;b.tooltip=b.tooltip?b.tooltip:{};b.tooltip.subValue=b.tooltip.subValue?b.tooltip.subValue:{};var c="0"+sap.common.globalization.NumericFormatManager.getDecimalSeparator()+"0#%";b.tooltip.subValue.formatString=[c];return b};a.prototype._createRIVDataset=function(c){var b=a.superclass._createRIVDataset.apply(this,arguments);b.measureNames([""]);return b};a.prototype._commitChartOptions=function(f){a.superclass._commitChartOptions.apply(this,arguments);if(f){if(f.mark&&f.mark.markColors){var c=[];for(var e=0,b=f.mark.markColors.length;e<b;e++){var d=xcelsius.utils.ColorUtil.toRGBAString(f.mark.markColors[e],f.mark.markAlpha);c.push(d)}if(!f.measures){f.measures=[{sectorColors:c}]}else{f.measures[0].sectorColors=c}}delete f.mark}};a.prototype._addEventListener=function(c,b){b._selectDataHandler=function(d){if(d&&d.data&&d.data[0]){var g=d.data[0];var f={index:g.dimensionItemIndex,value:g.measureValue,series:g.measureIndex,category:g.dimensionLabel};b._pendingSelectionIndex=0;var h=new xcelsius.events.Event("selectionChanged",b,f);b.dispatchEvent(h)}};c.addListener("selectData",b._selectDataHandler)};a.prototype._setDataset=function(f,c,d){var b=this._createRIVDataset(f);this._chart.updateProperties(c);this._chart.setDataset(b);if(d){var e=this;this._pendingSelectionIndex++;var g=this._pendingSelectionIndex;this._currentSelection=d;setTimeout(function(){if(g==e._pendingSelectionIndex&&e._currentSelection!=null){e._pendingSelectionIndex=0;e._chart.selectData(e._currentSelection,true)}},500)}}})();(function(){xcelsius.declare("xcelsius.charts.riv.CartesianChartController");xcelsius.require("xcelsius.charts.riv.ChartController");xcelsius.require("xcelsius.utils.ColorUtil");xcelsius.require("xcelsius.utils.FontUtils");xcelsius.require("xcelsius.utils.StringUtils");xcelsius.require("xcelsius.utils.ObjectUtils");xcelsius.require("xcelsius.utils");xcelsius.require("xcelsius.utils.XCNumericFormatUtil");var a=xcelsius.charts.riv.CartesianChartController=function(){a.superclass.constructor.apply(this,arguments)};xcelsius.extend(a,xcelsius.charts.riv.ChartController);a._selectModeConverter=function(b){return b?"single":"none"};a._defaultSelectionConverter=function(b){if(b){return[{measureIndex:b.series,dimensionItemIndex:b.index}]}else{return null}};a._tooltipLabelFontConverter=function(b){return[xcelsius.utils.FontUtils.toCSSString(b)]};a._convertTooltipTitleNumberFormat=function(b){if(xcelsius.utils.isString(b)){return xcelsius.utils.XCNumericFormatUtil.getFormatString(b)}else{if(xcelsius.utils.isArray(b)&&b.length>0){return xcelsius.utils.XCNumericFormatUtil.getFormatString(b[0])}else{return""}}};a._tooltipLabelColorConverter=function(b){return[xcelsius.utils.ColorUtil.toCSSColor(b)]};a._tooltipSeparateLineColorConverter=function(c){var b=[];if(c){for(var d=0,e=c.length;d<e;d++){b.push(xcelsius.utils.ColorUtil.toCSSColor(c[d]))}}return b};a._axisValidator=function(c){if(c&&c.length>0){var d;var e=xcelsius.utils.FontUtils.toCSSString;for(var b=0;b<c.length;b++){d=c[b];if(d==null){continue}if(d.hasOwnProperty("show")&&d.show===false){d.showMajorTicks=false;d.showMinorTicks=false}if(d.titleFont){d.titleFont=e(d.titleFont)}if(d.label!=null&&d.label.font!=null){d.label.font=e(d.label.font)}}}return c};a.prototype._propertiesMap=function(){return xcelsius.utils.ObjectUtils.appendProperties(a.superclass._propertiesMap.apply(this,arguments),{selectionEnabled:{property:"selectability.mode",converter:a._selectModeConverter},defaultSelection:{property:"selectability.defaultSelectedItems",converter:a._defaultSelectionConverter},xAxis:{property:"xAxis",converter:a._axisValidator},yAxis:{property:"yAxis",converter:a._axisValidator},series:"measures","tooltipLabelStyleName.color":{property:"tooltip.mainValue.color",converter:xcelsius.utils.ColorUtil.toCSSColor},"tooltipValueStyleName.color":{property:"tooltip.title.color",converter:xcelsius.utils.ColorUtil.toCSSColor},categoryLabelsNumberFormats:{property:"tooltip.title.formatString",converter:a._convertTooltipTitleNumberFormat},"tooltipSeriesStyleName.color":{property:"tooltip.label.color",converter:a._tooltipLabelColorConverter},seriesNamesNumberFormats:{property:"tooltip.label.formatString",converter:xcelsius.utils.XCNumericFormatUtil.convertToFormatStringArray},"tooltipStyleName.borderThickness":"tooltip.border.size","tooltipStyleName.backgroundColor":{property:"tooltip.backgroundColor",converter:xcelsius.utils.ColorUtil.toCSSColor},"tooltipStyleName.borderColor":{property:"tooltip.border.color",converter:xcelsius.utils.ColorUtil.toCSSColor},"tooltipStyleName.guideLineColor":{property:"tooltip.guideLineColor",converter:xcelsius.utils.ColorUtil.toCSSColor},"tooltipStyleName.separateLineColor":{property:"tooltip.separateLineColor",converter:a._tooltipSeparateLineColorConverter}})};a.prototype._dimensionAxisName=function(){return"x"};a.prototype._commitChartOptions=function(d){a.superclass._commitChartOptions.apply(this,arguments);if(this._showAxisTitles==null){this._showAxisTitles=[]}var f=["xAxis","yAxis"];for(var b=0,c=f.length;b<c;b++){var e=f[b];if(this._showAxisTitles[b]==null){this._showAxisTitles[b]=[]}if(d.hasOwnProperty(e)&&d[e]!=null){this._commitAxis(d[e],this._showAxisTitles[b])}}};a.prototype._commitAxis=function(b,c){for(var d=0,f=b.length;d<f;d++){var e=b[d];if(e==null){continue}if(e.hasOwnProperty("showTitle")){c[d]=e.showTitle}if(e.hasOwnProperty("title")){var g=e.title;if(g==null||(xcelsius.utils.isString(g)&&g.length<=0)){e.showTitle=false}else{if(c.length>d){e.showTitle=c[d]}}}}}})();(function(){xcelsius.declare("xcelsius.charts.riv.CartesianChart1DController");xcelsius.require("xcelsius.charts.riv.CartesianChartController");xcelsius.require("xcelsius.utils.ObjectUtils");var a=xcelsius.charts.riv.CartesianChart1DController=function(){a.superclass.constructor.apply(this,arguments)};xcelsius.extend(a,xcelsius.charts.riv.CartesianChartController);a._toValidIndex=function(b){if(isNaN(b)){return -1}else{return b}};a.prototype._propertiesMap=function(){return xcelsius.utils.ObjectUtils.appendProperties(a.superclass._propertiesMap.apply(this,arguments),{beginRangeIndex:{property:"visibleRange.start",converter:a._toValidIndex},endRangeIndex:{property:"visibleRange.end",converter:a._toValidIndex}})};a.prototype._commitChartOptions=function(c){a.superclass._commitChartOptions.apply(this,arguments);if(c.layout&&c.layout.padding&&c.layout.padding.length==4){var b=c.layout.padding;if(c.xAxis){if(c.xAxis[0]){c.xAxis[0].titleMargin={top:0.25*b[2],right:0,bottom:8,left:0}}if(c.xAxis[1]){c.xAxis[1].titleMargin={top:8,right:0,bottom:0.25*b[0],left:0}}}if(c.yAxis){if(c.yAxis[0]){c.yAxis[0].titleMargin={top:8,right:0,bottom:0.25*b[3],left:0}}if(c.yAxis[1]){c.yAxis[1].titleMargin={top:0.25*b[1],right:0,bottom:8,left:0}}}}}})();(function(){xcelsius.declare("xcelsius.charts.riv.BarChartController");xcelsius.require("xcelsius.charts.riv.CartesianChart1DController");xcelsius.require("xcelsius.utils.ObjectUtils");var a=xcelsius.charts.riv.BarChartController=function(){a.superclass.constructor.apply(this,arguments);this._chartType="riv/bar"};xcelsius.extend(a,xcelsius.charts.riv.CartesianChart1DController);a.prototype._propertiesMap=function(){if(!a.__propertiesMap){a.__propertiesMap=xcelsius.utils.ObjectUtils.appendProperties(a.superclass._propertiesMap.apply(this,arguments),{markSize:"bar.barMarkerSize"})}return a.__propertiesMap};a.prototype._dimensionAxisName=function(){return"y"}})();(function(){xcelsius.declare("xcelsius.charts.riv.customization.RIVConst");xcelsius.charts.riv.customization.RIVConst={version:"3.4.0"}})();(function(){xcelsius.declare("xcelsius.charts.riv.customization.Descriptor");xcelsius.require("xcelsius.charts.riv.customization.RIVConst");var b=xcelsius.charts.riv.customization.RIVConst.version;var c=[{qname:"sap.riv.viz.shared.descriptor.Descriptor",version:b}];var a=function(e){var f=function(){return{name:"titleMargin",supportedValueType:"Object",defaultValue:undefined,description:"Set title Margin for axis.",supportedValues:[{name:"top",supportedValueType:"Number",defaultValue:undefined,description:"Set title Margin for top."},{name:"right",supportedValueType:"Number",defaultValue:undefined,description:"Set title Margin for right."},{name:"bottom",supportedValueType:"Number",defaultValue:undefined,description:"Set title Margin for bottom."},{name:"left",supportedValueType:"Number",defaultValue:undefined,description:"Set title Margin for left."}]}};var h=e.getCommonChartProperties;e.getCommonChartProperties=function(){var k=h.apply(e);var i=k.xAxis.supportedValues[0];i.supportedValues.push(f());var j=k.yAxis.supportedValues[0];j.supportedValues.push(f());return k};var d=e.getStackedBarDescriptor;e.getStackedBarDescriptor=function(){var j=d.apply(e);var i=j.bar.supportedValues;i.push({name:"markGap",supportedValueType:"PositiveInt",defaultValue:undefined,description:"Set bar marker gap of bar."});return j};var g=e.getStackedColumnDescriptor;e.getStackedColumnDescriptor=function(){var j=g.apply(e);var i=j.bar.supportedValues;i.push({name:"markGap",supportedValueType:"PositiveInt",defaultValue:undefined,description:"Set bar marker gap of bar."});return j}};if(sap&&sap.riv&&sap.riv.require){sap.riv.require(c,a)}})();(function(){xcelsius.declare("xcelsius.charts.riv.customization.StackedBarRenderer");xcelsius.require("xcelsius.charts.riv.customization.RIVConst");xcelsius.require("xcelsius.charts.riv.customization.Descriptor");var b=xcelsius.charts.riv.customization.RIVConst.version;var c=[{qname:"sap.riv.core.utils.ObjectUtils",version:b},{qname:"sap.riv.core.utils.TypeUtils",version:b},{qname:"sap.riv.viz.shared.series.StackedBarRenderer",version:b},{qname:"sap.riv.core.utils.TextRuler",version:b},{qname:"sap.riv.graphics.shape.TextLine",version:b}];var a=function d(j,e,h,f,g){var i=h;xcelsius.charts.riv.customization.StackedBarRenderer=j.derive(h,{constructor:function(l,k){this._options=k},calculateBarSize:function(r){var p=this.getSeriesGroups();if(p.length==0){return}var o=p[0].getSeriesList();if(o.length==0){return}var m=o[0].getYAxis();var l=o[0].getData().length;var q=m.getDistance();q-=(q/(l+1));var n;var s=this._options.bar.markGap;if(!isNaN(s)){var k=q-((l+1)*s);n=k/l}else{n=Math.min(r,(q/(l+1)))}if(e.isDefined(r)&&(n>r)){n=r}n=Math.max(4,n);return n},calculateSeriesPoints:function(y){var w=this.getVisibleSeriesList();if(w.length===0){return}var k=w[0].getYAxis();var v=k.getMajorTicks();var r=[],m=[],E;for(var z=0,t=w.length;z<t;z++){var s=w[z];var p=s.getXAxis();var C=p.getMaxValue();var u=p.getMinValue();var n=0;var q=p.u2p(0);if(C<0){q=p.u2p(C)}var o=this._fillToZero?q:n;var l=s.getSeriesItems();for(var A=0,B=l.length;A<B;A++){var x={};var D=l[A].getData()[0];x.y1=v[A]-y/2;x.y2=x.y1+y;if(e.isNaN(D.value)){E=0}else{E=D.value}if(z===0){x.x1=o;r[A]=0;m[A]=0;if(E>0){r[A]+=E;x.x2=p.u2p(Math.max(u,Math.min(E,C)))}else{m[A]+=E;x.x2=p.u2p(Math.max(u,Math.max(E,u)));if(x.x2>o){x.x2=o}}}else{if(E>=0){x.x1=p.u2p(Math.max(u,Math.min(r[A],C)));r[A]+=E;x.x2=p.u2p(Math.max(u,Math.min(r[A],C)))}else{x.x1=p.u2p(Math.min(C,Math.max(m[A],u)));m[A]+=E;x.x2=p.u2p(Math.min(C,Math.max(m[A],u)));if(x.x2>o){x.x2=o}if(x.x1>o){x.x1=o}}}l[A].setPosition(x)}}}})};if(sap&&sap.riv&&sap.riv.require){sap.riv.require(c,a)}})();(function(){xcelsius.declare("xcelsius.charts.riv.StackedBarChartController");xcelsius.require("xcelsius.charts.riv.CartesianChart1DController");xcelsius.require("xcelsius.charts.riv.customization.StackedBarRenderer");xcelsius.require("xcelsius.utils.ObjectUtils");var a=xcelsius.charts.riv.StackedBarChartController=function(){a.superclass.constructor.apply(this,arguments)};xcelsius.extend(a,xcelsius.charts.riv.CartesianChart1DController);a.prototype._propertiesMap=function(){if(!a.__propertiesMap){a.__propertiesMap=xcelsius.utils.ObjectUtils.appendProperties(a.superclass._propertiesMap.apply(this,arguments),{markSize:"bar.barMarkerSize",markGap:"bar.markGap"})}return a.__propertiesMap};a.prototype._defaultOptions=function(){var b=a.superclass._defaultOptions.apply(this,arguments);if(xcelsius.charts.riv.customization!=null){b.bar=b.bar?b.bar:{};b.bar.renderer=xcelsius.charts.riv.customization.StackedBarRenderer}return b};a.prototype._createChart=function(e,d,c){var b=this._createRIVDataset(d);this._chart=new sap.riv.viz.StackedBarChart($("#"+e),c,b);this._addEventListener(this._chart,this)};a.prototype._dimensionAxisName=function(){return"y"};a.prototype._commitChartOptions=function(b){a.superclass._commitChartOptions.apply(this,arguments);if(b&&b.bar&&b.bar.hasOwnProperty("markGap")){delete b.bar.barMarkerSize}}})();(function(){xcelsius.declare("xcelsius.charts.riv.customization.StackedColumnRenderer");xcelsius.require("xcelsius.charts.riv.customization.RIVConst");xcelsius.require("xcelsius.charts.riv.customization.Descriptor");var b=xcelsius.charts.riv.customization.RIVConst.version;var c=[{qname:"sap.riv.core.utils.ObjectUtils",version:b},{qname:"sap.riv.core.utils.TypeUtils",version:b},{qname:"sap.riv.viz.shared.series.StackedColumnRenderer",version:b}];var a=function d(g,e,f){xcelsius.charts.riv.customization.StackedColumnRenderer=g.derive(f,{constructor:function(i,h){this._options=h},calculateBarSize:function(o){var m=this.getSeriesGroups();if(m.length==0){return}var l=m[0].getSeriesList();if(l.length==0){return}var j=l[0].getXAxis();var i=l[0].getData().length;var n=j.getDistance();n-=(n/(i+1));var k;var p=this._options.bar.markGap;if(!isNaN(p)){var h=n-((i+1)*p);k=h/i}else{k=Math.min(o,(n/(i+1)))}if(e.isDefined(o)&&(k>o)){k=o}k=Math.max(4,k);return k},calculateSeriesPoints:function(v){var t=this.getVisibleSeriesList();if(t.length===0){return}var n=t[0].getXAxis();var s=n.getMajorTicks();var o=[],l=[],B;for(var w=0,q=t.length;w<q;w++){var p=t[w];var h=p.getYAxis();var z=h.getMaxValue();var r=h.getMinValue();var m=h.u2p(0);if(z<0){m=h.u2p(z)}else{if(r>0){m=h.u2p(r)}}var k=p.getSeriesItems();for(var x=0,y=k.length;x<y;x++){var u={};var A=k[x].getData()[0];u.x1=s[x]-v/2;u.x2=u.x1+v;if(e.isNaN(A.value)){B=0}else{B=A.value}if(w===0){u.y1=m;o[x]=0;l[x]=0;if(B>0){o[x]+=B;u.y2=h.u2p(Math.max(r,Math.min(B,z)));if(r>0&&u.y2>m){u.y2=m}}else{l[x]+=B;u.y2=h.u2p(Math.min(z,Math.max(B,r)));if(z<0&&u.y2<m){u.y2=m}}}else{if(B>=0){u.y1=h.u2p(Math.max(r,Math.min(o[x],z)));o[x]+=B;u.y2=h.u2p(Math.max(r,Math.min(o[x],z)));if(r>0&&u.y1>m){u.y1=m}if(r>0&&u.y2>m){u.y2=m}}else{u.y1=h.u2p(Math.min(z,Math.max(l[x],r)));l[x]+=B;u.y2=h.u2p(Math.min(z,Math.max(l[x],r)));if(z<0&&u.y1<m){u.y1=m}if(z<0&&u.y2<m){u.y2=m}}}k[x].setPosition(u)}}}})};if(sap&&sap.riv&&sap.riv.require){sap.riv.require(c,a)}})();(function(){xcelsius.declare("xcelsius.charts.riv.StackedColumnChartController");xcelsius.require("xcelsius.charts.riv.CartesianChart1DController");xcelsius.require("xcelsius.charts.riv.customization.StackedColumnRenderer");xcelsius.require("xcelsius.utils.ObjectUtils");var a=xcelsius.charts.riv.StackedColumnChartController=function(){a.superclass.constructor.apply(this,arguments)};xcelsius.extend(a,xcelsius.charts.riv.CartesianChart1DController);a.prototype._propertiesMap=function(){if(!a.__propertiesMap){a.__propertiesMap=xcelsius.utils.ObjectUtils.appendProperties(a.superclass._propertiesMap.apply(this,arguments),{markSize:"bar.barMarkerSize",markGap:"bar.markGap"})}return a.__propertiesMap};a.prototype._createChart=function(e,d,c){var b=this._createRIVDataset(d);this._chart=new sap.riv.viz.StackedColumnChart($("#"+e),c,b);this._addEventListener(this._chart,this)};a.prototype._defaultOptions=function(){var b=a.superclass._defaultOptions.apply(this,arguments);if(xcelsius.charts.riv.customization!=null){b.bar=b.bar?b.bar:{};b.bar.renderer=xcelsius.charts.riv.customization.StackedColumnRenderer}return b};a.prototype._dimensionAxisName=function(){return"x"};a.prototype._commitChartOptions=function(b){a.superclass._commitChartOptions.apply(this,arguments);if(b&&b.bar&&b.bar.hasOwnProperty("markGap")){delete b.bar.barMarkerSize}}})();(function(){xcelsius.declare("xcelsius.charts.riv.ComboChartController");xcelsius.require("xcelsius.charts.riv.CartesianChart1DController");xcelsius.require("xcelsius.utils.ObjectUtils");var a=xcelsius.charts.riv.ComboChartController=function(){a.superclass.constructor.apply(this,arguments);this._chartType="riv/combination"};xcelsius.extend(a,xcelsius.charts.riv.CartesianChart1DController);a.prototype._propertiesMap=function(){if(!a.__propertiesMap){a.__propertiesMap=xcelsius.utils.ObjectUtils.appendProperties(a.superclass._propertiesMap.apply(this,arguments),{columnMarkSize:"bar.barMarkerSize",lineMarkSize:"line.marker.size",showMarks:"line.marker.visible"})}return a.__propertiesMap};a.prototype._defaultOptions=function(){var b=a.superclass._defaultOptions.apply(this,arguments);b.line=b.line?b.line:{};b.line.isShowMarkerShadow=true;return b}})();(function(){xcelsius.declare("xcelsius.charts.riv.ColumnChartController");xcelsius.require("xcelsius.charts.riv.CartesianChart1DController");xcelsius.require("xcelsius.utils.ObjectUtils");var a=xcelsius.charts.riv.ColumnChartController=function(){a.superclass.constructor.apply(this,arguments);this._chartType="riv/column"};xcelsius.extend(a,xcelsius.charts.riv.CartesianChart1DController);a.prototype._propertiesMap=function(){if(!a.__propertiesMap){a.__propertiesMap=xcelsius.utils.ObjectUtils.appendProperties(a.superclass._propertiesMap.apply(this,arguments),{columnMarkSize:"bar.barMarkerSize"})}return a.__propertiesMap};a.prototype._defaultOptions=function(){var b=a.superclass._defaultOptions.apply(this,arguments);return b}})();(function(){xcelsius.declare("xcelsius.charts.riv.LineChartController");xcelsius.require("xcelsius.charts.riv.CartesianChart1DController");xcelsius.require("xcelsius.utils.ObjectUtils");var a=xcelsius.charts.riv.LineChartController=function(){a.superclass.constructor.apply(this,arguments);this._chartType="riv/line"};xcelsius.extend(a,xcelsius.charts.riv.CartesianChart1DController);a.prototype._propertiesMap=function(){if(!a.__propertiesMap){a.__propertiesMap=xcelsius.utils.ObjectUtils.appendProperties(a.superclass._propertiesMap.apply(this,arguments),{lineMarkSize:"line.marker.size",showMarks:"line.marker.visible"})}return a.__propertiesMap};a.prototype._defaultOptions=function(){var b=a.superclass._defaultOptions.apply(this,arguments);b.line=b.line?b.line:{};b.line.isShowMarkerShadow=true;return b}})();(function(){xcelsius.declare("xcelsius.charts.ControllerFactory");xcelsius.require("xcelsius.charts.riv.PieChartController");xcelsius.require("xcelsius.charts.riv.BarChartController");xcelsius.require("xcelsius.charts.riv.StackedBarChartController");xcelsius.require("xcelsius.charts.riv.StackedColumnChartController");xcelsius.require("xcelsius.charts.riv.ComboChartController");xcelsius.require("xcelsius.charts.riv.ColumnChartController");xcelsius.require("xcelsius.charts.riv.LineChartController");var a=xcelsius.charts.ControllerFactory;var b={};a.registerController=function(c,d){b[c]=d};a.createChartController=function(c){return new b[c]()};a.createBarChartController=function(){return new xcelsius.charts.riv.BarChartController()};a.createStackedBarChartController=function(){return new xcelsius.charts.riv.StackedBarChartController()};a.createColumnChartController=function(){var c=new xcelsius.charts.riv.ColumnChartController();return c};a.createStackedColumnChartController=function(){return new xcelsius.charts.riv.StackedColumnChartController()};a.createComboChartController=function(){return new xcelsius.charts.riv.ComboChartController()};a.createLineChartController=function(){var c=new xcelsius.charts.riv.LineChartController();return c};a.createPieChartController=function(){return new xcelsius.charts.riv.PieChartController()}})();(function(){xcelsius.declare("xcelsius.charts.cartesian.CartesianChart");xcelsius.require("xcelsius.utils");xcelsius.require("xcelsius.utils.ArrayUtil");xcelsius.require("xcelsius.utils.ColorUtil");xcelsius.require("xcelsius.utils.FontUtils");xcelsius.require("xcelsius.utils.ObjectUtils");xcelsius.require("xcelsius.utils.StringUtils");xcelsius.require("xcelsius.utils.XCNumericFormatUtil");xcelsius.require("xcelsius.charts.Chart");xcelsius.require("xcelsius.charts.ControllerFactory");xcelsius.require("xcelsius.charts.constant.ChartProperty");xcelsius.require("xcelsius.charts.DataModelUtils");var b=xcelsius.charts.constant.ChartProperty;var c=xcelsius.charts.DataModelUtils.parseBoolean;var a=xcelsius.utils.ColorUtil.toCSSColor;var e=xcelsius.utils.FontUtils.toCSSString;var g={};g[b.xAxisTitleNumberFormat]={defaultValue:"",mapToController:true};g[b.yAxisTitle]={defaultValue:"",mapToController:true};g[b.yAxisTitleNumberFormat]={defaultValue:"",mapToController:true};g[b.xAxisTitle]={defaultValue:"",mapToController:true};g[b.showXAxisTitle]={defaultValue:true,mapToController:true};g[b.showYAxisTitle]={defaultValue:true,mapToController:true};g[b.yMax]={defaultValue:500,mapToController:true};g[b.yMin]={defaultValue:0,mapToController:true};g[b.xMax]={defaultValue:500,mapToController:true};g[b.xMin]={defaultValue:0,mapToController:true};g[b.yShowMajorLines]={defaultValue:true,mapToController:true};g[b.yShowMinorLines]={defaultValue:true,mapToController:true};g[b.yShowMinorTicks]={defaultValue:false,mapToController:true};g[b.yShowMajorTicks]={defaultValue:false,mapToController:true};g[b.yShowAxis]={defaultValue:true,mapToController:true};g[b.yLabelNumberFormat]={defaultValue:null,mapToController:true};g[b.yMinorLines]={defaultValue:2,mapToController:true};g[b.yShowLabels]={defaultValue:true,mapToController:true};g[b.yMajorLines]={defaultValue:3,mapToController:true};g[b.yMajorUnit]={defaultValue:125,mapToController:true};g[b.yMinorSpacing]={defaultValue:"fixedNum",mapToController:true};g[b.yMajorSpacing]={defaultValue:"interval"};g[b.xShowMajorLines]={defaultValue:false,mapToController:true};g[b.xShowMinorLines]={defaultValue:false,mapToController:true};g[b.xShowMajorTicks]={defaultValue:false,mapToController:true};g[b.xShowAxis]={defaultValue:true,mapToController:true};g[b.xShowMinorTicks]={defaultValue:false,mapToController:true};g[b.xLabelNumberFormat]={defaultValue:null,mapToController:true};g[b.xShowLabels]={defaultValue:true,mapToController:true};g[b.xMinorLines]={defaultValue:2,mapToController:true};g[b.xMajorSpacing]={defaultValue:"custom"};g[b.xMinorSpacing]={defaultValue:"fixedNum",mapToController:true};g[b.xMajorLines]={defaultValue:3,mapToController:true};g[b.focus]={defaultValue:"full"};g[b.xMajorUnit]={defaultValue:125,mapToController:true};var i=xcelsius.charts.cartesian.CartesianChart=function(){i.superclass.constructor.apply(this,arguments);this.__className="xcelsius.charts.cartesian.CartesianChart";this._initDefaultValues(g)};xcelsius.extend(i,xcelsius.charts.Chart);var d=xcelsius.charts.Chart;for(var f in g){var h=g[f];if(h.mapToController){d._createControllerSetter(i,f)}else{if(!h.propertyDefined){d._createProperty(i,f)}}}i.prototype._getStyleNames=function(){var j=i.superclass._getStyleNames.apply(this,arguments);j.push("xMajorColor","xMinorColor","xMajorWeight","xMinorWeight","xAxisColor","xAxisWeight","yMajorColor","yMinorColor","yMajorWeight","yMinorWeight","yAxisColor","yAxisWeight","xAxisTitleStyleName.fontSize","xAxisTitleStyleName.fontStyle","xAxisTitleStyleName.fontWeight","xAxisTitleStyleName.fontFamily","xAxisTitleStyleName.color","yAxisTitleStyleName.fontSize","yAxisTitleStyleName.fontStyle","yAxisTitleStyleName.fontWeight","yAxisTitleStyleName.fontFamily","yAxisTitleStyleName.color","xAxisLabelsStyleName.fontSize","xAxisLabelsStyleName.fontStyle","xAxisLabelsStyleName.fontWeight","xAxisLabelsStyleName.fontFamily","xAxisLabelsStyleName.color","yAxisLabelsStyleName.fontSize","yAxisLabelsStyleName.fontStyle","yAxisLabelsStyleName.fontWeight","yAxisLabelsStyleName.fontFamily","yAxisLabelsStyleName.color","tooltipStyleName.backgroundColor","tooltipStyleName.borderColor","tooltipStyleName.borderThickness","tooltipStyleName.guideLineColor","tooltipStyleName.separateLineColor");return j};i.prototype._checkAndCircleExtendStyles=function(l,k){if(this._changedProperties.hasOwnProperty("data")||this._changedProperties.hasOwnProperty(l)){var j=this.getStyle(l);if(!j){j=k}j=xcelsius.utils.ArrayUtil.circleExtend(j,this._seriesCount);this._changedProperties[l]=j}};i.prototype._validateSeriesRelatedProperties=function(){this._checkAndCircleExtendStyles("markColors",["#344B6D","#FF6657","#7B6F62","#7593BD","#FD9935"])};i.prototype._validateChangedProperties=function(){i.superclass._validateChangedProperties.apply(this,arguments);if(this._changedProperties.hasOwnProperty("data")&&this._seriesNames){this._changedProperties.seriesNames=this._seriesNames.slice()}this._validateSeriesRelatedProperties();if(this._seriesPropertiesChanged(this._changedProperties)){var k=this._buildSeries(this._changedProperties);if(k!=null&&k.length>0){this._changedProperties.series=k}}var l=this._buildAxis("x",this._changedProperties);var j=this._buildAxis("y",this._changedProperties);if(l!=null){this._changedProperties.xAxis=[l]}if(j!=null){this._changedProperties.yAxis=[j]}};i.prototype._seriesPropertiesChanged=function(k){var l=this._seriesProperties();for(var j=0;j<l.length;j++){if(k.hasOwnProperty(l[j])){return true}}return false};i.prototype._seriesProperties=function(){return["markColors"]};i.prototype._buildSeries=function(l){var j=[];var m=l.markColors;if(m==null){return j}for(var k=0;k<m.length;k++){var n=this._getMarkAlpha(k);j[k]={fillColor:xcelsius.utils.ColorUtil.toRGBAString(m[k],n)}}delete l.markColors;return j};i.prototype._getMarkAlpha=function(j){return this.getStyle("markAlpha")};i.prototype._categoryAxis=function(){return"x"};i.prototype._buildAxis=function(j,m,k){var l={};var s=k?"2":"";var q={AxisTitle:{property:"title",converter:xcelsius.utils.StringUtils.toValidString},ShowAxis:"visible",ShowLabels:"label.visible",ShowMajorTicks:"showMajorTicks",ShowMinorTicks:"showMinorTicks",AxisTitleNumberFormat:{property:"titleFormatString",converter:xcelsius.utils.XCNumericFormatUtil.getFormatString},LabelNumberFormat:{property:"label.formatString",converter:i._convertAxisLabesFormatString},ShowMajorLines:"gridLine.showMajor",ShowMinorLines:"gridLine.showMinor",AxisColor:{property:"lineColor",converter:xcelsius.utils.ColorUtil.toCSSColor},AxisWeight:"lineThickness",MajorColor:{property:"gridLine.majorColor",converter:xcelsius.utils.ColorUtil.toCSSColor},MinorColor:{property:"gridLine.minorColor",converter:xcelsius.utils.ColorUtil.toCSSColor},MajorWeight:{property:"gridLine.majorThickness",converter:i._convertThickness},MinorWeight:{property:"gridLine.minorThickness",converter:i._convertThickness}};if(this._categoryAxis()!=j&&this["_focus"+s]=="manual"){l.manualScale={enable:true};q.Max={property:"manualScale.max",converter:i._convertManualScale};q.Min={property:"manualScale.min",converter:i._convertManualScale};if(this["_"+j+"MajorSpacing"+s]=="fixedNum"){q.MajorLines={property:"manualScale.division",converter:i._convertMajorLines}}else{q.MajorUnit={property:"manualScale.space",converter:i._convertMajorUnit}}if(this["_"+j+"MinorSpacing"+s]=="fixedNum"){q.MinorLines={property:"manualScale.minorDivision",converter:i._convertMinorDivision}}}var p={};var o;var r;for(r in q){o=j+r+s;p[o]=q[r]}if(j==="x"){q={showXAxisTitle:{property:"showTitle",converter:xcelsius.charts.DataModelUtils.parseBoolean}}}else{q={showYAxisTitle:{property:"showTitle",converter:xcelsius.charts.DataModelUtils.parseBoolean}}}for(r in q){o=r+s;p[o]=q[r]}if(k){q={"AxisTitleStyleName2.fontSize":"titleFont.fontSize","AxisTitleStyleName2.fontStyle":"titleFont.fontStyle","AxisTitleStyleName2.fontWeight":"titleFont.fontWeight","AxisTitleStyleName2.fontFamily":"titleFont.fontFamily","AxisTitleStyleName2.color":{property:"titleColor",converter:xcelsius.utils.ColorUtil.toCSSColor},"AxisLabelsStyleName2.fontSize":"label.font.fontSize","AxisLabelsStyleName2.fontStyle":"label.font.fontStyle","AxisLabelsStyleName2.fontWeight":"label.font.fontWeight","AxisLabelsStyleName2.fontFamily":"label.font.fontFamily","AxisLabelsStyleName2.color":{property:"label.color",converter:xcelsius.utils.ColorUtil.toCSSColor}}}else{q={"AxisTitleStyleName.fontSize":"titleFont.fontSize","AxisTitleStyleName.fontStyle":"titleFont.fontStyle","AxisTitleStyleName.fontWeight":"titleFont.fontWeight","AxisTitleStyleName.fontFamily":"titleFont.fontFamily","AxisTitleStyleName.color":{property:"titleColor",converter:xcelsius.utils.ColorUtil.toCSSColor},"AxisLabelsStyleName.fontSize":"label.font.fontSize","AxisLabelsStyleName.fontStyle":"label.font.fontStyle","AxisLabelsStyleName.fontWeight":"label.font.fontWeight","AxisLabelsStyleName.fontFamily":"label.font.fontFamily","AxisLabelsStyleName.color":{property:"label.color",converter:xcelsius.utils.ColorUtil.toCSSColor}}}for(r in q){o=j+r;p[o]=q[r]}var n=false;for(o in p){if(m.hasOwnProperty(o)){xcelsius.utils.ObjectUtils.setProperties(l,p[o],m[o]);n=true;delete m[o]}}if(l.hasOwnProperty("titleFont")){}if(l.label!=null&&l.label.font!=null){}if(!n){l=null}return l};i.prototype._defaultData=function(){return[[58,25,70,45,100]]};i.prototype._buildDataLabel=function(r,p,m){var t={};var o=this["_"+b.showDataLabels];if(o&&o.length>p){t.visible=c(o[p]);if(!t.visible){return t}}var n=this["_"+b.dataLabelPosition];if(n&&n.length>p){t.position=n[p]}var q=this["_"+b.dataLabelXoffset];if(q&&q.length>p){t.offset=t.offset?t.offset:{};t.offset.x=q[p]}var l=this["_"+b.dataLabelYoffset];if(l&&l.length>p){t.offset=t.offset?t.offset:{};t.offset.y=l[p]}var s=this["_"+b.chartLabelSeparator];if(s&&s.length>p){t.separator=s[p]}var k=this._getDatalabelFont(p);if(k!=null){if(m){t.font=k}else{t.font=e(k)}}var j=this._getDatalabelColor(p);if(j!=null){t.color=a(j)}this._buildDataLabelContent(t,p);return t};i.prototype._buildDataLabelContent=function(n,l){var q=this["_"+b.showCategory];if(q&&q.length>l){n.dimensionVisible=c(q[l])}var m=this["_"+b.categoryLabelsNumberFormats];if(m){n.dimensionFormatString=xcelsius.utils.XCNumericFormatUtil.convertToFormatStringArray(m)}var j=this["_"+b.showSeries];if(j&&j.length>l){n.measureVisible=c(j[l])}var k=this["_"+b.seriesNamesNumberFormats];if(k&&k.length>l){n.measureFormatString=xcelsius.utils.XCNumericFormatUtil.getValidFormatString(k[l])}var p=this["_"+b.showValue];if(p&&p.length>l){n.valueVisible=c(p[l])}var o=this["_"+b.dataNumberFormats];if(o&&o.length>l){n.valueFormatString=xcelsius.utils.XCNumericFormatUtil.convertToFormatStringArray(o[l])}};i.prototype._getDatalabelFont=function(k){var j;var m=this.getStyle("datalabelFontFamily");if(m!=null&&m.length>0){j={};if(m.length>k){j.fontFamily=m[k]}else{j.fontFamily=m[m.length-1]}var l=this.getStyle("datalabelFontSize");if(l!=null&&l.length>0){if(l.length>k){j.fontSize=l[k]}else{j.fontSize=l[l.length-1]}}var n=this.getStyle("datalabelFontWeight");if(n!=null&&n.length>0){if(n.length>k){j.fontWeight=n[k]}else{j.fontWeight=n[n.length-1]}}var o=this.getStyle("datalabelFontStyle");if(o!=null&&o.length>0){if(o.length>k){j.fontStyle=o[k]}else{j.fontStyle=o[o.length-1]}}}return j};i.prototype._getDatalabelColor=function(k){var j;var l=this.getStyle("datalabelColors");if(l&&l.length>0){if(l.length>k){j=l[k]}else{var m=k%l.length;j=l[m]}}return j};i._convertThickness=function(j){if(xcelsius.utils.isNumber(j)){return j}else{return 1}};i._convertMajorLines=function(k){var j=Number(k);if(isNaN(j)){return 1}j=Math.abs(Math.round(j));return j<1?1:j};i._convertMajorUnit=function(k){var j=Number(k);if(isNaN(j)||j==0){return null}else{return Math.abs(j)}};i._convertMinorDivision=function(k){var j=Number(k);if(isNaN(j)){return 3}else{return j+1}};i._convertManualScale=function(k){var j=Number(k);if(isNaN(j)){return 0}else{return j}};i._convertAxisLabesFormatString=function(m){var k=xcelsius.utils.XCNumericFormatUtil.getFormatString;if(xcelsius.utils.isArray(m)){var j=m.slice();for(var l=0;l<j.length;l++){j[l]=k(j[l])}return j}else{return[k(m)]}}})();(function(){xcelsius.declare("xcelsius.charts.cartesian.CartesianChart1D");xcelsius.require("xcelsius.utils.ArrayUtil");xcelsius.require("xcelsius.utils.XCNumericFormatUtil");xcelsius.require("xcelsius.charts.Chart");xcelsius.require("xcelsius.charts.cartesian.CartesianChart");xcelsius.require("xcelsius.charts.ControllerFactory");xcelsius.require("xcelsius.charts.constant.ChartProperty");var e=xcelsius.charts.constant.ChartProperty;var f={};f[e.categoryLabels]={defaultValue:[1,2,3,4,5],propertyDefined:true};f[e.categoryLabelsNumberFormats]={defaultValue:[],mapToController:true};f[e.endRangeValueOption]={defaultValue:0};f[e.showCategory]={defaultValue:[0,0,0,0,0],mapToController:true};f[e.beginRangeValueOption]={defaultValue:0};f[e.beginRangeIndex]={defaultValue:-1,mapToController:true};f[e.beginRangeCategoryLabel]={defaultValue:"",mapToController:true};f[e.categoryLabelsSortingOrder]={defaultValue:false,propertyDefined:true};f[e.sortingByOption]={defaultValue:"bySeriesData",propertyDefined:true};f[e.enableRangeSlider]={defaultValue:false};f[e.endRangeCategoryLabel]={defaultValue:"",mapToController:true};f[e.endRangeIndex]={defaultValue:-1,mapToController:true};f[e.xAxisTitleNumberFormat2]={defaultValue:"",mapToController:true};f[e.showYAxisTitle2]={defaultValue:true,mapToController:true};f[e.yAxisTitleNumberFormat2]={defaultValue:"",mapToController:true};f[e.xMajorSpacing2]={defaultValue:"interval"};f[e.axisBySeries]={defaultValue:[0],mapToController:true};f[e.yAxisTitle2]={defaultValue:"",mapToController:true};f[e.xAxisTitle2]={defaultValue:"",mapToController:true};f[e.showXAxisTitle2]={defaultValue:true,mapToController:true};f[e.yShowLabels2]={defaultValue:true,mapToController:true};f[e.yShowAxis2]={defaultValue:true,mapToController:true};f[e.yShowMinorTicks2]={defaultValue:false,mapToController:true};f[e.yShowMajorLines2]={defaultValue:false,mapToController:true};f[e.yShowMajorTicks2]={defaultValue:true,mapToController:true};f[e.yShowMinorLines2]={defaultValue:false,mapToController:true};f[e.xMinorSpacing2]={defaultValue:"fixedNum",mapToController:true};f[e.xMajorUnit2]={defaultValue:10,mapToController:true};f[e.xMinorLines2]={defaultValue:2,mapToController:true};f[e.xShowLabels2]={defaultValue:true,mapToController:true};f[e.xLabelNumberFormat2]={defaultValue:null,mapToController:true};f[e.xMajorLines2]={defaultValue:3,mapToController:true};f[e.focus2]={defaultValue:"full"};f[e.xMin2]={defaultValue:0,mapToController:true};f[e.xShowAxis2]={defaultValue:true,mapToController:true};f[e.xMax2]={defaultValue:500,mapToController:true};f[e.yMin2]={defaultValue:0,mapToController:true};f[e.xShowMajorTicks2]={defaultValue:true,mapToController:true};f[e.xShowMinorTicks2]={defaultValue:false,mapToController:true};f[e.yMax2]={defaultValue:500,mapToController:true};f[e.xShowMajorLines2]={defaultValue:false,mapToController:true};f[e.xShowMinorLines2]={defaultValue:false,mapToController:true};f[e.yMajorSpacing2]={defaultValue:"interval"};f[e.yMinorSpacing2]={defaultValue:"fixedNum",mapToController:true};f[e.yMajorUnit2]={defaultValue:10,mapToController:true};f[e.yMinorLines2]={defaultValue:2,mapToController:true};f[e.yMajorLines2]={defaultValue:3,mapToController:true};f[e.yLabelNumberFormat2]={defaultValue:null,mapToController:true};var c=xcelsius.charts.cartesian.CartesianChart1D=function(){c.superclass.constructor.apply(this,arguments);this.__className="xcelsius.charts.cartesian.CartesianChart1D";this._initDefaultValues(f)};xcelsius.extend(c,xcelsius.charts.cartesian.CartesianChart);var b=xcelsius.charts.Chart;for(var d in f){var a=f[d];if(a.mapToController){b._createControllerSetter(c,d)}else{if(!a.propertyDefined){b._createProperty(c,d)}}}c.prototype._getStyleNames=function(){var g=c.superclass._getStyleNames.apply(this,arguments);g.push("xMajorColor2","xMinorColor2","xMajorWeight2","xMinorWeight2","xAxisColor2","xAxisWeight2","yMajorColor2","yMinorColor2","yMajorWeight2","yMinorWeight2","yAxisColor2","yAxisWeight2","xAxisTitleStyleName2.fontSize","xAxisTitleStyleName2.fontStyle","xAxisTitleStyleName2.fontWeight","xAxisTitleStyleName2.fontFamily","xAxisTitleStyleName2.color","yAxisTitleStyleName2.fontSize","yAxisTitleStyleName2.fontStyle","yAxisTitleStyleName2.fontWeight","yAxisTitleStyleName2.fontFamily","yAxisTitleStyleName2.color","xAxisLabelsStyleName2.fontSize","xAxisLabelsStyleName2.fontStyle","xAxisLabelsStyleName2.fontWeight","xAxisLabelsStyleName2.fontFamily","xAxisLabelsStyleName2.color","yAxisLabelsStyleName2.fontSize","yAxisLabelsStyleName2.fontStyle","yAxisLabelsStyleName2.fontWeight","yAxisLabelsStyleName2.fontFamily","yAxisLabelsStyleName2.color","datalabelFontFamily","datalabelFontSize","datalabelFontWeight","datalabelFontStyle","datalabelColors");return g};c.prototype._dualYAxis=function(){return true};c.prototype._validateChangedProperties=function(){c.superclass._validateChangedProperties.apply(this,arguments);if(this._useDualAxis()){this._validateDualAxis()}this._validateVisibleRange()};c.prototype._validateVisibleRange=function(){if(!this._enableRangeSlider){delete this._changedProperties[e.beginRangeIndex];delete this._changedProperties[e.endRangeIndex];return}if(this._beginRangeValueOption==0){if(this._changedProperties.hasOwnProperty(e.beginRangeIndex)){this._changedProperties[e.beginRangeIndex]=this._changedProperties[e.beginRangeIndex]-1}}else{if(this._changedProperties.hasOwnProperty(e.beginRangeCategoryLabel)){this._changedProperties[e.beginRangeIndex]=this._getIndexByLabel(this._changedProperties[e.beginRangeCategoryLabel])}}if(this._endRangeValueOption==0){if(this._changedProperties.hasOwnProperty(e.endRangeIndex)){this._changedProperties[e.endRangeIndex]=this._changedProperties[e.endRangeIndex]-1}}else{if(this._changedProperties.hasOwnProperty(e.endRangeCategoryLabel)){this._changedProperties[e.endRangeIndex]=this._getIndexByLabel(this._changedProperties[e.endRangeCategoryLabel])}}delete this._changedProperties[e.beginRangeCategoryLabel];delete this._changedProperties[e.endRangeCategoryLabel]};c.prototype._getIndexByLabel=function(h){var g=this._dataModel.model();if(g&&g.categoryLabels&&g.categoryLabels.length>0){for(var j=0;j<g.categoryLabels.length;j++){if(g.categoryLabels[j]===h){return j}}}return -1};c.prototype._useDualAxis=function(){var g=false;if(this._axisBySeries&&this._axisBySeries.length>0){for(var h=this._axisBySeries.length-1;h>=0;h--){if(this._axisBySeries[h]>0){g=true;break}}}return g};c.prototype._validateDualAxis=function(){if(this._dualYAxis()){var g=this._buildAxis("y",this._changedProperties,true);if(g!=null){if(!this._changedProperties.yAxis){this._changedProperties.yAxis=[]}if(g.hasOwnProperty("visible")&&g.visible===false){g.showTitle=false}this._changedProperties.yAxis[1]=g}}else{var h=this._buildAxis("x",this._changedProperties,true);if(h!=null){if(!this._changedProperties.xAxis){this._changedProperties.xAxis=[]}if(h.hasOwnProperty("visible")&&h.visible===false){h.showTitle=false}this._changedProperties.xAxis[1]=h}}};c.prototype._buildAxis=function(g,i,h){var j=c.superclass._buildAxis.apply(this,arguments);if(g==this._categoryAxis()&&!h){if(i.hasOwnProperty(e.categoryLabelsNumberFormats)){j=j?j:{};j.label=j.label?j.label:{};j.label.formatString=xcelsius.charts.cartesian.CartesianChart._convertAxisLabesFormatString(i[e.categoryLabelsNumberFormats])}}return j};c.prototype._seriesProperties=function(){var g=c.superclass._seriesProperties.apply(this,arguments);g.push("axisBySeries","datalabelColors");return g};c.prototype._buildSeries=function(k){var g=c.superclass._buildSeries.apply(this,arguments);for(var j=0;j<this._seriesCount;j++){if(g[j]==null){g[j]={}}if(this._axisBySeries.length>j){g[j]["valueAxis"]=this._axisBySeries[j]}else{g[j]["valueAxis"]=0}var h=this._buildDataLabel(k,j);if(h!=null){g[j]["dataLabel"]=h}}return g}})();(function(){xcelsius.declare("xcelsius.charts.cartesian.BarChart");xcelsius.require("xcelsius.charts.cartesian.CartesianChart1D");xcelsius.require("xcelsius.charts.ControllerFactory");xcelsius.require("xcelsius.charts.constant.ChartProperty");var c=xcelsius.charts.constant.ChartProperty;var a={};a[c.xShowMajorLines]={defaultValue:true,mapToController:true};a[c.xShowMinorLines]={defaultValue:true,mapToController:true};a[c.yShowMajorLines]={defaultValue:false,mapToController:true};a[c.yShowMinorLines]={defaultValue:false,mapToController:true};var b=xcelsius.charts.cartesian.BarChart=function(){b.superclass.constructor.apply(this,arguments);this.__className="xcelsius.charts.cartesian.BarChart";this._initDefaultValues(a)};xcelsius.extend(b,xcelsius.charts.cartesian.CartesianChart1D);b.prototype._createController=function(){return xcelsius.charts.ControllerFactory.createBarChartController()};b.prototype._defaultData=function(){return[[25,70,45,100]]};b.prototype._getStyleNames=function(){var d=b.superclass._getStyleNames.apply(this,arguments);d.push("markSize");return d};b.prototype._dualYAxis=function(){return false};b.prototype._categoryAxis=function(){return"y"}})();(function(){xcelsius.declare("xcelsius.binding.MapOrder");xcelsius.binding.MapOrder.ROW_FIRST="rowFirst";xcelsius.binding.MapOrder.COLUMN_FIRST="columnFirst"})();(function(){xcelsius.declare("xcelsius.binding.tableMaps.output.TableToArray");xcelsius.require("xcelsius.utils");xcelsius.require("xcelsius.collections.ITable");xcelsius.require("xcelsius.events.CollectionEvent");xcelsius.require("xcelsius.binding.MapOrder");xcelsius.binding.tableMaps.output.TableToArray=function(a){xcelsius.binding.tableMaps.output.TableToArray.superclass.constructor.apply(this,arguments);this.__className="xcelsius.binding.tableMaps.output.TableToArray";this._order="";this._output=[];this._source=null;this._valueField=null;this.id="";xcelsius.utils.applyProperties(this,a)};xcelsius.binding.tableMaps.output.TableToArray.prototype.output=function(b){if(arguments.length>=1){if(this._output!=b){var a=this._output;this._output=b;this._propertyChanged("output",this._output,a)}}else{return this._output}};xcelsius.binding.tableMaps.output.TableToArray.prototype.source=function(a){if(arguments.length>=1){this._source=a;this._source.addEventListener(xcelsius.events.CollectionEvent.COLLECTION_CHANGE,this._updateMap,this);this._updateMap(new xcelsius.events.CollectionEvent(xcelsius.events.CollectionEvent.COLLECTION_CHANGE))}else{return this._source}};xcelsius.binding.tableMaps.output.TableToArray.prototype.valueField=function(a){if(arguments.length>=1){this._valueField=a;this._updateMap(null)}else{return this._valueField}};xcelsius.binding.tableMaps.output.TableToArray.prototype.order=function(a){if(arguments.length>=1){if(a!=xcelsius.binding.MapOrder.COLUMN_FIRST){a=xcelsius.binding.MapOrder.ROW_FIRST}this._order=a;this._updateMap(null)}else{return this._order}};xcelsius.binding.tableMaps.output.TableToArray.prototype._updateMap=function(a){if(this._source==null){return}var f=this._source.getNumRows();var c=this._source.getNumCols();var k;var b;var j;if(a!=null&&a.type()==xcelsius.events.CollectionEvent.UPDATE){var g=a.data;var d=a.data.length;for(var e=0;e<d;e++){j=g[e];if(j){k=this._source.getItemRow(j);b=this._source.getItemColumn(j);var h;if(this._order==xcelsius.binding.MapOrder.COLUMN_FIRST){h=(b*f)+k}else{h=(k*c)+b}if(this._output==null){this._output=new Array()}if(this._valueField!=null){this._output[h]=xcelsius.utils.getObjectProperty(j,this._valueField)}else{this._output[h]=j}}}}else{this._output=new Array();if(this._order==xcelsius.binding.MapOrder.COLUMN_FIRST){for(b=0;b<c;b++){for(k=0;k<f;k++){j=this._source.getItemAt(k,b);if(this._valueField!=null){this._output.push(xcelsius.utils.getObjectProperty(j,this._valueField))}else{this._output.push(j)}}}}else{for(k=0;k<f;k++){for(b=0;b<c;b++){j=this._source.getItemAt(k,b);if(this._valueField!=null){this._output.push(xcelsius.utils.getObjectProperty(j,this._valueField))}else{this._output.push(j)}}}}}this._propertyChanged("output",null,this._output)};xcelsius.extend(xcelsius.binding.tableMaps.output.TableToArray,xcelsius.binding.BindableObject)})();