sap.riv.module({qname:"sap.riv.core.UADetector",version:"3.4.0"},function Setup(){var m=window.devicePixelRatio||1;var t;var g=function(x){for(var u=0;u<x.length;u++){var v=x[u].string;var w=x[u].prop;t=x[u].versionSearch||x[u].identity;if(v){if(v.indexOf(x[u].subString)!=-1){return x[u].identity}}else{if(w){return x[u].identity}}}};var o=[";"," "];var l=function(x){var v=x.indexOf(t);if(v==-1){return}var z=x.substring(v+t.length+1);var w=0,u=o.length,A=-1;while(A===-1&&w<u){A=z.indexOf(o[w++])}if(A!==-1){z=z.slice(0,A)}return z};var c=[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.userAgent,subString:"RIV",versionSearch:"RIV/",identity:"RIV"},{string:navigator.userAgent,subString:"Safari",identity:"Safari",versionSearch:"Version"},{string:navigator.userAgent,subString:"Apple",identity:"UIWebView",versionSearch:"AppleWebKit"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}];var b=[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.platform,subString:"Linux",identity:"Linux"}];var r=[{string:navigator.userAgent,subString:"Presto",identity:"Presto"},{string:navigator.userAgent,subString:"KHTML",identity:"KHTML"},{string:navigator.userAgent,subString:"Gecko",identity:"Gecko"},{string:navigator.userAgent,subString:"Trident",identity:"Trident"},{string:navigator.userAgent,subString:"RivKit",identity:"RivKit"}];var h=g(c)||"An unknown browser",n=l(navigator.userAgent)||l(navigator.appVersion)||"an unknown version",d=g(c)==="Explorer",q=g(c)==="Firefox",e=g(c)==="Chrome",a=g(c)==="Safari",j=g(c)==="UIWebView",s=g(b)||"an unknown OS",k=g(r)||"An unknown RenderEngine";var f={userAgent:function(){return h},version:function(){return n},isIE:function(){return d},isFirefox:function(){return q},isChrome:function(){return e},isSafari:function(){return a},isUIWebView:function(){return j},os:function(){return s},devicePixelRatio:function(){return m},renderEngine:function(){return k}};return(f)});sap.riv.module({qname:"sap.riv.core.Math",version:"3.4.0"},[{qname:"sap.riv.core.UADetector",version:"3.4.0"}],function Setup(a){var b={PI:Math.PI,E:Math.E,LN10:Math.LN10,LN2:Math.LN2,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,abs:(function(){if(a.isSafari()||(a.isIE()&&parseFloat(a.version())<9)){return function(c){return c<0?-c:c}}else{return Math.abs}})(),acos:(function(){return Math.acos})(),asin:(function(){return Math.asin})(),atan:(function(){return Math.atan})(),atan2:(function(){return Math.atan2})(),ceil:(function(){return Math.ceil})(),cos:(function(){return Math.cos})(),exp:(function(){return Math.exp})(),floor:(function(){return Math.floor})(),log:(function(){return Math.log})(),max:(function(){return Math.max})(),min:(function(){return Math.min})(),pow:(function(){return Math.pow})(),random:(function(){return Math.random})(),round:(function(){return Math.round})(),sin:(function(){return Math.sin})(),sqrt:(function(){return Math.sqrt})(),tan:(function(){return Math.tan})()};return b});sap.riv.module({qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},function Setup(){var c={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"};var b=Object.prototype.hasOwnProperty;var e=/\d/;var d=function(f){return f==null?String(f):c[Object.prototype.toString.call(f)]||"object"};var a={isFunction:function(f){return d(f)==="function"},isArray:Array.isArray||function(f){return d(f)==="array"},isString:function(f){return d(f)==="string"},isNonEmptyString:function(f){return this.isString(f)&&f.length!==0},isEmptyString:function(f){return this.isString(f)&&f.length===0},isNaN:function(f){return f===null||f===undefined||!e.test(f)||isNaN(f)},isNumber:function(f){return !this.isNaN(parseFloat(f))&&isFinite(f)},isDefined:function(f){return typeof(f)!=="undefined"},isUndefined:function(f){return typeof(f)==="undefined"},isPlainObject:function(g){if(!g||d(g)!=="object"||g.nodeType||(g&&typeof g==="object"&&"setInterval" in g)){return false}if(g.constructor&&!b.call(g,"constructor")&&!b.call(g.constructor.prototype,"isPrototypeOf")){return false}var f;for(f in g){}return f===undefined||b.call(g,f)},isEmptyObject:function(g){for(var f in g){return false}return this.isPlainObject(g)},isExist:function(f){if((typeof(f)==="undefined")||(f===null)){return false}return true}};return a});sap.riv.module({qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"},[{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"}],function Setup(a){var d=/\{(\d+)\}/g;var b=function(){};var c={noop:b,unsupported:function(){throw new Error("Unsupported function!")},unimplemented:function(){throw new Error("Unimplemented function!")},error:function(f){var e=arguments;if(e[0]){var f=e[0].replace(d,function(g,h){return e[parseInt(h)+1]});throw f}else{throw"unknown error!"}},createCallChain:function(){var e=arguments.length;if(e>1){var g=[];for(var f=0;f<e;f++){if(a.isFunction(arguments[f])){g.push(arguments[f])}else{c.error("Could not create call chain for non-function object")}}return(function(){for(var h=0;h<e;h++){g[h].apply(this,arguments)}})}else{return a.isFunction(arguments[0])?arguments[0]:b}}};return c});sap.riv.module({qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},[{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"}],function Setup(a,k){var m=Array.prototype.slice;var f=function(){};var d=/^\s+/,h=/\s+$/,g=/^[\],:{}\s]*$/,l=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,j=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,c=/(?:^|:|,)(?:\s*\[)+/g;var b=b?function(n){return n==null?"":b.call(n)}:function(n){return n==null?"":n.toString().replace(d,"").replace(h,"")};var e={uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(q){var o=Math.random()*16|0,n=q=="x"?o:o&3|8;return n.toString(16)})},proxy:function(q,o,n){if(arguments.length===2){if(typeof o==="string"){n=q;q=n[o];o=undefined}else{if(o&&!a.isFunction(o)){n=o;o=undefined}}}if(!o&&q){o=function(){return q.apply(n||this,arguments)}}return o},extend:function(){var x,q,n,o,u,v,t=arguments[0]||{},s=1,r=arguments.length,w=false;if(typeof t==="boolean"){w=t;t=arguments[1]||{};s=2}if(typeof t!=="object"&&!a.isFunction(t)){t={}}if(r===s){t=this;--s}for(;s<r;s++){if((x=arguments[s])!=null){for(q in x){n=t[q];o=x[q];if(t===o){continue}if(w&&o&&(a.isPlainObject(o)||(u=a.isArray(o)))){if(u){u=false;v=n&&a.isArray(n)?n:[]}else{v=n&&a.isPlainObject(n)?n:{}}t[q]=e.extend(w,v,o)}else{if(o!==undefined){t[q]=o}}}}}return t},each:function(r,v,q){var o,s=0,t=r.length,n=t===undefined||a.isFunction(r);if(q){if(n){for(o in r){if(v.apply(r[o],q)===false){break}}}else{for(;s<t;){if(v.apply(r[s++],q)===false){break}}}}else{if(n){for(o in r){if(v.call(r[o],o,r[o])===false){break}}}else{for(var u=r[0];s<t&&v.call(u,s,u)!==false;u=r[++s]){}}}return r},parseJSON:function(n){if(typeof n!=="string"||!n){return null}n=b(n);if(g.test(n.replace(l,"@").replace(j,"]").replace(c,""))){return window&&window.JSON&&window.JSON.parse?window.JSON.parse(n):(new Function("return "+n))()}else{a.error("Invalid JSON: "+n)}},derive:function(r,u){var t;var x;if(typeof r==="function"){if(typeof u==="function"){if(u.prototype.constructor==Object.prototype.constructor){u.prototype.constructor=u}f.prototype=u.prototype;var s=new f();var n=r.prototype;for(var o in n){if(n.hasOwnProperty(o)){s[o]=n[o]}}t=k.createCallChain(u,r);x=t.prototype=s;x.constructor=t;x.superclass=u.prototype;x.callParent=(function(){var z=[];return function(){var E=arguments[0],D;if(!z.length){z.push({funcName:E,thisObj:this,level:0})}else{if(z[z.length-1].funcName!==E||z[z.length-1].thisObj!==this){z.push({funcName:E,thisObj:this,level:0})}}var C=z[z.length-1].level;var B=this.superclass;while(C--){B=B.superclass}z[z.length-1].level++;var A=m.call(arguments,1);D=B[E].apply(z[z.length-1].thisObj,A);z[z.length-1].level--;if(!z[z.length-1].level){z.pop()}return D}})();t.superclazz=u;return t}else{if(typeof u==="object"){var q=r;var v=u;var w=q.prototype;f.prototype=w;var s=new f();t=k.createCallChain(q,v.constructor);x=t.prototype=s;for(o in v){if(v.hasOwnProperty(o)){x[o]=v[o]}}x.constructor=t;x.superclass=q.prototype;x.callParent=(function(){var z=[];return function(){var E=arguments[0],D;if(!z.length){z.push({funcName:E,thisObj:this,level:0})}else{if(z[z.length-1].funcName!==E||z[z.length-1].thisObj!==this){z.push({funcName:E,thisObj:this,level:0})}}var C=z[z.length-1].level;var B=this.superclass;while(C--){B=B.superclass}z[z.length-1].level++;var A=m.call(arguments,1);D=B[E].apply(z[z.length-1].thisObj,A);z[z.length-1].level--;if(!z[z.length-1].level){z.pop()}return D}})();t.superclazz=q}}}return t}};return e});sap.riv.module({qname:"sap.riv.core.utils.RIVExCanvasMgr",version:"3.4.0"},[{qname:"sap.riv.core.UADetector",version:"3.4.0"},{qname:"sap.riv.core.Math",version:"3.4.0"}],function Setup(ai,D){if(ai.isIE()&&parseFloat(ai.version())<9){var ad=D;var n=ad.round;var l=ad.sin;var B=ad.cos;var J=ad.abs;var P=ad.sqrt;var d=10;var f=d/2;var A=+navigator.userAgent.match(/MSIE ([\d.]+)?/)[1];function z(){return this.context_||(this.context_=new F(this))}var t=Array.prototype.slice;function g(m,Z,aj){var j=t.call(arguments,2);return function(){return m.apply(Z,j.concat(t.call(arguments)))}}function ah(j){return String(j).replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function ab(Z,m,j){if(!Z.namespaces[m]){Z.namespaces.add(m,j,"#default#VML")}}function T(m){ab(m,"r_vml_","urn:schemas-microsoft-com:vml");ab(m,"r_o_","urn:schemas-microsoft-com:office:office");if(!m.styleSheets.r_ex_canvas_){var j=m.createStyleSheet();j.owningElement.id="r_ex_canvas_";j.cssText="rivcanvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}"}}T(document);var e={init:function(j){var m=j||document;m.createElement("rivcanvas");m.attachEvent("onreadystatechange",g(this.init_,this,m))},init_:function(Z){var m=Z.getElementsByTagName("rivcanvas");for(var j=0;j<m.length;j++){this.initElement(m[j])}},initElement:function(m){if(!m.getContext){m.getContext=z;T(m.ownerDocument);m.innerHTML="";m.attachEvent("onpropertychange",x);m.attachEvent("onresize",Y);var j=m.attributes;if(j.width&&j.width.specified){m.style.width=j.width.nodeValue+"px"}else{m.width=m.clientWidth}if(j.height&&j.height.specified){m.style.height=j.height.nodeValue+"px"}else{m.height=m.clientHeight}}return m}};function x(m){var j=m.srcElement;switch(m.propertyName){case"width":j.getContext().clearRect();j.style.width=j.attributes.width.nodeValue+"px";j.firstChild.style.width=j.width+"px";break;case"height":j.getContext().clearRect();j.style.height=j.attributes.height.nodeValue+"px";j.firstChild.style.height=j.height+"px";break}}function Y(m){var j=m.srcElement;if(j.firstChild){j.firstChild.style.width=j.clientWidth+"px";j.firstChild.style.height=j.clientHeight+"px"}}e.init();var k=[];for(var ag=0;ag<16;ag++){for(var af=0;af<16;af++){k[ag*16+af]=ag.toString(16)+af.toString(16)}}function C(){return[[1,0,0],[0,1,0],[0,0,1]]}function L(aj,Z){var m=C();for(var j=0;j<3;j++){for(var am=0;am<3;am++){var ak=0;for(var al=0;al<3;al++){ak+=aj[j][al]*Z[al][am]}m[j][am]=ak}}return m}function v(m,j){j.fillStyle=m.fillStyle;j.lineCap=m.lineCap;j.lineJoin=m.lineJoin;j.lineWidth=m.lineWidth;j.miterLimit=m.miterLimit;j.shadowBlur=m.shadowBlur;j.shadowColor=m.shadowColor;j.shadowOffsetX=m.shadowOffsetX;j.shadowOffsetY=m.shadowOffsetY;j.strokeStyle=m.strokeStyle;j.globalAlpha=m.globalAlpha;j.font=m.font;j.textAlign=m.textAlign;j.textBaseline=m.textBaseline;j.arcScaleX_=m.arcScaleX_;j.arcScaleY_=m.arcScaleY_;j.lineScale_=m.lineScale_}var b={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",grey:"#808080",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",oldlace:"#FDF5E6",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",whitesmoke:"#F5F5F5",yellowgreen:"#9ACD32"};function O(m){var aj=m.indexOf("(",3);var j=m.indexOf(")",aj+1);var Z=m.substring(aj+1,j).split(",");if(Z.length!=4||m.charAt(3)!="a"){Z[3]=1}return Z}function c(j){return parseFloat(j)/100}function r(m,Z,j){return D.min(j,D.max(Z,m))}function K(ak){var j,am,an,al,ao,aj;al=parseFloat(ak[0])/360%360;if(al<0){al++}ao=r(c(ak[1]),0,1);aj=r(c(ak[2]),0,1);if(ao==0){j=am=an=aj}else{var m=aj<0.5?aj*(1+ao):aj+ao-aj*ao;var Z=2*aj-m;j=a(Z,m,al+1/3);am=a(Z,m,al);an=a(Z,m,al-1/3)}return"#"+k[D.floor(j*255)]+k[D.floor(am*255)]+k[D.floor(an*255)]}function a(m,j,Z){if(Z<0){Z++}if(Z>1){Z--}if(6*Z<1){return m+(j-m)*6*Z}else{if(2*Z<1){return j}else{if(3*Z<2){return m+(j-m)*(2/3-Z)*6}else{return m}}}}var E={};function H(j){if(j in E){return E[j]}var ak,aj=1;j=String(j);if(j.charAt(0)=="#"){ak=j}else{if(/^rgb/.test(j)){var Z=O(j);var ak="#",al;for(var m=0;m<3;m++){if(Z[m].indexOf("%")!=-1){al=D.floor(c(Z[m])*255)}else{al=+Z[m]}ak+=k[r(al,0,255)]}aj=+Z[3]}else{if(/^hsl/.test(j)){var Z=O(j);ak=K(Z);aj=Z[3]}else{ak=b[j]||j}}}return E[j]={color:ak,alpha:aj}}var o={style:"normal",variant:"normal",weight:"normal",size:10,family:"sans-serif"};var N={};function G(j){if(N[j]){return N[j]}var aj=document.createElement("div");var Z=aj.style;try{Z.font=j}catch(m){}return N[j]={style:Z.fontStyle||o.style,variant:Z.fontVariant||o.variant,weight:Z.fontWeight||o.weight,size:Z.fontSize||o.size,family:Z.fontFamily||o.family}}function u(Z,m){var j={};for(var al in Z){j[al]=Z[al]}var ak=parseFloat(m.currentStyle.fontSize),aj=parseFloat(Z.size);if(typeof Z.size=="number"){j.size=Z.size}else{if(Z.size.indexOf("px")!=-1){j.size=aj}else{if(Z.size.indexOf("em")!=-1){j.size=ak*aj}else{if(Z.size.indexOf("%")!=-1){j.size=(ak/100)*aj}else{if(Z.size.indexOf("pt")!=-1){j.size=aj/0.75}else{j.size=ak}}}}}j.size*=0.981;return j}function ae(j){return j.style+" "+j.variant+" "+j.weight+" "+j.size+"px "+j.family}var s={butt:"flat",round:"round"};function U(j){return s[j]||"square"}function F(j){this.m_=C();this.mStack_=[];this.aStack_=[];this.currentPath_=[];this.strokeStyle="#000";this.fillStyle="#000";this.lineWidth=1;this.lineJoin="miter";this.lineCap="butt";this.miterLimit=d*1;this.globalAlpha=1;this.font="10px sans-serif";this.textAlign="left";this.textBaseline="alphabetic";this.canvas=j;var Z="width:"+j.clientWidth+"px;height:"+j.clientHeight+"px;overflow:hidden;position:absolute";var m=j.ownerDocument.createElement("div");m.style.cssText=Z;j.appendChild(m);var aj=m.cloneNode(false);aj.style.backgroundColor="red";aj.style.filter="alpha(opacity=0)";j.appendChild(aj);this.element_=m;this.arcScaleX_=1;this.arcScaleY_=1;this.lineScale_=1}var q=F.prototype;q.clearRect=function(){if(this.textMeasureEl_){this.textMeasureEl_.removeNode(true);this.textMeasureEl_=null}this.element_.innerHTML=""};q.beginPath=function(){this.currentPath_=[]};q.moveTo=function(m,j){var Z=X(this,m,j);this.currentPath_.push({type:"moveTo",x:Z.x,y:Z.y});this.currentX_=Z.x;this.currentY_=Z.y};q.lineTo=function(m,j){var Z=X(this,m,j);this.currentPath_.push({type:"lineTo",x:Z.x,y:Z.y});this.currentX_=Z.x;this.currentY_=Z.y};q.bezierCurveTo=function(Z,m,ao,an,am,ak){var j=X(this,am,ak);var al=X(this,Z,m);var aj=X(this,ao,an);M(this,al,aj,j)};function M(j,aj,Z,m){j.currentPath_.push({type:"bezierCurveTo",cp1x:aj.x,cp1y:aj.y,cp2x:Z.x,cp2y:Z.y,x:m.x,y:m.y});j.currentX_=m.x;j.currentY_=m.y}q.quadraticCurveTo=function(am,Z,m,j){var al=X(this,am,Z);var ak=X(this,m,j);var an={x:this.currentX_+2/3*(al.x-this.currentX_),y:this.currentY_+2/3*(al.y-this.currentY_)};var aj={x:an.x+(ak.x-this.currentX_)/3,y:an.y+(ak.y-this.currentY_)/3};M(this,an,aj,ak)};q.arc=function(ap,an,ao,ak,m,Z){ao*=d;var au=Z?"at":"wa";var aq=ap+B(ak)*ao-f;var at=an+l(ak)*ao-f;var j=ap+B(m)*ao-f;var ar=an+l(m)*ao-f;if(aq==j&&!Z){aq+=0.125}var aj=X(this,ap,an);var am=X(this,aq,at);var al=X(this,j,ar);this.currentPath_.push({type:au,x:aj.x,y:aj.y,radius:ao,xStart:am.x,yStart:am.y,xEnd:al.x,yEnd:al.y})};q.rect=function(Z,m,j,aj){this.moveTo(Z,m);this.lineTo(Z+j,m);this.lineTo(Z+j,m+aj);this.lineTo(Z,m+aj);this.closePath()};q.strokeRect=function(Z,m,j,aj){var ak=this.currentPath_;this.beginPath();this.moveTo(Z,m);this.lineTo(Z+j,m);this.lineTo(Z+j,m+aj);this.lineTo(Z,m+aj);this.closePath();this.stroke();this.currentPath_=ak};q.fillRect=function(Z,m,j,aj){var ak=this.currentPath_;this.beginPath();this.moveTo(Z,m);this.lineTo(Z+j,m);this.lineTo(Z+j,m+aj);this.lineTo(Z,m+aj);this.closePath();this.fill();this.currentPath_=ak};q.createLinearGradient=function(m,aj,j,Z){var ak=new W("gradient");ak.x0_=m;ak.y0_=aj;ak.x1_=j;ak.y1_=Z;return ak};q.createRadialGradient=function(aj,al,Z,m,ak,j){var am=new W("gradientradial");am.x0_=aj;am.y0_=al;am.r0_=Z;am.x1_=m;am.y1_=ak;am.r1_=j;return am};q.drawImage=function(aw,Z){var ao,am,aq,aD,au,ar,ay,aF;var ap=aw.runtimeStyle.width;var av=aw.runtimeStyle.height;aw.runtimeStyle.width="auto";aw.runtimeStyle.height="auto";var an=aw.width;var aB=aw.height;aw.runtimeStyle.width=ap;aw.runtimeStyle.height=av;if(arguments.length==3){ao=arguments[1];am=arguments[2];au=ar=0;ay=aq=an;aF=aD=aB}else{if(arguments.length==5){ao=arguments[1];am=arguments[2];aq=arguments[3];aD=arguments[4];au=ar=0;ay=an;aF=aB}else{if(arguments.length==9){au=arguments[1];ar=arguments[2];ay=arguments[3];aF=arguments[4];ao=arguments[5];am=arguments[6];aq=arguments[7];aD=arguments[8]}else{throw Error("Invalid number of arguments")}}}var aE=X(this,ao,am);var aj=ay/2;var m=aF/2;var aC=[];var j=10;var al=10;aC.push(" <r_vml_:group",' coordsize="',d*j,",",d*al,'"',' coordorigin="0,0"',' style="width:',j,"px;height:",al,"px;position:absolute;");if(this.m_[0][0]!=1||this.m_[0][1]||this.m_[1][1]!=1||this.m_[1][0]){var ak=[];ak.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",n(aE.x/d),",","Dy=",n(aE.y/d),"");var aA=aE;var az=X(this,ao+aq,am);var ax=X(this,ao,am+aD);var at=X(this,ao+aq,am+aD);aA.x=ad.max(aA.x,az.x,ax.x,at.x);aA.y=ad.max(aA.y,az.y,ax.y,at.y);aC.push("padding:0 ",n(aA.x/d),"px ",n(aA.y/d),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",ak.join(""),", sizingmethod='clip');")}else{aC.push("top:",n(aE.y/d),"px;left:",n(aE.x/d),"px;")}aC.push(' ">','<r_vml_:image src="',aw.src,'"',' style="width:',d*aq,"px;"," height:",d*aD,'px"',' cropleft="',au/an,'"',' croptop="',ar/aB,'"',' cropright="',(an-au-ay)/an,'"',' cropbottom="',(aB-ar-aF)/aB,'"'," />","</r_vml_:group>");this.element_.insertAdjacentHTML("BeforeEnd",aC.join(""))};q.stroke=function(ao){var am=[];var Z=false;var m=10;var ap=10;am.push("<r_vml_:shape",' filled="',!!ao,'"',' style="position:absolute;width:',m,"px;height:",ap,'px;"',' coordorigin="0,0"',' coordsize="',d*m,",",d*ap,'"',' stroked="',!ao,'"',' path="');var aq=false;var aj={x:null,y:null};var an={x:null,y:null};for(var ak=0;ak<this.currentPath_.length;ak++){var j=this.currentPath_[ak];var al;switch(j.type){case"moveTo":al=j;am.push(" m ",n(j.x),",",n(j.y));break;case"lineTo":am.push(" l ",n(j.x),",",n(j.y));break;case"close":am.push(" x ");j=null;break;case"bezierCurveTo":am.push(" c ",n(j.cp1x),",",n(j.cp1y),",",n(j.cp2x),",",n(j.cp2y),",",n(j.x),",",n(j.y));break;case"at":case"wa":am.push(" ",j.type," ",n(j.x-this.arcScaleX_*j.radius),",",n(j.y-this.arcScaleY_*j.radius)," ",n(j.x+this.arcScaleX_*j.radius),",",n(j.y+this.arcScaleY_*j.radius)," ",n(j.xStart),",",n(j.yStart)," ",n(j.xEnd),",",n(j.yEnd));break}if(j){if(aj.x==null||j.x<aj.x){aj.x=j.x}if(an.x==null||j.x>an.x){an.x=j.x}if(aj.y==null||j.y<aj.y){aj.y=j.y}if(an.y==null||j.y>an.y){an.y=j.y}}}am.push(' ">');if(!ao){w(this,am)}else{I(this,am,aj,an)}am.push("</r_vml_:shape>");this.element_.insertAdjacentHTML("beforeEnd",am.join(""))};function w(Z,al){var m=H(Z.strokeStyle);var aj=m.color;var ak=m.alpha*Z.globalAlpha;var j=Z.lineScale_*Z.lineWidth;if(j<1){ak*=j}al.push("<r_vml_:stroke",' opacity="',ak,'"',' joinstyle="',Z.lineJoin,'"',' miterlimit="',Z.miterLimit,'"',' endcap="',U(Z.lineCap),'"',' weight="',j,'px"',' color="',aj,'" />')}function I(av,am,aO,aw){var an=av.fillStyle;var aF=av.arcScaleX_;var aE=av.arcScaleY_;var j=aw.x-aO.x;var Z=aw.y-aO.y;if(an instanceof W){var ar=0;var aJ={x:0,y:0};var aB=0;var aq=1;if(an.type_=="gradient"){var ap=an.x0_/aF;var m=an.y0_/aE;var ao=an.x1_/aF;var aQ=an.y1_/aE;var aN=X(av,ap,m);var aM=X(av,ao,aQ);var ak=aM.x-aN.x;var aj=aM.y-aN.y;ar=D.atan2(ak,aj)*180/D.PI;if(ar<0){ar+=360}if(ar<0.000001){ar=0}}else{var aN=X(av,an.x0_,an.y0_);aJ={x:(aN.x-aO.x)/j,y:(aN.y-aO.y)/Z};j/=aF*d;Z/=aE*d;var aH=ad.max(j,Z);aB=2*an.r0_/aH;aq=2*an.r1_/aH-aB}var az=an.colors_;az.sort(function(aS,aR){return aS.offset-aR.offset});var au=az.length;var ay=az[0].color;var ax=az[au-1].color;var aD=az[0].alpha*av.globalAlpha;var aC=az[au-1].alpha*av.globalAlpha;var aI=[];for(var aL=0;aL<au;aL++){var at=az[aL];aI.push(at.offset*aq+aB+" "+at.color)}am.push('<r_vml_:fill type="',an.type_,'"',' method="none" focus="100%"',' color="',ay,'"',' color2="',ax,'"',' colors="',aI.join(","),'"',' opacity="',aC,'"',' r_o_:opacity2="',aD,'"',' angle="',ar,'"',' focusposition="',aJ.x,",",aJ.y,'" />')}else{if(an instanceof V){if(j&&Z){var al=-aO.x;var aG=-aO.y;am.push("<r_vml_:fill",' position="',al/j*aF*aF,",",aG/Z*aE*aE,'"',' type="tile"',' src="',an.src_,'" />')}}else{var aP=H(av.fillStyle);var aA=aP.color;var aK=aP.alpha*av.globalAlpha;am.push('<r_vml_:fill color="',aA,'" opacity="',aK,'" />')}}}q.fill=function(){this.stroke(true)};q.closePath=function(){this.currentPath_.push({type:"close"})};function X(Z,ak,aj){var j=Z.m_;return{x:d*(ak*j[0][0]+aj*j[1][0]+j[2][0])-f,y:d*(ak*j[0][1]+aj*j[1][1]+j[2][1])-f}}q.save=function(){var j={};v(this,j);this.aStack_.push(j);this.mStack_.push(this.m_);this.m_=L(C(),this.m_)};q.restore=function(){if(this.aStack_.length){v(this.aStack_.pop(),this);this.m_=this.mStack_.pop()}};function h(j){return isFinite(j[0][0])&&isFinite(j[0][1])&&isFinite(j[1][0])&&isFinite(j[1][1])&&isFinite(j[2][0])&&isFinite(j[2][1])}function ac(Z,j,aj){if(!h(j)){return}Z.m_=j;if(aj){var ak=j[0][0]*j[1][1]-j[0][1]*j[1][0];Z.lineScale_=P(J(ak))}}q.translate=function(Z,m){var j=[[1,0,0],[0,1,0],[Z,m,1]];ac(this,L(j,this.m_),false)};q.rotate=function(m){var aj=B(m);var Z=l(m);var j=[[aj,Z,0],[-Z,aj,0],[0,0,1]];ac(this,L(j,this.m_),false)};q.scale=function(Z,m){this.arcScaleX_*=Z;this.arcScaleY_*=m;var j=[[Z,0,0],[0,m,0],[0,0,1]];ac(this,L(j,this.m_),true)};q.transform=function(ak,aj,am,al,m,j){var Z=[[ak,aj,0],[am,al,0],[m,j,1]];ac(this,L(Z,this.m_),true)};q.setTransform=function(al,ak,an,am,aj,Z){var j=[[al,ak,0],[an,am,0],[aj,Z,1]];ac(this,j,true)};q.drawText_=function(ar,ap,ao,av,an){var au=this.m_,ay=1000,Z=0,ax=ay,am={x:0,y:0},al=[];var j=u(G(this.font),this.element_);var aj=ae(j);var az=this.element_.currentStyle;var ak=this.textAlign.toLowerCase();switch(ak){case"left":case"center":case"right":break;case"end":ak=az.direction=="ltr"?"right":"left";break;case"start":ak=az.direction=="rtl"?"right":"left";break;default:ak="left"}switch(this.textBaseline){case"hanging":case"top":am.y=j.size/1.75;break;case"middle":break;default:case null:case"alphabetic":case"ideographic":case"bottom":am.y=-j.size/2.25;break}switch(ak){case"right":Z=ay;ax=0.05;break;case"center":Z=ax=ay/2;break}var aw=X(this,ap+am.x,ao+am.y);al.push('<r_vml_:line from="',-Z,' 0" to="',ax,' 0.05" ',' coordsize="100 100" coordorigin="0 0"',' filled="',!an,'" stroked="',!!an,'" style="position:absolute;width:1px;height:1px;">');if(an){w(this,al)}else{I(this,al,{x:-Z,y:0},{x:ax,y:j.size})}var at=au[0][0].toFixed(3)+","+au[1][0].toFixed(3)+","+au[0][1].toFixed(3)+","+au[1][1].toFixed(3)+",0,0";var aq=n(aw.x/d)+","+n(aw.y/d);al.push('<r_vml_:skew on="t" matrix="',at,'" ',' offset="',aq,'" origin="',Z,' 0" />','<r_vml_:path textpathok="true" />','<r_vml_:textpath on="true" string="',ah(ar),'" style="v-text-align:',ak,";font:",ah(aj),'" /></r_vml_:line>');this.element_.insertAdjacentHTML("beforeEnd",al.join(""))};q.fillText=function(Z,j,aj,m){this.drawText_(Z,j,aj,m,false)};q.strokeText=function(Z,j,aj,m){this.drawText_(Z,j,aj,m,true)};q.measureText=function(Z){if(!this.textMeasureEl_){var j='<span style="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;"></span>';this.element_.insertAdjacentHTML("beforeEnd",j);this.textMeasureEl_=this.element_.lastChild}var m=this.element_.ownerDocument;this.textMeasureEl_.innerHTML="";this.textMeasureEl_.style.font=this.font;this.textMeasureEl_.appendChild(m.createTextNode(Z));return{width:this.textMeasureEl_.offsetWidth}};q.clip=function(){};q.arcTo=function(){};q.createPattern=function(m,j){return new V(m,j)};function W(j){this.type_=j;this.x0_=0;this.y0_=0;this.r0_=0;this.x1_=0;this.y1_=0;this.r1_=0;this.colors_=[]}W.prototype.addColorStop=function(m,j){j=H(j);this.colors_.push({offset:m,color:j.color,alpha:j.alpha})};function V(m,j){S(m);switch(j){case"repeat":case null:case"":this.repetition_="repeat";break;case"repeat-x":case"repeat-y":case"no-repeat":this.repetition_=j;break;default:Q("SYNTAX_ERR")}this.src_=m.src;this.width_=m.width;this.height_=m.height}function Q(j){throw new R(j)}function S(j){if(!j||j.nodeType!=1||j.tagName!="IMG"){Q("TYPE_MISMATCH_ERR")}if(j.readyState!="complete"){Q("INVALID_STATE_ERR")}}function R(j){this.code=this[j];this.message=j+": DOM Exception "+this.code}var aa=R.prototype=new Error;aa.INDEX_SIZE_ERR=1;aa.DOMSTRING_SIZE_ERR=2;aa.HIERARCHY_REQUEST_ERR=3;aa.WRONG_DOCUMENT_ERR=4;aa.INVALID_CHARACTER_ERR=5;aa.NO_DATA_ALLOWED_ERR=6;aa.NO_MODIFICATION_ALLOWED_ERR=7;aa.NOT_FOUND_ERR=8;aa.NOT_SUPPORTED_ERR=9;aa.INUSE_ATTRIBUTE_ERR=10;aa.INVALID_STATE_ERR=11;aa.SYNTAX_ERR=12;aa.INVALID_MODIFICATION_ERR=13;aa.NAMESPACE_ERR=14;aa.INVALID_ACCESS_ERR=15;aa.VALIDATION_ERR=16;aa.TYPE_MISMATCH_ERR=17;return e}return});sap.riv.module({qname:"sap.riv.core.utils.TransformHelper",version:"3.4.0"},[{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.core.Math",version:"3.4.0"}],function Setup(a,c){var d=function(q,o){var t=[];var h=o.length,g=o[0].length;for(var f=0,j;f<h;f++){j=[];for(var l=0,k;l<g;l++){k=0;for(var s=0;s<g;s++){k+=o[f][s]*q[s][l]}j[l]=k}t[f]=j}return t};var e=[[1,0,0],[0,1,0],[0,0,1]];var b={identityMatrix:function(){return e},makeRotateTM:function(j,f){var h=f||e;var g=d([[c.cos(j),-c.sin(j),0],[c.sin(j),c.cos(j),0],[0,0,1]],h);return g},makeRotateInvertTM:function(j,f){var h=f||e;var g=d(h,[[c.cos(j),c.sin(j),0],[-c.sin(j),c.cos(j),0],[0,0,1]]);return g},makeScaleTM:function(f,k,g){var j=g||e;var h=d([[f,0,0],[0,k,0],[0,0,1]],j);return h},makeScaleInvertTM:function(f,k,g){var j=g||e;var h=d(j,[[1/f,0,0],[0,1/k,0],[0,0,1]]);return h},makeSkewTM:function(f,k,g){var j=g||e;var h=d([[1,f,0],[k,1,0],[0,0,1]],j);return h},makeInvertSkewTM:function(g,n,h){var k=h||e;var l=1-g*n;var f;if(l!==0){f=[[1/l,-g/l,0],[-n/l,1/l,0],[0,0,1]]}else{throw new Error("invalid affine transform matrix")}var j=d(k,f);return j},makeTranslateTM:function(f,k,g){var j=g||e;var h=d([[1,0,f],[0,1,k],[0,0,1]],j);return h},makeTranslateInvertTM:function(f,k,g){var j=g||e;var h=d(j,[[1,0,-f],[0,1,-k],[0,0,1]]);return h},makeCustomTM:function(g,f){var j=f||e;if(g[0][0]*g[1][1]!=g[1][0]*g[0][1]){var h=d(g,j);return h}else{throw new Error("invalid affine transform matrix")}},makeCustomInvertTM:function(s,h){var g=h||e;var q=s[0][0],o=s[1][0],n=s[0][1],m=s[1][1],l=s[0][2],k=s[1][2];var j=q*m-o*n;if(j!=0){var r=d(g,[[m/j,-n/j,(n*k-l*m)/j],[-o/j,q/j,(l*o-q*k)/j],[0,0,1]]);return r}else{throw new Error("invalid affine transform matrix")}},isEqualTransform:function(g,f){return g&&f&&(g[0][0]==f[0][0]&&g[0][1]==f[0][1]&&g[0][2]==f[0][2]&&g[1][0]==f[1][0]&&g[1][1]==f[1][1]&&g[1][2]==f[1][2]&&g[2][0]==f[2][0]&&g[2][1]==f[2][1]&&g[2][2]==f[2][2])},isIdentityMatrix:function(f){return(f[0][0]==1&&f[0][1]==0&&f[0][2]==0&&f[1][0]==0&&f[1][1]==1&&f[1][2]==0&&f[2][0]==0&&f[2][1]==0&&f[2][2]==1)},isValidAffineTransform:function(f){if(a.isArray(f)){return f[0][0]*f[1][1]!=f[1][0]*f[0][1]}return false},pointApplyTransform:function(g,h){var f=g.x,j=g.y;return{x:h[0][0]*f+h[0][1]*j+h[0][2],y:h[1][0]*f+h[1][1]*j+h[1][2]}},rectApplyTransform:function(l,q){var m=l.x,k=l.y,o=l.width,g=l.height;var r={minx:Number.MAX_VALUE,maxx:Number.MIN_VALUE,miny:Number.MAX_VALUE,maxy:Number.MIN_VALUE};var j=[[q[0][0]*m+q[0][1]*k+q[0][2],q[1][0]*m+q[1][1]*k+q[1][2]],[q[0][0]*(m+o)+q[0][1]*k+q[0][2],q[1][0]*(m+o)+q[1][1]*k+q[1][2]],[q[0][0]*(m+o)+q[0][1]*(k+g)+q[0][2],q[1][0]*(m+o)+q[1][1]*(k+g)+q[1][2]],[q[0][0]*m+q[0][1]*(k+g)+q[0][2],q[1][0]*m+q[1][1]*(k+g)+q[1][2]]];for(var f=0,n;f<4;f++){n=j[f];if(r.minx>n[0]){r.minx=n[0]}if(r.miny>n[1]){r.miny=n[1]}if(r.maxx<n[0]){r.maxx=n[0]}if(r.maxy<n[1]){r.maxy=n[1]}}return{x:r.minx,y:r.miny,width:r.maxx-r.minx,height:r.maxy-r.miny}},unmatrix:function(f){var n=f[0][0],m=f[1][0],l=f[0][1],k=f[1][1],j=f[0][2],h=f[1][2];var g,q,o,r;if(n*k==m*l){return false}else{q=c.sqrt(n*n+m*m);n/=q;m/=q;r=n*l+m*k;l-=n*r;k-=m*r;o=c.sqrt(l*l+k*k);l/=o;k/=o;r/=o;if(n*k-m*l<0){r=-r;o=-o}g=c.atan2(n,m)}return{tx:j,ty:h,sx:q,sy:o,skew:r,rotate:g}}};return b});sap.riv.module({qname:"sap.riv.core.Logger",version:"3.4.0"},[{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"}],function Setup(a){var e=a.noop;Date.now=Date.now||function(){return +new Date()};var s=0;function z(O){var H,F,K,N,J;if(k[0].length>0){if(O){J=O.getLevel();for(var I=0,G=k[0].length;I<G;I++){H=k[0][I];F=k[1][I];K=k[2][I];N=k[3][I];if(k[1][I]>=J){O.doAppend(H,F,K,N)}}return}var L={};for(var M in u){if(u.hasOwnProperty(M)){L[M]=u[M].getLevel()}}while(k[0].length){H=k[0].shift();F=k[1].shift();K=k[2].shift();N=k[3].shift();for(M in u){if(u.hasOwnProperty(M)){O=u[M];if(F>=L[M]){O.doAppend(H,F,K,N)}}}}return}else{if(++s===3){g()}}}function f(){z();if(!B){setTimeout(function(){f()},100)}}var j=function(){this.threshold=C.LEVEL.INFO;this.layout=new C.DefaultLayout();this.print=typeof console!==undefined?function(F){console.log(F)}:e};j.prototype={doAppend:function(I,F,H,G){this.print(this.layout.format(I,F,H,G))},setLayout:function(F){F.format&&(this.layout=F)},getLevel:function(){return this.threshold},setLevel:function(F){this.threshold=F}};var x=function(){};x.prototype.format=function(I,F,H,G){return"["+I+"]["+w(F)+"]["+(H||"main")+"]-"+G};var b=function(F){if(!$){throw"need jQuery"}this.threshold=C.LEVEL.INFO;this.divSl=$(F);this.layout=new v()};b.prototype={getLevel:function(){return this.threshold},setLevel:function(F){this.threshold=F},doAppend:function(I,F,H,G){this.divSl.append(this.layout.format(I,F,H,G))}};var v=function(){};v.prototype={getStyle:function(F){var G;if(F===C.LEVEL.ERROR){G="color:red"}else{if(F===C.LEVEL.WARN){G="color:orange"}else{if(F===C.LEVEL.DEBUG){G="color:green"}else{if(F===C.LEVEL.TRACE){G="color:green"}else{if(F===C.LEVEL.INFO){G="color:grey"}else{G="color:yellow"}}}}}return G},format:function(I,F,H,G){return'<div style="'+this.getStyle(F)+'">['+I+"]["+w(F)+"]["+(H||"main")+"]-"+G+"</div>"}};var n=function(){this.array=[]};n.prototype={push:function(F){this.array[this.array.length]=F;return this.array.length},pull:function(){if(this.array.length>0){var G=this.array[0];for(var F=0;F<this.array.length-1;F++){this.array[F]=this.array[F+1]}this.array.length=this.array.length-1;return G}return null},length:function(){return this.array.length}};var c=function(F){this.loggingUrl=F;this.isInProgress=false;this.threshold=C.LEVEL.INFO;this.bufferSize=20;this.timeout=2000;this.loggingEventMap=[];this.layout=new C.JSONLayout();this.httpRequest=null;this.timer=undefined};function r(){var F=this;if(this.isInProgress===true){setTimeout(function(){r.call(F)},100)}else{this.send()}}c.prototype={getLevel:function(){return this.threshold},setLevel:function(F){this.threshold=F},doAppend:function(J,F,I,H){this.loggingEventMap.push([J,F,I,H]);if(this.loggingEventMap.length<=this.bufferSize||this.isInProgress===true){var G=this;if(this.timer===undefined){this.timer=setTimeout(function(){r.call(G)},100)}}if(this.loggingEventMap.length>=this.bufferSize&&this.isInProgress===false){if(this.timer!==undefined){clearTimeout(this.timer)}this.send()}},send:function(){if(this.loggingEventMap.length>0){this.isInProgress=true;var G=[];var L;for(var H=0,J=this.loggingEventMap.length;H<J&&H<this.bufferSize;H++){L=this.loggingEventMap.shift();G.push(this.layout.format(L[0],L[1],L[2],L[3]))}var I=this.layout.getHeader();I+=G.join(this.layout.getSeparator());I+=this.layout.getFooter();var F=this;if(this.httpRequest===null){this.httpRequest=this.getXmlHttpRequest()}this.httpRequest.onreadystatechange=function(){F.onReadyStateChanged.call(F)};this.httpRequest.open("POST",this.loggingUrl,true);this.httpRequest.setRequestHeader("Content-type","application/x-www-form-urlencoded");this.httpRequest.setRequestHeader("Content-length",I.length);this.httpRequest.send(I);F=this;try{setTimeout(function(){F.httpRequest.onreadystatechange=function(){};F.httpRequest.abort();F.isInProgress=false;if(F.loggingEventMap.length>0){F.send()}},this.timeout)}catch(K){}}},onReadyStateChanged:function(){var F=this.httpRequest;if(this.httpRequest.readyState!==4){return}var G=((typeof F.status==="undefined")||F.status===0||(F.status>=200&&F.status<300));if(G){this.isInProgress=false}else{}},getXmlHttpRequest:function(){var F=false;try{if(window.XMLHttpRequest){F=new XMLHttpRequest();if(F.overrideMimeType){F.overrideMimeType(this.layout.getContentType())}}else{if(window.ActiveXObject){try{F=new ActiveXObject("Msxml2.XMLHTTP")}catch(G){F=new ActiveXObject("Microsoft.XMLHTTP")}}}}catch(G){F=false}if(!F){throw"browser don't support AJAX"}return F}};var D=function(){};D.prototype={format:function(J,F,I,G){var H='{\n "LoggingEvent": {\n';H+='\t"category": "'+(I||"main")+'",\n';H+='\t"level": "'+w(F)+'",\n';H+='\t"message": "'+G+'",\n';H+='\t"timestamp": "'+J+'"\n';H+="}\n}";return H},getContentType:function(){return"text/json"},getHeader:function(){var F="unknown";try{F=navigator.userAgent}catch(G){F="unknown"}var H="unknown";try{H=location.href}catch(G){H="unknown"}return'{"ClientInfo" : {\n\t"useragent": "'+F+'",\n\t"referer": "'+H+'"\n},\n"VizLogger": [\n'},getFooter:function(){return"\n]}"},getSeparator:function(){return",\n"}};var t=function(){};t.prototype={format:function(J,F,H,G){var I='<vizLogger:event category="';I+=(H||"main")+'" level="';I+=w(F)+'" timestamp="';I+=J+'">\n';I+="\t<vizLogger:message><![CDATA["+this.escapeCdata(G)+"]]></vizLogger:message>\n";I+="</vizLogger:event>";return I},getContentType:function(){return"text/xml"},getHeader:function(){var F="unknown";try{F=navigator.userAgent}catch(G){F="unknown"}var H="unknown";try{H=location.href}catch(G){H="unknown"}return'<vizLogger:eventSet useragent="'+F+'" referer="'+H.replace(/&/g,"&amp;")+'">\n'},getFooter:function(){return"</vizLogger:eventSet>\n"},getSeparator:function(){return"\n"},escapeCdata:function(F){return F.replace(/\]\]>/,"]]>]]&gt;<![CDATA[")}};function w(F){switch(F){case C.LEVEL.TRACE:return"TRACE";case C.LEVEL.DEBUG:return"DEBUG";case C.LEVEL.INFO:return"INFO";case C.LEVEL.WARN:return"WARN";case C.LEVEL.ERROR:return"ERROR"}}var l=false;var B=false;var k=[[],[],[],[]];var E=2000;var A=function(H,G,F){if(k[0].length===E){z()}k[0].push(Date.now());k[1].push(H);k[2].push(G);k[3].push(F.toString())};var q=function(H,G,F){d();A(H,G,F)};var h=e;var g=function(){B=true;h=q};var d=function(){B=false;h=A;setTimeout(function(){f()},100)};var o=0;var m=function(){return o++};var u={};var C={LEVEL:{TRACE:5000,DEBUG:10000,INFO:20000,WARN:30000,ERROR:40000,NO:Number.MAX_VALUE},isEnabled:function(){return l},enable:function(){h=A;l=true;setTimeout(function(){f()},100)},disable:function(){z();h=e;l=false},toggleEnable:function(){if(l){this.disable()}else{this.enable()}},addAppender:function(){var H=m();var G,F;if(arguments.length===1){G=H;F=arguments[0]}else{if(arguments.length>=2){G=arguments[0];F=arguments[1]}}if(typeof F==="object"&&F.doAppend){if(u[G]!==undefined){return}z();u[G]=F;return G}},setAppenders:function(I){u=[];for(var H=0,G=I.length;H<G;H++){var F=I[H];if(F.appenderKey){this.addAppender(F.appenderKey,F.appender)}else{this.addAppender(F.appender)}}},removeAppender:function(F){if(u[F]===undefined){return false}z(u[F]);return(delete u[F])},getAppender:function(F){return u[F]},ConsoleAppender:j,DivAppender:b,AjaxAppender:c,DefaultLayout:x,HTMLLayout:v,XMLLayout:t,JSONLayout:D,trace:function(G,F){h(C.LEVEL.TRACE,F,G)},debug:function(G,F){h(C.LEVEL.DEBUG,F,G)},info:function(G,F){h(C.LEVEL.INFO,F,G)},warn:function(G,F){h(C.LEVEL.WARN,F,G)},error:function(G,F){h(C.LEVEL.ERROR,F,G)}};u["[default]"]=new C.ConsoleAppender();return C});sap.riv.module({qname:"sap.riv.graphics.CanvasHelper",version:"3.4.0"},[{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.RIVExCanvasMgr",version:"3.4.0"},{qname:"sap.riv.core.UADetector",version:"3.4.0"},{qname:"sap.riv.core.Logger",version:"3.4.0"}],function Setup(a,q,o,h,s){var r=(function(){if(sap&&sap.common&&sap.common.html&&sap.common.html.HDCanvas){return h.devicePixelRatio()}else{return 1}})();var l=jQuery;if(!l){q.error("Cannot find jQuery")}var e=function(t){this._canvas2DContext=t;this._id=l(t.canvas).attr("id")};var g=e.prototype;g.save=function(){this._canvas2DContext.save()};g.restore=function(){this._canvas2DContext.restore()};g.scale=function(t,u){this._canvas2DContext.scale(t,u)};g.rotate=function(t){this._canvas2DContext.rotate(t)};g.translate=function(t,u){if(!(t===0&&u===0)){this._canvas2DContext.translate(t,u)}};g.transform=function(u,t,z,x,w,v){this._canvas2DContext.transform(u,t,z,x,w,v)};g.setTransform=function(u,t,z,x,w,v){this._canvas2DContext.transform(u,t,z,x,w,v)};g.setAlpha=function(t){this._canvas2DContext.globalAlpha=t};g.setCompositeOperation=function(t){this._canvas2DContext.globalCompositeOperation=t};g.setStrokeStyle=function(t){this._canvas2DContext.strokeStyle=t};g.setFillStyle=function(t){this._canvas2DContext.fillStyle=t};g.setLineWidth=function(t){this._canvas2DContext.lineWidth=t};g.setLineCap=(function(){if(h.isFirefox()&&parseFloat(h.version())<4){return q.noop}else{return function(t){this._canvas2DContext.lineCap=t}}})();g.setLineJoin=(function(){if(h.isFirefox()&&parseFloat(h.version())<4){return q.noop}else{return function(t){this._canvas2DContext.lineJoin=t}}})();g.setMiterLimit=function(t){this._canvas2DContext.miterLimit=t};g.setShadowStyle=function(t,w,v,u){this._canvas2DContext.shadowOffsetX=t;this._canvas2DContext.shadowOffsetY=w;this._canvas2DContext.shadowBlur=v;this._canvas2DContext.shadowColor=u};g.clearRect=function(u,w,v,t){this._canvas2DContext.clearRect(u,w,v,t)};g.fillRect=function(u,w,v,t){this._canvas2DContext.fillRect(u,w,v,t)};g.strokeRect=function(u,w,v,t){this._canvas2DContext.strokeRect(u,w,v,t)};g.beginPath=function(){this._canvas2DContext.beginPath()};g.closePath=function(){this._canvas2DContext.closePath()};g.moveTo=function(t,u){this._canvas2DContext.moveTo(t,u)};g.lineTo=function(t,u){this._canvas2DContext.lineTo(t,u)};g.quadraticCurveTo=function(v,u,t,w){this._canvas2DContext.quadraticCurveTo(v,u,t,w)};g.bezierCurveTo=function(v,u,z,w,t,A){this._canvas2DContext.bezierCurveTo(v,u,z,w,t,A)};g.arcTo=function(v,x,u,w,t){this._canvas2DContext.arcTo(v,x,u,w,t)};g.rect=function(u,w,v,t){this._canvas2DContext.rect(u,w,v,t)};g.arc=function(u,A,t,w,v,z){this._canvas2DContext.arc(u,A,t,w,v,z)};g.fill=function(){this._canvas2DContext.fill()};g.stroke=function(){this._canvas2DContext.stroke()};g.clip=function(){this._canvas2DContext.clip()};g.setFont=function(t){this._canvas2DContext.font=t};g.setTextAlign=function(t){this._canvas2DContext.textAlign=t};g.setTextBaseline=function(t){this._canvas2DContext.textBaseline=t};g.fillText=function(v,t,w,u){if(u!==undefined){this._canvas2DContext.fillText(v,t,w,u)}else{this._canvas2DContext.fillText(v,t,w)}};g.strokeText=function(v,t,w,u){if(a.isDefined(u)){this._canvas2DContext.strokeText(v,t,w,u)}else{this._canvas2DContext.strokeText(v,t,w)}};g.measureText=function(t){return this._canvas2DContext.measureText(t)};g.drawImage=function(v,u,t){if(v instanceof n){this._canvas2DContext.drawImage(v._canvas,u,t)}else{this._canvas2DContext.drawImage(v,u,t)}};g.createLinearGradient=function(u,w,t,v){return this._canvas2DContext.createLinearGradient(u,w,t,v)};g.createRadialGradient=function(w,z,v,u,x,t){return this._canvas2DContext.createRadialGradient(w,z,v,u,x,t)};var n=function(t){this._jqCanvas=t;this._canvas=t.get(0);this._drawingContext=new e(this._canvas.getContext("2d"))};n.prototype.getContext=function(t){return this._drawingContext};n.prototype.replaceCanvas=function(){var t=this._jqCanvas.parent();this._jqCanvas.detach();this._jqCanvas.appendTo(t);this._canvas.clientWidth};n.prototype.toDataURL=function(){return this._canvas.toDataURL.apply(this._canvas,arguments)};n.prototype.width=function(t){if(t!==undefined){t=~~(t+0.5);this._canvas.style.width=t+"px";this._canvas.width=t*r;return this}else{return this._canvas.width}};n.prototype.height=function(t){if(t!=undefined){t=~~(t+0.5);this._canvas.style.height=t+"px";this._canvas.height=t*r;return this}else{return this._canvas.height}};n.prototype.bind=function(t,u){this._jqCanvas.bind(t,u)};var c=0;var b=function(){return"can:"+c++};var d=o;var m=function(w,t,v){w=~~(w+0.5);t=~~(t+0.5);var u;if(window.__IS_IN_RHINO){var x=document.createElement("canvas");if(!t||t<=0){t=1}if(!w||w<=0){w=1}x.height=t;x.width=w;x.id=b();u=l(x);if(v){u.appendTo(v)}}else{if(h.isIE()&&parseFloat(h.version())<9){if(typeof FlashCanvas!="undefined"){var x=document.createElement("canvas");u=l(x).attr("id",b());if(v){u.appendTo(v)}else{l("body").append(x)}FlashCanvas.initElement(x);u.attr("height",t).attr("width",w);x.style.width=w+"px";x.style.height=t+"px"}else{var x=document.createElement("rivcanvas");u=l(x).attr("id",b()).attr("height",t).attr("width",w);x.style.width=w+"px";x.style.height=t+"px";if(v){u.appendTo(v)}d.initElement(x)}}else{var x=document.createElement("canvas");if(sap&&sap.common&&sap.common.html&&sap.common.html.HDCanvas){sap.common.html.HDCanvas.enableHD(x)}u=l(x).attr("id",b()).attr("height",t*r).attr("width",w*r);x.style.width=w+"px";x.style.height=t+"px";if(v){u.appendTo(v)}}}return new n(u)};var k=undefined;var f=function(){if(!k){k=m(1,1).getContext("2d")}return k};var j={createCanvasElement:m,getCanvasElement:function(t){return new n(t)},createColorStyle:function(t){var A;if(!t){return"#000000"}switch(t.t){case"css":A=t.v;break;case"lg":var u=t.s;var w=t.e;var D=t.st;A=f().createLinearGradient(u.x,u.y,w.x,w.y);for(var x=0,z=D.length,C;x<z;x++){C=D[x];A.addColorStop(C.o,C.v)}break;case"rg":var u=t.s.c;var B=t.s.r;var w=t.e.c;var v=t.e.r;var D=t.st;A=f().createRadialGradient(u.x,u.y,B,w.x,w.y,v);for(var x=0,z=D.length,C;x<z;x++){C=D[x];A.addColorStop(C.o,C.v)}break;default:A=t}return A}};return j});sap.riv.module({qname:"sap.riv.graphics.Event",version:"3.4.0"},function Setup(){var a=function(d,c,e){this._type=d;this._targetLayer=this._currentLayer=c;this._canBubbling=e||false;this._timestamp=+new Date};var b=a.prototype;b._setCurrentLayer_=function(c){this._currentLayer=c};b.type=function(){return this._type};b.timestamp=function(){return this._timestamp};b.targetLayer=function(){return this._targetLayer};b.currentLayer=function(){return this._currentLayer};b.isInBubbling=function(){return this._targetLayer.id()!=this._currentLayer.id()};b.shouldBubble=function(){return this._canBubbling};b.stopPropagation=function(){this._canBubbling=false};return a});sap.riv.module({qname:"sap.riv.viz.shared.type.BasicType",version:"3.4.0"},[{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"}],function Setup(b){var a=function(){this.name="basicType"};a.prototype.getName=function(){return this.name};a.prototype.validateValue=b.noop;return a});sap.riv.module({qname:"sap.riv.graphics.Drawable",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TransformHelper",version:"3.4.0"}],function Setup(d,c,b){var f=(function(){var g=0;return function(){return"s:"+g++}})();var e=b.identityMatrix();var a=function(g){this._isVisible=true;this._id=f();this._shadowSetting=undefined;this._compositionSetting=undefined;this._tm=e;this._itm=e};a.prototype.id=function(){return this._id};a.prototype.visible=function(g){if(g!==undefined){this._isVisible=g;return this}return this._isVisible};a.prototype.rotateAt=function(g,j,h){this._tm=b.makeTranslateTM(g,j,this._tm);this._itm=b.makeTranslateInvertTM(g,j,this._itm);this._tm=b.makeRotateTM(h,this._tm);this._itm=b.makeRotateInvertTM(h,this._itm);return this};a.prototype.rotate=function(g){this._tm=b.makeRotateTM(g,this._tm);this._itm=b.makeRotateInvertTM(g,this._itm);return this};a.prototype.translate=function(g,h){this._tm=b.makeTranslateTM(g,h,this._tm);this._itm=b.makeTranslateInvertTM(g,h,this._itm);return this};a.prototype.scale=function(g,h){this._tm=b.makeScaleTM(g,h,this._tm);this._itm=b.makeScaleInvertTM(g,h,this._itm);return this};a.prototype.skew=function(g,h){this._tm=b.makeSkewTM(g,h,this._tm);this._itm=b.makeInvertSkewTM(g,h,this._itm);return this};a.prototype.customTransform=function(j,h,o,n,l,k){var g=[[j,o,l],[h,n,k],[0,0,1]];this._tm=b.makeCustomTM(g,this._tm);this._itm=b.makeCustomInvertTM(g,this._itm);return this};a.prototype.setTransform=function(h,g,m,l,k,j){this._tm=[[h,m,k],[g,l,j],[0,0,1]];this._itm=b.makeCustomInvertTM(this._tm,e);return this};a.prototype.shadow=function(g){if(g!==undefined){if(g!==false){this._shadowSetting={ox:g.offsetX,oy:g.offsetY,blur:g.blur,color:g.color}}else{this._shadowSetting=undefined}return this}if(this._shadowSetting){return d.extend({},this._shadowSetting)}};a.prototype.compositionMode=function(g){if(g!==undefined){if(g!==false){this._compositionSetting={alpha:g.alpha===undefined?1:g.alpha,operation:g.operation}}else{this._compositionSetting=undefined}return this}if(this._compositionSetting){return d.extend({},this._compositionSetting)}};a.prototype.pointIn=function(h){var k=this._itm;var g=h.x;var j=h.y;return this.doPointInTest({x:k[0][0]*g+k[0][1]*j+k[0][2],y:k[1][0]*g+k[1][1]*j+k[1][2]})};a.prototype.doPointInTest=c.unimplemented;a.prototype.drawTo=function(h){if(!this._isVisible){return}var k=h;if(!b.isIdentityMatrix(this._tm)){var j=this._tm;k.transform(j[0][0],j[1][0],j[0][1],j[1][1],j[0][2],j[1][2])}if(this._shadowSetting){var g=this._shadowSetting;k.setShadowStyle(g.ox,g.oy,g.blur,g.color)}if(this._compositionSetting){var l=this._compositionSetting;k.setAlpha(l.alpha);k.setCompositeOperation(l.operation||"source-over")}this.doDraw(k)};a.prototype.doDraw=c.noop;return a});sap.riv.module({qname:"sap.riv.core.utils.LinkedHashMap",version:"3.4.0"},[{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"}],function Setup(c){var b=function(e,f){this._lhm=e;this._reverse=f||false;this._count=e._length;this._cursor=this._reverse?this._lhm._last:this._lhm._head;if(this._reverse){this.hasMore=this._hasMoreInReverse}else{this.hasMore=this._hasMoreInOrder}};b.prototype._hasMoreInOrder=function(){if(this._count!==0){if(this._count===this._lhm._length){this._cursor=this._lhm._head}else{this._cursor=this._cursor.next}this._count--;return true}else{return false}};b.prototype._hasMoreInReverse=function(){if(this._count!==0){if(this._count===this._lhm._length){this._cursor=this._lhm._last}else{this._cursor=this._cursor.prev}this._count--;return true}else{return false}};b.prototype.hasMore=c.noop;b.prototype.next=function(){var e={key:this._cursor.key,value:this._cursor.value};return e};b.prototype.nextValue=function(){return this._cursor.value};b.prototype.nextKey=function(){return this._cursor.key};b.prototype.reset=function(){this._count=this._lhm._length};var d=function(){this._map={};this._head=undefined;this._last=undefined;this._length=0};var a=d.prototype;a.add=function(g,j){var e=this._map;var f=null;var h={prev:null,key:g,value:j,next:null};if(!this._length){this._head=this._last=h}if(!e.hasOwnProperty(g)){e[g]=h;this._length++;h.prev=this._last;this._last.next=h;this._last=h;this._last.next=this._head;this._head.prev=this._last}else{f=e[g].value;e[g].value=j}return f};a.addAll=function(e){var f=e.getIterator();var g;while(f.hasMore()){g=f.next();this.add(g.key,g.value)}};a.insertBefore=function(f,k,h){var e=this._map;if(!e.hasOwnProperty(f)&&e.hasOwnProperty(h)){var j={prev:null,key:f,value:k,next:null};var g=e[h];if(g!==this._head){j.prev=g.prev;g.prev.next=j}else{this._head=j;j.prev=this._last}j.next=g;g.prev=j;e[f]=j;this._length++;return k}};a.insertAfter=function(f,k,j){var e=this._map;if(!e.hasOwnProperty(f)&&e.hasOwnProperty(j)){var h={prev:null,key:f,value:k,next:null};var g=e[j];if(g!==this._last){h.next=g.next;g.next.prev=h}else{this._last=h;this._last.next=this._head}g.next=h;h.prev=g;e[f]=h;this._length++;return k}};a.replace=function(h,f,g){var e=this._map;if(!e.hasOwnProperty(f)&&e.hasOwnProperty(h)){var j={prev:null,key:f,value:g,next:null};var k=e[h];j.prev=k.prev;j.next=k.next;k.prev.next=j;k.next.prev=j;if(this._head===k){this._head=j}if(this._last===k){this._last=j}e[f]=j;delete e[h];return k.value}};a.get=function(f){var e=this._map;if(e.hasOwnProperty(f)){return e[f].value}return null};a.getFirstInsert=function(){return this._head?this._head.value:null};a.getLastInsert=function(){return this._last?this._last.value:null};a.moveToLast=function(f){var e=this._map;if(e.hasOwnProperty(f)&&this._last.key!==f){var g=e[f];g.prev.next=g.next;g.next.prev=g.prev;g.prev=this._last;g.next=this._last.next;this._last.next=g;this._last=g;this._head=g.next;this._head.prev=g}};a.moveToFirst=function(f){var e=this._map;if(e.hasOwnProperty(f)&&this._head.key!==f){var g=e[f];g.prev.next=g.next;g.next.prev=g.prev;g.next=this._head;g.prev=this._head.prev;this._head.prev=g;this._head=g;this._last=g.prev;this._last.next=g}};a.has=function(f){var e=this._map;return e.hasOwnProperty(f)};a.remove=function(g){var e=this._map;var f;if(e.hasOwnProperty(g)){var h=e[g];f=h.value;if(h===this._head){this._head=h.next}else{if(h===this._last){this._last=h.prev}else{h.prev.next=h.next;h.next.prev=h.prev}}delete e[g];this._length--;if(this._length===0){this._head=this._last=undefined}return f}};a.purgeAll=function(){this._map={};this._head=undefined;this._last=undefined;this._length=0};a.isEmpty=function(){return this._length==0};a.length=function(){return this._length};a.getIterator=function(e){return new b(this,e)};return d});sap.riv.module({qname:"sap.riv.graphics.shape.ClosedShape",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.graphics.CanvasHelper",version:"3.4.0"},{qname:"sap.riv.graphics.Drawable",version:"3.4.0"}],function Setup(d,c,b){var a=d.derive(b,{constructor:function(){this._bdr={width:0,color:"#000000",lineJoin:"miter",miterLimit:10}},borderWidth:function(e){if(e!=undefined&&e>=0){this._bdr.width=e;return this}return this._bdr.width},borderColor:function(e){if(e!=undefined){this._bdr.color=c.createColorStyle(e);return this}return this._bdr.color},borderJoin:function(e){if(e!==undefined){this._bdr.lineJoin=e;return this}return this._bdr.lineJoin},borderMiterLimit:function(e){if(e!==undefined&&e>0){this._bdr.miterLimit=e;return this}return this._bdr.miterLimit},drawBorder:function(f){if(this._bdr.width>0){var e=this._bdr;f.save();f.setStrokeStyle(e.color);f.setLineWidth(e.width||1);f.setLineJoin(e.lineJoin||"#miter");if(e.lineJoin==="miter"&&e.miterLimit){f.setMiterLimit(e.miterLimit)}f.stroke();f.restore()}}});return a});sap.riv.module({qname:"sap.riv.viz.shared.series.SeriesItem",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"}],function Setup(e,b,c){var d=function(){this._shapes={main:null,decorating:null,dataLabels:null};this._data=null;this._dataIndex=-1;this._status=0;this._series=null;this._position={}};d.status={normal:1,invisible:2,highlighted:4,hovered:8,alerted:16,lowlighted:32};var a={setSeries:function(f){this._series=f},getSeries:function(){if(this._series===null){c.error("Has not set series yet")}return this._series},setData:function(f){this._data=f},getData:function(){if(this._data===null){c.error("Has not set data yet")}return this._data},setDataIndex:function(f){this._dataIndex=f},getDataIndex:function(){return this._dataIndex},setPosition:function(f){this._position=f},getPosition:function(){return this._position},setMainShapes:function(f){this._shapes.main=f},getMainShapes:function(){return this._shapes.main},setDataLabelShapes:function(f){this._shapes.dataLabels=f},getDataLabelShapes:function(){return this._shapes.dataLabels},setDecoratingShapes:function(f){this._shapes.decorating=f},getDecoratingShapes:function(){return this._shapes.decorating},containsPoint:function(g){if(this._shapes.main!==null){for(var h=0,f=this._shapes.main.length;h<f;h++){if(this._shapes.main[h].pointIn(g)){return true}}}return false},setStatus:function(f){this._status=f},getStatus:function(){return this._status},isVisible:function(){return(this._status&d.status.invisible)===0},isHighlighted:function(){return(this._status&d.status.highlighted)!==0},isLowlighted:function(){return(this._status&d.status.lowlighted)!==0},isHovered:function(){return(this._status&d.status.hovered)!==0}};e.extend(d.prototype,a);return d});sap.riv.module({qname:"sap.riv.core.Observable",version:"3.4.0"},[{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"}],function Setup(a){var c=function(g){this._events={};var f=this.constructor;while(f){var e=f.prototype.events,d;if(e){d=e.length;while(d--){this.addEvents(e[d])}}f=f.superclazz}if(g){if(g.listeners){this.addListeners(g.listeners);delete g.listeners}}};var b=c.prototype;b.addEvents=function(){var f=this._events,e=arguments,d=arguments.length;while(d--){if(typeof e[d]==="string"){f[e[d]]=f[e[d]]||[]}}};b.getSupportedEvents=function(){var d=[];for(var f in this._events){d.push(f)}return d};b.addListeners=function(k){var f;if(a.isArray(k)){f=k}else{f=[k]}var d=f.length,e,h;var j=this._events;while(d--){e=f[d];h=e.eventName;if(j.hasOwnProperty(h)){var g=j[h];if(!this.isListening(h,e.listener,e.scope)){g[g.length]={fn:e.listener,scp:e.scope,optArgs:e.optionalArgs}}}}return this};b.findListener=function(e,j,h){var k=this._events;if(!k.hasOwnProperty(e)){return -1}var g=k[e],d=g.length,f;while(d--){f=g[d];if(h){if(f.fn==j&&f.scp==h){return d}}else{if(f.fn==j){return d}}}return -1};b.isListening=function(d,f,e){return this.findListener(d,f,e)>-1};b.removeListener=function(f,j,h){var k=this._events;if(k.hasOwnProperty(f)){var g=k[f];var e=g.length,d;while(e--){d=this.findListener(f,j,h);if(d>-1){g.splice(d,1);e=g.length}}}return this};b.removeAllListeners=function(d){var e=this._events;if(e.hasOwnProperty(d)){e[d]=[]}return this};b.hasListener=function(d){return this._events[d]&&this._events[d].length>0};b.purgeListeners=function(){var f=this._events;for(var d in f){f[d]=[]}};b.fireEvent=function(f){var j=Array.prototype.slice.call(arguments,1);var k=this._events;if(k.hasOwnProperty(f)){var g=k[f],e;for(var h=0,d=g.length;h<d;h++){e=g[h];if(e.optArgs){j.push(e.optArgs)}e.fn.apply(e.scp||this||window,j)}}};b.on=b.addListeners;b.un=b.removeListener;return c});sap.riv.module({qname:"sap.riv.graphics.shape.FillableShape",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.graphics.CanvasHelper",version:"3.4.0"},{qname:"sap.riv.graphics.shape.ClosedShape",version:"3.4.0"}],function Setup(d,b,a){var c=d.derive(a,{constructor:function(){this._fill=undefined},fillingColor:function(e){if(e!==undefined){if(e!==false){this._fill=b.createColorStyle(e)}else{this._fill=undefined}return this}if(this._fill){return this._fill}},fillShape:function(e){if(this._fill){e.save();e.setFillStyle(this._fill);e.fill();e.restore()}}});return c});sap.riv.module({qname:"sap.riv.viz.shared.type.Array",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.type.BasicType",version:"3.4.0"}],function Setup(e,c,d,b){var a=e.derive(b,{constructor:function(){this.name="Array"},validateValue:function(g){if(!c.isExist(g)){return true}if(!c.isArray(g)){return false}for(var f=g.length;f--;){if(!this.validateItem(g[f],null)){return false}}return true},validateItem:function(f,g){return true}});return a});sap.riv.module({qname:"sap.riv.graphics.ClipRegion",version:"3.4.0"},function Setup(){var b=(function(){var c=0;return function(){return"cr:"+c++}})();var a=function(g){this._id=b();this._spths=[];switch(g.type){case"rect":var c=g.x,j=g.y,d=g.w,f=g.h;var e=[];e.push({pd:"orig",x:c,y:j});e.push({pd:"lnto",x:c+d,y:j});e.push({pd:"lnto",x:c+d,y:j+f});e.push({pd:"lnto",x:c,y:j+f});this._spths.push(e);break;case"path":this._spths=g.spths;break}};a.prototype.id=function(){return this._id};a.prototype.clip=function(f){var m=f;m.beginPath();for(var g=0,e,c=this._spths,j=c.length;g<j;g++){e=c[g];for(var l=0,k,h=e.length;l<h;l++){k=e[l];switch(k.pd){case"orig":m.moveTo(k.x,k.y);break;case"lnto":m.lineTo(k.x,k.y);break;case"spln":m.quadraticCurveTo(k.cx,k.cy,k.x,k.y);break;case"bcur":m.bezierCurveTo(k.c1x,k.c1y,k.c2x,k.c2y,k.x,k.y);break;case"arct":m.arcTo(k.cx,k.cy,k.x,k.y,k.r);break;case"arc":m.arc(k.x,k.y,k.r,k.sa,k.ea,!k.cw);break}}m.closePath()}m.clip()};return a});sap.riv.module({qname:"sap.riv.graphics.TouchEvent",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.graphics.Event",version:"3.4.0"}],function Setup(f,a){var c=function(){this.tA=[],this.tM={}};var b=c.prototype;b._addTouch_=function(g){this.tA.push(g);this.tM[g.identifier()]=g};b.length=function(){return this.tA.length};b.item=function(g){if(g>=0&&(g<this.tA.length)){return this.tA[g]}};b.identifiedTouch=function(g){if(g){return this.tM[g]}};var d=function(h,g,j,k){this._id=h;this._targetLayer=g;this._localXY=g.convertPointFromGlobal(j);this._pageXY=k};d.prototype.identifier=function(){return this._id};d.prototype.targetLayer=function(){return this._targetLayer};d.prototype.localXY=function(){return{x:this._localXY.x,y:this._localXY.y}};d.prototype.pageXY=function(){return{x:this._pageXY.x,y:this._pageXY.y}};var e=f.derive(a,{constructor:function(j,g,l,m,h,k){this._relatedTarget=undefined;this._touches=m;this._targetTouches=k;this._changedTouches=h},touches:function(){return this._touches},targetTouches:function(){return this._targetTouches},changedTouches:function(){return this._changedTouches}});e.createTouch=function(h,g,j,k){return new d(h,g,j,k)};e.createTouchList=function(){return new c};return e});sap.riv.module({qname:"sap.riv.graphics.shape.DrawableRect",version:"3.4.0"},[{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.graphics.shape.ClosedShape",version:"3.4.0"},{qname:"sap.riv.core.Math",version:"3.4.0"}],function Setup(d,e,b,a){var c=e.derive(b,{constructor:function(){this._anchor="tl";this._width=0;this._height=0;this._cornerRadius=0;this._vtx=[[0,0],[0,0],[0,0],[0,0]]},_calcVertices:function(j,g){var l=g;var h=this._vtx;var k=this._width;var f=this._height;switch(j){case"tl":h[0][0]=l[0];h[0][1]=l[1];h[1][0]=l[0]+k;h[1][1]=l[1];h[2][0]=l[0]+k;h[2][1]=l[1]+f;h[3][0]=l[0];h[3][1]=l[1]+f;break;case"tc":h[0][0]=l[0]-k/2;h[0][1]=l[1];h[1][0]=l[0]+k/2;h[1][1]=l[1];h[2][0]=l[0]+k/2;h[2][1]=l[1]+f;h[3][0]=l[0]-k/2;h[3][1]=l[1]+f;break;case"tr":h[0][0]=l[0]-k;h[0][1]=l[1];h[1][0]=l[0];h[1][1]=l[1];h[2][0]=l[0];h[2][1]=l[1]+f;h[3][0]=l[0]-k;h[3][1]=l[1]+f;break;case"rc":h[0][0]=l[0]-k;h[0][1]=l[1]-f/2;h[1][0]=l[0];h[1][1]=l[1]-f/2;h[2][0]=l[0];h[2][1]=l[1]+f/2;h[3][0]=l[0]-k;h[3][1]=l[1]+f/2;break;case"br":h[0][0]=l[0]-k;h[0][1]=l[1]-f;h[1][0]=l[0];h[1][1]=l[1]-f;h[2][0]=l[0];h[2][1]=l[1];h[3][0]=l[0]-k;h[3][1]=l[1];break;case"bc":h[0][0]=l[0]-k/2;h[0][1]=l[1]-f;h[1][0]=l[0]+k/2;h[1][1]=l[1]-f;h[2][0]=l[0]+k/2;h[2][1]=l[1];h[3][0]=l[0]-k/2;h[3][1]=l[1];break;case"bl":h[0][0]=l[0];h[0][1]=l[1]-f;h[1][0]=l[0]+k;h[1][1]=l[1]-f;h[2][0]=l[0]+k;h[2][1]=l[1];h[3][0]=l[0];h[3][1]=l[1];break;case"lc":h[0][0]=l[0];h[0][1]=l[1]-f/2;h[1][0]=l[0]+k;h[1][1]=l[1]-f/2;h[2][0]=l[0]+k;h[2][1]=l[1]+f/2;h[3][0]=l[0];h[3][1]=l[1]+f/2;break;case"c":h[0][0]=l[0]-k/2;h[0][1]=l[1]-f/2;h[1][0]=l[0]+k/2;h[1][1]=l[1]-f/2;h[2][0]=l[0]+k/2;h[2][1]=l[1]+f/2;h[3][0]=l[0]-k/2;h[3][1]=l[1]+f/2;break}},_adjustVertices:function(){var g=this._vtx;var f=g[1][0]-g[0][0];var j=g[3][1]-g[0][1];switch(this._anchor){case"tl":this._calcVertices("tl",g[0]);break;case"tc":this._calcVertices("tc",[g[0][0]+f/2,g[0][1]]);break;case"tr":this._calcVertices("tr",g[1]);break;case"rc":this._calcVertices("rc",[g[1][0],g[1][1]+j/2]);break;case"br":this._calcVertices("br",g[2]);break;case"bc":this._calcVertices("bc",[g[2][0]-f/2,g[2][1]]);break;case"bl":this._calcVertices("bl",g[3]);break;case"lc":this._calcVertices("lc",[g[3][0],g[3][1]-j/2]);break;case"c":this._calcVertices("c",[g[0][0]+f/2,g[0][1]+j/2]);break}this._cornerRadius=a.min(this._width/2,this._height/2,this._cornerRadius)},size:function(h){if(h!==undefined){var g=false;var j=h.width>0?h.width:0;if(this._width!==j){this._width=j;g=true}var f=h.height>0?h.height:0;if(this._height!==f){this._height=f;g=true}if(g){this._adjustVertices()}return this}return{width:this._width,height:this._height}},width:function(f){if(f!==undefined){f=f>0?f:0;this._width=f;this._adjustVertices();return this}return this._width},height:function(f){if(f!==undefined){f=f>0?f:0;this._height=f;this._adjustVertices();return this}return this._height},topLeft:function(f){if(f!==undefined){this._anchor="tl";this._calcVertices("tl",f);return this}return{x:this._vtx[0][0],y:this._vtx[0][1]}},topCenter:function(f){if(f!==undefined){this._anchor="tc";this._calcVertices("tc",f);return this}return{x:this._vtx[0][0]+this._width/2,y:this._vtx[0][1]}},topRight:function(f){if(f!==undefined){this._anchor="tr";this._calcVertices("tr",f);return this}return{x:this._vtx[1][0],y:this._vtx[1][1]}},rightCenter:function(f){if(f!==undefined){this._anchor="rc";this._calcVertices("rc",f);return this}return{x:this._vtx[1][0],y:this._vtx[1][1]+this._height/2}},bottomRight:function(f){if(f!==undefined){this._anchor="br";this._calcVertices("br",f);return this}return{x:this._vtx[2][0],y:this._vtx[2][1]}},bottomCenter:function(f){if(f!==undefined){this._anchor="bc";this._calcVertices("bc",f);return this}return{x:this._vtx[2][0]-this._width/2,y:this._vtx[2][1]}},bottomLeft:function(f){if(f!==undefined){this._anchor="bl";this._calcVertices("bl",f);return this}return{x:this._vtx[3][0],y:this._vtx[3][1]}},leftCenter:function(f){if(f!==undefined){this._anchor="lc";this._calcVertices("lc",f);return this}return{x:this._vtx[3][0],y:this._vtx[3][1]-this._height/2}},center:function(f){if(f!==undefined){this._anchor="c";this._calcVertices("c",f);return this}return{x:this._vtx[0][0]+this._width/2,y:this._vtx[0][1]+this._height/2}},cornerRadius:function(f){if(f!==undefined){if(f>=0){var g=a.min(this._width/2,this._height/2);this._cornerRadius=f>g?g:f}return this}return this._cornerRadius},_antialiasForMin:function(h,f){if(window.__IS_IN_RHINO==true){return parseInt(f)}var j=a.round(f);var g=a.round(h);j=j+g/2;if(j==0.5&&g==1){j=1.5}return j},_antialiasForMax:function(h,f){if(window.__IS_IN_RHINO==true){return parseInt(f)}var j=a.round(f);var g=a.round(h);j=j-g/2;if(j==0.5&&g==1){j=1.5}return j},doDraw:function(g){var f=this._vtx;var r=f[0][0],k=(f[0][0]+f[1][0])/2,n=f[1][0];var o=f[0][1],j=(f[0][1]+f[3][1])/2,m=f[3][1];if(this.borderWidth()>0){var h=this.borderWidth();r=this._antialiasForMin(h,r);n=this._antialiasForMax(h,n);o=this._antialiasForMin(h,o);m=this._antialiasForMax(h,m)}else{r=a.round(r);n=a.round(n);o=a.round(o);m=a.round(m)}if(r===n&&o===m){return}var q=g;q.save();q.beginPath();if(this._cornerRadius>0){var l=this._cornerRadius;q.moveTo(r,j);q.arcTo(r,o,k,o,l);q.arcTo(n,o,n,j,l);q.arcTo(n,m,k,m,l);q.arcTo(r,m,r,j,l)}else{q.moveTo(r,o);q.lineTo(n,o);q.lineTo(n,m);q.lineTo(r,m)}q.closePath();q.translate(r,o);this.drawInRect(q);this.drawBorder(q);q.restore()},drawInRect:d.unimplemented,doPointInTest:function(g){var f=g.x;var j=g.y;var h=this._vtx;return h[0][0]<=f&&f<h[2][0]&&h[0][1]<=j&&j<h[2][1]}});return c});sap.riv.module({qname:"sap.riv.viz.shared.series.Series",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.SeriesItem",version:"3.4.0"}],function Setup(f,a,d,e){var c=function(g){this._xAxis=null;this._yAxis=null;this._data=[];this._name=null;this._options=g;this._seriesItems=[];this._index=-1;this._renderer=null};var b={setRenderer:function(g){this._renderer=g},getRenderer:function(){if(this._renderer===null){d.error("Try to get renderer from series without setting it first!")}return this._renderer},addSeriesItem:function(g){g.setSeries(this);this._seriesItems.push(g)},getSeriesItems:function(){return this._seriesItems},setIndex:function(g){this._index=g},getIndex:function(){return this._index},isVisible:function(){for(var h=0,g=this._seriesItems.length;h<g;h++){if(this._seriesItems[h].isVisible()){return true}}return false},getOptions:function(){return this._options},setVisible:function(j){for(var h=0,g=this._seriesItems.length;h<g;h++){if(j===true){this._seriesItems[h].setStatus(this._seriesItems[h].getStatus()&(~e.status.invisible))}else{this._seriesItems[h].setStatus(this._seriesItems[h].getStatus()|e.status.invisible)}}},setXAxis:function(g){this._xAxis=g},setYAxis:function(g){this._yAxis=g},getXAxis:function(){return this._xAxis},getYAxis:function(){return this._yAxis},updateProperties:function(g){if(a.isExist(g)){this._options=g;return this}},setName:function(g){this._name=g},getName:function(){return this._name},setData:function(g){this._data=g},getData:function(){return this._data},getDataRange:function(){var h={max:Number.NEGATIVE_INFINITY,min:Number.POSITIVE_INFINITY};for(var j=0,g=this._data.length;j<g;j++){if(this._data[j].value<h.min){h.min=this._data[j].value}if(this._data[j].value>h.max){h.max=this._data[j].value}}return h}};f.extend(c.prototype,b);return c});sap.riv.module({qname:"sap.riv.viz.shared.utils.NumericFormatUtils",version:"3.4.0"},[{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"}],function Setup(a){var b=sap.common.globalization.NumericFormatManager;var c={getFormatString:function(d,e){if(!a.isExist(d)){return""}if(d.length==0){return""}if(d.length>e){return d[e]}else{return d[d.length-1]}},formatToText:function(f,d,e){return b.formatToText(f,d,e)},formatToTextWithColor:function(h,e,g){var d=b.formatToTextWithColor(h,e,g);var f=b.getFormattedColor(d);if(f){f=c._convertToHexString(f)}return{text:b.getFormattedText(d),color:f}},_convertToHexString:function(f){if(f==null||!a.isNumber(f)||isNaN(f)){return null}var l="#",e=["r","g","b"];var g={r:(f&16711680)>>16,g:(f&65280)>>8,b:f&255};for(var j=0,d=e.length;j<d;j++){var k=e[j],h=g[k].toString(16);if(h.length==1){l+="0"}l+=h}return l}};c._roundToPrecision=function(h,f){var j=h.toString(10);var g=j.split(".");var d=(g&&g.length>1?g[1].length:0);if(d<=f){return h}var e=Math.pow(10,f);return Math.round(h*e)/e};c.toPercentage=function(d,f){var e=c._roundToPrecision(100*d,2).toString();e=e.replace(/\./g,b.getDecimalSeparator());e=e+"%";return e};return c});sap.riv.module({qname:"sap.riv.graphics.MouseEvent",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.graphics.Event",version:"3.4.0"}],function Setup(c,a){var b=c.derive(a,{constructor:function(d,f,e,g,h){this._relatedLayer=undefined;this._targetLocalXY=this._currentLocalXY=this._targetLayer.convertPointFromGlobal(g);this._pageXY={x:h.x,y:h.y}},_setRelatedLayer_:function(d){this._relatedLayer=d},_setCurrentLocalXY_:function(d){this._currentLocalXY=d},relatedLayer:function(){return this._relatedLayer},targetLocalXY:function(){return this._targetLocalXY},currentLocalXY:function(){return this._currentLocalXY},pageXY:function(){return this._pageXY}});return b});sap.riv.module({qname:"sap.riv.core.utils.TextRuler",version:"3.4.0"},[{qname:"sap.riv.core.UADetector",version:"3.4.0"},{qname:"sap.riv.core.utils.RIVExCanvasMgr",version:"3.4.0"},{qname:"sap.riv.core.Math",version:"3.4.0"}],function Setup(f,k,b){var c=k;var g=undefined;var e=function(){if(g){return g}var n;var m=document.body;if(window.__IS_IN_RHINO){n=document.createElement("canvas");m.appendChild(n)}else{if(f.isIE()&&parseFloat(f.version())<9){if(typeof FlashCanvas!="undefined"){n=document.createElement("canvas");m.appendChild(n);FlashCanvas.initElement(n);n.setAttribute("height",1);n.setAttribute("width",1);n.style.width="1px";n.style.height="1px";n.style.display="none"}else{n=document.createElement("rivcanvas");n.setAttribute("height",1);n.setAttribute("width",1);n.style.width="1px";n.style.height="1px";m.appendChild(n);c.initElement(n)}}else{n=document.createElement("canvas");if(sap&&sap.common&&sap.common.html&&sap.common.html.HDCanvas){sap.common.html.HDCanvas.enableHD(n)}n.setAttribute("height",1);n.setAttribute("width",1);n.style.width="1px";n.style.height="1px";n.style.display="none";m.appendChild(n)}}g=n.getContext("2d");return g};var a=/(\d+)(px|em|pt|%)/i;var d=/(x{1,2}-)?(small|medium|large)/i;var l=/\d+\b|bolder|[\s\t]normal|lighter|bold/i;var j={"x-small":9,"xx-small":10,small:13,medium:16,large:18,"x-large":24,"xx-large":32};var h={measureWidth:window.measureWidth||function(m,q){var o=e();o.save();o.font=m;var n=o.measureText(String(q)).width+2;o.restore();return n},measureHeight:function(o,t){var n=a.exec(o);var q=t||10;if(n){var r=0;switch(n[2]){case"em":r=parseFloat(n[1])*q;break;case"%":r=parseFloat(n[1])*q/100;break;case"pt":r=parseFloat(n[1])*1.33;break;case"px":r=parseInt(n[1]);break}return b.ceil(r*1.2)}else{n=d.exec(o);if(n){return b.ceil(j[n[0]]*1.2)}}return undefined},measureWeight:function(o){var n=l.exec(o);var q="normal";if(n){switch(n[0]){case"lighter":case" normal":break;case"bold":case"bolder":case"600":case"700":case"800":case"900":q="bold"}}return q},measureText:function(m,o){var n={};n.width=h.measureWidth(m,o);n.height=h.measureHeight(m);return n}};return h});sap.riv.module({qname:"sap.riv.graphics.Layer",version:"3.4.0"},[{qname:"sap.riv.core.Observable",version:"3.4.0"},{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.LinkedHashMap",version:"3.4.0"},{qname:"sap.riv.core.utils.TransformHelper",version:"3.4.0"},{qname:"sap.riv.graphics.CanvasHelper",version:"3.4.0"},{qname:"sap.riv.graphics.ClipRegion",version:"3.4.0"}],function Setup(j,d,f,h,g,a){var b=0;var c=function(){return b++};var e=d.derive(j,{events:["contentUpdate","focusin","focusout","focus","blur","mouseenter","mouseleave","mousemove","mousedown","mouseup","click","dblclick","touchstart","touchmove","touchend","touchcancel"],constructor:function(k){k=k||{};this._id=c();this._superLayer=undefined;this._currentClipRegion=undefined;this._clipRegions={};this._shape2clip={};this._clip2shapes={};this._content=new f();this._listenOnLayer={};this._ignoreHitTest=false;this._subLayers=new f();this._bgColor=k.bgColor||undefined;this._opacity=1;this._hidden=false;this._clipToBounds=false;this._shouldRasterized=false;this._rasterized=false;this._bitmapCache=g.createCanvasElement(1,1);this._bounds={x:0,y:0,width:0,height:0};this._position={x:0,y:0};this._anchorPoint={x:0.5,y:0.5};this._transform=[[1,0,0],[0,1,0],[0,0,1]];this._calcMatrix={m:undefined,i:undefined};this._init(k)},_init:function(k){if(k.size&&k.position){this._position.x=k.position.x;this._position.y=k.position.y}if(k.size){this._bounds.width=k.size.w;this._bounds.height=k.size.h;this._updateBitmapCache()}if(k.anchor){this._anchorPoint.x=k.anchor.x;this._anchorPoint.y=k.anchor.y}this._calcMatrixChanged=true},calcMatrix:function(){if(this._calcMatrixChanged){this._calcMatrixChanged=false;this._updateCalcMatrix()}return this._calcMatrix},_updateCalcMatrix:function(){this._calcMatrix.m=h.makeTranslateTM(-this._anchorPoint.x*this._bounds.width,-this._anchorPoint.y*this._bounds.height,h.makeCustomTM(this._transform,h.makeTranslateTM(this._position.x,this._position.y)));this._calcMatrix.i=h.makeTranslateInvertTM(-this._anchorPoint.x*this._bounds.width,-this._anchorPoint.y*this._bounds.height,h.makeCustomInvertTM(this._transform,h.makeTranslateInvertTM(this._position.x,this._position.y)))},id:function(){return this._id},shouldRasterized:function(k){if(k!==undefined){this._shouldRasterized=k;this._rasterized=false;this._updateBitmapCache();return this}else{return this._shouldRasterized}},ignoreHitTest:function(k){if(k!==undefined){if(this._ignoreHitTest!==k){this._ignoreHitTest=k}return this}else{return this._ignoreHitTest}},hidden:function(k){if(k!==undefined){if(this._hidden!==k){this._hidden=k;this.fireEvent("contentUpdate")}return this}else{return this._hidden}},opacity:function(k){if(k!==undefined){if(k>=0&&k<=1&&k!=this._opacity){this._opacity=k;this._rasterized=false;this.fireEvent("contentUpdate")}return this}else{return this._opacity}},backgroundColor:function(k){if(k!==undefined){if(k===false){this._bgColor=undefined}else{if(this._bgColor!==k){this._bgColor=k;this._rasterized=false;this.fireEvent("contentUpdate")}}return this}else{return this._bgColor}},bounds:function(n){if(n){var m=this._bounds,l=n;if(m.x!==l.x||m.y!==l.y||m.width!==l.width||m.height!==l.height){m.x=l.x;m.y=l.y;m.width=l.width;m.height=l.height;this._rasterized=false;this._calcMatrixChanged=true;this.fireEvent("contentUpdate")}return this}else{var k=this._bounds;return{x:k.x,y:k.y,width:k.width,height:k.height}}},size:function(k){if(k){var l={width:this._bounds.width,height:this._bounds.height};if(l.width!==k.width||l.height!==k.height){this._bounds.width=k.width;this._bounds.height=k.height;this._rasterized=false;this._calcMatrixChanged=true;this._updateBitmapCache();this.fireEvent("contentUpdate")}return this}else{return{width:this._bounds.width,height:this._bounds.height}}},width:function(l){if(l){var k=this._bounds.width;if(k!==l){this._bounds.width=l;this._rasterized=false;this._calcMatrixChanged=true;this._updateBitmapCache();this.fireEvent("contentUpdate")}return this}else{return this._bounds.width}},height:function(k){if(k){var l=this._bounds.height;if(l!==k){this._bounds.height=k;this._rasterized=false;this._calcMatrixChanged=true;this._updateBitmapCache();this.fireEvent("contentUpdate")}return this}else{return this._bounds.height}},position:function(k){if(k){var m=this._position,l=k;if(m.x!==l.x||m.y!==l.y){m.x=l.x;m.y=l.y;this._calcMatrixChanged=true;this.fireEvent("contentUpdate")}return this}else{return{x:this._position.x,y:this._position.y}}},anchorPoint:function(m){if(m){var k=this._anchorPoint,l=m;if(k.x!==l.x||k.y!==l.y){k.x=l.x;k.y=l.y;this._calcMatrixChanged=true;this.fireEvent("contentUpdate")}return this}else{var k=this._anchorPoint;return{x:k.x,y:k.y}}},frame:function(k){if(k){this._bounds.width=k.width;this._bounds.height=k.height;this._position.x=k.x+this._bounds.width*this._anchorPoint.x;this._position.y=k.y+this._bounds.height*this._anchorPoint.y;this._rasterized=false;this._calcMatrixChanged=true;this._updateBitmapCache();this.fireEvent("contentUpdate");return this}else{return h.rectApplyTransform({x:0,y:0,width:this._bounds.width,height:this._bounds.height},this.calcMatrix().m)}},affineTransform:function(k){var l=this._transform;if(k){if(h.isValidAffineTransform(k)||!h.isEqualTransform(l,k)){l[0][0]=k[0][0];l[1][0]=k[1][0];l[0][1]=k[0][1];l[1][1]=k[1][1];l[0][2]=k[0][2];l[1][2]=k[1][2];this._calcMatrixChanged=true;this.fireEvent("contentUpdate")}return this}else{return[[l[0][0],l[0][1],l[0][2]],[l[1][0],l[1][1],l[1][2]],[0,0,1]]}},clipToBounds:function(k){if(k!==undefined){if(this._clipToBounds!=k){this._clipToBounds=k;this.fireEvent("contentUpdate")}else{this._clipToBounds=k}return this}return this._clipToBounds},_setSuperLayer:function(k){this._superLayer=k},_removeSubLayer:function(k){if(k&&this._subLayers.has(k.id())){k.removeAllListeners("contentUpdate");this._subLayers.remove(k.id());this.fireEvent("contentUpdate")}},_updateBitmapCache:function(){if(this._shouldRasterized){this._bitmapCache.width(this._bounds.width);this._bitmapCache.height(this._bounds.height)}},_getBitmapCache_:function(k){if(k){this._updateBitmapCache()}return this._bitmapCache},_rasterized_:function(k){if(k!==undefined){this._rasterized=k}else{return this._rasterized}},hasContent:function(){return !this._content.isEmpty()},addShape:function(k){var l=k.id();this._content.add(l,k);this._rasterized=false;return k},insertShapeAfter:function(l,k){if(l&&this._content.has(k.id())){var m=l.id();this._content.insertAfter(m,l,k.id());this._rasterized=false;return l}},insertShapeBefore:function(l,k){if(l&&this._content.has(k.id())){var m=l.id();this._content.insertBefore(m,l,k.id());this._rasterized=false;return l}},removeShape:function(k){if(k){var n=k.id();var l=this._content.remove(n);if(l){if(this._shape2clip.hasOwnProperty(n)){var m=this._shape2clip[n];delete this._clip2shapes[m][n];delete this._shape2clip[n]}this._rasterized=false}}},replaceShape:function(k,l){if(l&&this._content.has(k.id())){var n=l.id();this._content.replace(k.id(),n,l);if(this._shape2clip.hasOwnProperty(k.id())){var m=this._shape2clip[k.id()];delete this._clip2shapes[m][k.id()];this._clip2shapes[m][n]=n;delete this._shape2clip[k.id()];this._shape2clip[n]=m}this._rasterized=false;this.fireEvent("contentUpdate");return l}},addClipRegion:function(k){var m=new a(k);var l=m.id();this._clipRegions[l]=m;this._clip2shapes[l]=[];return l},setClipRegion:function(k,l){if(this._clipRegions.hasOwnProperty(l)&&this._content.has(k.id())){if(this._shape2clip.hasOwnProperty(k.id())){var m=this._shape2clip[k.id()];delete this._clip2shapes[m][k.id()]}this._shape2clip[k.id()]=l;this._clip2shapes[l][k.id()]=k.id();this._rasterized=false;this.fireEvent("contentUpdate")}},clearClipRegion:function(k){var m=k.id();if(this._shape2clip.hasOwnProperty(m)){var l=this._shape2clip[m];delete this._shape2clip[m];delete this._clip2shapes[l][m];this._rasterized=false;this.fireEvent("contentUpdate")}},removeClipRegion:function(r){var m=this._clipRegions;if(m.hasOwnProperty(r)){var l=this._shape2clip;var q=this._clip2shapes;var s=false;for(var n=0,o=q[r],k=o.length;n<k;n++){delete l[o[n]];s=true}delete q[r];delete m[r];if(s){this._rasterized=false;this.fireEvent("contentUpdate")}}},clearContent:function(){this._clipRegions={};this._shape2clip={};this._clip2shapes={};this._content.purgeAll();this._rasterized=false;this.fireEvent("contentUpdate")},superLayer:function(){return this._superLayer},subLayersIterator:function(k){return this._subLayers.getIterator(k)},addSubLayer:function(k){if(k){if(!this._subLayers.has(k.id())){this._subLayers.add(k.id(),k);k.on({eventName:"contentUpdate",listener:function(l){this.fireEvent("contentUpdate")},scope:this,optionalArgs:k});k._setSuperLayer(this);this.fireEvent("contentUpdate")}}},removeFromSuperLayer:function(){if(this._superLayer){this._superLayer._removeSubLayer(this);this._superLayer=undefined;this.fireEvent("contentUpdate")}},replaceSubLayer:function(k,l){if(k.id()!==l.id()){this._subLayers.replace(k.id(),l.id(),l);k.removeAllListeners("contentUpdate");l.on({eventName:"contentUpdate",listener:function(m){this.fireEvent("contentUpdate")},scope:this,optionalArgs:k});k._setSuperLayer(undefined);l._setSuperLayer(this);this.fireEvent("contentUpdate")}},setNeedsDisplay:function(){this._rasterized=false;this.fireEvent("contentUpdate")},drawContent:function(m){m.save();m.beginPath();m.rect(0,0,this._bounds.width,this._bounds.height);m.closePath();m.clip();if(this._bgColor!==undefined){m.setFillStyle(this._bgColor);m.fillRect(0,0,this._bounds.width,this._bounds.height)}m.translate(-this._bounds.x,-this._bounds.y);var o=this._content.getIterator(),n,k,r;var q=this._clipRegions,l=this._shape2clip,t;while(o.hasMore()){r=o.next();n=r.value;k=r.key;if(l.hasOwnProperty(k)){if(this._currentClipRegion!==undefined){m.restore()}t=l[k];m.save();this._currentClipRegion=t;q[t].clip(m)}else{if(this._currentClipRegion!==undefined){this._currentClipRegion=undefined;m.restore()}}m.save();n.drawTo(m);m.restore()}if(this._currentClipRegion!==undefined){this._currentClipRegion=undefined;m.restore()}m.restore();this._needsDisplay=false},shapeContainsPoint:function(k,l){if(k&&this._content.has(k.id())){return this._content.get(k.id()).pointIn(l)}return false},hittedShape:function(l){var k=this._content.getIterator(true);while(k.hasMore()){if(k.next().value.pointIn(l)){return k.next().value}}},containsPoint:function(l){var k=this.bounds();return l.x>=k.x&&l.x<(k.x+k.width)&&l.y>=k.y&&l.y<(k.y+k.height)},convertPointFromSuperLayer:function(k){var l=this.calcMatrix().i;return{x:l[0][0]*k.x+l[0][1]*k.y+l[0][2],y:l[1][0]*k.x+l[1][1]*k.y+l[1][2]}},convertPointFromGlobal:function(n){var l=[this];var m=this;var k=n;while(m._superLayer){l.push(m._superLayer);m=m._superLayer}while(l.length){m=l.pop();k=m.convertPointFromSuperLayer(k)}return k},convertPointFromLayer:function(l,k){return this.convertPointFromGlobal(k.convertPointToGlobal(l))},convertPointToSuperLayer:function(l){var k=this.calcMatrix().m;return{x:k[0][0]*l.x+k[0][1]*l.y+k[0][2],y:k[1][0]*l.x+k[1][1]*l.y+k[1][2]}},convertPointToGlobal:function(l){var m=this;var k=l;while(m){k=m.convertPointToSuperLayer(k);m=m._superLayer}return k},convertPointToLayer:function(l,k){return k.convertPointFromGlobal(this.convertPointToGlobal(l))},hitTest:function(k){var r=[{layer:this,pointInLocal:k,subLayerItr:this.subLayersIterator(true)}];var m,q,o,l;while(r.length){m=r[r.length-1];o=m.layer;q=m.pointInLocal;l=m.subLayerItr;if(!o.hidden()&&!o._ignoreHitTest){if(l.hasMore()){var n=l.next().value;r.push({layer:n,pointInLocal:n.convertPointFromSuperLayer(q),subLayerItr:n.subLayersIterator(true)});continue}else{if(o.containsPoint(q)){return o}}r.pop()}else{r.pop()}}},_fireEvent_:function(k){this.fireEvent(k.type(),k);if(this._superLayer&&k.shouldBubble()){k._setCurrentLayer_(this._superLayer);this._superLayer._fireEvent_(k)}},_fireMouseEvent_:function(k){this.fireEvent(k.type(),k);if(this._superLayer&&k.shouldBubble()){k._setCurrentLayer_(this._superLayer);k._setCurrentLocalXY_(this.convertPointToSuperLayer(k.currentLocalXY()));this._superLayer._fireMouseEvent_(k)}},_fireTouchEvent_:function(k){this.fireEvent(k.type(),k);if(this._superLayer&&k.shouldBubble()){k._setCurrentLayer_(this._superLayer);this._superLayer._fireTouchEvent_(k)}}});return e});sap.riv.module({qname:"sap.riv.viz.shared.series.SeriesGroup",version:"3.4.0"},function Setup(){var a=function(){this._seriesList=[]};a.prototype={addSeries:function(b){this._seriesList.push(b)},getSeriesList:function(){return this._seriesList},updateProperties:function(e){var d=this._seriesList;for(var c=0,b=d.length;c<b;c++){d[c].updateProperties(e[c])}}};return a});sap.riv.module({qname:"sap.riv.core.utils.ColorUtils",version:"3.4.0"},[{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.core.Math",version:"3.4.0"}],function Setup(a,c){var e=function(n,m,l){if(l<0){l+=1}if(l>1){l-=1}if(l<1/6){return n+(m-n)*6*l}if(l<1/2){return m}if(l<2/3){return n+(m-n)*(2/3-l)*6}return n};var k=function(t,o,n){var v,u,m;if(o===0){v=u=m=n}else{var w=n<0.5?n*(1+o):n+o-n*o;var x=2*n-w;v=e(x,w,t+1/3);u=e(x,w,t);m=e(x,w,t-1/3)}return[c.round(v*255),c.round(u*255),c.round(m*255)]};var h=function(m,t,v){m/=255,t/=255,v/=255;var w=c.max(m,t,v),o=c.min(m,t,v);var q=0,x,n=(w+o)/2;if(w===o){q=x=0}else{var u=w-o;x=n>0.5?u/(2-w-o):u/(w+o);switch(w){case m:q=(t-v)/u+(t<v?6:0);break;case t:q=(v-m)/u+2;break;case v:q=(m-t)/u+4;break}q/=6}return[q,x,n]};var g=function(l){return parseInt(l.substring(0,l.lastIndexOf("%")),10)/100};var d=function(l){if(l.lastIndexOf("%")>0){return c.ceil(parseInt(l.substring(0,l.lastIndexOf("%")),10)*255/100)}else{return parseInt(l,10)}};var j=function(l){return l<16?"0"+l.toString(16):l.toString(16)};var b={};b.fromCSSColor=function(l){if(l.charAt(0)==="#"){return this.fromRGBHexString(l)}else{if(l.substr(0,4).toLowerCase()==="rgba"){return this.fromRGBA(l)}else{if(l.substr(0,3).toLowerCase()==="rgb"){return this.fromRGB(l)}else{if(l.substr(0,4).toLowerCase()==="hsla"){return this.fromHSLA(l)}else{if(l.substr(0,3).toLowerCase()==="hsl"){return this.fromHSL(l)}}}}}};b.fromRGB=function(m){var o=0,n=0,l=0;if(arguments.length===1){var q=m.substring(4,m.lastIndexOf(")")).split(",");o=d(q[0]);n=d(q[1]);l=d(q[2])}else{if(arguments.length===3){o=arguments[0];n=arguments[1];l=arguments[2]}}return new f(o,n,l,1)};b.fromRGBA=function(m){var q=0,n=0,l=0,o=0;if(arguments.length===1){var r=m.substring(5,m.lastIndexOf(")")).split(",");q=d(r[0]);n=d(r[1]);l=d(r[2]);o=parseFloat(r[3])}else{if(arguments.length===4){q=c.ceil(arguments[0]);n=c.ceil(arguments[1]);l=c.ceil(arguments[2]);o=c.ceil(arguments[3])}}return new f(q,n,l,o)};b.fromRGBHexString=function(m){var q=0,n=0,l=0,o=1;q=parseInt(m.substr(1,2),16);n=parseInt(m.substr(3,2),16);l=parseInt(m.substr(5,2),16);return new f(q,n,l,o)};b.fromHSL=function(l){if(arguments.length==1){var n=l.substring(4,l.lastIndexOf(")")).split(",");var m=k((parseInt(n[0])%360+360)%360/360,g(n[1]),g(n[2]));return new f(m[0],m[1],m[2],1)}else{if(arguments.length==3){m=k(arguments[0],arguments[1],arguments[2]);return new f(m[0],m[1],m[2],1)}}};b.fromHSLA=function(m){if(arguments.length==1){var n=m.substring(5,m.lastIndexOf(")")).split(",");var l=k((parseInt(n[0])%360+360)%360/360,g(n[1]),g(n[2]));return new f(l[0],l[1],l[2],parseFloat(n[3]))}else{if(arguments.length==4){l=k(arguments[0],arguments[1],arguments[2]);return new f(l[0],l[1],l[2],arguments[3])}}};b.changeOpacity=function(n,m){var l=b.fromCSSColor(n);l.alpha(m);return l.toColorString("rgba")};var f=function(o,n,l,m){if(arguments.length===3){m=1}this._r=o;this._g=n;this._b=l;this._hsl=h(o,n,l);this._a=m};f.prototype.hue=function(){return this._hsl[0]*360};f.prototype.saturation=function(){return this._hsl[1]};f.prototype.lightness=function(){return this._hsl[2]};f.prototype.red=function(l){if(a.isNumber(l)){if(0<=l&&l<=255){this._red=l;this._hsl=h(this._r,this._g,this._b)}return this}return this._r};f.prototype.green=function(l){if(a.isNumber(l)){if(0<=l&&l<=255){this._g=l;this._hsl=h(this._r,this._g,this._b)}return this}return this._g};f.prototype.blue=function(l){if(a.isNumber(l)){if(0<=l&&l<=255){this._b=l;this._hsl=h(this._r,this._g,this._b)}return this}return this._b};f.prototype.alpha=function(l){if(a.isNumber(l)){if(0<=l&&l<=1){this._a=l}return this}return this._a};f.prototype.toColorString=function(m){switch(m){case"rgb":return"rgb("+this._r+","+this._g+","+this._b+")";case"rgba":return"rgba("+this._r+","+this._g+","+this._b+","+this._a+")";case"hsl":var l=h(this._r,this._g,this._b);return"hsl("+l[0]*360+","+l[1]*100+"%,"+l[2]*100+"%)";case"hsla":var l=h(this._r,this._g,this._b);return"hsla("+l[0]*360+","+l[1]*100*100+"%,"+l[2]*100*100+"%,"+this._a+")";default:return"#"+j(this._r)+j(this._g)+j(this._b)}};return b});sap.riv.module({qname:"sap.riv.viz.shared.type.Bool",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.type.BasicType",version:"3.4.0"}],function Setup(d,b,a){var c=d.derive(a,{constructor:function(){this.name="Boolean"},validateValue:function(e,f){if(!b.isExist(e)){return true}return e===true||e===false}});return c});sap.riv.module({qname:"sap.riv.graphics.shape.Polygon",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.graphics.shape.FillableShape",version:"3.4.0"},{qname:"sap.riv.core.Math",version:"3.4.0"}],function Setup(f,a,e,c){var d=function(l,g,k){var h=(l[0]===g[0]);var j=(l[1]===g[1]);if(h||j){if(h){l[0]=g[0]=c.floor(l[0]);if(k%2===1){l[0]=g[0]=l[0]+0.5}}if(j){l[1]=g[1]=c.floor(l[1]);if(k%2===1){l[1]=g[1]=l[1]+0.5}}}return{start:[l[0],l[1]],end:[g[0],g[1]]}};var b=f.derive(e,{constructor:function(){this._isClosed=false;this._vertices=[];this._hitTestVertices=[]},addVertices:function(h,l){if(a.isArray(h)){var j=h;for(var k=0,g=j.length;k<g;k++){this._vertices.push([j[k][0],j[k][1]]);this._hitTestVertices.push([j[k][0],j[k][1]])}}else{if(h!==undefined,l!==undefined){this._vertices.push([h,l]);this._hitTestVertices.push([h,l])}}return this},close:function(){if(!this._isClosed){this._hitTestVertices.push([].concat(this._vertices[0]));this._isClosed=true}return this},reset:function(){this._isClosed=false;this._vertices.splice(0,this._vertices.length);this._hitTestVertices.splice(0,this._hitTestVertices.length)},doDraw:function(j){var g=this._vertices;if(g.length<2){return}for(var l=1,n,m=g.length;l<m;l++){var h=g[l-1];var k=g[l];var q=d(h,k,this.borderWidth());g[l-1]=q.start;g[l]=q.end}var o=j;o.beginPath();o.moveTo(g[0][0],g[0][1]);for(var l=1,n,m=g.length;l<m;l++){n=g[l];o.lineTo(n[0],n[1])}o.closePath();this.fillShape(o);this.drawBorder(o)},doPointInTest:(function(){var g=function(j,h,k){return((h[0]-j[0])*(k[1]-j[1])-(k[0]-j[0])*(h[1]-j[1]))};return function(j){var n=0;var h=j.x,q=j.y;var o=[h,q];for(var l=0,k=this._hitTestVertices,m=k.length-1;l<m;l++){if(k[l][1]<=q){if(k[l+1][1]>q){if(g(k[l],k[l+1],o)>0){++n}}}else{if(k[l+1][1]<=q){if(g(k[l],k[l+1],o)<0){--n}}}}return n}})()});return b});sap.riv.module({qname:"sap.riv.graphics.shape.TextLine",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TextRuler",version:"3.4.0"},{qname:"sap.riv.graphics.CanvasHelper",version:"3.4.0"},{qname:"sap.riv.core.UADetector",version:"3.4.0"},{qname:"sap.riv.graphics.Drawable",version:"3.4.0"},{qname:"sap.riv.core.Math",version:"3.4.0"}],function Setup(d,g,f,e,a,c){var j=(function(){if(sap&&sap.common&&sap.common.html&&sap.common.html.HDCanvas){return e.devicePixelRatio()}else{return 1}})();var b=function(l,q){q.save();var t=l._vtx[0][0],s=l._vtx[0][1];var u=l._height;var m=(l._width<l._textOriginalWidth)?l._width:l._textOriginalWidth;q.beginPath();var r=c.round(t),o=c.round(t+m),k;var n=(l._decorationLineThickness%2===0)?0:0.5;switch(l._textDecoration){case"overline":k=c.round(s+u/30)+n;q.moveTo(r,k);q.lineTo(o,k);break;case"underline":k=c.round(s+u*5/6)+n;q.moveTo(r,k);q.lineTo(o,k);break;case"line-through":k=c.round(s+u/2)+n;q.moveTo(r,k);q.lineTo(o,k);break;default:}q.setLineWidth(l._decorationLineThickness);q.setStrokeStyle(l._textColor);q.stroke();q.restore()};var h=d.derive(a,{constructor:function(){this._anchor="tl";this._cornerRadius=0;this._vtx=[[0,0],[0,0],[0,0],[0,0]];this._font="10px sans-serif";this._height=g.measureHeight(this._font);this._width=30;this._text="";this._textAlign="l";this._textColor="#000000";this._strokeAnchor=[0,0];this._adjustVertices();this._weight=g.measureWeight(this._font);this._textOriginalWidth=g.measureWidth(this._font,this._text);this._decorationLineThickness=c.round(this._height*(this._weight==="bold"?1.5:1)/25);this._textDecoration=null;this._textStrokeColor=undefined;this._textStrokeWidth=1;this._textStrokeOpacity=1},_calStrokeAnchor:function(){var l=this._vtx;var m=this._width;var k=this._height;switch(this._textAlign){case"l":this._strokeAnchor[0]=l[0][0];this._strokeAnchor[1]=l[0][1]+k/2;break;case"c":this._strokeAnchor[0]=l[0][0]+m/2;this._strokeAnchor[1]=l[0][1]+k/2;break;case"r":this._strokeAnchor[0]=l[0][0]+m;this._strokeAnchor[1]=l[0][1]+k/2;break}},_calcVertices:function(n,l){var q=l;var m=this._vtx;var o=this._width;var k=this._height;switch(n){case"tl":m[0][0]=q[0];m[0][1]=q[1];m[1][0]=q[0]+o;m[1][1]=q[1];m[2][0]=q[0]+o;m[2][1]=q[1]+k;m[3][0]=q[0];m[3][1]=q[1]+k;break;case"tc":m[0][0]=q[0]-o/2;m[0][1]=q[1];m[1][0]=q[0]+o/2;m[1][1]=q[1];m[2][0]=q[0]+o/2;m[2][1]=q[1]+k;m[3][0]=q[0]-o/2;m[3][1]=q[1]+k;break;case"tr":m[0][0]=q[0]-o;m[0][1]=q[1];m[1][0]=q[0];m[1][1]=q[1];m[2][0]=q[0];m[2][1]=q[1]+k;m[3][0]=q[0]-o;m[3][1]=q[1]+k;break;case"rc":m[0][0]=q[0]-o;m[0][1]=q[1]-k/2;m[1][0]=q[0];m[1][1]=q[1]-k/2;m[2][0]=q[0];m[2][1]=q[1]+k/2;m[3][0]=q[0]-o;m[3][1]=q[1]+k/2;break;case"br":m[0][0]=q[0]-o;m[0][1]=q[1]-k;m[1][0]=q[0];m[1][1]=q[1]-k;m[2][0]=q[0];m[2][1]=q[1];m[3][0]=q[0]-o;m[3][1]=q[1];break;case"bc":m[0][0]=q[0]-o/2;m[0][1]=q[1]-k;m[1][0]=q[0]+o/2;m[1][1]=q[1]-k;m[2][0]=q[0]+o/2;m[2][1]=q[1];m[3][0]=q[0]-o/2;m[3][1]=q[1];break;case"bl":m[0][0]=q[0];m[0][1]=q[1]-k;m[1][0]=q[0]+o;m[1][1]=q[1]-k;m[2][0]=q[0]+o;m[2][1]=q[1];m[3][0]=q[0];m[3][1]=q[1];break;case"lc":m[0][0]=q[0];m[0][1]=q[1]-k/2;m[1][0]=q[0]+o;m[1][1]=q[1]-k/2;m[2][0]=q[0]+o;m[2][1]=q[1]+k/2;m[3][0]=q[0];m[3][1]=q[1]+k/2;break;case"c":m[0][0]=q[0]-o/2;m[0][1]=q[1]-k/2;m[1][0]=q[0]+o/2;m[1][1]=q[1]-k/2;m[2][0]=q[0]+o/2;m[2][1]=q[1]+k/2;m[3][0]=q[0]-o/2;m[3][1]=q[1]+k/2;break}this._calStrokeAnchor()},_adjustVertices:function(){var l=this._vtx;var k=l[1][0]-l[0][0];var m=l[3][1]-l[0][1];switch(this._anchor){case"tl":this._calcVertices("tl",l[0]);break;case"tc":this._calcVertices("tc",[l[0][0]+k/2,l[0][1]]);break;case"tr":this._calcVertices("tr",l[1]);break;case"rc":this._calcVertices("rc",[l[1][0],l[1][1]+m/2]);break;case"br":this._calcVertices("br",l[2]);break;case"bc":this._calcVertices("bc",[l[2][0]-k/2,l[2][1]]);break;case"bl":this._calcVertices("bl",l[3]);break;case"lc":this._calcVertices("lc",[l[3][0],l[3][1]-m/2]);break;case"c":this._calcVertices("c",[l[0][0]+k/2,l[0][1]+m/2]);break}this._cornerRadius=c.min(this._width/2,this._height/2,this._cornerRadius)},topLeft:function(k){if(k!==undefined){this._anchor="tl";this._calcVertices("tl",k);return this}return{x:this._vtx[0][0],y:this._vtx[0][1]}},topCenter:function(k){if(k!==undefined){this._anchor="tc";this._calcVertices("tc",k);return this}return{x:this._vtx[0][0]+this._width/2,y:this._vtx[0][1]}},topRight:function(k){if(k!==undefined){this._anchor="tr";this._calcVertices("tr",k);return this}return{x:this._vtx[1][0],y:this._vtx[1][1]}},rightCenter:function(k){if(k!==undefined){this._anchor="rc";this._calcVertices("rc",k);return this}return{x:this._vtx[1][0],y:this._vtx[1][1]+this._height/2}},bottomRight:function(k){if(k!==undefined){this._anchor="br";this._calcVertices("br",k);return this}return{x:this._vtx[2][0],y:this._vtx[2][1]}},bottomCenter:function(k){if(k!==undefined){this._anchor="bc";this._calcVertices("bc",k);return this}return{x:this._vtx[2][0]-this._width/2,y:this._vtx[2][1]}},bottomLeft:function(k){if(k!==undefined){this._anchor="bl";this._calcVertices("bl",k);return this}return{x:this._vtx[3][0],y:this._vtx[3][1]}},leftCenter:function(k){if(k!==undefined){this._anchor="lc";this._calcVertices("lc",k);return this}return{x:this._vtx[3][0],y:this._vtx[3][1]-this._height/2}},center:function(k){if(k!==undefined){this._anchor="c";this._calcVertices("c",k);return this}return{x:this._vtx[0][0]+this._width/2,y:this._vtx[0][1]+this._height/2}},cornerRadius:function(k){if(k!==undefined){if(k>=0){this._cornerRadius=c.min(this._width/2,this._height/2,k)}return this}return this._cornerRadius},font:function(o){if(o!==undefined){this._font=o;var k=g.measureHeight(this._font);var n=g.measureWeight(this._font);var l=g.measureWidth(this._font,this._text);if(this._height!==k){this._height=k;this._adjustVertices()}if(this._weight!==n){this._weight=n}if(this._textOriginalWidth!==l){this._textOriginalWidth=l}var m=c.round(this._height*(this._weight==="bold"?1.5:1)/25);if(this._decorationLineThickness!==m){this._decorationLineThickness=m}return this}return this._font},width:function(k){if(k!==undefined){if(this._width>0&&this._width!==k){this._width=k;this._adjustVertices()}return this}return this._width},text:function(k){if(k!==undefined){this._text=k.toString();return this}return this._text},textAlign:function(k){if(k!==undefined){this._textAlign=k;this._calStrokeAnchor();return this}return this._textAlign},textColor:function(k){if(k!==undefined){if(k!==false){this._textColor=f.createColorStyle(k)}else{this._textColor=undefined}return this}if(this._textColor){return this._textColor}},textDecoration:function(k){if(k!==undefined&&(k===null||k==="overline"||k==="underline"||k==="line-through")){this._textDecoration=k;return this}if(this._textDecoration){return this._textDecoration}},textStrokeColor:function(k){if(k!==undefined){if(k!==false){this._textStrokeColor=f.createColorStyle(k)}else{this._textStrokeColor=undefined}return this}if(this._textStrokeColor){return this._textStrokeColor}},textStrokeWidth:function(k){if(k!==undefined){if(k!==false){this._textStrokeWidth=k}else{this._textStrokeWidth=undefined}return this}if(this._textStrokeWidth){return this._textStrokeWidth}},textStrokeOpacity:function(k){if(k!==undefined){if(k!==false){this._textStrokeOpacity=k}else{this._textStrokeOpacity=undefined}return this}if(this._textStrokeOpacity){return this._textStrokeOpacity}},translate:function(k,l){this.callParent("translate",k*j,l*j);return this},doDraw:function(m){var n=m;n.setFont(this._font);switch(this._textAlign){case"r":n.setTextAlign("right");break;case"c":n.setTextAlign("center");break;case"l":default:n.setTextAlign("left");break}n.setTextBaseline("middle");n.setFillStyle(this._textColor);b(this,n);n.save();n.beginPath();var l=this._vtx;if(this._cornerRadius>0){var k=this._cornerRadius;n.moveTo(l[0][0],(l[0][1]+l[3][1])/2);n.arcTo(l[0][0],l[0][1],(l[0][0]+l[1][0])/2,l[0][1],k);n.arcTo(l[1][0],l[0][1],l[1][0],(l[0][1]+l[3][1])/2,k);n.arcTo(l[1][0],l[3][1],(l[0][0]+l[1][0])/2,l[3][1],k);n.arcTo(l[0][0],l[3][1],l[0][0],(l[0][1]+l[3][1])/2,k)}else{n.moveTo(l[0][0],l[0][1]);n.lineTo(l[1][0],l[1][1]);n.lineTo(l[2][0],l[2][1]);n.lineTo(l[3][0],l[3][1])}n.closePath();n.clip();n.fillText(this._text,this._strokeAnchor[0],this._strokeAnchor[1]);if(this._textStrokeColor!==undefined){n.setAlpha(this._textStrokeOpacity);n.setStrokeStyle(this._textStrokeColor);n.setLineWidth(this._textStrokeWidth);n.strokeText(this._text,this._strokeAnchor[0],this._strokeAnchor[1])}n.restore()},doPointInTest:function(l){var k=l.x;var n=l.y;var m=this._vtx;return m[0][0]<=k&&k<=m[2][0]&&m[0][1]<=n&&n<=m[2][1]}});return h});sap.riv.module({qname:"sap.riv.viz.shared.type.NegativeInteger",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.type.BasicType",version:"3.4.0"}],function Setup(d,b,a){var c=d.derive(a,{constructor:function(){this.name="NegativeInt";this.reg=new RegExp(/^\-[1-9][0-9]*$/)},validateValue:function(e,f){if(!b.isExist(e)){return true}return(!b.isString(e)&&b.isNumber(e)&&this.reg.test(e))||e===Number.NEGATIVE_INFINITY}});return c});sap.riv.module({qname:"sap.riv.viz.shared.type.StringArray",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.type.Array",version:"3.4.0"}],function Setup(d,a,c){var b=d.derive(c,{constructor:function(){this.name="StringArray"},validateItem:function(e,f){if(!a.isExist(e)){return true}return a.isString(e)}});return b});sap.riv.module({qname:"sap.riv.viz.shared.type.PositiveNumber",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.type.BasicType",version:"3.4.0"}],function Setup(d,b,a){var c=d.derive(a,{constructor:function(){this.name="PositiveNumber"},validateValue:function(e,f){if(!b.isExist(e)){return true}return !b.isString(e)&&b.isNumber(e)&&e>=0}});return c});sap.riv.module({qname:"sap.riv.graphics.shape.Rectangle",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.graphics.CanvasHelper",version:"3.4.0"},{qname:"sap.riv.graphics.shape.DrawableRect",version:"3.4.0"}],function Setup(d,c,b){var a=d.derive(b,{constructor:function(){this._fill=undefined},color:function(e){if(e!==undefined){if(e!==false){this._fill=c.createColorStyle(e)}else{this._fill=undefined}return this}if(this._fill){return this._fill}},drawInRect:function(e){if(this._fill){e.save();e.setFillStyle(this._fill);e.fill();e.restore()}}});return a});sap.riv.module({qname:"sap.riv.viz.shared.axis.PositionCalculator",version:"3.4.0"},[{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.core.Math",version:"3.4.0"}],function Setup(b,c){var a=function(){};a.calculateStandardPosition=function(g,h,j,l,f,e){var d=0;if(f=="linear"){var k=a.generateLinearMultiplier(h,j,l);d=a.calculateLinearPosition(g,k,h)}else{var k=a.generateLogarithmicMultiplier(h,j,l);if(e){g*=100}if(g<=0){g=1}d=a.calculateLogarithmicPosition(g,k,h)}return a.validatePosition(d,l,true)};a.generateLinearMultiplier=function(d,e,f){return f/(e-d)};a.calculateLinearPosition=function(e,f,d){return f*(e-d)};a.calculateLinearValue=function(d,f,e){return(d/f)+e};a.generateLogarithmicMultiplier=function(e,g,h){if(e<=0){e=1;if(g<=e){g=2}}var d=a.convertToLog(e);var f=a.convertToLog(g);return h/(f-d)};a.convertToLog=function(d){return c.log(d)/c.log(10)};a.calculateLogarithmicPosition=function(f,g,e){if(f==0||e==0){return 0}var d=a.convertToLog(e);f=a.convertToLog(f);return(f-d)*g};a.validatePosition=function(e,f,d){if(e<0){e=0}else{if(e>f){e=f}}if(b.isNaN(e)){if(d){e=0}else{e=f}}return e};return a});sap.riv.module({qname:"sap.riv.viz.shared.type.List",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.type.BasicType",version:"3.4.0"}],function Setup(d,b,a){var c=d.derive(a,{constructor:function(){this.name="List"},validateValue:function(g,h){if(!b.isExist(g)){return true}var e=h.supportedValues;for(var f=e.length;f--;){if(e[f]===g){return true}}return false}});return c});sap.riv.module({qname:"sap.riv.viz.shared.type.Function",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.type.BasicType",version:"3.4.0"}],function Setup(d,b,a){var c=d.derive(a,{constructor:function(){this.name="Function"},validateValue:function(e,f){if(!b.isExist(e)){return true}return b.isFunction(e)}});return c});sap.riv.module({qname:"sap.riv.viz.shared.type.Font",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.type.BasicType",version:"3.4.0"}],function Setup(d,b,a){var c=d.derive(a,{constructor:function(){this.name="Font";this.fontStyle=new RegExp("^italic$|^oblique$|^normal$");this.fontWeighRreg=new RegExp("^bold$|^normal$|^bolder$|^lighter$|^100$|^200$|^300$|^400$|^500$|^600$|^700$|^800$|^900$");this.fontSizeReg=new RegExp("^\\d+(\\.\\d+)?(px|pt|em)?$")},validateValue:function(j,l){if(!b.isExist(j)){return true}if(!this.validateString(j,l)){return false}j=j.replace(/^\s\s*/,"").replace(/\s\s*$/,"");var h=j.split(" ");if(h.length<2){return false}else{var k=false;if(this.fontStyle.test(h[0])){var f;for(var g=3,e=h.length;g<e;g++){f+=h[g]}k=this.fontWeighRreg.test(h[1])&&this.fontSizeReg.test(h[2])&&this.validateString(f);for(var g=2,e=h.length;g<e;g++){f+=h[g]}if(k===false){k=this.fontSizeReg.test(h[1])&&this.validateString(f)}}if(k){return true}else{if(this.fontWeighRreg.test(h[0])){var f;for(var g=2,e=h.length;g<e;g++){f+=h[g]}return this.fontSizeReg.test(h[1])&&this.validateString(f)}else{var f;for(var g=1,e=h.length;g<e;g++){f+=h[g]}return this.fontSizeReg.test(h[0])&&this.validateString(f)}}}},validateString:function(e,f){if(!b.isExist(e)){return true}return b.isString(e)}});return c});sap.riv.module({qname:"sap.riv.graphics.shape.Line",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.graphics.CanvasHelper",version:"3.4.0"},{qname:"sap.riv.graphics.Drawable",version:"3.4.0"},{qname:"sap.riv.core.Math",version:"3.4.0"}],function Setup(e,d,b,a){var c=e.derive(b,{constructor:function(f){this._start={x:0,y:0};this._end={x:0,y:0};this._width=1;this._capStyle="butt";this._color="#000000"},_calcForHitTest:function(h,f,g){this._preCalc={A:(f.y-h.y),B:(h.x-f.x),C:h.y*f.x-h.x*f.y,D:a.sqrt((f.y-h.y)*(f.y-h.y)+(h.x-f.x)*(h.x-f.x)),delta:g>2?g/2:1}},update:function(f,h,g){this._start.x=h.x;this._start.y=h.y;this._end.x=g.x;this._end.y=g.y;if(f>=1){this._width=f}this._calcForHitTest(this._start,this._end,this._width)},from:function(f){if(f!==undefined){this._start.x=f.x;this._start.y=f.y;this._calcForHitTest(f,this._end,this._width);return this}return{x:this._start.x,y:this._start.y}},to:function(f){if(f!==undefined){this._end.x=f.x;this._end.y=f.y;this._calcForHitTest(this._start,f,this._width);return this}return{x:this._end.x,y:this._end.y}},color:function(f){if(f!=undefined){this._color=d.createColorStyle(f);return this}return this._color},width:function(f){if(f!=undefined){if(f>=1){this._width=f;this._calcForHitTest(this._start,this._end,f)}return this}return this._width},cap:function(f){if(f!=undefined){this._capStyle=f;return this}return this._capStyle},doDraw:function(g){var f=(this._start.x===this._end.x);var h=(this._start.y===this._end.y);if(f&&h){return}if(f){this._start.x=this._end.x;this._start.y=a.round(this._start.y);this._end.y=a.round(this._end.y)}if(h){this._start.y=this._end.y;this._start.x=a.round(this._start.x);this._end.x=a.round(this._end.x)}var j=g;j.setLineWidth(this._width);j.setLineCap(this._capStyle);j.setStrokeStyle(this._color);j.beginPath();j.moveTo(this._start.x,this._start.y);j.lineTo(this._end.x,this._end.y);j.stroke()},doPointInTest:function(g){var h=this._preCalc;var f=g.x;var l=g.y;var j=this._start;var k=this._end;if(j.x==k.x){return(a.abs(f-j.x)<h.delta)&&((j.y<l&&l<k.y)||(j.y>l&&l>k.y))}return((j.x<f&&f<k.x)||(j.x>f&&f>k.x))&&a.abs((h.A*f+h.B*l+h.C)/h.D)<h.delta}});return c});sap.riv.module({qname:"sap.riv.viz.shared.series.BaseRenderer",version:"3.4.0"},[{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TextRuler",version:"3.4.0"},{qname:"sap.riv.graphics.shape.TextLine",version:"3.4.0"},{qname:"sap.riv.viz.shared.utils.NumericFormatUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.SeriesGroup",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.Series",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.SeriesItem",version:"3.4.0"}],function Setup(c,a,f,h,b,j,g,d){var e=function(l,k){this._mainLayer=l;this._animationDuration=800;this._seriesGroups=[];this._eventListeners={};this._highlights=[];this._scale=1;this._initialize(k)};e.prototype={_initialize:function(k){if(a.isExist(k.animation)){this._enableAllAnimation=k.animation.enable;this._enableInitAnimation=k.animation.init.enable;if(a.isNumber(k.animation.duration)){this._animationDuration=k.animation.duration}}},updateProperties:function(k){this._initialize(k)},addSeriesGroup:function(n){var m=n.getSeriesList();for(var l=0,k=m.length;l<k;l++){m[l].setRenderer(this)}this._seriesGroups.push(n)},getSeriesGroups:function(){return this._seriesGroups},_getVisibleSeries:function(){var l=[];var o=this.getSeriesGroups();if(o.length==0){return l}var n=o[0].getSeriesList();if(n.length==0){return l}for(var m=0,k=n.length;m<k;m++){if(n[m].isVisible()===true){l.push(n[m])}}return l},resetSeriesGroups:function(){for(var m=0,l=this._seriesGroups.length;m<l;m++){var o=this._seriesGroups[m].getSeriesList();for(var n=0,k=o.length;n<k;n++){o[n].setRenderer(null)}}this._seriesGroups=[]},_addEventListener:function(l,k){this._eventListeners[l]=k},getEventListeners:function(){return this._eventListeners},getLayer:function(){return this._mainLayer},getDataLabelLayer:function(){return this._mainLayer},setLayer:function(k){this._mainLayer=k},refresh:function(){this._mainLayer.setNeedsDisplay()},highlight:function(){var n,k=arguments[0];if(a.isUndefined(k)){this.doSecondaryHighlight();return}if(k instanceof j){var m=k.getSeriesList();for(n=0,len=m.length;n<len;n++){this.highlight(m[n])}}else{if(k instanceof g){var l=k.getSeriesItems();for(n=0,len=l.length;n<len;n++){this._highlightSeriesItem(l[n])}}else{if(k instanceof d){this._highlightSeriesItem(k)}else{return}}}},clearHighlight:function(o){if(typeof o==="undefined"){this.clearHighlight(this.getSeriesGroups()[0])}if(o instanceof j){var n=o.getSeriesList();for(var m=0,k=n.length;m<k;m++){this.clearHighlight(n[m])}}else{if(o instanceof g){var l=o.getSeriesItems();for(var m=0,k=l.length;m<k;m++){this._clearSeriesItemHighlight(l[m])}}else{if(o instanceof d){this._clearSeriesItemHighlight(o)}else{return}}}},lowlight:function(o){if(!a.isExist(o)){return}if(o instanceof j){var n=o.getSeriesList();for(var m=0,k=n.length;m<k;m++){this.lowlight(n[m])}}else{if(o instanceof g){var l=o.getSeriesItems();for(var m=0,k=l.length;m<k;m++){this._lowlightSeriesItem(l[m])}}else{if(o instanceof d){this._lowlightSeriesItem(o)}else{return}}}},clearLowlight:function(o){if(!a.isExist(o)){return}if(o instanceof j){var n=o.getSeriesList();for(var m=0,k=n.length;m<k;m++){this.clearLowlight(n[m])}}else{if(o instanceof g){var l=o.getSeriesItems();for(var m=0,k=l.length;m<k;m++){this._clearSeriesItemLowlight(l[m])}}else{if(o instanceof d){this._clearSeriesItemLowlight(o)}else{return}}}},hover:function(o){if(!a.isExist(o)){return}if(o instanceof j){var n=o.getSeriesList();for(var m=0,k=n.length;m<k;m++){this.hover(n[m])}}else{if(o instanceof g){var l=o.getSeriesItems();for(var m=0,k=l.length;m<k;m++){this._hoverSeriesItem(l[m])}}else{if(o instanceof d){this._hoverSeriesItem(o)}else{return}}}},_getDataLabelTexts:function(x,s,t,u,l){var q,w,A;var z=x.getSeries().getName();if(z.hasOwnProperty("value")){z=z.value}var k=x.getDataIndex();var C=b.getFormatString(t.dimensionFormatString,k);var v=b.getFormatString(t.valueFormatString,k);var n=s.dimensionLabel;if(n!=null&&n.hasOwnProperty("value")){n=n.value}var m=t.measureVisible&&(z!=null)&&(z.toString().length>0);var o=t.dimensionVisible&&(n!=null)&&(n.toString().length>0);if(l){q=[z,n,s.value];w=[m,o,t.valueVisible];A=[t.measureFormatString,C,v]}else{q=[z,u,n,u,s.value];w=[m,m&&(o||t.valueVisible),o,o&&t.valueVisible,t.valueVisible];A=[t.measureFormatString,null,C,null,v]}var B=[];for(var r=0;r<q.length;r++){if(w[r]){B.push({text:q[r],formatString:A[r]})}}return B},_hideDataLabels:function(l){for(var k=0;k<l.length;k++){l[k].visible(false)}},_drawDataLabel:function(B){var l=B.getDataLabelShapes();if(l==null||l.length==0){return}var J=B.getData();if(J==null||J[0]==null||J[0].value==="NaN"){this._hideDataLabels(l);return}var t=B.getSeries().getOptions();var H=t.dataLabel;var z=B.isVisible();var v=H.font;var C=H.color;var A=B.getPosition();var s=this._getDataLabelAnchor(H.position,A,B);if(s==null){this._hideDataLabels(l);return}var G=0,F=0;if(H.offset){if(H.offset.hasOwnProperty("x")){G=H.offset.x}if(H.offset.hasOwnProperty("y")){F=H.offset.y}}var o=(H.separator=="!SPACE")?" ":H.separator;var r=(o=="!NEW_LINE");var k=this._getDataLabelTexts(B,J[0],H,o,r);if(k==null||k.length==0){this._hideDataLabels(l);return}var I=this.getDataLabelLayer();var m;var u;var q;var E;for(var D=0;D<k.length;D++){if(l[D]==null){l[D]=I.insertShapeAfter(new h(),l[D-1])}u=k[D].text;q=C;if(k[D].formatString!=null){E=b.formatToTextWithColor(u,k[D].formatString,true);u=E.text;q=E.color?E.color:q}m=f.measureWidth(v,u);l[D].font(v).textAlign("c").textColor(q).width(m).visible(z).text(u)}if(k.length<l.length){for(var x=k.length;x<l.length;x++){I.removeShape(l[x])}l.length=k.length}var w=f.measureHeight(v);if(r){this._verticalLayoutDatalabes(l,s,G,F,w)}else{this._horizontalLayoutDatalabes(l,s,G,F,w)}},_verticalLayoutDatalabes:function(k,s,t,r,w){var l=0;for(var o=0;o<k.length;o++){l=Math.max(l,k[o].width())}var m=s.x+t;if(s.align=="left"){m+=l/2}else{if(s.align=="right"){m-=l/2}}var q;var v=w*k.length;if(s.align=="top"){q=s.y+r}else{if(s.align=="bottom"){q=s.y-v+r}else{q=s.y-v/2+r}}for(var u=0;u<k.length;u++){k[u].width(l);k[u].topCenter([m,q]);q+=w}},_horizontalLayoutDatalabes:function(l,n,q,m,t){var s;var r=0;for(s=0;s<l.length;s++){r+=l[s].width()}var o;if(n.align=="left"){o=n.x+q}else{if(n.align=="right"){o=n.x-r+q}else{o=n.x-r/2+q}}var k=n.y+m;if(n.align=="top"){k+=t/2}else{if(n.align=="bottom"){k-=t/2}}for(s=0;s<l.length;s++){l[s].leftCenter([o,k]);o+=l[s].width()}},_getDataLabelAnchor:function(l,k,n){var m={align:"center",x:(k.x1+k.x2)/2,y:(k.y1+k.y2)/2};return m},clearDrawing:function(r){if(!a.isExist(r)){for(var n=0,m=this._seriesGroups.length;n<m;n++){this.clearDrawing(this._seriesGroups[n])}}else{if(r instanceof j){var q=r.getSeriesList();for(var o=0,k=q.length;o<k;o++){this.clearDrawing(q[o])}}else{if(r instanceof g){var l=r.getSeriesItems();for(var o=0,k=l.length;o<k;o++){this._clearSeriesItemDrawing(l[o])}}else{if(r instanceof d){this._clearSeriesItemDrawing(r)}else{return}}}}},getDataContextOnPoint:c.noop,doSecondaryHighlight:c.noop,hoverOnPoint:c.noop,onblur:c.noop,_highlightSeriesItem:c.noop,_clearSeriesItemHighlight:c.noop,_lowlightSeriesItem:c.noop,_clearSeriesItemLowlight:c.noop,_hoverSeriesItem:c.noop,_clearSeriesItemDrawing:c.noop,setScale:function(k){this._scale*=k}};return e});sap.riv.module({qname:"sap.riv.graphics.Canvas2DSurface",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.graphics.Layer",version:"3.4.0"},{qname:"sap.riv.graphics.Event",version:"3.4.0"},{qname:"sap.riv.graphics.MouseEvent",version:"3.4.0"},{qname:"sap.riv.graphics.TouchEvent",version:"3.4.0"},{qname:"sap.riv.core.Math",version:"3.4.0"},{qname:"sap.riv.core.UADetector",version:"3.4.0"},{qname:"sap.riv.core.Logger",version:"3.4.0"}],function Setup(d,g,s,e,t,l,h,m){var f=jQuery;if(!f){FuncUtils.error("Cannot find jQuery")}var r=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||window.setTimeout})();var q=function(E,w){var D=[{processed:false,layer:w,subLayerItr:w.subLayersIterator()}];var C,w;while(D.length){C=D[D.length-1];w=C.layer;if(!w.hidden()){if(!C.processed){if(w.shouldRasterized()){if(!w._rasterized_()){var u=w._getBitmapCache_(true).getContext("2d");w.drawContent(u);w._rasterized_(true)}E.save();var z=w.position();var x=w.anchorPoint();var B=w.affineTransform();var A=w.bounds();E.translate(z.x,z.y);E.transform(B[0][0],B[1][0],B[0][1],B[1][1],B[0][2],B[1][2]);E.translate(-x.x*A.width,-x.y*A.height);E.setAlpha(w.opacity());E.drawImage(w._getBitmapCache_(),0,0)}else{E.save();var z=w.position();var x=w.anchorPoint();var B=w.affineTransform();var A=w.bounds();E.translate(z.x,z.y);E.transform(B[0][0],B[1][0],B[0][1],B[1][1],B[0][2],B[1][2]);E.translate(-x.x*A.width,-x.y*A.height);E.setAlpha(w.opacity());w.drawContent(E)}if(w.clipToBounds()){E.beginPath();E.rect(0,0,w.bounds().width,w.bounds().height);E.closePath();E.clip()}C.processed=true}if(C.subLayerItr.hasMore()){var v=C.subLayerItr.next().value;D.push({processed:false,layer:v,subLayerItr:v.subLayersIterator()})}else{E.restore();D.pop()}}else{D.pop()}}};var o=[];var n=function(){var v,u,w;m.debug("frame start.","canvas_cmd");while(o.length){v=o.shift();w=v.drawingContext;u=v.layer;w.clearRect(0,0,u.bounds().width,u.bounds().height);q(w,u);m.debug("layer["+u.id()+"]rendering end.","perf");v.onComplete.apply(v.scope)}m.debug("frame end.","canvas_cmd");a=c};var b=function(u){o.push(u)};var c=function(u){o.push(u);r(n,0);a=b};var a=c;var k=function(u){this._mainCanvasEl=u.canvasEl;this._drawingCtx=this._mainCanvasEl.getContext("2d");this._msTracking=[];this._touch2LayerTracking={};this._layer2TouchTracking={};this._rootLayer=new g({id:"RootLayer",bgColor:u.bgColor,size:{w:this._mainCanvasEl.width(),h:this._mainCanvasEl.height()},anchor:{x:0,y:0},position:{x:0,y:0}});var v=false;var w=function(){if(h.os()==="Android"){this._mainCanvasEl.replaceCanvas()}v=false};var x=function(){if(!v){a({drawingContext:this._drawingCtx,layer:this._rootLayer,scope:this,onComplete:w});v=true}};this._rootLayer.on({eventName:"contentUpdate",listener:x,scope:this});q(this._drawingCtx,this._rootLayer)};var j=k.prototype;j.dispatchComponentUIEvent=function(H){var v=this._rootLayer;switch(H.type()){case"mousemove":var D=H.targetLocalXY();var M=H.pageXY();var x=v.hitTest(D);if(x){if(this._msTracking.length){if(this._msTracking[this._msTracking.length-1]!==x){var P=[];var N=x;while(N){P.push(N);N=N.superLayer()}var L=0,B=false,E=l.min(this._msTracking.length,P.length);while(true){var z=undefined;if(!B&&this._msTracking[L]===P[P.length-1-L]){L++;B=L===E}else{while(this._msTracking.length>L){z=this._msTracking.pop();var A=new e("mouseleave",z,false,D,M);A._setRelatedLayer_(x);z._fireMouseEvent_(A)}while(L<P.length){var N=P.shift();z=this._msTracking[P.length-1];this._msTracking[P.length]=N;var A=new e("mouseenter",N,false,D,M);A._setRelatedLayer_(z);N._fireMouseEvent_(A)}break}}}}else{var N=x;do{this._msTracking.push(N);N._fireMouseEvent_(new e("mouseenter",N,false,D,M));N=N.superLayer()}while(N);this._msTracking.reverse()}x._fireMouseEvent_(new e("mousemove",x,true,D,M))}else{while(this._msTracking.length){var z=this._msTracking.pop();z._fireMouseEvent_(new e("mouseleave",z,false,D,M))}}break;case"mouseleave":while(this._msTracking.length){var z=this._msTracking.pop();z._fireMouseEvent_(new e("mouseleave",z,false,H.targetLocalXY(),H.pageXY()))}break;case"mouseup":var D=H.targetLocalXY();var x=v.hitTest(D);if(x){x._fireMouseEvent_(new e("mouseup",x,true,D,H.pageXY()))}break;case"mousedown":var D=H.targetLocalXY();var x=v.hitTest(D);if(x){x._fireMouseEvent_(new e("mousedown",x,true,D,H.pageXY()))}break;case"dblclick":var D=H.targetLocalXY();var x=v.hitTest(D);if(x){if(this._focusedLayer){if(this._focusedLayer.id()!==x.id()){this._focusedLayer._fireEvent_(new s("blur",this._focusedLayer,false));this._focusedLayer._fireEvent_(new s("focusout",this._focusedLayer,true));this._focusedLayer=x;this._focusedLayer._fireEvent_(new s("focus",this._focusedLayer,false));this._focusedLayer._fireEvent_(new s("focusin",this._focusedLayer,true))}}else{this._focusedLayer=x;this._focusedLayer._fireEvent_(new s("focus",this._focusedLayer,false));this._focusedLayer._fireEvent_(new s("focusin",this._focusedLayer,true))}this._focusedLayer._fireMouseEvent_(new e("dblclick",this._focusedLayer,true,D,H.pageXY()))}else{if(this._focusedLayer){this._focusedLayer._fireEvent_(new s("blur",this._focusedLayer,false));this._focusedLayer._fireEvent_(new s("focusout",this._focusedLayer,true));this._focusedLayer=undefined}}break;case"click":var D=H.targetLocalXY();var x=v.hitTest(D);if(x){if(this._focusedLayer){if(this._focusedLayer.id()!==x.id()){this._focusedLayer._fireEvent_(new s("blur",this._focusedLayer,false));this._focusedLayer._fireEvent_(new s("focusout",this._focusedLayer,true));this._focusedLayer=x;this._focusedLayer._fireEvent_(new s("focus",this._focusedLayer,false));this._focusedLayer._fireEvent_(new s("focusin",this._focusedLayer,true))}}else{this._focusedLayer=x;this._focusedLayer._fireEvent_(new s("focus",this._focusedLayer,false));this._focusedLayer._fireEvent_(new s("focusin",this._focusedLayer,true))}this._focusedLayer._fireMouseEvent_(new e("click",this._focusedLayer,true,D,H.pageXY()))}else{if(this._focusedLayer){this._focusedLayer._fireEvent_(new s("blur",this._focusedLayer,false));this._focusedLayer._fireEvent_(new s("focusout",this._focusedLayer,true));this._focusedLayer=undefined}}break;case"touchstart":var O=this._touch2LayerTracking,C=this._layer2TouchTracking;var K={};for(var I=0,F,G=H.changedTouches(),J=G.length();I<J;I++){F=G.item(I);var w=F.identifier();var D=F.localXY();var x=v.hitTest(D);if(x){var u=x.id();O[w]=x;if(!C.hasOwnProperty(u)){C[u]={layer:x,touchIds:[w]}}else{C[u].touchIds.push(w)}if(!K.hasOwnProperty(u)){K[u]={layer:x,touches:[F]}}else{K[u].touches.push(F)}}}this._dispatchTouchEventToLayer(K,H);break;case"touchmove":var O=this._touch2LayerTracking;var K={};for(var I=0,F,G=H.changedTouches(),J=G.length();I<J;I++){F=G.item(I);var w=F.identifier();if(O.hasOwnProperty(w)){var x=O[w];var u=x.id();if(!K.hasOwnProperty(u)){K[u]={layer:x,touches:[F]}}else{K[u].touches.push(F)}}}this._dispatchTouchEventToLayer(K,H);break;case"touchend":var O=this._touch2LayerTracking,C=this._layer2TouchTracking;var K={};for(var I=0,F,G=H.changedTouches(),J=G.length();I<J;I++){F=G.item(I);var w=F.identifier();if(O.hasOwnProperty(w)){var x=O[w];var u=x.id();if(!K.hasOwnProperty(u)){K[u]={layer:x,touches:[F]}}else{K[u].touches.push(F)}delete O[w];C[u].touchIds.splice(C[u].touchIds.indexOf(w),1);if(!C[u].touchIds.length){delete C[u]}}}this._dispatchTouchEventToLayer(K,H);break;case"touchcancel":var O=this._touch2LayerTracking,C=this._layer2TouchTracking;var K={};for(var I=0,F,G=H.changedTouches(),J=G.length();I<J;I++){F=G.item(I);var w=F.identifier();if(O.hasOwnProperty(w)){var x=O[w];var u=x.id();if(!K.hasOwnProperty(u)){K[u]={layer:x,touches:[F]}}else{K[u].touches.push(F)}delete O[w];C[u].touchIds.splice(C[u].touchIds.indexOf(w),1);if(!C[u].touchIds.length){delete C[u]}}}this._dispatchTouchEventToLayer(K,H);break}};j._dispatchTouchEventToLayer=function(x,C){var v=this._touch2LayerTracking,u=this._layer2TouchTracking;for(var A in x){var K=t.createTouchList();var F=x[A].layer;for(var B=0,L,w=x[A].touches,G=w.length;B<G;B++){L=w[B];K._addTouch_(t.createTouch(L.identifier(),F,L.localXY(),L.pageXY()))}var J=t.createTouchList();if(u[A]){var E=u[A].touchIds;for(var B=0,L,I=C.touches(),G=E.length;B<G;B++){L=I.identifiedTouch(E[B]);if(L){J._addTouch_(t.createTouch(L.identifier(),F,L.localXY(),L.pageXY()))}}}var D=t.createTouchList();for(var B=0,L,F,z=C.touches(),G=z.length();B<G;B++){L=z.item(B);var H=L.identifier();if(v[H]){F=v[H];D._addTouch_(t.createTouch(H,F,L.localXY(),L.pageXY()))}}F._fireTouchEvent_(new t(C.type(),F,true,D,K,J))}};j.size=function(u){if(u!==undefined){if(this._mainCanvasEl.width()!=u.width){this._mainCanvasEl.width(u.width);this._rootLayer.width(u.width)}if(this._mainCanvasEl.height()!=u.height){this._mainCanvasEl.height(u.height);this._rootLayer.height(u.height)}return this}else{return{width:this._mainCanvasEl.width(),height:this._mainCanvasEl.height()}}};j.width=function(v){if(v){var u=this._mainCanvasEl.width();if(u!=v){this._mainCanvasEl.width(v);this._rootLayer.width(v)}return this}else{return this._mainCanvasEl.width()}};j.height=function(u){if(u){var v=this._mainCanvasEl.height();if(v!=u){this._mainCanvasEl.height(u);this._rootLayer.height(u)}return this}else{return this._mainCanvasEl.height()}},j.getRootLayer=function(){return this._rootLayer};j.backgroundColor=function(u){if(u){this._rootLayer.backgroundColor(u)}else{return this._rootLayer.backgroundColor()}};return k});sap.riv.module({qname:"sap.riv.viz.shared.type.Object",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.type.BasicType",version:"3.4.0"}],function Setup(d,b,a){var c=d.derive(a,{constructor:function(){this.name="Object"},validateValue:function(e,f){return typeof(e)==="object"}});return c});sap.riv.module({qname:"sap.riv.graphics.shape.Paths",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.graphics.shape.FillableShape",version:"3.4.0"},{qname:"sap.riv.core.Math",version:"3.4.0"}],function Setup(d,c,a){var b=d.derive(c,{constructor:function(){this._subPaths=[];this._interpolatedVertices=[]},_inplotArc:function(l,q,m,e,f){var j=a.min(q,m);var o=a.max(q,m);var g=(o-j)/50;for(var k=j;k<=o;k+=g){var n=a.sin(k);var h=a.cos(k);f.push([l[0]+h*e,l[1]+n*e])}if(k!=o){var n=a.sin(o);var h=a.cos(o);f.push([l[0]+h*e,l[1]+n*e])}},_inplotSpline:function(w,u,q,e){var r=a.sqrt;var o=u[0]-w[0],g=u[1]-w[1],n=q[0]-u[0],f=q[1]-u[1];var l=a.floor((r(o*o+g*g)+r(n*n+f*f))*0.25);for(var x=1;x<=l;x++){var v=1/l*x,h=1-v;var m=h*h,k=2*v*h,j=v*v;e.push([m*w[0]+k*u[0]+j*q[0],m*w[1]+k*u[1]+j*q[1]])}},_inplotBezier:function(j,g,f,e,m){var A=a.sqrt;var l=g[0]-j[0],q=g[1]-j[1],k=f[0]-g[0],o=f[1]-g[1],h=e[0]-f[0],n=e[1]-f[1];var B=a.floor((A(l*l+q*q)+A(k*k+o*o)+A(h*h+n*n))*0.25);for(var u=1;u<=B;u++){var r=1/B*u,C=1-r;var z=C*C*C,x=3*r*C*C,w=3*r*r*C,v=r*r*r;m.push([z*j[0]+x*g[0]+w*f[0]+v*e[0],z*j[1]+x*g[1]+w*f[1]+v*e[1]])}},moveTo:function(e,f){if(e!==undefined&&f!==undefined){if(this._subPaths.length>0){this._interpolatedVertices[this._interpolatedVertices.length-1].push(this._interpolatedVertices[this._interpolatedVertices.length-1][0])}this._subPaths.push([{cmd:"orig",x:e,y:f}]);this._interpolatedVertices.push([[e,f]]);return this}},closeSubPath:function(){if(this._subPaths.length>0){this._subPaths[this._subPaths.length-1].push({cmd:"close"});var e=this._interpolatedVertices[this._interpolatedVertices.length-1];e.push(e[0]);this.moveTo(e[0][0],e[0][1]);return this}},lineTo:function(e,f){if(e!==undefined&&f!==undefined){if(this._subPaths.length==0){this.moveTo(e,f)}else{this._subPaths[this._subPaths.length-1].push({cmd:"lnto",x:e,y:f});this._interpolatedVertices[this._interpolatedVertices.length-1].push([e,f])}return this}},splineTo:function(g,e){if(g!==undefined&&e!==undefined){if(this._subPaths.length==0){this.moveTo(g.x,g.y)}this._subPaths[this._subPaths.length-1].push({cmd:"spln",cx:g.x,cy:g.y,x:e.x,y:e.y});var f=this._interpolatedVertices[this._interpolatedVertices.length-1];this._inplotSpline(f[f.length-1],[g.x,g.y],[e.x,e.y],f);return this}},bezierCurveTo:function(h,f,e){if(h!==undefined&&f!==undefined&&e!==undefined){if(this._subPaths.length==0){this.moveTo(h.x,h.y)}this._subPaths[this._subPaths.length-1].push({cmd:"bcur",c1x:h.x,c1y:h.y,c2x:f.x,c2y:f.y,x:e.x,y:e.y});var g=this._interpolatedVertices[this._interpolatedVertices.length-1];this._inplotBezier(g[g.length-1],[h.x,h.y],[f.x,f.y],[e.x,e.y],g);return this}},arcTo:function(g,f,e){if(g!==undefined&&f!==undefined&&e>0){if(this._subPaths.length==0){this.moveTo(g.x,g.y)}this._subPaths[this._subPaths.length-1].push({cmd:"arct",c1x:g.x,c1y:g.y,c2x:f.x,c2y:f.y,r:e});this._interpolatedVertices[this._interpolatedVertices.length-1].push([f.x,f.y]);return this}},arc:function(f,e,k,j,h){if(f!==undefined&&k!==undefined&&e>0&&j!==undefined){if(k!==j){if(this._subPaths.length==0){this._subPaths.push([{cmd:"arc",x:f.x,y:f.y,sa:k,ea:j,r:e,cw:h!==undefined?h:false}]);var g=[];this._inplotArc([f.x,f.y],k,j,e,g);this._interpolatedVertices.push(g)}else{this._subPaths[this._subPaths.length-1].push({cmd:"arc",x:f.x,y:f.y,sa:k,ea:j,r:e,cw:h!==undefined?h:false});var g=this._interpolatedVertices[this._interpolatedVertices.length-1];this._inplotArc([f.x,f.y],k,j,e,g)}}return this}},rect:function(e,j,f,g){if(e!==undefined&&j!==undefined&&f>0&&g>0){this._subPaths.push([{cmd:"rect",x:e,y:j,w:f,h:g}]);this._interpolatedVertices.push([[e,j],[e+f,j],[e+f,j+g],[e,j+g],[e,j]]);this.moveTo(e,j);return this}},reset:function(){this._subPaths.splice(0,this._subPaths.length);this._interpolatedVertices.splice(0,this._subPaths.length)},doDraw:function(e){var n=e;n.beginPath();for(var f=0,h,m=this._subPaths,j=m.length;f<j;f++){h=m[f];for(var l=0,k,g=h.length;l<g;l++){k=h[l];switch(k.cmd){case"orig":n.moveTo(k.x,k.y);break;case"close":n.closePath();break;case"lnto":n.lineTo(k.x,k.y);break;case"spln":n.quadraticCurveTo(k.cx,k.cy,k.x,k.y);break;case"bcur":n.bezierCurveTo(k.c1x,k.c1y,k.c2x,k.c2y,k.x,k.y);break;case"arct":n.arcTo(k.c1x,k.c1y,k.c2x,k.c2y,k.r);break;case"arc":n.arc(k.x,k.y,k.r,k.sa,k.ea,!k.cw);break;case"rect":n.rect(k.x,k.y,k.w,k.h);break}}}if(this.fillingColor()){n.closePath();this.fillShape(n)}this.drawBorder(n)},doPointInTest:(function(){var e=function(g,f,h){return((f[0]-g[0])*(h[1]-g[1])-(h[0]-g[0])*(f[1]-g[1]))};return function(r){var q=0;var o=r.x,n=r.y;var g=[o,n];for(var m=0,f=this._interpolatedVertices,k=f.length;m<k;m++){for(var l=0,s=f[m],h=s.length-1;l<h;l++){if(s[l][1]<=n){if(s[l+1][1]>n){if(e(s[l],s[l+1],g)>0){++q}}}else{if(s[l+1][1]<=n){if(e(s[l],s[l+1],g)<0){--q}}}}if(q!=0){return true}}return false}})()});return b});sap.riv.module({qname:"sap.riv.viz.shared.utils.ColorSeriesGenerator",version:"3.4.0"},[{qname:"sap.riv.core.utils.ColorUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"}],function Setup(d,a){var b=function(j,g,f,e){if(!a.isExist(e)){e=1}return d.fromHSLA(j/360,g,f,e)};var c={getColorSeries:function(m,h){var g=[m.hue(),m.saturation(),m.lightness(),m.alpha()];var n=new Array();n[0]=b(360-((360-g[0])+15)%360,g[1],g[2]);n[1]=b(g[0],g[1],g[2]);n[2]=b((g[0]+15)%360,g[1],g[2]);var k=new Array();k[0]=new Array();k[1]=new Array();k[2]=new Array();for(var f=0;f<3;f++){for(var e=0;e<10;e++){k[f].unshift(b(n[f].hue(),n[f].saturation(),e/10).toColorString(h))}for(var e=1;e<=4;e++){var l=(360-((360-n[f].hue())+(20*e))%360);k[f].unshift(b(l,n[f].saturation(),0.9).toColorString(h))}}return k},getColorSeriesFromCSS:function(g){var f=d.fromCSSColor(g);var e=this.getColorSeries(f,"rgba");return e},getColorSeriesForBar:function(k,g){g=g||"rgba";var j=d.fromCSSColor(k);var f=[];var e=j.hue();var h=j.saturation();var m=j.lightness();var l=j.alpha();if(j.lightness()<=0.75){f[0]=b(e,h,(m+0.25),l).toColorString(g);f[1]=b(e,h,(m+0.15),l).toColorString(g);f[2]=j.toColorString(g);f[3]=b(e,h,(m-0.1)>0?(m-0.1):0,l).toColorString(g)}else{f[0]=b(e,h,(m+0.1)>1?1:(m+0.1),l).toColorString(g);f[1]=j.toColorString(g);f[2]=b(e,h,(m-0.15),l).toColorString(g);f[3]=b(e,h,(m-0.25),l).toColorString(g)}return f},getUnsaturatedColor:function(f){var e=d.fromCSSColor(f);var g=b(e.hue(),0,e.lightness());return g.toColorString()}};return c});sap.riv.module({qname:"sap.riv.viz.shared.type.ObjectArray",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.type.Array",version:"3.4.0"}],function Setup(d,a,b){var c=d.derive(b,{constructor:function(){this.name="ObjectArray"},validateValue:function(e,f){return a.isArray(e)}});return c});sap.riv.module({qname:"sap.riv.viz.shared.type.Color",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.type.BasicType",version:"3.4.0"}],function Setup(d,b,a){var c=d.derive(a,{constructor:function(){this.name="Color";this.hexReg=new RegExp(/(^#[0-9a-fA-F]{6}$)/);this.rgbReg=new RegExp("^[\\s]*[rR][gG][Bb][(]([\\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?)[\\s]*,){2}[\\s]*(2[0-4]\\d|25[0-5]|[01]?\\d\\d?)[\\s]*[)]{1}$");this.rgbaReg=new RegExp("^[\\s]*[rR][gG][Bb][Aa][(]([\\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?)[\\s]*,){3}[\\s]*(1|0|0.[0-9]*)[\\s]*[)]{1}$")},validateValue:function(e,f){if(!b.isExist(e)){return true}return this.hexReg.test(e)||this.rgbReg.test(e)||this.rgbaReg.test(e)}});return c});sap.riv.module({qname:"sap.riv.viz.shared.type.Number",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.type.BasicType",version:"3.4.0"}],function Setup(d,b,a){var c=d.derive(a,{constructor:function(){this.name="Number"},validateValue:function(e,f){if(!b.isExist(e)){return true}return !b.isString(e)&&b.isNumber(e)}});return c});sap.riv.module({qname:"sap.riv.viz.shared.type.String",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.type.BasicType",version:"3.4.0"}],function Setup(d,b,a){var c=d.derive(a,{constructor:function(){this.name="String"},validateValue:function(e,f){if(!b.isExist(e)){return true}return b.isString(e)}});return c});sap.riv.module({qname:"sap.riv.viz.shared.axis.FoucsCalculator",version:"3.4.0"},[{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.core.Math",version:"3.4.0"}],function Setup(a,c){var b=function(){};b.createFocus=function(d){switch(d){case"off":return new b.NoFocus();case"full":return new b.StandardFocus();case"growth":return new b.ZoomOutFocus();default:return new b.ManualFocus()}};b.StandardFocus=function(){return this};b.StandardFocus.prototype.calculateFocus=function(d){switch(d.lineScaling){case"logarithmic":case"log10":return this.calculateLogarithmicFocus(d.minValue,d.maxValue);default:return this.calculateLinearFocus(d.minValue,d.maxValue)}};b.StandardFocus.prototype.calculateLogarithmicFocus=function(g,h){var e=new b.BoundsAndUnits();e.major=this.calculateMajorUnitFromBounds(g,h);e.minor=e.major/3;if(g<=0){g=1}if(h<=0){h=minimm+1}var f=c.log(g)/c.log(10);var d=c.log(h)/c.log(10);if(d>=0&&f>=0){e.max=c.pow(10,c.ceil(d));e.min=1}else{if(d<=0&&f<=0){e.max=1;e.min=c.pow(10,c.floor(f))}else{if(d>=0&&f<=0){e.max=c.pow(10,c.ceil(d));e.min=c.pow(10,c.floor(f))}}}return e};b.StandardFocus.prototype.calculateLinearFocus=function(e,f){var d=new b.BoundsAndUnits();d.major=this.calculateMajorUnitFromBounds(e,f);d.minor=d.major/3;if(f>=0&&e>=0){d.max=f+0.05*(f-e);var g=c.ceil(d.max/d.major);d.max=g*d.major;d.min=e-((f-e)/2);g=c.max(0,c.floor(d.min/d.major));d.min=g*d.major}else{if(f<=0&&e<=0){d.min=e+0.05*(e-f);g=c.floor(d.min/d.major);d.min=g*d.major;d.max=f-((e-f)/2);g=c.min(0,c.ceil(d.max/d.major));d.max=g*d.major}else{d.max=f+0.05*(f-e);g=c.ceil(d.max/d.major);d.max=g*d.major;d.min=e+0.05*(e-f);g=c.floor(d.min/d.major);d.min=g*d.major}}return d};b.DEFAULT_MIN_BOUND=0;b.DEFAULT_MAX_BOUND=5;b.validateBounds=function(e,d){if(a.isNaN(e)||a.isNaN(d)){e=b.DEFAULT_MIN_BOUND;d=b.DEFAULT_MAX_BOUND}if(e===d){if(e>0){e=0}else{if(d<0){d=0}else{e=b.DEFAULT_MIN_BOUND;d=b.DEFAULT_MAX_BOUND}}}return{min:e,max:d}};b.calculateStackedBounds=function(g,n){var f;var l;var m=[];var k=[];for(var h=0;h<g.length;h++){var o=g[h];for(var e=0;e<o.length;e++){var d=o[e].value;if(n&&d<1){continue}if(!isNaN(d)){if(d>0){if(m[e]==undefined){m[e]=d}else{m[e]+=d}}if(d<0){if(k[e]==undefined){k[e]=d}else{k[e]+=d}}if(isNaN(f)){f=d}else{f=c.min(f,d)}if(isNaN(l)){l=d}else{l=c.max(l,d)}}}}for(h=0;h<k.length;h++){if(!isNaN(k[h])){if(isNaN(f)){f=k[h]}else{f=c.min(f,k[h])}}}for(h=0;h<m.length;h++){if(!isNaN(m[h])){if(isNaN(l)){l=m[h]}else{l=c.max(l,m[h])}}}return{min:f,max:l}};b.StandardFocus.prototype.calculateMajorUnitFromBounds=function(f,g){var e=0;var d=g-f;if(g>0&&f<0){e=c.log(d)/c.log(10);e=c.floor(e);d=d/c.pow(10,e);if(1<=d&&d<1+(81/99)){d=0.2}else{if(1+(81/99)<=d&&d<4+(54/99)){d=0.5}else{if(4+(54/99)<=d&&d<9+(1/11)){d=1}else{d=2}}}return d*c.pow(10,e)}else{if(d<(g*0.16667)){d=d/6.3492063492063;e=c.log(d)/c.log(10);e=c.floor(e);d=d/c.pow(10,e);if(d/5>1){d=10}else{if(d/2>1){d=5}else{if(d>1){d=2}else{d=1}}}return d*c.pow(10,e)}else{if(f<0){g=c.abs(f)}d=c.log(g)/c.log(10);e=c.floor(d);d=g/c.pow(10,e);if(1<=d&&d<1.90476){return 0.2*c.pow(10,e)}if(1.09476<=d&&d<4.7619){return 0.5*c.pow(10,e)}if(4.7619<=d&&d<9.5239){return c.pow(10,e)}return 2*c.pow(10,e)}}};b.NoFocus=function(){return this};b.NoFocus.prototype.calculateFocus=function(d){};b.ZoomOutFocus=function(){};b.ZoomOutFocus.prototype.calculateFocus=function(d){};b.ManualFocus=function(){return this};b.ManualFocus.prototype.calculateFocus=function(m){var j=m.manualScale;var e=j.min,l=j.max,h,d,k,f;var g=j.minorDivision;if(!a.isExist(g)||g<=0){g=3}if(a.isExist(e)&&a.isExist(l)){if(e<l){e=j.min;l=j.max}else{if(e===l){e=e;l=e+1}else{e=0;l=500}}}else{e=0;l=500}if(!a.isExist(j.space)){h=a.isExist(j.division)?j.division:3;k=(l-e)/h;f=k/g}else{d=j.space;k=d;f=k/g}return{min:e,max:l,major:parseFloat(k.toFixed(10)),minor:f}};b.BoundsAndUnits=function(){return{min:0,max:0,major:0,minor:0}};return b});sap.riv.module({qname:"sap.riv.vizkit.ThemeManager",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.Observable",version:"3.4.0"}],function Setup(c,a){var b=new (c.derive(a,{events:["defaultThemeChanged","themeSettingChanged"],constructor:function(d){this._themeReg={}},defaultTheme:function(e){if(e!==undefined){if(this._defaultTheme!==e&&this.hasThemeInstalled(e)){var d=this._defaultTheme;this._defaultTheme=e;this.fireEvent("defaultThemeChanged",d,e)}return this}return this._defaultTheme},hasThemeInstalled:function(d){return this._themeReg.hasOwnProperty(d)},installTheme:function(d,e){if(!this._themeReg.hasOwnProperty(d)){this._themeReg[d]=c.extend({},e)}},getThemeSettings:function(d){if(this._themeReg.hasOwnProperty(d)){return c.extend({},this._themeReg[d])}},updateThemeSetting:function(g,e,f){if(this._themeReg.hasOwnProperty(g)){var d=this._themeReg[g][e];this._themeReg[g][e]=f;this.fireEvent("themeSettingChanged",g,e,d,f)}}}))();return b});sap.riv.module({qname:"sap.riv.viz.shared.type.Integer",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.type.BasicType",version:"3.4.0"}],function Setup(d,b,a){var c=d.derive(a,{constructor:function(){this.name="Int";this.reg=new RegExp(/^-?\d+$/)},validateValue:function(e,f){if(!b.isExist(e)){return true}return(!b.isString(e)&&b.isNumber(e)&&this.reg.test(e))||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY}});return c});sap.riv.module({qname:"sap.riv.viz.shared.type.IntegerArray",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.type.Array",version:"3.4.0"}],function Setup(d,a,c){var b=d.derive(c,{constructor:function(){this.name="IntArray";this.reg=new RegExp(/^-?\d+$/)},validateItem:function(e,f){if(!a.isExist(e)){return true}return(!a.isString(e)&&a.isNumber(e)&&this.reg.test(e))||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY}});return b});sap.riv.module({qname:"sap.riv.viz.shared.type.PositiveInteger",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.type.BasicType",version:"3.4.0"}],function Setup(d,b,a){var c=d.derive(a,{constructor:function(){this.name="PositiveInt";this.reg=new RegExp(/^(0|[1-9][0-9]*)$/)},validateValue:function(e,f){if(!b.isExist(e)){return true}return(!b.isString(e)&&b.isNumber(e)&&this.reg.test(e))||e===Number.POSITIVE_INFINITY}});return c});sap.riv.module({qname:"sap.riv.viz.shared.type.ColorArray",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.type.Array",version:"3.4.0"}],function Setup(d,a,b){var c=d.derive(b,{constructor:function(){this.name="ColorArray";this.hexReg=new RegExp(/(^#[0-9a-fA-F]{6}$)/);this.rgbReg=new RegExp("^[\\s]*[rR][gG][Bb][(]([\\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?)[\\s]*,){2}[\\s]*(2[0-4]\\d|25[0-5]|[01]?\\d\\d?)[\\s]*[)]{1}$");this.rgbaReg=new RegExp("^[\\s]*[rR][gG][Bb][Aa][(]([\\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?)[\\s]*,){3}[\\s]*(1|0|0.[0-9]*)[\\s]*[)]{1}$")},validateItem:function(e,f){if(!a.isExist(e)){return true}return this.hexReg.test(e)||this.rgbReg.test(e)||this.rgbaReg.test(e)}});return c});sap.riv.module({qname:"sap.riv.core.Animator",version:"3.4.0"},[{qname:"sap.riv.core.utils.ColorUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.LinkedHashMap",version:"3.4.0"},{qname:"sap.riv.core.utils.TransformHelper",version:"3.4.0"},{qname:"sap.riv.core.Math",version:"3.4.0"}],function Setup(f,h,k,r,o,j){var m=0;var c=function(){return"anim-"+m++};var u=function e(L,z,x,H,G,w){var K=0,O=0,B=0,I=0,M=0,A=0;var F=function(P){return((K*P+O)*P+B)*P};var E=function(P){return((I*P+M)*P+A)*P};var N=function(P){return(3*K*P+2*O)*P+B};var J=function(P){return 1/(200*P)};var D=function(P,Q){return E(C(P,Q))};var C=function(W,X){var V,U,T,Q,P,S;function R(Y){if(Y>=0){return Y}else{return 0-Y}}for(T=W,S=0;S<8;S++){Q=F(T)-W;if(R(Q)<X){return T}P=N(T);if(R(P)<0.000001){break}T=T-Q/P}V=0;U=1;T=W;if(T<V){return V}if(T>U){return U}while(V<U){Q=F(T);if(R(Q-W)<X){return T}if(W>Q){V=T}else{U=T}T=(U-V)*0.5+V}return T};B=3*z;O=3*(H-z)-B;K=1-B-O;A=3*x;M=3*(G-x)-A;I=1-A-M;return D(L,J(w))};var q=(function(){var w=function(A,z,C,B){return function(D){return u(D,A,z,C,B,100)}};var x={Linear:function(z){return z},EaseIn:function(z){return u(z,0.42,0,1,1,100)},EaseOut:function(z){return u(z,0,0,0.58,1,100)},EaseInEaseOut:function(z){return u(z,0.42,0,0.58,1,100)}};return{getTimingFunction:function(z){if(x.hasOwnProperty(z)){return x[z]}else{if(k.isArray(z)&&z.length==2){return w(z[0].x,z[0].y,z[1].x,z[1].y)}}}}})();var l=function(z,x,w){this._source=z;this._dest=x;this._range=this._dest-this._source;this._easingFunc=w};l.prototype.interpolateAt=function(w){return this._source+this._easingFunc(w)*this._range};var b=function(x,w,z){this._source=f.fromCSSColor(x);this._dest=f.fromCSSColor(w);this._redRange=this._dest.red()-this._source.red();this._greenRange=this._dest.green()-this._source.green();this._blueRange=this._dest.blue()-this._source.blue();this._alphaRange=this._dest.alpha()-this._source.alpha();this._easingFunc=z};b.prototype.interpolateAt=function(C){var x=this._easingFunc(C);var A=this._source.red(),z=this._source.green(),B=this._source.blue(),w=this._source.alpha();return f.fromRGBA(A+this._redRange*x,z+this._greenRange*x,B+this._blueRange*x,w+this._alphaRange*x)};var t=function(z,x,w){this._source=z;this._dest=x;this._range=[x[0]-z[0],x[1]-z[1]];this._easingFunc=w};t.prototype.interpolateAt=function(x){var w=this._easingFunc(x);return[this._source[0]+this._range[0]*w,this._source[1]+this._range[1]*w]};var n=function(z,x,w){this._source=z;this._dest=x;this._range={x:x.x-z.x,y:x.y-z.y,w:x.w-z.w,h:x.h-z.h};this._easingFunc=w};n.prototype.interpolateAt=function(x){var w=this._easingFunc(x);return{x:this._source.x+this._range.x*w,y:this._source.x+this._range.y*w,w:this._source.x+this._range.w*w,h:this._source.x+this._range.h*w}};var a=function(z,x,w){this._source=o.unmatrix(z);this._dest=o.unmatrix(x);this._range={tx:this._dest.tx-this._source.tx,ty:this._dest.ty-this._source.ty,sx:this._dest.sx-this._dest.sx,sy:this._dest.sy-this._dest.sy,skew:this._dest.skew-this._source.skew,rotate:this._dest.rotate-this._source.rotate};this._easingFunc=w};a.prototype.interpolateAt=function(B){var D=o;var A=this._easingFunc(B);var z=this._source.tx+this._range.tx*A;var x=this._source.ty+this._range.ty*A;var E=this._source.sx+this._range.sx*A;var C=this._source.sy+this._range.sy*A;var F=this._source.skew+this._source.skew*A;var w=this._source.rotate+this._source.rotate*A;return D.makeScaleTM(E,C,D.makeSkewTM(F,F,D.makeRotateTM(w,D.makeTranslateTM(z,x))))};var s={getInterpolator:function(x,z,w,A){switch(x){case"POINT":return new t(z,w,A);case"RECT":return new n(z,w,A);case"FLOAT":return new l(z,w,A);case"COLOR":return new b(z,w,A);case"TRANSFORM":throw new a(z,w,A);default:throw new Error("Unknown type for interpolation")}}};var g={submitted:0,running:1,stopped:2,paused:3,cancelled:4,aborted:5};var d=function(w,B,z,x,A){this._id=c();this._state=g.submitted;this._values=w;this._startWhen=B;this._pauseWhen=0;this._resumeWhen=0;this._endWhen=z;this._duration=z-B;this._onStep=x;this._onComplete=A};var v=(function(){var E=new r();var D=50;var z=20;var B=false;var x=function(M,G){var L=G/M._duration;var K=[];for(var I=0,J,H=M._values,F=H.length;I<F;I++){J=H[I];K.push(J.interpolator.interpolateAt(L))}M._onStep(K)};var w=function(I,G,H){switch(I._state){case g.submitted:switch(G){case g.running:if(H>=I._startWhen){I._state=g.running;var F=j.min(H-I._startWhen-I._resumeWhen+I._pauseWhen,I._duration);x(I,F)}break;case g.stopped:I._state=g.stopped;x(I,I._duration);I._onComplete();break;case g.aborted:I._state=g.aborted;break;case g.cancelled:I._state=g.cancelled;break}break;case g.running:switch(G){case g.running:if(H<I._endWhen+I._resumeWhen-I._pauseWhen){var F=H-I._startWhen-I._resumeWhen+I._pauseWhen;x(I,F)}else{I._state=g.stopped;x(I,I._duration);I._onComplete()}break;case g.paused:I._state=g.Paused;I._pauseWhen=H;break;case g.stopped:I._state=g.stopped;x(I,I._duration);I._onComplete();break;case g.aborted:I._state=g.aborted;break;case g.cancelled:I._state=g.cancelled;x(I,0);break}break;case g.paused:switch(G){case g.running:I._resumeWhen=H;I._state=g.running;break;case g.stopped:I._state=g.stopped;x(I,I._duration);I._onComplete();break;case g.aborted:I._state=g.aborted;break;case g.cancelled:I._state=g.cancelled;x(I,0);break}break;break}};var A=function(){var G=(new Date()).getTime();var K=E.getIterator();var J;var H=[];while(K.hasMore()){J=K.nextValue();if(J._state===g.submitted||J._state===g.running){w(J,g.running,G)}if(J._state===g.aborted||J._state===g.cancelled||J._state===g.stopped){H.push(J._id)}}for(var I=0,F=H.length;I<F;I++){E.remove(H[I])}if(!E.isEmpty()){C()}else{B=false}};var C=function(){B=setTimeout(A,z)};return{fps:function(F){if(F!==undefined){if(F!==D&&F>0&&F<=100){D=F;z=j.ceil(1000/F)}return this}return D},animate:function(H){var F=H.duration;var K,N;var L=[];var G=q.getTimingFunction(H.easing||"Linear");for(var I=0,M,J=H.values.length;I<J;I++){M=H.values[I];L.push({type:M.type,from:M.from,to:M.to,interpolator:s.getInterpolator(M.type,M.from,M.to,G)})}if(k.isNumber(F)&&F>0){K=(new Date()).getTime();N=K+F}else{K=F.startWhen;if(F.hasOwnProperty("duration")){N=K+F.duration}else{N=F.endWhen}}var O=new d(L,K,N,H.onStep||h.noop,H.onComplete||h.noop);E.add(O._id,O);if(!B){C()}return O._id},abortAnimation:function(F){if(E.has(F)){w(E.get(F),g.aborted,(new Date()).getTime())}},pauseAnimation:function(F){if(E.has(F)){w(E.get(F),g.paused,(new Date()).getTime())}},resumeAnimation:function(F){if(E.has(F)){w(E.get(F),g.running,(new Date()).getTime())}},cancelAnimation:function(F){if(E.has(F)){w(E.get(F),g.cancelled,(new Date()).getTime())}},abortAll:function(){var F,G=E.getIterator();while(G.hasMore()){F=G.nextValue();w(F,g.aborted,(new Date()).getTime())}},pauseAll:function(){var F,G=E.getIterator();while(G.hasMore()){F=G.nextValue();w(F,g.paused,(new Date()).getTime())}},resumeAll:function(){var F,G=E.getIterator();while(G.hasMore()){F=G.nextValue();w(F,g.running,(new Date()).getTime())}},cancelAll:function(){var F,G=E.getIterator();while(G.hasMore()){F=G.nextValue();w(F,g.cancelled,(new Date()).getTime())}}}})();return v});sap.riv.module({qname:"sap.riv.vizkit.GestureDetector",version:"3.4.0"},[{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"}],function Setup(c){var b={Possible:0,Began:1,Changed:2,Recognized:3,Ended:3,Cancelled:4,Failed:5};var d=function(){this._grOwnerComp;this._grEnabled=true;this._grTouchTotal=0;this._grTouchTracker={};this._grState=b.Possible;this._grActions=[];this._grCancelTouches=true};var a=d.prototype;a._setOwnerComp_=function(e){this._grOwnerComp=e};a.attachedComponent=function(){return this._grOwnerComp};a.addGestureAction=function(h){var g=false;for(var f=0,e=this._grActions.length;f<e;f++){if(this._grActions[f]===h){g=true;break}}if(!g){this._grActions.push(h)}return !g};a.removeGestureAction=function(g){var h=false;for(var f=0,e=this._grActions.length;f<e;f++){if(this._grActions[f]===g){h=true;this._grActions.splice(f,1);break}}return h};a.globalLocOfGesture=function(){var h=this.state();if(this._grEnabled&&(h===b.Began||h===b.Changed||h===b.Cancelled||h===b.Ended||h===b.Recognized)){var g=0;var f=this._grTouchTracker,j;var e=y=0;for(var k in f){j=f[k].globalXY;e+=j.x;y+=j.y;g++}if(g){return{x:e/g,y:y/g}}}else{return}};a.involvedTouchePoints=function(){var e=[];var g=this.state();if(this._grEnabled&&(g===b.Began||g===b.Cancelled||g===b.Ended||g===b.Recognized)){var f=this._grTouchTracker;for(var h in f){e.push(h)}}return e};a.globalLocOfTouchPoints=function(){var g=0;var f=this._grTouchTracker,h;var e=y=0;for(var j in f){h=f[j].globalXY;e+=h.x;y+=h.y;g++}if(g){return{x:e/g,y:y/g}}};a.totalTouches=function(){return this._grTouchTotal};a.cancelTouches=function(e){if(e!==undefined){this._grCancelTouches=e;return this}else{return this._grCancelTouches}};a.enable=function(e){if(e!==undefined){this._grEnabled=e;if(!e){if(this._grState===b.Began||this._grState===b.Cancelled){this.state(b.Cancelled)}else{this.state(b.Failed)}}}else{return this._grEnabled}};a.touchBegin=function(f){var g=f.changedTouches;var l=this._grTouchTracker;var k=this._grOwnerComp;var m=k.pagePosition();for(var j=0,h,e=g.length;j<e;j++){h=g.item(j);l[h.identifier]={globalXY:k.convertPointToGlobal({x:h.pageX-m.x,y:h.pageY-m.y})};this._grTouchTotal++}if(this._grEnabled&&(this._grState===b.Possible||this._grState===b.Began||this._grState===b.Changed)){this.doTouchBegin(f)}};a.touchMove=function(g){if(this._grEnabled&&(this._grState===b.Possible||this._grState===b.Began||this._grState===b.Changed)){var f=g.changedTouches;var k=this._grOwnerComp;var m=k.pagePosition();var l=this._grTouchTracker;for(var j=0,h,e=f.length;j<e;j++){h=f.item(j);if(l[h.identifier]){l[h.identifier].globalXY=k.convertPointToGlobal({x:h.pageX-m.x,y:h.pageY-m.y})}}this.doTouchMove(g)}};a.touchEnd=function(k){var l=k.changedTouches;var n=this._grTouchTracker;var f=this._grOwnerComp;var m=f.pagePosition();for(var g=0,o,h,e,j=l.length;g<j;g++){o=l.item(g);h=o.identifier;e=n[h];if(e){e.globalXY=f.convertPointToGlobal({x:o.pageX-m.x,y:o.pageY-m.y});this._grTouchTotal--}}if(this._grEnabled&&(this._grState===b.Possible||this._grState===b.Began||this._grState===b.Changed)){this.doTouchEnd(k)}if(!this._grTouchTotal&&(this._grState===b.Recognized||this._grState===b.Failed||this._grState===b.Cancelled)){this.reset()}};a.touchCancel=function(k){var o=k.changedTouches;var m=this._grTouchTracker;var f=this._grOwnerComp;var l=f.pagePosition();for(var g=0,n,h,e,j=o.length;g<j;g++){n=o.item(g);h=n.identifier;e=m[h];if(e){e.globalXY=f.convertPointToGlobal({x:n.pageX-l.x,y:n.pageY-l.y});this._grTouchTotal--}}if(this._grEnabled&&(this._grState===b.Possible||this._grState===b.Began||this._grState===b.Changed)){this.doTouchCancel(k)}if(!this._grTouchTotal&&(this._grState===b.Recognized||this._grState===b.Failed||this._grState===b.Cancelled)){this.reset()}};a.doTouchBegin=c.noop;a.doTouchMove=c.noop;a.doTouchEnd=c.noop;a.doTouchCancel=c.noop;a.reset=function(){this._grState=b.Possible;this._grTouchTracker={}};a.state=function(e){return this._grState};a._setState_=function(h){switch(h){case b.Possible:break;case b.Began:this._grState=b.Began;for(var g=0,f=this._grActions,e=f.length;g<e;g++){f[g](this)}break;case b.Changed:if(this._grState===b.Began){this._grState=b.Changed}for(var g=0,f=this._grActions,e=f.length;g<e;g++){f[g](this)}break;case b.Cancelled:this._grState=b.Cancelled;for(var g=0,f=this._grActions,e=f.length;g<e;g++){f[g](this)}break;case b.Failed:this._grState=b.Failed;break;case b.Ended:case b.Recognized:this._grState=h;for(var g=0,f=this._grActions,e=f.length;g<e;g++){f[g](this)}break}};d.TransitionState=b;return d});sap.riv.module({qname:"sap.riv.viz.shared.type.TypeManager",version:"3.4.0"},[{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.type.Array",version:"3.4.0"},{qname:"sap.riv.viz.shared.type.Bool",version:"3.4.0"},{qname:"sap.riv.viz.shared.type.Color",version:"3.4.0"},{qname:"sap.riv.viz.shared.type.ColorArray",version:"3.4.0"},{qname:"sap.riv.viz.shared.type.Font",version:"3.4.0"},{qname:"sap.riv.viz.shared.type.Function",version:"3.4.0"},{qname:"sap.riv.viz.shared.type.Integer",version:"3.4.0"},{qname:"sap.riv.viz.shared.type.IntegerArray",version:"3.4.0"},{qname:"sap.riv.viz.shared.type.List",version:"3.4.0"},{qname:"sap.riv.viz.shared.type.NegativeInteger",version:"3.4.0"},{qname:"sap.riv.viz.shared.type.Object",version:"3.4.0"},{qname:"sap.riv.viz.shared.type.ObjectArray",version:"3.4.0"},{qname:"sap.riv.viz.shared.type.Number",version:"3.4.0"},{qname:"sap.riv.viz.shared.type.PositiveNumber",version:"3.4.0"},{qname:"sap.riv.viz.shared.type.PositiveInteger",version:"3.4.0"},{qname:"sap.riv.viz.shared.type.String",version:"3.4.0"},{qname:"sap.riv.viz.shared.type.StringArray",version:"3.4.0"},{qname:"sap.riv.viz.shared.type.StringArray",version:"3.4.0"}],function Setup(r,F,K,n,E,I,x,B,w,l,d,g,M,v,G,m,H,t){var k={};var e={};k.registerType=function(O,P){e[O]=P};k.getTypeObj=function(O){if(r.isExist(e[O])){return e[O]}return null};var a=new K();k.registerType(a.getName(),a);var o=new F();k.registerType(o.getName(),o);var z=new n();k.registerType(z.getName(),z);var h=new E();k.registerType(h.getName(),h);var L=new I();k.registerType(L.getName(),L);var q=new x();k.registerType(q.getName(),q);var D=new B();k.registerType(D.getName(),D);var J=new w();k.registerType(J.getName(),J);var s=new l();k.registerType(s.getName(),s);var A=new d();k.registerType(A.getName(),A);var b=new g();k.registerType(b.getName(),b);var c=new M();k.registerType(c.getName(),c);var N=new v();k.registerType(N.getName(),N);var j=new G();k.registerType(j.getName(),j);var f=new m();k.registerType(f.getName(),f);var C=new H();k.registerType(C.getName(),C);var u=new t();k.registerType(u.getName(),u);return k});sap.riv.module({qname:"sap.riv.viz.shared.context.Context",version:"3.4.0",exported:true},[{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"}],function Setup(){var g=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var m=Math.random()*16|0,l=n=="x"?m:m&3|8;return l.toString(16)})};var f={ID_REGISTERED:1,OBJ_REGISTERED:2,ID_NEEDED:3,ID_NOT_REGISTERED:4};var k=function(m,n){var l={};l.type=m;switch(m){case f.ID_REGISTERED:l.message="ID '"+n+"' has been registered.";break;case f.OBJ_REGISTERED:l.message="The vizObj has been registered, its Id is '"+n+"'.";break;case f.ID_NEEDED:l.message="Please specify Id";break;case f.ID_NOT_REGISTERED:l.message="No vizObj was registered with Id '"+n+"'";break}return l};var a={};var e=function(m,l){m=m?m:g();if(a[m]){throw k(f.ID_REGISTERED,m)}a[m]=l;return m};var b=function(l){if(!l){throw k(f.ID_NEEDED)}if(!a[l]){throw k(f.ID_NOT_REGISTERED,l)}delete a[l]};var d=function(l){if(!l){throw k(f.ID_NEEDED,l)}return a[l]};var j=function(){var m=[];for(var l in a){m.push(l)}return m};var c=function(l){var m=g();return l?l+"_"+m:m};var h={register:e,unregister:b,get:d,getAll:j,newId:c};return h});sap.riv.module({qname:"sap.riv.viz.shared.axis.BasicAxisRenderer",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.Math",version:"3.4.0"},{qname:"sap.riv.core.utils.TextRuler",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"},{qname:"sap.riv.graphics.Layer",version:"3.4.0"},{qname:"sap.riv.viz.shared.axis.PositionCalculator",version:"3.4.0"},{qname:"sap.riv.viz.shared.utils.NumericFormatUtils",version:"3.4.0"},{qname:"sap.riv.vizkit.ThemeManager",version:"3.4.0"},{qname:"sap.riv.graphics.shape.Line",version:"3.4.0"},{qname:"sap.riv.graphics.shape.TextLine",version:"3.4.0"}],function Setup(e,b,k,a,h,f,o,c,m,g,n){var d={top:0,bottom:0,left:1,right:0};var l=function(q){this._baxr_options=q;this._direction="horizontal";this._index=0;this._showMajorTicks=false;this._showMinorTicks=false;this._minorDivisions=3;this._majorMarkSize=8;this._minorMarkSize=4;this._showAxisLine=true;this._lineThickness=1;this._lineColor="#ffffff";this._textMargin={top:2,left:2,right:2,bottom:2};this._position="hb";this._hideOverlappingLabels=true;this._axisMatrics={top:0,right:0,left:0,bottom:0};this._title={show:false,value:"",style:"bold 13px Arial",color:"#ffffff",formatString:""};this._labels={show:true,itemsValue:[],color:"#ffffff",font:"normal 11px Arial",formatString:"",itemsPosition:[]};this._shapeRenderer={title:null,axisLine:null,majorTicks:[],minorTicks:[],labels:[]};this._visibleStart=0;this._visibleEnd=Number.POSITIVE_INFINITY;this._scaled=false;this._baxr_initialize()};var j={getOptions:function(){return this._baxr_options},getTitleMargin:function(){return{top:3,right:3,bottom:3,left:3}},_baxr_initialize:function(){var q=this._baxr_options;this._position=a.isExist(q.position)?q.position:"hb";this._lineScaling=a.isExist(q.scaling)?q.scaling:"linear";this._distance=q.distance;this._index=q.index;this._direction=a.isExist(q.direction)?q.direction:"horizontal";this._lineColor=a.isExist(q.lineColor)?q.lineColor:this._lineColor;this._labels.show=(a.isExist(q.label)&&a.isExist(q.label.visible))?q.label.visible:this._labels.show;this._labels.color=(a.isExist(q.label)&&a.isExist(q.label.color))?q.label.color:(a.isExist(q.labelColor)?q.labelColor:this._labels.color);this._labels.font=(a.isExist(q.label)&&a.isExist(q.label.font))?q.label.font:(a.isExist(q.labelFont)?q.labelFont:this._labels.font);this._labels.formatString=(a.isExist(q.label)&&a.isExist(q.label.formatString)&&q.label.formatString.length!==0)?q.label.formatString:(a.isExist(q.labelsFormatString)&&q.labelsFormatString.length!==0)?q.labelsFormatString:this._labels.formatString;this._lineThickness=a.isExist(q.lineThickness)?q.lineThickness:this._lineThickness;this._showMajorTicks=a.isExist(this._baxr_options.showMajorTicks)?this._baxr_options.showMajorTicks:false;this._showMinorTicks=a.isExist(this._baxr_options.showMinorTicks)?this._baxr_options.showMinorTicks:false;this._showAxisLine=a.isExist(q.visible)?q.visible:this._showAxisLine;if(a.isExist(q.showTitle)){this._title.show=q.showTitle;if(a.isExist(q.title)){this._title.value=q.title}if(a.isExist(q.titleFont)){this._title.style=q.titleFont}if(a.isExist(q.titleColor)){this._title.color=q.titleColor}if(a.isExist(q.titleFormatString)){this._title.formatString=q.titleFormatString}}},setLayer:function(q){this._layer=q;q.clipToBounds(true);var r=q.bounds();this._subLayer=new f({anchor:{x:0,y:0},size:{w:r.width,h:r.height}});this._layer.addSubLayer(this._subLayer)},getSubLayer:function(){return this._subLayer},getPreferredSize:function(){return this._getPreferredSize()},_getPreferredSize:function(){var r=k;var s=0;var q=0;if(this._position=="vl"||this._position=="vr"){q=this._measureWidth();s=this._distance;this._axisMatrics.bottom=this._axisMatrics.top=r.measureHeight(this._labels.font)/2;s+=this._axisMatrics.top;s+=this._axisMatrics.bottom}else{s=this._measureHeight();q=this._distance;this._axisMatrics.left=r.measureWidth(this._labels.font,this._labels.itemsValue[0].value())/2;this._axisMatrics.right=r.measureWidth(this._labels.font,this._labels.itemsValue[0].value())/2;q+=this._axisMatrics.left;q+=this._axisMatrics.right}return{width:q,height:s}},getPreferredWidth:function(){if(this._position=="vl"||this._position=="vr"){this._preferredWidth=this._measureWidth();return this._preferredWidth}else{if(a.isExist(this._distance)&&this._distance!=0){this._preferredWidth=this._distance;this._preferredWidth+=this._axisMatrics.left;this._preferredWidth+=this._axisMatrics.right;return this._preferredWidth}return 0}},getPreferredHeight:function(){if(this._position=="hb"||this._position=="ht"){this._preferredHeight=this._measureHeight();return this._preferredHeight}else{if(a.isExist(this._distance)&&this._distance!=0){this._preferredHeight=this._distance;this._preferredHeight+=this._axisMatrics.top;this._preferredHeight+=this._axisMatrics.bottom;return this._preferredHeight}return 0}},_measureHeight:function(){var q=k;var r=0;if(this._showAxisLine){if(this._showMajorTicks){if(this._showMinorTicks){if(this._majorMarkSize>=this._minorMarkSize&&this._majorMarkSize>=this._lineThickness){r+=this._majorMarkSize}else{if(this._majorMarkSize<this._minorMarkSize&&this._minorMarkSize>=this._lineThickness){r+=this._minorMarkSize}else{r+=this._lineThickness}}}else{if(this._majorMarkSize>=this._lineThickness){r+=this._majorMarkSize}else{r+=this._lineThickness}}}else{if(this._showMinorTicks){if(this._minorMarkSize>=this._lineThickness){r+=this._minorMarkSize}else{r+=this._lineThickness}}else{r+=this._lineThickness}}}if(this._showLabels()){if(this._direction==="vertical"){}else{if(!this._isLabelHorizontal()){this._direction="vertical"}else{this._direction="horizontal"}}r+=this._getTextMargin().top;if(this._direction=="horizontal"){r+=this._getLargestHeight()}else{r+=this._getLongestWidth()}r+=this._getTextMargin().bottom}if(this._title.show){r+=this.getTitleMargin().top;r+=q.measureHeight(this._title.style);r+=this.getTitleMargin().bottom}return r},_getLargestHeight:function(){return k.measureHeight(this._labels.font)},_isLabelHorizontal:function(){if(this._position=="vl"||this._position=="vr"){return true}var x=k;var D=this._labels.itemsPosition;var s=0;var r=0;if(this._labels.itemsValue.length>0){s=this._measureLabelWidth(this._labels.itemsValue[0].value());r=this._measureLabelWidth(this._labels.itemsValue[this._labels.itemsValue.length-1].value())}var z=D[0];var u=D[D.length-1];var A=0;var q=0;var C=true;if(z!=0&&(s/2>z||r/2>this._distance-u)){C=false}if(this._direction=="horizontal"&&C){for(var t=1,B=this._labels.itemsValue,v=B.length;t<v;t++){A=this._measureLabelWidth(B[t].value());q=D[t];if((z+s/2)>(q-A/2)){C=false;break}s=A;z=q}}else{return false}if(C){return true}return false},_measureLabelWidth:function(q){return k.measureWidth(this._labels.font,q)},_measureWidth:function(){var r=k;var q=0;if(this._title.show){q+=this.getTitleMargin().top;q+=r.measureHeight(this._title.style);q+=this.getTitleMargin().bottom}if(this._showAxisLine){if(this._showMajorTicks){if(this._showMinorTicks){if(this._majorMarkSize>=this._minorMarkSize&&this._majorMarkSize>=this._lineThickness){q+=this._majorMarkSize}else{if(this._majorMarkSize<this._minorMarkSize&&this._minorMarkSize>=this._lineThickness){q+=this._minorMarkSize}else{q+=this._lineThickness}}}else{if(this._majorMarkSize>=this._lineThickness){q+=this._majorMarkSize}else{q+=this._lineThickness}}}else{if(this._showMinorTicks){if(this._minorMarkSize>=this._lineThickness){q+=this._minorMarkSize}else{q+=this._lineThickness}}else{q+=this._lineThickness}}}if(!this._showLabels()){return q}q+=this._getTextMargin().right;q+=this._getLongestWidth();q+=this._getTextMargin().left;return q},draw:function(q){if(!q){this._resetShapes();this.createRenderer();if(this._scaled===false){this.getSubLayer().size(this._layer.size());this.getSubLayer().position({x:0,y:0})}}if(this._position=="hb"||this._position=="ht"){if(!a.isExist(this._preferredHeight)||this._preferredHeight==0){this._preferredHeight=this._measureHeight()}}else{if(!a.isExist(this._preferredWidth)||this._preferredWidth==0){this._preferredWidth=this._measureWidth()}}this._draw(this.getSubLayer())},_draw:function(s){var r=k;var q=0;if(this._position=="hb"){if(this._showAxisLine){q+=this._drawLineAndTick(s,q)}if(this._showLabels()){q+=this._getTextMargin().top;this._drawLabels(s,q);if(this._direction=="horizontal"){q+=r.measureHeight(this._labels.font)}else{q+=this._getLongestWidth()}q+=this._getTextMargin().bottom}if(this._title.show){q+=this.getTitleMargin().top;this._drawAxisTitle(s,(this._axisMatrics.left+this._layer.width()+this._axisMatrics.right)/2,q);q+=r.measureHeight(this._title.style);q+=this.getTitleMargin().bottom}}else{if(this._position=="ht"){if(this._title.show){q+=this.getTitleMargin().top;this._drawAxisTitle(s,(this._axisMatrics.left+this._layer.width()+this._axisMatrics.right)/2,q);q+=r.measureHeight(this._title.style);q+=this.getTitleMargin().bottom}if(this._showLabels()){q+=this._getTextMargin().top;this._drawLabels(s,q);if(this._direction=="horizontal"){q+=r.measureHeight(this._labels.font)}else{q+=this._getLongestWidth()}q+=this._getTextMargin().bottom}if(this._showAxisLine){q+=this._drawLineAndTick(s,q)}}else{if(this._position=="vl"){if(this._title.show){q+=this.getTitleMargin().top;this._drawAxisTitle(s,q,(this._axisMatrics.top+this._layer.height()+this._axisMatrics.bottom)/2);q+=r.measureHeight(this._title.style);q+=this.getTitleMargin().bottom}if(this._showLabels()){q+=this._getTextMargin().left;q+=this._getLongestWidth();this._drawLabels(s,q);q+=this._getTextMargin().right}if(this._showAxisLine){if(!this._showLabels()&&!this._showMajorTicks&&!this._showMinorTicks){if(q<s.width()-this._lineThickness){q=s.width()-this._lineThickness}}q+=this._drawLineAndTick(s,q)}}else{if(this._position=="vr"){if(this._showAxisLine){q+=this._drawLineAndTick(s,q)}if(this._showLabels()){q+=this._getTextMargin().left;this._drawLabels(s,q);q+=this._getLongestWidth();q+=this._getTextMargin().right}if(this._title.show){q+=this.getTitleMargin().top;this._drawAxisTitle(s,q,(this._axisMatrics.top+this._layer.height()+this._axisMatrics.bottom)/2);q+=r.measureHeight(this._title.style);q+=this.getTitleMargin().bottom}}}}}},createRenderer:function(){this._shapeRenderer.backgroundAxisLine=this._layer.addShape(new g());var s=this.getSubLayer();if(this._title.show){this._shapeRenderer.title=this._layer.addShape(new n())}this._shapeRenderer.axisLine=s.addShape(new g());if(this._showMajorTicks){var u=this.getMajorTicks();for(var r=0,q=u.length;r<q;r++){this._shapeRenderer.majorTicks[r]=s.addShape(new g());if(r==0){this._shapeRenderer.majorTicks[r].visible(false)}}}if(this._showMinorTicks){var t=this.getMinorTicks();for(var r=0,q=t.length;r<q;r++){this._shapeRenderer.minorTicks[r]=s.addShape(new g())}}},_drawLineAndTick:function(r,q){if(this._showMajorTicks){if(this._showMinorTicks){if(this._majorMarkSize>=this._minorMarkSize&&this._majorMarkSize>=this._lineThickness){this._drawLine(r,q+this._majorMarkSize/2);this._drawMajorTickMarks(r,q+this._majorMarkSize/2);this._drawMinorTickMarks(r,q+this._majorMarkSize/2);q+=this._majorMarkSize}else{if(this._majorMarkSize<this._minorMarkSize&&this._minorMarkSize>=this._lineThickness){this._drawLine(r,q+this._minorMarkSize/2);this._drawMajorTickMarks(r,q+this._minorMarkSize/2);this._drawMinorTickMarks(r,q+this._minorMarkSize/2);q+=this._minorMarkSize}else{this._drawLine(r,q+this._lineThickness/2);this._drawMajorTickMarks(r,q+this._lineThickness/2);this._drawMinorTickMarks(r,q+this._lineThickness/2);q+=this._lineThickness}}}else{if(this._majorMarkSize>this._lineThickness){this._drawLine(r,q+this._majorMarkSize/2);this._drawMajorTickMarks(r,q+this._majorMarkSize/2);q+=this._majorMarkSize}else{this._drawLine(r,q+this._lineThickness/2);this._drawMajorTickMarks(r,q+this._lineThickness/2);q+=this._lineThickness}}}else{if(this._showMinorTicks){if(this._minorMarkSize>=this._lineThickness){this._drawLine(r,q+this._minorMarkSize/2);this._drawMinorTickMarks(r,q+this._minorMarkSize/2);q+=this._minorMarkSize}else{this._drawLine(r,q+this._lineThickness/2);this._drawMinorTickMarks(r,q+this._lineThickness/2);q+=this._lineThickness}}else{q+=this._drawLine(r,q+this._lineThickness/2)}}return q},_drawLine:function(t,s){if(this._showAxisLine){var r=this._shapeRenderer.axisLine;r.color(this._lineColor);if(this._position=="hb"||this._position=="ht"){r.update(this._lineThickness,{x:this._axisMatrics.left,y:s},{x:this._axisMatrics.left+this._distance,y:s})}else{r.update(this._lineThickness,{x:s,y:this._axisMatrics.top},{x:s,y:this._axisMatrics.top+this._distance})}var q=this._shapeRenderer.backgroundAxisLine;q.color(this._lineColor);if(this._position=="hb"||this._position=="ht"){q.update(this._lineThickness,{x:this._axisMatrics.left,y:s},{x:this._layer.size().width-this._axisMatrics.right,y:s})}else{q.update(this._lineThickness,{x:s,y:this._axisMatrics.top},{x:s,y:this._layer.size().height-this._axisMatrics.bottom})}return this._lineThickness}return 0},_drawLabel:function(t,z,A,w,v,s){var B=z.value();var r=z.formatColor();r=r?r:this._labels.color;var q=t.addShape(new n());s.push(q);if(this._direction=="horizontal"){q.visible(true).width(k.measureWidth(this._labels.font,B)).text(B).font(this._labels.font).textColor(r);if(v=="topCenter"){q.topCenter([A,w])}else{if(v=="rightCenter"){q.rightCenter([A,w])}else{if(v=="leftCenter"){q.leftCenter([A,w])}}}}else{var u=k;q.visible(true).font(this._labels.font).textColor(r);if(this._position=="hb"){q.width(u.measureWidth(this._labels.font,B)).translate(A,w).text(B).rightCenter([0,0]).rotate(-b.PI/2)}else{if(this._position=="ht"){q.width(this._longestWidth).translate(A,w+this._longestWidth).text(B).leftCenter([0,0]).rotate(3*b.PI/2)}}}},_drawLabels:function(s,A){var q=this.getMajorTicks();var w,v,u;if(this._position=="hb"||this._position=="ht"){v=A;u="topCenter"}else{if(this._position=="vl"){w=A;u="rightCenter"}else{w=A;u="leftCenter"}}for(var r=0,z=this._labels.itemsValue,t=q.length;r<t;r++){this._shapeRenderer.labels[r]=[];if(z[r].visible()){if(this._position=="hb"||this._position=="ht"){w=q[r]}else{v=q[r]}this._drawLabel(s,z[r],w,v,u,this._shapeRenderer.labels[r])}}},_drawSignalTickMark:function(s,r,q,u,t){s.color(this._lineColor);if(this._position=="hb"||this._position=="ht"){s.update(this._lineThickness,{x:q,y:u-t/2},{x:q,y:u+t/2})}else{s.update(this._lineThickness,{x:q-t/2,y:u},{x:q+t/2,y:u})}},_drawMajorTickMarks:function(t,r){var u=this.getMajorTicks();if(this._position=="hb"||this._position=="ht"){for(var s=0,q=u.length;s<q;s++){this._drawSignalTickMark(this._shapeRenderer.majorTicks[s],t,u[s],r,this._majorMarkSize)}}else{for(var s=0,q=u.length;s<q;s++){this._drawSignalTickMark(this._shapeRenderer.majorTicks[s],t,r,u[s],this._majorMarkSize)}}},_drawMinorTickMarks:function(t,r){var u=this.getMinorTicks();if(this._position=="hb"||this._position=="ht"){for(var s=0,q=u.length;s<q;s++){this._drawSignalTickMark(this._shapeRenderer.minorTicks[s],t,u[s],r,this._minorMarkSize)}}else{for(var s=0,q=u.length;s<q;s++){this._drawSignalTickMark(this._shapeRenderer.minorTicks[s],t,r,u[s],this._minorMarkSize)}}},_drawAxisTitle:function(s,q,w){q=b.round(q);w=b.round(w);if(this._title.show){var r=this._shapeRenderer.title;var v=c.formatToTextWithColor(this._title.value,this._title.formatString,true);var u=v.text;var t=v.color?v.color:this._title.color;if(this._position=="hb"||this._position=="ht"){r.visible(true).width(k.measureWidth(this._title.style,u)).text(u).font(this._title.style).textColor(t).topCenter([q,w])}else{r.visible(true).width(k.measureWidth(this._title.style,u)).text(u).font(this._title.style).textColor(t);if(this._position=="vl"){r.translate(q,w).topCenter([0,0]).rotate(-b.PI/2)}else{if(this._position=="vr"){r.translate(q,w).topCenter([0,0]).rotate(3*b.PI/2)}}}}},u2p:function(q){if(this._lineScaling=="linear"){if(this._position=="hb"||this._position=="ht"){return o.calculateLinearPosition(q,this._positionMultiplier,this._minValue)}else{return this.getMajorTicks()[0]-o.calculateLinearPosition(q,this._positionMultiplier,this._minValue)}}else{if(this._position=="hb"||this._position=="ht"){return o.calculateLogarithmicPosition(q,this._positionMultiplier,this._minValue)}else{return this.getMajorTicks()[0]-o.calculateLogarithmicPosition(q,this._positionMultiplier,this._minValue)}}},p2u:function(q){var r=o;if(this._lineScaling=="linear"){if(this._position=="hb"||this._position=="ht"){return r.calculateLinearValue(q-this.u2p(this._minValue),this._positionMultiplier,this._minValue)}else{return r.calculateLinearValue(this.u2p(this._minValue)-q,this._positionMultiplier,this._minValue)}}else{if(this._position=="hb"||this._position=="ht"){return r.calculateLogarithmicValue(q,this._positionMultiplier,this._minValue)-this._axisMatrics.left}else{return r.calculateLogarithmicValue(q,this._positionMultiplier,this._minValue)-this._axisMatrics.top}}},getMajorTicks:function(){if(!a.isExist(this._majorTickPositions)||this._majorTickPositions.length==0){var w=this._majorTickPositions=[];var r=this._labels.itemsPosition;if(this._position=="hb"||this._position=="ht"){var s=this._axisMatrics.left;for(var t=0,v=this._labels.itemsValue,q=r.length;t<q;t++){w[t]=s+r[t]}}else{var u=this._axisMatrics.top;for(var t=0,q=r.length;t<q;t++){if(t===0){w[t]=u+r[q-1]}else{w[t]=w[t-1]-(r[t]-r[t-1])}}}}return this._majorTickPositions},getMinorTicks:function(){if(!a.isExist(this._minorTickPositions)||this._minorTickPositions.length==0){var s=this._minorTickPositions=[];var u=this.getMajorTicks();var r=u[1]-u[0];var q=r/this._minorDivisions;var A=u[u.length-1];for(var v=0,z=u.length;v<z-1;v++){for(var t=0,x=this._minorDivisions-1;t<x;t++){var w=u[v]+q*(t+1);if(r>0){if(w<A){s[v*x+t]=w}else{break}}else{if(w>A){s[v*x+t]=w}else{break}}}}}return this._minorTickPositions},getTickInterval:function(){var r=this.getMajorTicks();var q;if(r.length>1){q=b.abs(r[1]-r[0])}else{q=this._distance}return q},getMajorTickWidth:function(){if(this._showMajorTicks){return this._majorMarkSize}return 0},_resetShapes:function(){var z=this._shapeRenderer;var v=this.getSubLayer();var x=this._layer;if(z.backgroundAxisLine){x.removeShape(z.backgroundAxisLine)}if(z.title){this._layer.removeShape(z.title)}if(z.axisLine){v.removeShape(z.axisLine)}for(var t=0,s=z.majorTicks,w=s.length;t<w;t++){v.removeShape(s[t])}for(var t=0,r=z.minorTicks,w=r.length;t<w;t++){v.removeShape(r[t])}for(var t=0,u=z.labels,w=u.length;t<w;t++){if(u[t]&&u[t].length>0){for(var q=0;q<u[t].length;q++){v.removeShape(u[t][q])}}}z.labels=[]},reset:function(){this.resetLayoutExceptLabelDirection();this._direction="horizontal"},resetLayoutExceptLabelDirection:function(){this._majorTickPositions=null;this._minorTickPositions=null;this._positionMultiplier=null;this._preferredHeight=null;this._preferredWidth=null},position:function(q,r){this.getSubLayer().position({x:q,y:r})},getAxisWidth:function(){if(this._position=="hb"||this._position=="ht"){if(this._showMajorTicks){return this._layer.height()-this._majorMarkSize/2}else{return this._layer.height()}}else{if(this._showMajorTicks){return this._layer.width()-((this._showAxisLine)?this._majorMarkSize/2:0)-((this._showAxisLine)?0:1)}else{return this._layer.width()-((this._showAxisLine)?0:1)}}},getFirstTickOffset:function(){return this.getMajorTicks()[0]},getLastTickOffset:function(){var q=this.getMajorTicks();return q[q.length-1]},getLineThickness:function(){return this._lineThickness},zoom:h.noop,_calculatePositionMultiplier:function(){if(!a.isExist(this._positionMultiplier)){if(this._lineScaling==="linear"){this._positionMultiplier=o.generateLinearMultiplier(this._minValue,this._maxValue,this._distance)}else{this._positionMultiplier=o.generateLogarithmicMultiplier(this._minValue,this._maxValue,this._distance)}}return this._positionMultiplier},applyTheme:function(w){var u=m.getThemeSettings(w);var s=u.global;var v=u.axis;var x=e.extend(true,{},s,v.title);this._title.style=x["font-weight"]+" "+x["font-size"]+" "+x["font-family"];this._title.color=x.color;var r=e.extend(true,{},s,v.label);this._labels.font=r["font-weight"]+" "+r["font-size"]+" "+r["font-family"];this._labels.color=r.color;this._lineColor=v.lineColor;if(this._shapeRenderer.title){this._shapeRenderer.title.font(this._title.style).textColor(this._title.color)}if(this._shapeRenderer.axisLine){this._shapeRenderer.axisLine.color(this._lineColor)}if(this._shapeRenderer.backgroundAxisLine){this._shapeRenderer.backgroundAxisLine.color(this._lineColor)}if((this._shapeRenderer.majorTicks)&&(this._shapeRenderer.majorTicks.length)){for(var t=0,q=this._shapeRenderer.majorTicks.length;t<q;t++){this._shapeRenderer.majorTicks[t].color(this._lineColor)}}if((this._shapeRenderer.minorTicks)&&(this._shapeRenderer.minorTicks.length)){for(var t=0,q=this._shapeRenderer.minorTicks.length;t<q;t++){this._shapeRenderer.minorTicks[t].color(this._lineColor)}}},getMinValue:function(){return this._minValue},getMaxValue:function(){return this._maxValue},getMaxValueWidth:function(){return this._showLabels()?k.measureWidth(this._labels.font,this._FTmaxValue):0},getMaxValueHeight:function(){return this._showLabels()?k.measureHeight(this._labels.font):0},getMinValueWidth:function(){return this._showLabels()?k.measureWidth(this._labels.font,this._FTminValue):0},getMinValueHeight:function(){return this._showLabels()?k.measureHeight(this._labels.font):0},getAxisMetrics:function(){this._updateAxisMetrics();return e.extend({},this._axisMatrics)},_updateAxisMetrics:function(){},_getTextMargin:function(){var r=this._direction=="horizontal",q=this._textMargin?this._textMargin:{};if(!r){q.top=d.right;q.bottom=d.left;q.left=d.top;q.right=d.bottom}return q},_showLabels:function(){return this._labels&&this._labels.show},getLabelDirection:function(){return this._direction}};e.extend(l.prototype,j);l.prototype.Label=function(){this._value="";this._visible=true;this._formatColor=null};l.prototype.Label.prototype.value=function(q){if(a.isExist(q)){this._value=q;return this}return this._value};l.prototype.Label.prototype.formatColor=function(q){if(a.isExist(q)){this._formatColor=q;return this}return this._formatColor};l.prototype.Label.prototype.visible=function(q){if(a.isExist(q)){this._visible=q;return this}return this._visible};return l});sap.riv.module({qname:"sap.riv.vizkit.PinchGestureDetector",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.vizkit.GestureDetector",version:"3.4.0"},{qname:"sap.riv.core.Math",version:"3.4.0"}],function Setup(e,d,b){var c=d.TransitionState;var a=e.derive(d,{constructor:function(){this._origDistance=1;this._currDistance=1;this._startWhen=0;this._stopWhen=0},_distance:function(){var h=[];for(var j in this._grTouchTracker){h.push(this._grTouchTracker[j].globalXY)}var g=h[1].x-h[0].x;var f=h[1].y-h[0].y;return b.sqrt(g*g+f*f)},doTouchBegin:function(f){var h=this.totalTouches();if(this.state()===c.Possible){if(h===2){var g=this._distance();if(g>35){this._origDistance=this._currDistance=g;this._startWhen=this._stopWhen=f.timeStamp}else{this._setState_(c.Failed);return}}else{if(h>2){this._setState_(c.Failed);return}}}else{if((this.state()===c.Began||this.state()===c.Changed)){this._stopWhen=f.timeStamp;this._currDistance=this._distance();this._setState_(c.Cancelled);return}}},doTouchMove:function(f){switch(this.state()){case c.Possible:if(this.totalTouches()===2){this._stopWhen=f.timeStamp;this._currDistance=this._distance();var g=this.scale();if(g>1.1||g<0.9){this._setState_(c.Began)}}break;case c.Began:if(b.abs(this._origDistance-this._distance())>10){this._stopWhen=f.timeStamp;this._currDistance=this._distance();this._setState_(c.Changed)}break;case c.Changed:this._currDistance=this._distance();this._stopWhen=f.timeStamp;this._setState_(c.Changed);break}},doTouchEnd:function(f){if(this.state()===c.Began||this.state()===c.Changed){if(this.totalTouches()===0){this._stopWhen=f.timeStamp;this._currDistance=this._distance();this._setState_(c.Ended)}else{this._stopWhen=f.timeStamp;this._currDistance=this._distance();this._setState_(c.Cancelled)}}else{if(this.state()===c.Possible){this._setState_(c.Failed)}}},doTouchCancel:function(f){if(this.state()===c.Began||this.state()===c.Changed){this._stopWhen=f.timeStamp;this._currDistance=this._distance();this._setState_(c.Cancelled)}else{if(this.state()===c.Possible){this._setState_(c.Failed)}}},scale:function(){return this._currDistance/this._origDistance},velocity:function(){var f=this._startWhen-this._stopWhen;if(f){return b.abs((this._currDistance-this._origDistance))*1000/f}else{return 0}},reset:function(){this.callParent("reset");this._origDistance=1;this._currDistance=1;this._startWhen=0;this._stopWhen=0}});return a});sap.riv.module({qname:"sap.riv.viz.shared.series.BarRenderer",version:"3.4.0"},[{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.utils.ColorSeriesGenerator",version:"3.4.0"},{qname:"sap.riv.core.Math",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.BaseRenderer",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.Series",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.SeriesItem",version:"3.4.0"},{qname:"sap.riv.graphics.shape.Rectangle",version:"3.4.0"},{qname:"sap.riv.graphics.shape.Paths",version:"3.4.0"},{qname:"sap.riv.graphics.shape.TextLine",version:"3.4.0"},{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.Animator",version:"3.4.0"},{qname:"sap.riv.vizkit.ThemeManager",version:"3.4.0"}],function Setup(b,m,c,f,h,e,n,k,j,d,a,g){var l=d.derive(f,{constructor:function(q,o){this._fillToZero=true;this._scale=1;this._barStyle={isShowGradient:false,isShowInnerBorder:false,isShowOutBorder:false,isShowShadow:false};this._seriesColor=[];this._parseOptions(o);this._isInitialization=true;this._tpDecorativeRenderer=q.addShape(new n())},_parseOptions:function(o){this._barStyle.isShowGradient=o.bar.isShowGradient;this._barStyle.isShowInnerBorder=o.bar.isShowInnerBorder;this._barStyle.isShowOutBorder=o.bar.isShowOutBorder},draw:function(){var q=this.getSeriesGroups();if(q.length==0){return}var o=q[0].getSeriesList();if(o.length==0){return}this._initSeries(o);this._update()},redraw:function(){var q=this.getSeriesGroups();if(q.length==0){return}var o=q[0].getSeriesList();if(o.length==0){return}this._update();this.refresh()},_update:function(){var u=this.getSeriesGroups();if(u.length==0){return}var s=u[0].getSeriesList();if(s.length==0){return}var v=s[0].getOptions().barMarkerSize;var t=this.calculateBarSize(v*this._scale);this.calculateSeriesPoints(t);for(var r=0,o=s.length;r<o;r++){this._drawSeries(s[r])}var q=true;if(this._enableAllAnimation){if(this._isInitialization){q=!this._enableInitAnimation}}this._doAnimation(q)},getVisibleSeriesCount:function(){var o=this._getVisibleSeries();return o.length},calculateBarSize:function(w){var t=this.getSeriesGroups();if(t.length==0){return}var s=t[0].getSeriesList();if(s.length==0){return}var x=this.getVisibleSeriesCount();var q=s[0].getYAxis();var o=s[0].getData().length;var u=(o+1)*x;var v=q.getDistance();var r=(v/u);if(b.isDefined(w)&&(r>w)){r=w}r=r<1?1:r;return r},_generateBarSize:function(r,q,o){var s;if(r==1){s=2*q/3}else{s=c.round(q/(1+r+(r-1)/8))}if(b.isDefined(o)&&(s>o)){s=o}s=s<1?1:s;return s},calculateSeriesPoints:function(F){var A=this.getSeriesGroups();if(A.length===0){return}var D=A[0].getSeriesList();if(D.length===0){return}var t=this.getVisibleSeriesCount();var o=D[0].getYAxis();var C=o.getMajorTicks();var B=-1;for(var G=0,x=D.length;G<x;G++){var w=D[G];if(w.isVisible()){B++}var u=w.getXAxis();var r=0;var v=u.u2p(0);var s=0;var q=w.getSeriesItems();var J=u.getMaxValue();var z=u.getMinValue();if(J<0){v=u.u2p(J)}for(var H=0,I=q.length;H<I;H++){var E={};E.y1=C[H]-((t-2*B)*(F+s)-s)/2;if(this._fillToZero){E.x1=v;if(v<r){E.x1=r}}else{E.x1=r}E.y2=E.y1+F;if(q[H].getData()[0].value>0){E.x2=u.u2p(c.max(z,c.min(q[H].getData()[0].value,J)))}else{E.x2=u.u2p(c.min(J,c.max(q[H].getData()[0].value,z)));if(J<0&&E.x2>v){E.x2=v}}q[H].setPosition(E)}}},isFillToZero:function(){return this._fillToZero},_initSeries:function(o){var w=this.getLayer();var q=null;for(var s=0,x=o.length;s<x;s++){var t=o[s];var v=t.getSeriesItems();var u=t.getOptions().dataLabel;for(var r=0,z=v.length;r<z;r++){if(q==null){v[r].setMainShapes([w.addShape(new n())]);v[r].setDecoratingShapes({outerBorder:w.addShape(new k()),innerBorder:w.addShape(new k())});if(u&&u.visible){q=w.addShape(new j());v[r].setDataLabelShapes([q])}}else{v[r].setMainShapes([w.insertShapeBefore(new n(),q)]);v[r].setDecoratingShapes({outerBorder:w.insertShapeBefore(new k(),q),innerBorder:w.insertShapeBefore(new k(),q)});if(u&&u.visible){v[r].setDataLabelShapes([w.addShape(new j())])}}}}},_drawSeries:function(v,t){var s=v.getOptions().fillColor;var r=m.getColorSeriesForBar(s);var o;var q=v.getSeriesItems();for(var u=q.length;u--;){o=q[u].getPosition();if(b.isExist(t)){if(t[u]===1){this._drawSeriesItem(q[u],o,s,r)}}else{this._drawSeriesItem(q[u],o,s,r)}}},_doAnimation:function(D){var t=a;var G=this;var u=this.getSeriesGroups();if(u.length==0){return}var s=u[0].getSeriesList();if(s.length==0){return}if(!D){t.animate({values:[{type:"FLOAT",from:0,to:1}],duration:this._animationDuration,onStep:function(S){for(var M=0,Q=s.length;M<Q;M++){var N=s[M];var O=N.getSeriesItems();var H=N.getOptions().fillColor;var T=m.getColorSeriesForBar(H);for(var K=0,I=O.length;K<I;K++){var R=O[K].getPosition();G._updateSeriesItemDuringAnimation(O[K],R,H,S[0],T)}}for(var J=0,P=G._highlights,L=P.length;J<L;J++){G.highlight(P[J])}G.refresh()},onComplete:function(){for(var M=0,Q=s.length;M<Q;M++){var N=s[M];var O=N.getSeriesItems();var H=N.getOptions().fillColor;var S=m.getColorSeriesForBar(H);for(var K=0,I=O.length;K<I;K++){var R=O[K].getPosition();G._updateSeriesItem(O[K],R,H,1,G._drawBorderRightLine(M,Q),S)}}for(var J=0,P=G._highlights,L=P.length;J<L;J++){G.highlight(P[J])}G.refresh()}})}else{for(var x=0,C=s.length;x<C;x++){var z=s[x];var A=z.getSeriesItems();var o=z.getOptions().fillColor;var F=m.getColorSeriesForBar(o);for(var v=0,q=A.length;v<q;v++){var E=A[v].getPosition();G._updateSeriesItem(A[v],E,o,1,G._drawBorderRightLine(x,C),F)}}for(var r=0,B=G._highlights,w=B.length;r<w;r++){G.highlight(B[r])}G.refresh()}this._isInitialization=false},_drawBorderRightLine:function(o,q){return true},_lowlightSeriesItem:function(q){var r=q.getMainShapes()[0];var o=q.getDecoratingShapes();r.compositionMode({alpha:0.5});o.outerBorder.compositionMode({alpha:0.5});o.innerBorder.compositionMode({alpha:0.5});this.refresh();q.setStatus(q.getStatus()|e.status.lowlighted)},_clearSeriesItemLowlight:function(q){if(q.isLowlighted()){var r=q.getMainShapes()[0];var o=q.getDecoratingShapes();r.compositionMode({alpha:1});o.outerBorder.compositionMode({alpha:1});o.innerBorder.compositionMode({alpha:1});this.refresh();q.setStatus(q.getStatus()&(~e.status.lowlighted))}},_highlightSeriesItem:function(q){var r=q.getMainShapes()[0];var o=q.getDecoratingShapes();r.compositionMode({alpha:1});o.outerBorder.compositionMode({alpha:1});o.innerBorder.compositionMode({alpha:1});this.refresh();q.setStatus(q.getStatus()|e.status.highlighted)},_clearSeriesItemHighlight:function(o){if(!o.isHighlighted()){this._clearSeriesItemLowlight(o)}if(o.isHighlighted()){this._highlightSeriesItem(o);o.setStatus(o.getStatus()&(~e.status.highlighted))}},_hoverSeriesItem:function(r){var o=r.getSeries().getYAxis();var u=o.getMajorTicks();var q=o.getTickInterval()/2;var s=r.getData()[0];var t=s.dimensionPath[s.dimensionPath.length-1].dimensionItemIndex;this._tpDecorativeRenderer.visible(true).width(this.getLayer().size().width).height(q*2).color("rgba(133,133,133, 0.4)").topLeft([0,c.round(u[t]-q)]);this.refresh()},_doHighlight:function(w,u){var t=this._seriesShapes;var s,r,o,q;for(s=0;s<t.length;s++){o=t[s];for(r=0;r<o.length;r++){q=o[r];if(q){q.rect.compositionMode({alpha:0.5});q.outerBorder.compositionMode({alpha:0.5});q.innerBorder.compositionMode({alpha:0.5})}}}var v=t[w]?t[w][u[u.length-1].dimensionItemIndex]:null;if(v){v.rect.compositionMode({alpha:1});v.outerBorder.compositionMode({alpha:1});v.innerBorder.compositionMode({alpha:1})}},_doRestoreHighlight:function(){var t=this._seriesShapes;var s,r,o,q;for(s=0;s<t.length;s++){o=t[s];for(r=0;r<o.length;r++){q=o[r];q.rect.compositionMode({alpha:1});q.outerBorder.compositionMode({alpha:1});q.innerBorder.compositionMode({alpha:1})}}},doSecondaryHighlight:function(){var r,o,q=this.getSeriesGroups()[0].getSeriesList();for(r=0;r<q.length;r++){for(o=0;o<q[r].getSeriesItems().length;o++){this._lowlightSeriesItem(q[r].getSeriesItems()[o])}}},_drawSeriesItem:function(s,v,o,z){var u=s.getMainShapes()[0];var r=s.getDecoratingShapes();var w=s.isVisible();u.visible(w);var x=c.abs(v.y2-v.y1);var t=this._barStyle.isShowOutBorder,q=this._barStyle.isShowInnerBorder;if(x<8){t=false}if(x<5){q=false}this._drawDataLabel(s);r.outerBorder.visible(w&&t);r.innerBorder.visible(w&&q);u.color(o);if(v.x1>v.x2){u.topRight([v.x1,v.y1])}else{u.topLeft([v.x1,v.y1])}r.innerBorder.reset();r.outerBorder.reset();r.innerBorder.borderWidth(1).borderColor(z[0]);r.outerBorder.borderWidth(1).borderColor(z[3])},_getDataLabelAnchor:function(q,o,t){var s={y:(o.y1+o.y2)/2};var r=(o.x2<o.x1);if(r){if(q=="outsideEnd"){s.align="right";s.x=o.x2}else{if(q=="insideEnd"){s.align="left";s.x=o.x2}else{if(q=="insideBase"){s.align="right";s.x=o.x1}}}}else{if(q=="outsideEnd"){s.align="left";s.x=o.x2}else{if(q=="insideEnd"){s.align="right";s.x=o.x2}else{if(q=="insideBase"){s.align="left";s.x=o.x1}}}}if(q=="center"){s.align="center";s.x=(o.x1+o.x2)/2}return s},_clearSeriesItemDrawing:function(q){var t=q.getMainShapes()[0];var o=q.getDecoratingShapes();var u=q.getDataLabelShapes();var s=this.getLayer();s.removeShape(t);s.removeShape(o.innerBorder);s.removeShape(o.outerBorder);if(u!=null&&u.length>0){for(var r=0;r<u.length;r++){s.removeShape(u[r])}}},_updateSeriesItemDuringAnimation:function(s,v,o,t,x){if(b.isUndefined(v)){return}var u=s.getMainShapes()[0];var r=s.getDecoratingShapes();var q=c.abs(v.x1-v.x2)*t;var w=c.abs(v.y2-v.y1);if((q.toString()==="NaN")||(w.toString()==="NaN")){return}u.size({width:q,height:w}).shadow({offsetX:0,offsetY:0,blur:0,color:"rgba(0,0,0,0.5)"});if(this._barStyle.isShowGradient&&w>4&&q>4){if(v.x1>v.x2){u.color({t:"lg",e:{x:0,y:v.y1},s:{x:q,y:v.y1},st:[{o:1,v:x[1]},{o:0,v:x[2]}]})}else{u.color({t:"lg",s:{x:0,y:v.y1},e:{x:q,y:v.y1},st:[{o:1,v:x[1]},{o:0,v:x[2]}]})}}else{u.color(o)}},_updateSeriesItem:function(u,x,o,v,s,A){if(b.isUndefined(x)){return}var w=u.getMainShapes()[0];var t=u.getDecoratingShapes();var q=c.abs(x.x1-x.x2)*v;var z=c.abs(x.y2-x.y1);if((q.toString()==="NaN")||(z.toString()==="NaN")){return}w.size({width:q,height:z});if(this._barStyle.isShowShadow){w.shadow({offsetX:1,offsetY:2,blur:2,color:"rgba(0,0,0,0.5)"})}else{w.shadow({offsetX:0,offsetY:0,blur:0,color:"rgba(0,0,0,0.5)"})}if(this._barStyle.isShowGradient&&z>4&&q>4){if(x.x1>x.x2){w.color({t:"lg",e:{x:0,y:x.y1},s:{x:q,y:x.y1},st:[{o:1,v:A[1]},{o:0,v:A[2]}]})}else{w.color({t:"lg",s:{x:0,y:x.y1},e:{x:q,y:x.y1},st:[{o:1,v:A[1]},{o:0,v:A[2]}]})}}else{w.color(o)}var r=0;t.outerBorder.reset();if(t.outerBorder.visible()){this._drawBorderPath(t.outerBorder,x,q,r,s);r=r+1}t.innerBorder.reset();if(t.innerBorder.visible()){this._drawBorderPath(t.innerBorder,x,q,r,s)}},_drawBorderPath:function(r,o,v,u,t){var s=c.abs(o.x1-o.x2);if(s<2){return}var q={y1:c.ceil(o.y1+u),y2:c.floor(o.y2-u)};q.x1=o.x1;if(o.x1>o.x2){q.x2=c.max(o.x2,o.x1-v+u)}else{q.x2=c.min(o.x2,o.x1+v-u)}r.moveTo(q.x1,q.y1).lineTo(q.x2,q.y1);if(!t||s<3){r.moveTo(q.x2,q.y2)}else{r.lineTo(q.x2,q.y2)}r.lineTo(q.x1,q.y2)},applyTheme:function(r){var q=g.getThemeSettings(r);var o=q.bar;this._barStyle.isShowGradient=o.isShowGradient;this._barStyle.isShowInnerBorder=o.isShowInnerBorder;this._barStyle.isShowOutBorder=o.isShowOutBorder;this._barStyle.isShowShadow=o.isShowShadow;this.redraw()},updateProperties:function(o){f.prototype.updateProperties.apply(this,arguments);this._parseOptions(o)},hoverAround:function(B){var s=this._getVisibleSeries();if(s.length==0){return}var o=s[0].getYAxis();var v=o.getMajorTicks();var w=o.getTickInterval()/2;var r=0,t=v.length-1;var D=false;var C;while(!D&&r<=t){C=c.round((r+t)/2);var u=v[C]-B.y;if(c.abs(u)<=w){D=true}else{if(u>=0){r=C+1}else{t=C-1}}}if(!D){return}var z=s[0].getSeriesItems()[C].getPosition();var q=s[s.length-1].getSeriesItems()[C].getPosition();var A=0;var x=q.y2-z.y1+A*2;this._tpDecorativeRenderer.visible(true).width(this.getLayer().size().width).height(x).color("rgba(133,133,133, 0.4)").topLeft([0,z.y1-A]);this.refresh()},blurOut:function(o){this._tpDecorativeRenderer.visible(false);this.refresh()}});return l});sap.riv.module({qname:"sap.riv.vizkit.LongPressGestureDetector",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.vizkit.GestureDetector",version:"3.4.0"},{qname:"sap.riv.core.Math",version:"3.4.0"}],function Setup(f,e,b){var c=e.TransitionState;var a=function(k,j){var h=k.x-j.x;var g=k.y-j.y;return b.sqrt(h*h+g*g)};var d=f.derive(e,{constructor:function(g){this._touchesRequired=(g>0&&g<6)?g:1;this._minimumPressDuration=500;this._allowableMovement=10;this._distanceFromStart=0;this._startXY=undefined},minimumPressDuration:function(g){if(g!==undefined){this._minimumPressDuration=g}else{return this._minimumPressDuration}},allowableMovement:function(g){if(g!==undefined){this._allowableMovement=g}else{return this._allowableMovement}},doTouchBegin:function(g){var h=this.totalTouches();if(h===this._touchesRequired&&this.state()===c.Possible){this._startXY=this.globalLocOfTouchPoints();clearTimeout(this._timeoutId);this._timeoutId=setTimeout(f.proxy(function(){if(this._startXY&&this.state()===c.Possible&&this.totalTouches()===this._touchesRequired){this._setState_(c.Began)}},this),this._minimumPressDuration)}else{if(h>this._touchesRequired){if(this.state()===c.Began||this.state()===c.Changed){this._setState_(c.Cancelled)}else{if(this.state()===c.Possible){this._setState_(c.Failed)}}}}},doTouchMove:function(g){switch(this.state()){case c.Possible:if(this._startXY){this._distanceFromStart=a(this._startXY,this.globalLocOfTouchPoints());if(this._distanceFromStart>this._allowableMovement){this._setState_(c.Failed)}}break;case c.Began:case c.Changed:if(a(this._startXY,this.globalLocOfTouchPoints())<=this._allowableMovement){this._setState_(c.Changed)}else{this._setState_(c.Cancelled)}break}},doTouchEnd:function(g){if(this.state()===c.Began||this.state()===c.Changed){this._setState_(c.Ended)}else{if(this.state()===c.Possible){this._setState_(c.Failed)}}},doTouchCancel:function(g){if(this.state()===c.Began||this.state()===c.Changed){this._setState_(c.Cancelled)}else{if(this.state()===c.Possible){this._setState_(c.Failed)}}},reset:function(){this.callParent("reset");this._startXY=undefined;this._distanceFromStart=0}});return d});sap.riv.module({qname:"sap.riv.vizkit.UIComponent",version:"3.4.0"},[{qname:"sap.riv.core.Observable",version:"3.4.0"},{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.LinkedHashMap",version:"3.4.0"},{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"}],function Setup(h,c,e,j){var f=jQuery;if(!f){j.error("Cannot find jQuery")}var d={None:0,FlexibleLeftMargin:1<<0,FlexibleWidth:1<<1,FlexibleRightMargin:1<<2,FlexibleTopMargin:1<<3,FlexibleHeight:1<<4,FlexibleBottomMargin:1<<5};var a=0;var b=function(){return a++};var g=c.derive(h,{events:["widthChanged","heightChanged","sizeChanged","positionChanged","anchorChanged","beforeShow","afterShow","beforeHide","afterHide","focusin","focusout","focus","blur","mousedown","mouseup","mouseenter","mouseleave","mousemove","click","dblclick","touchstart","touchmove","touchend","touchcancel"],constructor:function(k){k=k||{};var l=b();this._id=k.id?k.id+"_"+l:l;this._attached=false;this._container=undefined;this._superComp=undefined;this._subComps=new e();this._hidden=false;this._clipToBound=true;this._parentVisible=false;this._printable=true;this._autoresizeSubComponents=true;this._autoresizingMask=d.None;this._gestureDetectors=[];this._bounds={x:0,y:0,width:1,height:1};this._position={x:0,y:0};this._anchorPoint={x:0.5,y:0.5};this._init_(k)},_init_:function(l){var k={position:"absolute",fontSize:"10px",boxSizing:"border-box","-moz-box-sizing":"border-box","-ms-box-sizing":"border-box","-webkit-box-sizing":"border-box"};this._container=f(document.createElement("div")).attr("id",this._id).data("selfComp",this);if(l.clipToBound===false){k.overflow="visible";this._clipToBound=false}else{k.overflow="hidden"}if(l.hidden===true){k.display="none";this._hidden=true}if(l.autoSizingMask!=undefined){this._autoresizingMask=l.autoSizingMask}if(l.anchor){this._anchorPoint.x=l.anchor.x;this._anchorPoint.y=l.anchor.y;delete l.anchor}if(l.position){this._position.x=l.position.x;this._position.y=l.position.y;k.left=(this._position.x-this._anchorPoint.x*this._bounds.width)+"px";k.top=(this._position.y-this._anchorPoint.y*this._bounds.height)+"px";delete l.position}if(l.size){this._bounds.width=l.size.w;this._bounds.height=l.size.h;k.width=this._bounds.width+"px";k.height=this._bounds.height+"px";delete l.size}for(var m in k){this._container[0].style[m]=k[m]}k=undefined;this._registerMandatoryHandler()},_registerMandatoryHandler:function(){this.on([{eventName:"sizeChanged",listener:this._updateContainerSize,scope:this},{eventName:"heightChanged",listener:this._updateContainerHeight,scope:this},{eventName:"widthChanged",listener:this._updateContainerWidth,scope:this},{eventName:"positionChanged",listener:this._updateContainerPos,scope:this},{eventName:"anchorChanged",listener:this._updateContainerAnchor,scope:this}])},_updateContainerSize:function(n,l){var m={width:l.width+"px",height:l.height+"px"};if(this._anchorPoint.x!==0||this._anchorPoint.y!==0){m.left=(this._position.x-this._anchorPoint.x*l.width)+"px";m.top=(this._position.y-this._anchorPoint.y*l.height)+"px"}for(var k in m){this._container[0].style[k]=m[k]}m=undefined;this.doContentResize(n,l);this._layout(n,l)},_updateContainerWidth:function(l,k){var o={width:k+"px"};if(this._anchorPoint.x!==0||this._anchorPoint.y!==0){o.left=(this._position.x-this._anchorPoint.x*k)+"px"}for(var n in o){this._container[0].style[n]=o[n]}o=undefined;var q={height:this._bounds.height,width:l},m={height:this._bounds.height,width:k};this.doContentResize(q,m);this._layout(q,m)},_updateContainerHeight:function(q,n){var k={height:n+"px"};if(this._anchorPoint.x!==0||this._anchorPoint.y!==0){k.top=(this._position.y-this._anchorPoint.y*n)+"px"}for(var m in k){this._container[0].style[m]=k[m]}k=undefined;var o={height:q,width:this._bounds.width},l={height:n,width:this._bounds.width};this.doContentResize(o,l);this._layout(o,l)},_updateContainerPos:function(l,k){this._container[0].style.left=(k.x-this._anchorPoint.x*this._bounds.width)+"px";this._container[0].style.top=(k.y-this._anchorPoint.y*this._bounds.height)+"px"},_updateContainerAnchor:function(k,l){this._container[0].style.left=(this._position.x-l.x*this._bounds.width)+"px";this._container[0].style.top=(this._position.y-l.y*this._bounds.height)+"px"},_markAttached_:function(){this._attached=true;var k=this._subComps.getIterator();while(k.hasMore()){k.next().value._markAttached_()}this._handleSubCompShow(this)},_markDetached_:function(){this._attached=false;var k=this._subComps.getIterator();while(k.hasMore()){k.next().value._markDetached_()}},id:function(){return this._id},markHide:function(){if(this._hidden===false){if(this._attached&&this._parentVisible){this.doBeforeHide();this.fireEvent("beforeHide")}this._hidden=true;this._container[0].style.display="none";if(this._attached&&this._parentVisible){this.doAfterHide();this.fireEvent("afterHide");var k=this._subComps.getIterator();while(k.hasMore()){this._handleSubCompHide(k.next().value)}}}return this},_handleSubCompHide:function(l){if(l._parentVisible&&!l._hidden){l.doBeforeHide();l.fireEvent("beforeHide");l.doAfterHide();l.fireEvent("afterHide")}l._parentVisible=false;var k=l._subComps.getIterator();while(k.hasMore()){l._handleSubCompHide(k.next().value)}},markShow:function(){if(this._hidden===true){if(this._attached&&this._parentVisible){this.doBeforeShow();this.fireEvent("beforeShow")}this._hidden=false;this._container[0].style.display="block";if(this._attached&&this._parentVisible){this.doAfterShow();this.fireEvent("afterShow");var k=this._subComps.getIterator();while(k.hasMore()){this._handleSubCompShow(k.next().value)}}}return this},_handleSubCompShow:function(l){var m=l.superComponent();l._parentVisible=!m._hidden&&m._parentVisible;if(l._parentVisible&&!l._hidden){l.doBeforeShow();l.fireEvent("beforeShow");l.doAfterShow();l.fireEvent("afterShow")}var k=l._subComps.getIterator();while(k.hasMore()){l._handleSubCompShow(k.next().value)}},clipToBound:function(k){if(k!==undefined){if(this._clipToBound!==k){this._clipToBound=k;if(this._clipToBound){this._container[0].style.overflow="hidden"}else{this._container[0].style.overflow="visible"}}return this}else{return this._clipToBound}},visibility:function(){return !this._hidden&&this._attached&&this._parentVisible},printable:function(k){if(k!==undefined){if(this._printable!==k){this._printable=k}return this}else{return this._printable}},autoresizeSubComponents:function(k){if(k!==undefined){if(this._autoresizeSubComponents!==k){this._autoresizeSubComponents=k}return this}else{return this._autoresizeSubComponents}},autoresizingMask:function(k){if(k!==undefined){if(this._autoresizingMask!==k){this._autoresizingMask=k}return this}else{return this._autoresizingMask}},bounds:function(n){if(n){var l=this._bounds,k=n;this._bounds.x=k.x;this._bounds.y=k.y;if(l.width!==k.width||l.height!==k.height){var o={width:l.width,height:l.height};var m={width:k.width,height:k.height};this._bounds.width=k.width;this._bounds.height=k.height;this.fireEvent("sizeChanged",o,m)}return this}else{return c.extend({},this._bounds)}},pagePosition:function(){var k=this._container.offset();return{x:k.left,y:k.top}},position:function(k){if(k){var r=this._position,l=k;if(r.x!==l.x||r.y!==l.y){var m={x:r.x,y:r.y};var q={x:l.x,y:l.y};r.x=l.x;r.y=l.y;this.fireEvent("positionChanged",m,q)}return this}else{return c.extend({},this._position)}},size:function(k){if(k){var l={width:this._bounds.width,height:this._bounds.height};if(l.width!==k.width||l.height!==k.height){this._bounds.width=k.width;this._bounds.height=k.height;this.fireEvent("sizeChanged",l,k)}return this}else{return{width:this._bounds.width,height:this._bounds.height}}},width:function(l){if(l){var k=this._bounds.width;if(k!==l){this._bounds.width=l;this.fireEvent("widthChanged",k,l)}return this}else{return this._bounds.width}},height:function(k){if(k){var l=this._bounds.height;if(l!==k){this._bounds.height=k;this.fireEvent("heightChanged",l,k)}return this}else{return this._bounds.height}},anchorPoint:function(m){if(m){var k=this._anchorPoint,l=m;if(k.x!==l.x||k.y!==l.y){var q={x:k.x,y:k.y};var r={x:l.x,y:l.y};k.x=l.x;k.y=l.y;this.fireEvent("anchorChanged",q,r)}return this}else{return c.extend({},this._anchorPoint)}},frame:function(w){if(w){var k=this._bounds,s=this._position;var x=w.x+w.width*this._anchorPoint.x;var u=w.y+w.height*this._anchorPoint.y;var q=false,l=undefined,m=undefined,t=false,r=undefined,v=undefined;if(k.width!==w.width||k.height!==w.height){r={width:k.width,height:k.height};v={width:w.width,height:w.height};k.width=w.width;k.height=w.height;t=true}if(s.x!==x||s.y!==u){l={x:s.x,y:s.y};m={x:x,y:u};s.x=x;s.y=u;q=true}if(q){this.fireEvent("positionChanged",l,m)}if(t){this.fireEvent("sizeChanged",r,v)}return this}else{return{x:this._position.x-this._anchorPoint.x*this._bounds.width,y:this._position.y-this._anchorPoint.y*this._bounds.height,width:this._bounds.width,height:this._bounds.height}}},superComponent:function(){return this._superComp},subComponents:function(){return this._subComps},addSubComponent:function(k){if(k){if(k._superComp===undefined){k._superComp=this;this._subComps.add(k.id(),k);this._container.append(k._container);if(this._attached){k._markAttached_()}return this}else{throw new Error("The component already has a parent component")}}},detachFromSuperComponent:function(){if(this._superComp){if(this._superComp._attached){this._superComp._handleSubCompHide(this);this._markDetached_()}this._superComp._subComps.remove(this.id());this._container.detach();this._superComp=undefined}},removeFromSuperComponent:function(){if(this._superComp){this._superComp._subComps.remove(this.id());this._container.remove();if(this._superComp._attached){this._markDetached_()}this._superComp=undefined}},insertBeforeSubComponent:function(l,n){if(l&&n){if(l._superComp===undefined){var m=l.id();var k=n.id();if(this._subComps.has(k)&&m!==k){l._superComp=this;this._subComps.insertBefore(m,l,k);l._container.before(n._container);if(this._attached){l._markAttached_()}}}else{throw new Error("The component already has a parent component")}}},insertAfterSubComponent:function(m,k){if(m&&k){if(m._superComp===undefined){var n=m.id();var l=k.id();if(this._subComps.has(l)&&n!==l){m._superComp=this;this._subComps.insertAfter(n,m,l);m._container.after(k._container);if(this._attached){m._markAttached_()}}}else{throw new Error("The component already has a parent component")}}},bringToFront:function(k){if(k&&this._subComps.has(k.id())&&this._subComps.getLastInsert().id()!==k.id()){this._subComps.moveToLast(k.id());k._container.detach();this._container.append(k._container)}},sendToBack:function(k){if(k&&this._subComps.has(k.id())&&this._subComps.getFirstInsert().id()!==k.id()){this._subComps.moveToFirst(k.id());k._container.detach();this._container.prepend(k._container)}},convertPointFromSuper:function(k){var l=this.frame();return{x:k.x-l.x,y:k.y-l.y}},convertPointToSuper:function(k){var l=this.frame();return{x:k.x+l.x,y:k.y+l.y}},convertPointFromGlobal:function(n){var m=[this];var l=this;var k=n;while(l._superComp){m.push(l._superComp);l=l._superComp}while(m.length){l=m.pop();k=l.convertPointFromSuper(k)}return k},convertPointToGlobal:function(l){var m=this;var k=l;while(m){k=m.convertPointToSuper(k);m=m._superComp}return k},convertPointFromComp:function(l,k){return this.convertPointFromGlobal(k.convertPointToGlobal(l))},convertPointToComp:function(l,k){return k.convertPointFromGlobal(this.convertPointToGlobal(l))},_resizeSubComp:function(u,o,D){var s=u.frame();var t=s.x,q=s.y,A=s.width,w=s.height;var E=t,B=o.width-t-A,z=q,k=o.height-q-w;var F=D.width-o.width,C=D.height-o.height;var m=u._autoresizingMask;var n=d.FlexibleLeftMargin|d.FlexibleWidth|d.FlexibleRightMargin;var l=d.FlexibleTopMargin|d.FlexibleHeight|d.FlexibleBottomMargin;switch(m&n){case d.None:if(E!==0){t+=F*E/(E+B)}break;case d.FlexibleLeftMargin:t+=F;break;case d.FlexibleLeftMargin|d.FlexibleRightMargin:case d.FlexibleRightMargin:break;case d.FlexibleWidth:A+=F;break;case d.FlexibleLeftMargin|d.FlexibleWidth:if(A!==0){t+=F*E/(E+A);A+=F*A/(E+A)}break;case d.FlexibleRightMargin|d.FlexibleWidth:if(A!==0){A+=F*A/(B+A)}break;case d.FlexibleLeftMargin|d.FlexibleWidth|d.FlexibleRightMargin:if(o.width!==0){var v=F/o.width;t+=t*v;A+=A*v}break}switch(m&l){case d.None:if(z!==0){q+=C*z/(z+k)}break;case d.FlexibleTopMargin:q+=C;break;case d.FlexibleTopMargin|d.FlexibleBottomMargin:case d.FlexibleBottomMargin:break;case d.FlexibleHeight:w+=C;break;case d.FlexibleTopMargin|d.FlexibleHeight:if(w!==0){q+=C*z/(z+w);w+=C*w/(z+w)}break;case d.FlexibleBottomMargin|d.FlexibleHeight:if(w!=0){w+=C*w/(k+w)}break;case d.FlexibleTopMargin|d.FlexibleHeight|d.FlexibleBottomMargin:if(o.height){var v=C/o.height;q+=q*v;w+=w*v}break}return{x:t,y:q,height:w,width:A}},_layout:function(n,l){if(this._autoresizeSubComponents){var k=this._subComps.getIterator();var m,o;while(k.hasMore()){m=k.next().value;o=this._resizeSubComp(m,n,l);m.frame(o)}}else{if(this.doLayout!=j.noop&&this.doLayout!==undefined){this.doLayout()}}},_fireEvent_:function(k){this.fireEvent(k.type(),k);if(this._superComp&&k.shouldBubble()){k._setCurrentTarget_(this._superComp);this._superComp._fireEvent_(k)}},_fireMouseEvent_:function(k){this.fireEvent(k.type(),k);if(this._superComp&&k.shouldBubble()){k._setCurrentTarget_(this._superComp);k._setCurrentLocalXY_({x:k.currentLocalXY().x+this._position.x-this._anchorPoint.x*this._bounds.width,y:k.currentLocalXY().y+this._position.y-this._anchorPoint.y*this._bounds.height});this._superComp._fireMouseEvent_(k)}},_fireTouchEvent_:function(k){this.fireEvent(k.type(),k);if(this._superComp&&k.shouldBubble()){k._setCurrentTarget_(this._superComp);this._superComp._fireTouchEvent_(k)}},purgeListeners:function(){this.callParent("purgeListeners");this._registerMandatoryHandler()},removeAllListeners:function(k){this.callParent("removeAllListeners",k);switch(k){case"sizeChanged":this.on({eventName:"sizeChanged",listener:this._updateContainerSize,scope:this});break;case"heightChanged":this.on({eventName:"heightChanged",listener:this._updateContainerHeight,scope:this});break;case"widthChanged":this.on({eventName:"widthChanged",listener:this._updateContainerWidth,scope:this});break;case"positionChanged":this.on({eventName:"positionChanged",listener:this._updateContainerPos,scope:this});break;case"anchorChanged":this.on({eventName:"anchorChanged",listener:this._updateContainerAnchor,scope:this});break}},addGestureDetector:function(k){if(k!==undefined){k._setOwnerComp_(this);this._gestureDetectors.push(k)}},removeGestureDetector:function(m){for(var l=0,k=this._gestureDetectors.length;l<k;l++){if(this._gestureDetectors[l]===m){this._gestureDetectors.splice(l,1);m._setOwnerComp_(undefined);k--}}},hitTest:function(k){var q=[{comp:this,pointInLocal:k,subCompsItr:this._subComps.getIterator(true)}];var m,o,l,r;while(q.length){m=q[q.length-1];l=m.comp;o=m.pointInLocal;r=m.subCompsItr;if(l.visibility()){if(r.hasMore()){var n=r.next().value;q.push({comp:n,pointInLocal:n.convertPointFromSuper(o),subCompsItr:n._subComps.getIterator(true)});continue}else{if(l.containsPoint(o)){return l}}q.pop()}else{q.pop()}}},containsPoint:function(l){var k=this.bounds();return l.x>=k.x&&l.x<=(k.x+k.width)&&l.y>=k.y&&l.y<=(k.y+k.height)},printTo:function(k){k.clearRect(0,0,this._bounds.width,this._bounds.height);this.doPrint(k)},doLayout:j.noop,doContentResize:j.noop,doPrint:j.noop,doBeforeHide:j.noop,doAfterHide:j.noop,doBeforeShow:j.noop,doAfterShow:j.noop});g.Autosizing=d;return g});sap.riv.module({qname:"sap.riv.viz.shared.misc.PropsMgr",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"},{qname:"sap.riv.core.Logger",version:"3.4.0"},{qname:"sap.riv.viz.shared.type.TypeManager",version:"3.4.0"}],function Setup(g,c,h,d,b){var e=function(j){this._descriptor=j;this._local={}};var a="/";var f=e.prototype;f.validate=function(m){var j={};var k=m;for(var l in this._descriptor){if(this._descriptor.hasOwnProperty(l)){j[l]=this.validateObject(k[l],this._descriptor[l],a+l.toString())}}return j};f.validateObject=function(n,m,q){var k;if(m.supportedValueType==="Object"){k={};if(!c.isExist(n)){n={}}this.validateType(m.supportedValueType,n,m,q);var j=m.supportedValues;for(var l=j.length;l--;){var o=j[l].name;k[o]=this.validateObject(n[o],j[l],q+a+o.toString())}}else{if(m.supportedValueType==="ObjectArray"){k=[];if(!c.isExist(n)){n=[]}this.validateType(m.supportedValueType,n,m,q);var j=m.supportedValues;var r=c.isExist(m.minArrayLength)?m.minArrayLength:0;for(var l=Math.max(n.length,r);l--;){k[l]={};k[l]=this.validateObject(n[l],j[0],q+a+l)}}else{k=this.validateItem(n,m,q)}}return k};f.validateItem=function(n,m,o){var l;if(m.supportedValueType.indexOf("[")!=-1){var j=m.supportedValueType.substring(m.supportedValueType.indexOf("[")+1,m.supportedValueType.indexOf("]"));if(c.isExist(n)&&(!c.isArray(n)||n.length!==parseInt(j))){h.error("Failed to pass options validation: Option path: "+m.name+"; Option value: "+n+"; Option type: "+m.supportedValueType)}l=m.supportedValueType.substring(0,m.supportedValueType.indexOf("["))}else{l=m.supportedValueType}this.validateType(l,n,m,o);if(!c.isExist(n)){n=m.defaultValue}if(l==="Color"&&c.isExist(n)){n=n.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}else{if(l==="ColorArray"&&c.isExist(n)){for(var k=0;k<n.length;k++){n[k]=n[k].replace(/^\s\s*/,"").replace(/\s\s*$/,"")}}}return n};f.validateType=function(l,k,j,m){var n=b.getTypeObj(l);if(n!=null){if(!n.validateValue(k,j)){h.error("Failed to pass options validation: Option path: "+m+"; Option value: "+JSON.stringify(k)+"; Option type: "+l)}}else{h.error("Do not support type: "+l)}};f.properties=function(j){if(j){j=this.trunNULLtoUndefinedFromProps(j);j=g.extend(true,this._local,j);this._local=this.validate(j)}return this._local};f.trunNULLtoUndefinedFromProps=function(k){for(var j in k){if(c.isFunction(k[j])){continue}else{if(k[j] instanceof Object){k[j]=this.trunNULLtoUndefinedFromProps(k[j])}else{if(k[j]===null){k[j]=undefined}}}}return k};return e});sap.riv.module({qname:"sap.riv.vizkit.TapGestureDetector",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.vizkit.GestureDetector",version:"3.4.0"},{qname:"sap.riv.core.Math",version:"3.4.0"}],function Setup(c,k,a){var f=k.TransitionState;var b=function(q,o){var n=q.x-o.x;var m=q.y-o.y;return a.sqrt(n*n+m*m)};var j=function(m,n){m._sequenceStarted=true;m._currentNumberOfTaps=0;m._firstStartXY=m.globalLocOfTouchPoints()};var l=50;var e=150;var g=20;var h=150;var d=c.derive(k,{constructor:function(m,n){this._touchesRequired=(typeof m==="number"&&m>0&&m<6)?m:1;this._tapsRequired=(typeof n==="number"&&n>0)?n:1;this._currentNumberOfTaps=0;this._firstStartXY=undefined;this._sequenceStarted=false;this._currentStartWhen=0},doTouchBegin:function(n){if(this.state()===f.Possible){var r=this.totalTouches();if(r===this._touchesRequired){var m=n.timeStamp;if(this._currentNumberOfTaps==0){j(this,n)}else{if(this._currentNumberOfTaps<this._tapsRequired){var q=b(this._firstStartXY,this.globalLocOfTouchPoints());var o=this._currentStartWhen;if(q>l||(m-o)>(e+h)){j(this,n)}}}this._currentStartWhen=m}else{this._setState_(f.Failed)}}},doTouchEnd:function(n){if(this.state()===f.Possible&&this._sequenceStarted){if(b(this._firstStartXY,this.globalLocOfTouchPoints())>l){this._setState_(f.Failed);return}var m=n.timeStamp-this._currentStartWhen;if(m>e||m<g){this._setState_(f.Failed);return}if(++this._currentNumberOfTaps===this._tapsRequired){this._setState_(f.Recognized)}}},doTouchCancel:function(m){if(this.state()===f.Possible){this._setState_(f.Failed)}},reset:function(){this.callParent("reset");this._currentNumberOfTaps=0;this._sequenceStarted=false;this._firstStartXY=undefined;this._firstStartWhen=0;this._currentStartWhen=0}});return d});sap.riv.module({qname:"sap.riv.graphics.shape.Sector",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.graphics.shape.FillableShape",version:"3.4.0"},{qname:"sap.riv.core.Math",version:"3.4.0"}],function Setup(e,d,b){var c=function(f,j,h){var g={x:f*b.cos(j),y:f*b.sin(j),z:0},k={x:f*b.cos(h),y:f*b.sin(h),z:0};return{sr:f*f,sv:g,ev:k,z_of_sv_cross_ev:g.x*k.y-g.y*k.x}};var a=e.derive(d,{constructor:function(){this._center={x:0,y:0};this._radius=0;this._startAngle=0;this._endAngle=0;this._clockwise=false},center:function(f){if(f!==undefined){this._center.x=f.x;this._center.y=f.y;return this}if(this._center){return{x:this._center.x,y:this._center.y}}},radius:function(f){if(f!==undefined){if(f>0){this._radius=f;this._preCalcs=c(this._radius,this._startAngle,this._endAngle)}return this}return this._radius},startAngle:function(f){if(f!==undefined){this._startAngle=f;this._preCalcs=c(this._radius,this._startAngle,this._endAngle);return this}return this._startAngle},endAngle:function(f){if(f!==undefined){this._endAngle=f;this._preCalcs=c(this._radius,this._startAngle,this._endAngle);return this}return this._endAngle},clockwise:function(f){if(f!==undefined){this._clockwise=f;return this}return this._clockwise},doDraw:function(f){var g=f;var h=this._center;g.beginPath();g.moveTo(h.x,h.y);g.arc(h.x,h.y,this._radius,this._startAngle,this._endAngle,!this._clockwise);g.closePath();this.fillShape(g);this.drawBorder(g)},doPointInTest:function(f){var h=this._preCalcs.sv,m=this._preCalcs.ev,k=this._preCalcs.sr,n=this._preCalcs.z_of_sv_cross_ev;var j={x:f.x-this._center.x,y:f.y-this._center.y,z:0};var l=h.x*j.y-h.y*j.x,g=j.x*m.y-j.y*m.x;return(j.x*j.x+j.y*j.y)<=k&&(this._clockwise?(n>0?(l>=0&&g>=0):!(l<0&&g<0)):(n<0?(l<=0&&g<=0):!(l>0&&g>0)))}});return a});sap.riv.module({qname:"sap.riv.viz.shared.axis.LinearAxisRenderer",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.Math",version:"3.4.0"},{qname:"sap.riv.core.utils.TextRuler",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.axis.BasicAxisRenderer",version:"3.4.0"},{qname:"sap.riv.viz.shared.axis.FoucsCalculator",version:"3.4.0"},{qname:"sap.riv.viz.shared.utils.NumericFormatUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.axis.PositionCalculator",version:"3.4.0"},{qname:"sap.riv.graphics.Layer",version:"3.4.0"},{qname:"sap.riv.graphics.shape.Line",version:"3.4.0"},{qname:"sap.riv.graphics.shape.TextLine",version:"3.4.0"}],function Setup(g,c,k,a,j,d,e,m,f,h,l){var b=g.derive(j,{constructor:function(n){this._laxr_initialize();this._textMargin={left:2.5,top:3,right:1.5,bottom:4};return this},getTitleMargin:function(){var n=this.getOptions();if(n.titleMargin!=null){return n.titleMargin}else{return{top:3,right:3,bottom:3,left:3}}},createRenderer:function(){this._shapeRenderer.backgroundAxisLine=this._layer.addShape(new h());var q=this._axisLineLayer;if(this._title.show){this._shapeRenderer.title=this._layer.addShape(new l())}this._shapeRenderer.axisLine=q.addShape(new h());if(this._showMajorTicks){var s=this.getMajorTicks();for(var o=0,n=s.length;o<n;o++){this._shapeRenderer.majorTicks[o]=q.addShape(new h());if(o==0){this._shapeRenderer.majorTicks[o].visible(false)}}}if(this._showMinorTicks){var r=this.getMinorTicks();for(var o=0,n=r.length;o<n;o++){this._shapeRenderer.minorTicks[o]=q.addShape(new h())}}if(this._shapeRenderer&&this._shapeRenderer.majorTicks&&this._shapeRenderer.majorTicks[0]){this._shapeRenderer.majorTicks[0].visible(true)}},_draw:function(){var o=k;var n=0;if(this._position=="hb"){var q=0;if(this._showAxisLine){q=this._drawLineAndTick(this._axisLineLayer,n)}if(this._showLabels()){n+=this._getTextMargin().top;this._drawLabels(this._axisLabelLayer,n);if(this._direction=="horizontal"){n+=o.measureHeight(this._labels.font)}else{n+=this._getLongestWidth()}n+=this._getTextMargin().bottom}if(this._title.show){n+=this.getTitleMargin().top;this._drawAxisTitle(this._axisLabelLayer,(this._axisMatrics.left+this._layer.width()+this._axisMatrics.right)/2,n+q);n+=o.measureHeight(this._title.style);n+=this.getTitleMargin().bottom}}else{if(this._position=="ht"){if(this._title.show){n+=this.getTitleMargin().top;this._drawAxisTitle(this._axisLabelLayer,(this._axisMatrics.left+this._layer.width()+this._axisMatrics.right)/2,n);n+=o.measureHeight(this._title.style);n+=this.getTitleMargin().bottom}if(this._showLabels()){n+=this._getTextMargin().top;this._drawLabels(this._axisLabelLayer,n);if(this._direction=="horizontal"){n+=o.measureHeight(this._labels.font)}else{n+=this._getLongestWidth()}n+=this._getTextMargin().bottom}if(this._showAxisLine){this._drawLineAndTick(this._axisLabelLayer,0)}}else{if(this._position=="vl"){if(this._title.show){n+=this.getTitleMargin().top;this._drawAxisTitle(this._axisLabelLayer,n,(this._axisMatrics.top+this._layer.height()+this._axisMatrics.bottom)/2);n+=o.measureHeight(this._title.style);n+=this.getTitleMargin().bottom}if(this._showLabels()){n+=this._getTextMargin().left;n+=this._getLongestWidth();this._drawLabels(this._axisLabelLayer,n);n+=this._getTextMargin().right}if(this._showAxisLine){if(!this._showLabels()&&!this._showMajorTicks&&!this._showMinorTicks){if(n<this._axisLineLayer.width()-this._lineThickness){n=this._axisLineLayer.width()-this._lineThickness}}this._drawLineAndTick(this._axisLineLayer,0)}}else{if(this._position=="vr"){var q=0;if(this._showAxisLine){q=this._drawLineAndTick(this._axisLineLayer,n)}if(this._showLabels()){n+=this._getTextMargin().left;this._drawLabels(this._axisLabelLayer,n);n+=this._getLongestWidth();n+=this._getTextMargin().right}if(this._title.show){n+=this.getTitleMargin().top;this._drawAxisTitle(this._axisLabelLayer,n+q,(this._axisMatrics.top+this._layer.height()+this._axisMatrics.bottom)/2);n+=o.measureHeight(this._title.style);n+=this.getTitleMargin().bottom}}}}}},_drawLine:function(q,o){if(this._showAxisLine){var n=this._shapeRenderer.axisLine;n.color(this._lineColor);if(this._position=="hb"||this._position=="ht"){n.update(this._lineThickness,{x:0,y:o},{x:this._distance,y:o})}else{n.update(this._lineThickness,{x:o,y:0},{x:o,y:this._distance})}return this._lineThickness}return 0},updateLayerSizes:function(){var n=this._axisMatrics;var r=n.left+n.right;var s=n.top+n.bottom;var o=this._layer.size();var t=0;if(this._showAxisLine){t+=this._lineThickness}if(this._showMinorTicks&&this._showMajorTicks){var q=c.max(this._majorMarkSize,this._minorMarkSize);t=c.max(t,q)}else{if(this._showMinorTicks){t=c.max(t,this._minorMarkSize)}else{if(this._showMajorTicks){t=c.max(t,this._majorMarkSize)}}}if(this._position=="hb"||this._position=="ht"){this._savedAxisLineSize={width:this._distance,height:t};this._savedLabelLayerSize={width:o.width,height:o.height-t};this._axisLineVisibleWindow.size(this._savedAxisLineSize);this._labelVisibleWindow.size(this._savedLabelLayerSize);if(this._position=="hb"){this._labelVisibleWindow.position({x:0,y:t});this._axisLineVisibleWindow.position({x:n.left,y:0})}else{this._labelVisibleWindow.position({x:0,y:0});this._axisLineVisibleWindow.position({x:n.left,y:o.height-t})}}else{this._savedAxisLineSize={width:t,height:this._distance};this._savedLabelLayerSize={width:o.width-t,height:o.height};this._axisLineVisibleWindow.size(this._savedAxisLineSize);this._labelVisibleWindow.size(this._savedLabelLayerSize);if(this._position=="vl"){this._labelVisibleWindow.position({x:0,y:0});this._axisLineVisibleWindow.position({x:o.width-t,y:n.top})}else{this._labelVisibleWindow.position({x:t,y:0});this._axisLineVisibleWindow.position({x:0,y:n.top})}}},_drawMajorTickMarks:function(r,o){var s=this.getMajorTicks();var t=0;if(this._position=="hb"||this._position=="ht"){t=this._axisMatrics.left;for(var q=0,n=s.length;q<n;q++){this._drawSignalTickMark(this._shapeRenderer.majorTicks[q],r,s[q]-t,o,this._majorMarkSize)}}else{t=this._axisMatrics.top;for(var q=0,n=s.length;q<n;q++){this._drawSignalTickMark(this._shapeRenderer.majorTicks[q],r,o,s[q]-t,this._majorMarkSize)}}},_drawMinorTickMarks:function(r,o){var t=this.getMinorTicks();var s=0;if(this._position=="hb"||this._position=="ht"){s=this._axisMatrics.left;for(var q=0,n=t.length;q<n;q++){this._drawSignalTickMark(this._shapeRenderer.minorTicks[q],r,t[q]-s,o,this._minorMarkSize)}}else{s=this._axisMatrics.top;for(var q=0,n=t.length;q<n;q++){this._drawSignalTickMark(this._shapeRenderer.minorTicks[q],r,o,t[q]-s,this._minorMarkSize)}}},_resetShapes:function(){var w=this._shapeRenderer;var z=this._axisLineLayer;var x=this._axisLabelLayer;var v=this._layer;if(w.backgroundAxisLine){v.removeShape(w.backgroundAxisLine)}if(w.title){this._layer.removeShape(w.title)}if(w.axisLine){z.removeShape(w.axisLine)}for(var s=0,r=w.majorTicks,u=r.length;s<u;s++){z.removeShape(r[s])}for(var s=0,q=w.minorTicks,u=q.length;s<u;s++){z.removeShape(q[s])}for(var s=0,t=w.labels,u=t.length;s<u;s++){if(t[s]&&t[s].length>0){for(var o=0;o<t[s].length;o++){x.removeShape(t[s][o])}}}w.labels=[]},setVisibleRange:function(o,n,t){this._scaled=true;this.updateLayerSizes();this._positionMultiplier=null;this._majorTickPositions=null;this._minorTickPositions=null;var r=this._axisLineLayer;var q=this._savedAxisLineSize;var s=this._savedLabelLayerSize;r.size({height:q.height*n,width:q.width*o});this._axisLabelLayer.size({height:s.height*n,width:s.width*o});this.distance(this._distance*t)},draw:function(n){if(!n){this._resetShapes();this.createRenderer();if(this._scaled===false){this.updateLayerSizes();this._axisLineLayer.size(this._axisLineVisibleWindow.size());this._axisLabelLayer.size(this._labelVisibleWindow.size());this._axisLineLayer.position({x:0,y:0});this._axisLabelLayer.position({x:0,y:0})}}if(this._position=="hb"||this._position=="ht"){if(!a.isExist(this._preferredHeight)||this._preferredHeight==0){this._preferredHeight=this._measureHeight()}}else{if(!a.isExist(this._preferredWidth)||this._preferredWidth==0){this._preferredWidth=this._measureWidth()}}this._draw()},setLayer:function(o){this._layer=o;o.clipToBounds(true);var q=o.bounds();var n={anchor:{x:0,y:0},size:{w:q.width,h:q.height}};this._axisLineVisibleWindow=new f(n);this._labelVisibleWindow=new f(n);this._labelVisibleWindow.clipToBounds(true);this._axisLineVisibleWindow.clipToBounds(true);this._axisLineLayer=new f(n);this._axisLabelLayer=new f(n);this._axisLineVisibleWindow.addSubLayer(this._axisLineLayer);this._labelVisibleWindow.addSubLayer(this._axisLabelLayer);this._layer.addSubLayer(this._axisLineVisibleWindow);this._layer.addSubLayer(this._labelVisibleWindow)},_laxr_initialize:function(){var s=this._baxr_options;this._labels.itemsValue=[];var q=d;var n=null;if(s.manualScale&&s.manualScale.enable===true&&this._lineScaling==="linear"){n=q.createFocus()}else{n=q.createFocus("full")}var r=q.validateBounds(s.minValue,s.maxValue);this._minValue=r.min;this._maxValue=r.max;this.VALUE_LABEL_PRECISION=10000000;var o=n.calculateFocus({lineScaling:this._lineScaling,minValue:this._minValue,maxValue:this._maxValue,manualScale:s?s.manualScale:{}});this._minValue=parseFloat(o.min.toFixed(10));this._maxValue=parseFloat(o.max.toFixed(10));this._majorInterval=o.major;this._minorInterval=parseFloat(o.minor.toFixed(10));this._minorDivisions=c.round(this._majorInterval/this._minorInterval);this._hideOverlappingLabels=true;this._valueAxisFormatString=e.getFormatString(this._labels.formatString,0);this._FTminValue=e.formatToText(this._minValue,this._valueAxisFormatString,true);this._FTmaxValue=e.formatToText(this._maxValue,this._valueAxisFormatString,true)},distance:function(n){if(a.isExist(n)){this._distance=n;this._createLabelsAndPosition();if(!this._isLabelHorizontal()){this._direction="vertical"}if(this._hideOverlappingLabels){this._removeOverlappingLabels(this._labels.itemsPosition.length)}this._updateAxisMetrics();return this}return this._distance},_updateAxisMetrics:function(){var o=k,n={left:0,right:0,top:0,bottom:0};if(this._position=="hb"||this._position=="ht"){if(this._direction=="horizontal"){n.left=this._showLabels()?o.measureWidth(this._labels.font,this._FTminValue)/2+this._getTextMargin().left:0;n.right=this._showLabels()?o.measureWidth(this._labels.font,this._FTmaxValue)/2+this._getTextMargin().right:0}else{n.left=this._showLabels()?o.measureHeight(this._labels.font)/2+this._getTextMargin().left:0;n.right=this._showLabels()?o.measureHeight(this._labels.font)/2+this._getTextMargin().right:0}}else{n.top=this._showLabels()?o.measureHeight(this._labels.font)/2+this._getTextMargin().top:0;n.bottom=this._showLabels()?o.measureHeight(this._labels.font)/2+this._getTextMargin().bottom:0}this._axisMatrics=n},_createLabelsAndPosition:function(){var o=this._majorInterval;var n=this._minorInterval;var B=this._calculatePositionMultiplier(false);var A=0;if(this._hideOverlappingLabels){A=0.5}var r=0;var q=this._labels.itemsPosition=[];this._labels.itemsValue=[];var z=this._minValue;var u=this._calculatePositionFromValue(z,B);var t=0;var x;while((c.round(z*this.VALUE_LABEL_PRECISION)/this.VALUE_LABEL_PRECISION)<(c.round(this._maxValue*this.VALUE_LABEL_PRECISION)/this.VALUE_LABEL_PRECISION)){var w=new this.Label();var v=e.getFormatString(this._labels.formatString,t);x=e.formatToTextWithColor(parseFloat(z.toFixed(8)),v,true);w.value(x.text);w.formatColor(x.color);w.visible(true);q.push((u)||0);this._labels.itemsValue.push(w);var s=this._calculateNextValidInterval(u,B,z,o,A);u=s.position;if(z>=s.value){break}z=s.value;t++}u=this._calculatePositionFromValue(this._maxValue,B);w=new this.Label();w.visible(true);if(this._baxr_options.manualScale&&this._baxr_options.manualScale.enable===true){x=e.formatToTextWithColor(this._maxValue,e.getFormatString(this._labels.formatString,0),true)}else{x=e.formatToTextWithColor(parseFloat(z.toFixed(8)),e.getFormatString(this._labels.formatString,0),true)}w.value(x.text);w.formatColor(x.color);q.push((u)||0);this._labels.itemsValue.push(w)},zoom:function(q,o,s){this._scaled=true;this._positionMultiplier=null;this._majorTickPositions=null;this._minorTickPositions=null;var n=this._axisLineLayer.size();var r=this._axisLabelLayer.size();this._axisLineLayer.size({height:n.height*o,width:n.width*q});this._axisLabelLayer.size({height:r.height*o,width:r.width*q});this.distance(this._distance*s);this.draw()},position:function(n,o){this._axisLineLayer.position({x:n,y:o});this._axisLabelLayer.position({x:n,y:o})},_calculateNextValidInterval:function(t,s,v,o,n){if(!a.isExist(n)){n=0.5}var u=this._add(v,o);var r=this._calculatePositionFromValue(u,s);if(c.abs(r-t)<n){var q;q=this._calculateValueFromPosition(r+n,s);var w=c.ceil((q-u)/o);u+=w*o;r=this._calculatePositionFromValue(u,s)}return{position:r,value:u}},_add:function(t,s){var r=0,o=0,n;var q;if(t!=null){q=t.toString().split(".");if(q.length>1){r=q[1].length}}if(s!=null){q=s.toString().split(".");if(q.length>1){o=q[1].length}}n=c.pow(10,c.max(r,o));return(t*n+s*n)/n},_calculatePositionFromValue:function(q,o){var n=0;if(this._lineScaling=="linear"){n=m.calculateLinearPosition(q,o,this._minValue)}else{n=m.calculateLogarithmicPosition(q,o,this._minValue)}return n},_calculateValueFromPosition:function(n,o){var q=0;if(this._lineScaling=="linear"){q=m.calculateLinearValue(n,o,this._minValue)}else{q=m.calculateLogarithmicValue(n,o,this._minValue)}return q},_getLongestWidth:function(){if(!a.isExist(this._longestWidth)||this._longestWidth==0){var q=k;var o=this._minValue;var r=this._majorInterval;var t=o,u;var n;var s=(e.formatToText(t,this._valueAxisFormatString,true)).toString();while((c.round(t*this.VALUE_LABEL_PRECISION)/this.VALUE_LABEL_PRECISION)<(c.round(this._maxValue*this.VALUE_LABEL_PRECISION)/this.VALUE_LABEL_PRECISION)){u=parseFloat((t+r).toFixed(8));if(t>=u){break}n=(e.formatToText(u,this._valueAxisFormatString,true)).toString();if(s.length<n.length){s=n}t=u}if(s.length>this._FTmaxValue.toString().length){this._longestWidth=q.measureWidth(this._labels.font,s)}else{this._longestWidth=q.measureWidth(this._labels.font,this._FTmaxValue)}}return this._longestWidth},_removeOverlappingLabels:function(t){var u=k;if(t<3){return}var v=(this._position=="hb"||this._position=="ht")&&this._direction=="vertical";v=v|(this._position=="vl"||this._position=="vr");if(v&&this._lineScaling=="linear"){var r=u.measureHeight(this._labels.font)+2;var o=this._distance+r;var n=c.floor(o/r);this._hideOverlappingLabelsByBestInterval(t,n)}else{var q=t-1;for(var s=t-2;s>=1;s--){var w=this._labels.itemsValue[s];if(0==w.value()){continue}}}},_drawLabels:function(o,n){j.prototype._drawLabels.apply(this,arguments);this._removeLastTwoOverlappedLabel()},_removeLastTwoOverlappedLabel:function(){var u=this._shapeRenderer.labels;var t=u.length;var s=u[t-1][0];var r;var o=t-2;for(;o>0;o--){if(u[o]&&u[o].length>0&&u[o][0].visible()){r=u[o][0];break}}if(s==null||r==null){return}var n=this._labels.itemsPosition;if(this._position=="hb"||this._position=="ht"){if(this._direction=="horizontal"){if(s.topLeft().x<r.topRight().x){r.visible(false)}}else{var q=n[t-1]-n[o];if(c.abs(r.topCenter().y-r.bottomCenter().y)>=q){r.visible(false)}}}else{if(s.bottomCenter().y>r.topCenter().y){r.visible(false)}}},_hideOverlappingLabelsByBestInterval:function(r,s){if(s>=r){return}var o=0;for(;o<=r-2;o++){if((0==(r-1)%(o+1))&&((r-1)/(o+1)+1<=s)){break}}for(var q=r-2;q>=1;q--){var n=this._labels.itemsValue[q];if(q%(o+1)!=0){n.visible(false)}}}});return b});sap.riv.module({qname:"sap.riv.vizkit.Canvas2DSurfaceComponent",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.graphics.CanvasHelper",version:"3.4.0"},{qname:"sap.riv.graphics.Canvas2DSurface",version:"3.4.0"},{qname:"sap.riv.vizkit.UIComponent",version:"3.4.0"}],function Setup(d,e,c,a){var b=d.derive(a,{constructor:function(f){this._canvasElement=e.createCanvasElement(this.width(),this.height(),this._container);this._canvasSurface=new c({canvasEl:this._canvasElement});this._registerEventDispatcher()},_canvasSurfaceEventDispatcher:function(f){this._canvasSurface.dispatchComponentUIEvent(f)},_registerEventDispatcher:function(){this.on({eventName:"click",listener:this._canvasSurfaceEventDispatcher,scope:this});this.on({eventName:"dblclick",listener:this._canvasSurfaceEventDispatcher,scope:this});this.on({eventName:"mouseup",listener:this._canvasSurfaceEventDispatcher,scope:this});this.on({eventName:"mousedown",listener:this._canvasSurfaceEventDispatcher,scope:this});this.on({eventName:"mousemove",listener:this._canvasSurfaceEventDispatcher,scope:this});this.on({eventName:"mouseleave",listener:this._canvasSurfaceEventDispatcher,scope:this});this.on({eventName:"touchstart",listener:this._canvasSurfaceEventDispatcher,scope:this});this.on({eventName:"touchmove",listener:this._canvasSurfaceEventDispatcher,scope:this});this.on({eventName:"touchend",listener:this._canvasSurfaceEventDispatcher,scope:this});this.on({eventName:"touchcancel",listener:this._canvasSurfaceEventDispatcher,scope:this})},purgeListeners:function(){this.callParent("purgeListeners");this._registerEventDispatcher()},removeAllListeners:function(f){this.callParent("removeAllListeners",f);switch(f){case"click":this.on({eventName:"click",listener:this._canvasSurfaceEventDispatcher,scope:this});break;case"dblclick":this.on({eventName:"dblclick",listener:this._canvasSurfaceEventDispatcher,scope:this});break;case"mouseup":this.on({eventName:"mouseup",listener:this._canvasSurfaceEventDispatcher,scope:this});break;case"mousedown":this.on({eventName:"mousedown",listener:this._canvasSurfaceEventDispatcher,scope:this});break;case"mousemove":this.on({eventName:"mousemove",listener:this._canvasSurfaceEventDispatcher,scope:this});break;case"mouseleave":this.on({eventName:"mouseleave",listener:this._canvasSurfaceEventDispatcher,scope:this});break;case"touchstart":this.on({eventName:"touchstart",listener:this._canvasSurfaceEventDispatcher,scope:this});break;case"touchmove":this.on({eventName:"touchmove",listener:this._canvasSurfaceEventDispatcher,scope:this});break;case"touchend":this.on({eventName:"touchend",listener:this._canvasSurfaceEventDispatcher,scope:this});break;case"touchcancel":this.on({eventName:"touchcancel",listener:this._canvasSurfaceEventDispatcher,scope:this});break}},doContentResize:function(g,f){this.callParent("doContentResize",g,f);if(g.width!==f.width){this._canvasSurface.width(f.width)}if(g.height!==f.height){this._canvasSurface.height(f.height)}},getCanvasSurface:function(){return this._canvasSurface},doPrint:function(f){f.drawImage(this._canvasElement,0,0)}});return b});sap.riv.module({qname:"sap.riv.graphics.shape.Circle",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.graphics.shape.FillableShape",version:"3.4.0"},{qname:"sap.riv.core.Math",version:"3.4.0"}],function Setup(d,c,a){var b=d.derive(c,{constructor:function(){this._center={x:0,y:0};this._radius=0},center:function(e){if(e!==undefined){this._center.x=e.x;this._center.y=e.y;return this}if(this._center){return{x:this._center.x,y:this._center.y}}},radius:function(e){if(e!==undefined){if(e>0){this._radius=e}return this}return this._radius},doDraw:function(e){var f=e;var g=this._center;f.beginPath();f.arc(g.x,g.y,this._radius,0,2*a.PI,false);f.closePath();this.fillShape(f);this.drawBorder(f)},doPointInTest:function(f){var h=this._center;var e=f.x-h.x;var g=f.y-h.y;return(e*e+g*g)<=this._radius*this._radius}});return b});sap.riv.module({qname:"sap.riv.vizkit.PanGestureDetector",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.vizkit.GestureDetector",version:"3.4.0"},{qname:"sap.riv.core.Math",version:"3.4.0"}],function Setup(f,e,b){var d=e.TransitionState;var a=function(k,j){var h=k.x-j.x;var g=k.y-j.y;return b.sqrt(h*h+g*g)};var c=f.derive(e,{constructor:function(g){this._touchesRequired=(g>0&&g<6)?g:1;this._startXY=undefined;this._lastXY=undefined;this._currentXY=undefined;this._startWhen=0;this._stopWhen=0},doTouchBegin:function(g){var h=this.totalTouches();if(h===this._touchesRequired&&this.state()===d.Possible){this._startWhen=this._stopWhen=g.timeStamp;this._startXY=this._lastXY=this._currentXY=this.globalLocOfTouchPoints();this._setState_(d.Began)}else{if(h>this._touchesRequired){if(this.state()===d.Began||this.state()===d.Changed){this._stopWhen=g.timeStamp;this._lastXY=this._currentXY;this._currentXY=this.globalLocOfTouchPoints();this._setState_(d.Cancelled)}else{this._setState_(d.Failed)}}}},doTouchMove:function(g){switch(this.state()){case d.Began:if(a(this._startXY,this.globalLocOfTouchPoints())>10){this._startWhen=this._stopWhen;this._stopWhen=g.timeStamp;this._lastXY=this._currentXY;this._currentXY=this.globalLocOfTouchPoints();this._setState_(d.Changed)}break;case d.Changed:this._startWhen=this._stopWhen;this._stopWhen=g.timeStamp;this._lastXY=this._currentXY;this._currentXY=this.globalLocOfTouchPoints();this._setState_(d.Changed);break}},doTouchEnd:function(g){if((this.state()===d.Began||this.state()===d.Changed)){this._startWhen=this._stopWhen;this._stopWhen=g.timeStamp;this._lastXY=this._currentXY;this._currentXY=this.globalLocOfTouchPoints();this._setState_(d.Ended)}},doTouchCancel:function(g){if(this.state()===d.Began||this.state()===d.Changed){this._startWhen=this._stopWhen;this._stopWhen=g.timeStamp;this._lastXY=this._currentXY;this._currentXY=this.globalLocOfTouchPoints();this._setState_(d.Cancelled)}},rangeInXY:function(){return{x:this._currentXY.x-this._startXY.x,y:this._currentXY.y-this._startXY.y}},velocityInXY:function(){var g=this._stopWhen-this._startWhen;if(g){return{x:(this._currentXY.x-this._lastXY.x)/g,y:(this._currentXY.y-this._lastXY.y)/g}}else{return 0}},reset:function(){this.callParent("reset");this._startXY=undefined;this._lastXY=undefined;this._currentXY=undefined;this._startWhen=0;this._stopWhen=0}});return c});sap.riv.module({qname:"sap.riv.viz.shared.series.ColumnBarRenderer",version:"3.4.0"},[{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.utils.ColorSeriesGenerator",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.BarRenderer",version:"3.4.0"},{qname:"sap.riv.core.Math",version:"3.4.0"},{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.Animator",version:"3.4.0"}],function Setup(a,d,f,c,g,b){var e=g.derive(f,{constructor:function(j,h){this.verticalAxesOffset=0},_parseOptions:function(h){this._barStyle.isShowGradient=h.bar.isShowGradient;this._barStyle.isShowInnerBorder=h.bar.isShowInnerBorder;this._barStyle.isShowOutBorder=h.bar.isShowOutBorder},draw:function(){var j=this.getSeriesGroups();if(j.length===0){return}var h=j[0].getSeriesList();if(h.length===0){return}this._initSeries(h);this._update();this._regEvent()},_update:function(){var n=this.getSeriesGroups();if(n.length==0){return}var l=n[0].getSeriesList();if(l.length==0){return}var o=l[0].getOptions().barMarkerSize;var m=this.calculateBarSize(o*this._scale);this.calculateSeriesPoints(m);for(var k=0,h=l.length;k<h;k++){this._drawSeries(l[k])}var j=true;if(this._enableAllAnimation){if(this._isInitialization){j=!this._enableInitAnimation}}this._doAnimation(j)},_updateSeries:function(s,u){var l=this.getSeriesGroups();if(l.length){var k=l[0].getSeriesList();if(k.length){var o,q,h,v;for(var n=0,r=k.length;n<r;n++){o=k[n];q=o.getSeriesItems();h=o.getOptions().fillColor;v=d.getColorSeriesForBar(h);for(var m=0;m<q.length;m++){var t=q[m].getPosition();if(s===true){this._updateSeriesItemDuringAnimation(q[m],t,h,u[0],v)}else{this._updateSeriesItem(q[m],t,h,1,this._drawBorderTopLine(n,r),v)}}}}}},_doAnimation:function(k){var h=b;var j=this;var m=this.getSeriesGroups();if(m.length==0){return}var l=m[0].getSeriesList();if(l.length==0){return}if(!k){h.animate({values:[{type:"FLOAT",from:0,to:1}],duration:this._animationDuration,onStep:function(n){j._updateSeries(true,n);if(j._highlights&&j._highlights.length>0){j.highlight()}j.refresh()},onComplete:function(){j._updateSeries();if(j._highlights&&j._highlights.length>0){j.highlight()}j.refresh()}})}else{this._updateSeries();if(j._highlights&&j._highlights.length>0){j.highlight()}j.refresh()}this._isInitialization=false},_drawBorderTopLine:function(h,j){return true},calculateBarSize:function(o){var m=this.getSeriesGroups();if(m.length==0){return}var l=m[0].getSeriesList();if(l.length==0){return}var k=l[0].getXAxis();var h=l[0].getData().length;var r=this.getVisibleSeriesCount();var q=(h+1)*r;var n=k.getDistance();var j=(n/q);if(a.isDefined(o)&&(j>o)){j=o}j=j<1?1:j;return j},_calculateSeriesPoints:function(w,v,s,k,l){var z=[];if(s.isVisible()===true){var r=s.getData();var j=s.getYAxis();var q=j.getMajorTicks()[0];var h=j.u2p(0);var m=c.round(l/8);var t=s.getSeriesItems();var o=0;if(a.isExist(this.verticalAxesOffset)){o=(j._sax_options.index!=1)?0:this.verticalAxesOffset}for(var n=0,u=r.length;n<u;n++){var x={};x.x1=k[n]-((v-2*w)*(l+m)-m)/2;if(this._fillToZero){x.y2=h;if(q<h){x.y2=q}}else{x.y2=q}x.y2=x.y2+o;x.y1=j.u2p(r[n].value)+o;x.x2=x.x1+l;t[n].setPosition(x)}}},calculateSeriesPoints:function(A){var u=this.getSeriesGroups();if(u.length===0){return}var x=u[0].getSeriesList();if(x.length===0){return}var n=this.getVisibleSeriesCount();var o=x[0].getXAxis();var v=o.getMajorTicks();var w=-1;for(var B=0,s=x.length;B<s;B++){var r=x[B];if(r.isVisible()){w++}var h=r.getYAxis();var E=h.getMaxValue();var t=h.getMinValue();var l=h.getMajorTicks()[0];var q=h.u2p(0);if(E<0){q=h.u2p(E)}else{if(t>0){q=h.u2p(t)}}var k=r.getSeriesItems();var m=(h._sax_options.index!=1)?this.verticalAxes0Offset:this.verticalAxes1Offset;for(var C=0,D=k.length;C<D;C++){var z={};z.x1=v[C]-((n-2*w)*A)/2;if(this._fillToZero){z.y2=q;if(l<q){z.y2=l}}else{z.y2=l}z.y2=z.y2+m;if(k[C].getData()[0].value>0){z.y1=h.u2p(c.max(t,c.min(k[C].getData()[0].value,E)))+m;if(t>0&&z.y1>q){z.y1=q}}else{z.y1=h.u2p(c.min(E,c.max(k[C].getData()[0].value,t)))+m;if(E<0&&z.y1<q){z.y1=q}}z.x2=z.x1+A;k[C].setPosition(z)}}},getVerticalYAxisOffset:function(){return this.verticalAxesOffset},_calculateSeriesPoints:function(w,v,s,k,l){var z=[];if(s.isVisible()===true){var r=s.getData();var j=s.getYAxis();var q=j.getMajorTicks()[0];var h=j.u2p(0);var m=c.round(l/8);var t=s.getSeriesItems();var o=0;if(a.isExist(this.verticalAxesOffset)){o=(j._sax_options.index!=1)?0:this.verticalAxesOffset}for(var n=0,u=r.length;n<u;n++){var x={};x.x1=k[n]-((v-2*w)*(l+m)-m)/2;if(this._fillToZero){x.y2=h;if(q<h){x.y2=q}}else{x.y2=q}x.y2=x.y2+o;x.y1=j.u2p(r[n].value)+o;x.x2=x.x1+l;t[n].setPosition(x)}}},_regEvent:function(){},_drawSeriesItem:function(l,o,h,r){var n=l.getMainShapes()[0];var k=l.getDecoratingShapes();var m=this._barStyle.isShowOutBorder,j=this._barStyle.isShowInnerBorder;var s=c.abs(o.x1-o.x2);if(s<8){m=false}if(s<5){j=false}var q=l.isVisible();n.visible(q);this._drawDataLabel(l);k.outerBorder.visible(q&&m);k.innerBorder.visible(q&&j);n.color(h);if(l.getData()[0].value>0){n.bottomRight([c.max(o.x1,o.x2),c.max(o.y1,o.y2)])}else{n.topRight([c.max(o.x1,o.x2),c.min(o.y1,o.y2)])}k.innerBorder.reset();k.outerBorder.reset();k.innerBorder.borderWidth(1).borderColor(r[0]);k.outerBorder.borderWidth(1).borderColor(r[3])},_getDataLabelAnchor:function(j,h,m){var l={x:(h.x1+h.x2)/2};var k=(h.y2<h.y1);if(k){if(j=="outsideEnd"){l.align="top";l.y=h.y1}else{if(j=="insideEnd"){l.align="bottom";l.y=h.y1}else{if(j=="insideBase"){l.align="top";l.y=h.y2}}}}else{if(j=="outsideEnd"){l.align="bottom";l.y=h.y1}else{if(j=="insideEnd"){l.align="top";l.y=h.y1}else{if(j=="insideBase"){l.align="bottom";l.y=h.y2}}}}if(j=="center"){l.align="center";l.y=(h.y1+h.y2)/2}return l},_updateSeriesItemDuringAnimation:function(l,h,k,m,j){if(a.isUndefined(h)){return}var n=l.getMainShapes()[0];this._updateSeriesItemMainShape(n,h,k,m,j);n.shadow({offsetX:0,offsetY:0,blur:0,color:"rgba(0,0,0,0.5)"})},_updateSeriesItem:function(m,q,h,n,k,s){if(a.isUndefined(q)){return}var o=m.getMainShapes()[0];this._updateSeriesItemMainShape(o,q,h,n,s);if(this._barStyle.isShowShadow){o.shadow({offsetX:2,offsetY:1,blur:2,color:"rgba(0,0,0,0.5)"})}else{o.shadow({offsetX:0,offsetY:0,blur:0,color:"rgba(0,0,0,0.5)"})}var l=m.getDecoratingShapes();var j=0;var r=c.abs(q.y2-q.y1)*n;l.outerBorder.reset();if(this._barStyle.isShowOutBorder&&l.outerBorder.visible()){this._drawBorderPath(l.outerBorder,q,r,j,m.getData()[0].value,k);j=j+1}l.innerBorder.reset();if(this._barStyle.isShowInnerBorder&&l.innerBorder.visible()){this._drawBorderPath(l.innerBorder,q,r,j,m.getData()[0].value,k)}},_updateSeriesItemMainShape:function(o,j,l,m,k){var n=c.abs(j.x1-j.x2);var h=c.abs(j.y2-j.y1)*m;if((n.toString()==="NaN")||(h.toString()==="NaN")){return}o.size({width:n,height:h});if(this._barStyle.isShowGradient&&n>4&&h>4){if(j.y1>j.y2){o.color({t:"lg",e:{x:j.x1,y:0},s:{x:j.x1,y:h},st:[{o:0,v:k[1]},{o:1,v:k[2]}]})}else{o.color({t:"lg",s:{x:j.x1,y:0},e:{x:j.x1,y:h},st:[{o:0,v:k[1]},{o:1,v:k[2]}]})}}else{o.color(l)}},_drawBorderPath:function(n,t,j,l,s,m){var u=c.abs(t.y2-t.y1);if(u<2){return}var k=c.max(t.x1,t.x2);var h=c.min(t.x1,t.x2);var r=c.max(t.y1,t.y2);var q=c.min(t.y1,t.y2);var o={x1:c.floor(k-l),x2:c.ceil(h+l)};if(s<0){o.y1=q;o.y2=c.min(r,(q+j-l))}else{o.y1=r;o.y2=c.max(q,(r-j+l))}n.moveTo(o.x1,o.y1).lineTo(o.x1,o.y2);if(!m||u<3){n.moveTo(o.x2,o.y2)}else{n.lineTo(o.x2,o.y2)}n.lineTo(o.x2,o.y1)},hoverAround:function(v){var n=this._getVisibleSeries();if(n.length==0){return}var m=n[0].getXAxis();var j=m.getMajorTicks();var r=m.getTickInterval()/2;var l=0,o=j.length-1;var x=false;var t;while(!x&&l<=o){t=c.round((l+o)/2);var q=j[t]-v.x;if(c.abs(q)<=r){x=true}else{if(q<=0){l=t+1}else{o=t-1}}}if(!x){return}if(this._dataCtxOnPoint&&this._dataCtxOnPoint.dimensionItemIndex===t){return null}var w={dimensionPath:[{dimensionItemIndex:t}]};var s=n[0].getSeriesItems()[t].getPosition();var k=n[n.length-1].getSeriesItems()[t].getPosition();var u=0;var h=k.x2-s.x1+u*2;this._tpDecorativeRenderer.visible(true).width(h).height(this.getLayer().size().height-n[0].getYAxis().getLastTickOffset()).color("rgba(133,133,133, 0.4)").topLeft([s.x1-u,n[0].getYAxis().getLastTickOffset()]);this.refresh();v.x=j[t];this._dataCtxOnPoint=null;this._dataCtxOnPoint=w;this._dataCtxOnPoint.point=v;return{dimensionItemIndex:t,point:v}}});return e});sap.riv.module({qname:"sap.riv.viz.shared.shape.Cross",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.graphics.shape.Polygon",version:"3.4.0"},{qname:"sap.riv.graphics.shape.Paths",version:"3.4.0"}],function Setup(d,a,b){var c=d.derive(a,{constructor:function(){this._point={x:0,y:0};this._size=0},size:function(e){if(e!==undefined){this._size=e;return this}if(this._size){return this._size}},centerPoint:function(e){if(e!==undefined){this._point.x=e.x;this._point.y=e.y;return this}return{x:this._point.x,y:this._point.y}},doDrawShape:function(){var e=this._point;var f=this;var h=this._size;var g=1/6;f.addVertices(e.x,e.y-g*h);f.addVertices(e.x+g*h*2,e.y-g*h*3);f.addVertices(e.x+g*h*3,e.y-g*h*2);f.addVertices(e.x+g*h,e.y);f.addVertices(e.x+g*h*3,e.y+g*h*2);f.addVertices(e.x+g*h*2,e.y+g*h*3);f.addVertices(e.x,e.y+g*h);f.addVertices(e.x-g*h*2,e.y+g*h*3);f.addVertices(e.x-g*h*3,e.y+g*h*2);f.addVertices(e.x-g*h,e.y);f.addVertices(e.x-g*h*3,e.y-g*h*2);f.addVertices(e.x-g*h*2,e.y-g*h*3);return f},doDrawSelectionMarkup:function(){var f=this._size/2+2;var e=this._point;var g=new b();g.reset();g.moveTo(e.x,e.y-f);g.lineTo(e.x,e.y+f);g.moveTo(e.x-f,e.y);g.lineTo(e.x+f,e.y);return g},doPointInTest:function(g){var j=this._point;var f=this._size*1.3/2;var e=g.x-j.x;var h=g.y-j.y;return(e*e+h*h)<=f*f}});return c});sap.riv.module({qname:"sap.riv.viz.shared.shape.Pentagon",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.graphics.shape.Polygon",version:"3.4.0"},{qname:"sap.riv.graphics.shape.Paths",version:"3.4.0"}],function Setup(d,a,b){var c=d.derive(a,{constructor:function(){this._point={x:0,y:0};this._size=0},size:function(e){if(e!==undefined){this._size=e;return this}if(this._size){return this._size}},centerPoint:function(e){if(e!==undefined){this._point.x=e.x;this._point.y=e.y;return this}return{x:this._point.x,y:this._point.y}},doDrawShape:function(){var e=this._point;var f=this;var g=this._size/2;f.addVertices(e.x,e.y-37*g/50);f.addVertices(e.x+23*g/50,e.y-g);f.addVertices(e.x+29*g/50,e.y-24*g/50);f.addVertices(e.x+g,e.y-14/50*g);f.addVertices(e.x+34*g/50,e.y+6*g/50);f.addVertices(e.x+41*g/50,e.y+29*g/50);f.addVertices(e.x+16*g/50,e.y+29*g/50);f.addVertices(e.x,e.y+g);f.addVertices(e.x-16*g/50,e.y+29*g/50);f.addVertices(e.x-41*g/50,e.y+29*g/50);f.addVertices(e.x-34*g/50,e.y+6*g/50);f.addVertices(e.x-g,e.y-14/50*g);f.addVertices(e.x-29*g/50,e.y-24*g/50);f.addVertices(e.x-23*g/50,e.y-g);return f},doDrawSelectionMarkup:function(){var e=this._point;var j=new b();this.doDrawShape();var f=this._vertices;j.reset();for(var g=0,h=f.length;g<h;g+=2){j.moveTo(e.x,e.y);j.lineTo(f[g][0],f[g][1])}return j},doPointInTest:function(g){var k=this._point;var h=Math.sin(Math.PI*54/180)/Math.sin(Math.PI*18/180);var f=this._size*1.15*h/(1+h);var e=g.x-k.x;var j=g.y-k.y;return(e*e+j*j)<=f*f}});return c});sap.riv.module({qname:"sap.riv.viz.shared.shape.Diamond",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.graphics.shape.Polygon",version:"3.4.0"},{qname:"sap.riv.graphics.shape.Paths",version:"3.4.0"}],function Setup(d,a,b){var c=d.derive(a,{constructor:function(){this._point={x:0,y:0};this._size=0},size:function(e){if(e!==undefined){this._size=e;return this}if(this._size){return this._size}},centerPoint:function(e){if(e!==undefined){this._point.x=e.x;this._point.y=e.y;return this}return{x:this._point.x,y:this._point.y}},doDrawShape:function(){var e=this._point;var f=this;var h=this._size;var g=1/2;f.addVertices(e.x,e.y-h*g);f.addVertices(e.x+h*g,e.y);f.addVertices(e.x,e.y+h*g);f.addVertices(e.x-h*g,e.y);return f},doDrawSelectionMarkup:function(){var e=this._point;var j=new b();this.doDrawShape();var f=this._vertices;j.reset();for(var g=0,h=f.length;g<h;g++){j.moveTo(e.x,e.y);j.lineTo(f[g][0],f[g][1])}return j},doPointInTest:function(g){var j=this._point;var f=this._size*(Math.sqrt(2)+1)/4;var e=g.x-j.x;var h=g.y-j.y;return(e*e+h*h)<=f*f}});return c});sap.riv.module({qname:"sap.riv.viz.shared.utils.ScrollBarRenderer",version:"3.4.0"},[{qname:"sap.riv.graphics.shape.Rectangle",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.core.UADetector",version:"3.4.0"}],function Setup(d,b,c){var a=function(){this.SCROLLBARSIZE=6;this._layer=null;this._scrollBarRenderer=null};a.prototype.init=function(j,g,k,f){this._seriesMasklayer=j;this._seriesLayer=g;if(this._scrollBarRenderer){this._seriesMasklayer.removeShape(this._scrollBarRenderer)}this._scrollBarRenderer=this._seriesMasklayer.addShape(new d());this._direction=k;this._location=f;var h=this._seriesMasklayer.size();var e=this._seriesMasklayer.position();if(!k||k=="vertical"){this._scrollBarRenderer.width(this.SCROLLBARSIZE).height(h.height).topLeft([h.width-this.SCROLLBARSIZE,0]).visible(true).borderWidth(1)}else{if(f=="bottom"){this._scrollBarRenderer.width(h.width).height(this.SCROLLBARSIZE).topLeft([0,h.height-this.SCROLLBARSIZE]).visible(true).borderWidth(1)}else{this._scrollBarRenderer.width(h.width).height(this.SCROLLBARSIZE).topLeft([0,0]).visible(true).borderWidth(1)}}if(!c.isIE()){this._scrollBarRenderer.cornerRadius(6)}this.hidden()};a.prototype.highLight=function(){this._scrollBarRenderer.visible(true).color("rgba(51,51,51, 0.6)").borderColor("rgba(255,255,255, 0.15)")};a.prototype.unHighLight=function(){this._scrollBarRenderer.visible(true).color("rgba(51,51,51, 0.3)").borderColor("rgba(255,255,255, 0.07)")};a.prototype.hidden=function(){this._scrollBarRenderer.visible(false)};a.prototype.update=function(){var h=this._seriesMasklayer.size();var e=this._seriesLayer.size();var k=this._seriesLayer.position();if(!this._direction||this._direction==="vertical"){var g;var f;if(k.y<=0){f=h.height*h.height/e.height;g=Math.abs(k.y)*h.height/e.height}else{f=(h.height-k.y)*h.height/e.height;g=-k.y*h.height/e.height}this._scrollBarRenderer.height(f);this._scrollBarRenderer.topLeft([h.width-this.SCROLLBARSIZE,g])}else{var j;var f;if(k.x<=0){f=h.width*h.width/e.width;j=Math.abs(k.x)*h.width/e.width}else{}this._scrollBarRenderer.width(f);if(b.isDefined(this._location)&&(this._location=="bottom")){this._scrollBarRenderer.topLeft([j,h.height-this.SCROLLBARSIZE])}else{this._scrollBarRenderer.topLeft([j,0])}}};a.prototype.remove=function(){if(this._scrollBarRenderer){this._seriesMasklayer.removeShape(this._scrollBarRenderer)}};return a});sap.riv.module({qname:"sap.riv.viz.shared.gridLine.GridLine",version:"3.4.0"},[{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.misc.PropsMgr",version:"3.4.0"},{qname:"sap.riv.vizkit.ThemeManager",version:"3.4.0"},{qname:"sap.riv.core.Math",version:"3.4.0"},{qname:"sap.riv.graphics.shape.Line",version:"3.4.0"}],function Setup(b,e,d,c,g){var a={showMajor:false,majorColor:"#c9c9c9",majorThickness:"1",showMinor:false,minorColor:"#c9c9c9",minorThickness:"1",showSub:false,subColor:"#c9c9c9"};var f=function(){this._xAxis=null;this._yAxis=null;this._xAxisLayer=null;this._yAxisLayer=null;this._seriesMaskLayer=null;this._majorGridLineShape=[];this._majorGridLinePlaceHolder=null;this._minorGridLineShape=[];this._minorGridLinePlaceHolder=null;this._subGridLineShape=[];this._subGridLinePlaceHolder=null};f.prototype.setXAxis=function(h){this._xAxis=h};f.prototype.setXAxisLayer=function(h){this._xAxisLayer=h};f.prototype.setYAxis=function(h){this._yAxis=h};f.prototype.setYAxisLayer=function(h){this._yAxisLayer=h};f.prototype.setYAxisOptions=function(h){this._yAxis_options=h};f.prototype.setXAxisOptions=function(h){this._xAxis_options=h};f.prototype.setSeriesMaskLayer=function(h){this._seriesMaskLayer=h};f.prototype.setSeriesLayer=function(h){this._seriesLayer=h};f.prototype.getXAxis=function(){if(b.isExist(this._xAxis)){return this._xAxis}return null};f.prototype.getYAxis=function(){if(b.isExist(this._yAxis)){return this._yAxis}return null};f.prototype.drawGridLine=function(){if(!b.isExist(this._majorGridLinePlaceHolder)){this._majorGridLinePlaceHolder=this._seriesMaskLayer.addShape(new g())}this._drawMajorGridLine();if(!b.isExist(this._minorGridLinePlaceHolder)){this._minorGridLinePlaceHolder=this._seriesMaskLayer.addShape(new g())}this._drawMinorGridLine();if(!b.isExist(this._subGridLinePlaceHolder)){this._subGridLinePlaceHolder=this._seriesMaskLayer.addShape(new g())}this._drawSubGridLine()};f.prototype._getXDistance=function(){var h=this._xAxisLayer[0].position().x-this._seriesMaskLayer.position().x;var j=this._xAxis.getDistance()+h+this._xAxis.getAxisMetrics().left;return j};f.prototype._drawMajorGridLine=function(){this.resetMajorGridLineShape();if(this._xAxis_options.showMajor){var k=this._xAxis;var j=k.getMajorTicks();var q=this._seriesMaskLayer;var m=c.abs(this._seriesMaskLayer.position().x-this._xAxisLayer[0].position().x);for(var n=0,r=j.length;n<r;n++){var l=q.insertShapeAfter(new g(),this._majorGridLinePlaceHolder);if(!k._sax_options.visible&&n==0){l.visible(true).color(this._xAxis_options.majorColor).update(this._xAxis_options.majorThickness,{x:0.5,y:this._yAxis.getDistance()},{x:0.5,y:0})}else{if(n!==0){l.visible(true).color(this._xAxis_options.majorColor).update(this._xAxis_options.majorThickness,{x:j[n]-m,y:this._yAxis.getDistance()},{x:j[n]-m,y:0})}}this._majorGridLineShape.push(l)}}if(this._yAxis_options.showMajor){var h=this._yAxis;var o=h.getMajorTicks();var q=this._seriesMaskLayer;var m=this._yAxisLayer[0].position().y-this._seriesMaskLayer.position().y;var s=this._getXDistance();for(var n=0,r=o.length;n<r;n++){var l=q.insertShapeAfter(new g(),this._majorGridLinePlaceHolder);var t=(o[n]+m)<0?0:o[n]+m;l.visible(true).color(this._yAxis_options.majorColor).update(this._yAxis_options.majorThickness,{x:0,y:t},{x:s,y:t});this._majorGridLineShape.push(l)}}};f.prototype._drawMinorGridLine=function(){this.resetMinorGridLineShape();if(this._xAxis_options.showMinor){var k=this._xAxis;var r=k.getMinorTicks();var o=this._seriesMaskLayer;var m=c.abs(this._seriesMaskLayer.position().x-this._xAxisLayer[0].position().x);for(var n=0,q=r.length;n<q;n++){var l=o.insertShapeAfter(new g(),this._minorGridLinePlaceHolder);l.visible(true).color(this._xAxis_options.minorColor).update(this._xAxis_options.minorThickness,{x:r[n]-m,y:this._yAxis.getDistance()},{x:r[n]-m,y:0});this._minorGridLineShape.push(l)}}if(this._yAxis_options.showMinor){var h=this._yAxis;var j=h.getMinorTicks();var o=this._seriesMaskLayer;var m=this._yAxisLayer[0].position().y-this._seriesMaskLayer.position().y;var s=this._getXDistance();for(var n=0,q=j.length;n<q;n++){var l=o.insertShapeAfter(new g(),this._minorGridLinePlaceHolder);l.visible(true).color(this._yAxis_options.minorColor).update(this._yAxis_options.minorThickness,{x:0,y:j[n]+m},{x:s,y:j[n]+m});this._minorGridLineShape.push(l)}}};f.prototype._drawSubGridLine=function(){this.resetSubGridLineShape();if(!this._xAxis_options.showMajor&&this._xAxis_options.showSub){var h=this._xAxis.getMajorTicks();var j=this._xAxis.getTickInterval()/2;for(var k=0;k<h.length;k++){this._subGridLineShape[k]=this._seriesMaskLayer.insertShapeAfter(new g(),this._subGridLinePlaceHolder);this._subGridLineShape[k].color(this._xAxis_options.subColor).update(1,{x:h[k]-j,y:this._yAxis.getPreferredHeight()},{x:h[k]-j,y:this._yAxis.getLastTickOffset()})}}if(!this._yAxis_options.showMajor&&this._yAxis_options.showSub){var l=this._yAxis.getMajorTicks();var j=this._yAxis.getTickInterval()/2;for(var k=0;k<l.length;k++){this._subGridLineShape[k+1]=this._seriesMaskLayer.insertShapeAfter(new g(),this._subGridLinePlaceHolder);this._subGridLineShape[k+1].color(this._yAxis_options.subColor).update(1,{x:0,y:c.abs(l[k]-j)},{x:this._xAxis.getPreferredWidth(),y:c.abs(l[k]-j)})}}};f.prototype.parseProperties=function(h){this._propsMgr=new e(a);this._xAxis_options=this._propsMgr.properties(h.properties.xAxis[0].gridLine);this._yAxis_options=this._propsMgr.properties(h.properties.yAxis[0].gridLine)};f.prototype.applyTheme=function(l){var k=d.getThemeSettings(l);this._xAxis_options.majorColor=k.axis.xAxisMajorGridLine.color;this._xAxis_options.majorThickness=k.axis.xAxisMajorGridLine.thickness;this._xAxis_options.minorColor=k.axis.xAxisMinorGridLine.color;this._xAxis_options.minorThickness=k.axis.xAxisMinorGridLine.thickness;this._xAxis_options.subColor=k.axis.xAxisSubGridLine.color;this._yAxis_options.majorColor=k.axis.yAxisMajorGridLine.color;this._yAxis_options.majorThickness=k.axis.yAxisMajorGridLine.thickness;this._yAxis_options.minorColor=k.axis.yAxisMinorGridLine.color;this._yAxis_options.minorThickness=k.axis.yAxisMinorGridLine.thickness;this._yAxis_options.subColor=k.axis.yAxisSubGridLine.color;if(this._xAxis_options.showMajor){for(var j=1,h=this._majorGridLineShape.length;j<h;j++){this._majorGridLineShape[j].color(this._xAxis_options.majorColor).width(this._xAxis_options.majorThickness)}}if(this._yAxis_options.showMajor){for(var j=1,h=this._majorGridLineShape.length;j<h;j++){this._majorGridLineShape[j].color(this._yAxis_options.majorColor).width(this._yAxis_options.majorThickness)}}if(this._xAxis_options.showMinor){for(var j=1,h=this._minorGridLineShape.length;j<h;j++){this._minorGridLineShape[j].color(this._xAxis_options.minorColor).width(this._xAxis_options.minorThickness)}}if(this._yAxis_options.showMinor){for(var j=1,h=this._minorGridLineShape.length;j<h;j++){this._minorGridLineShape[j].color(this._yAxis_options.minorColor).width(this._yAxis_options.minorThickness)}}if(this._xAxis_options.showSub){for(var j=1,h=this._subGridLineShape.length;j<h;j++){this._subGridLineShape[j].color(this._xAxis_options.subColor).width("1")}}if(this._yAxis_options.showSub){for(var j=1,h=this._subGridLineShape.length;j<h;j++){this._subGridLineShape[j].color(this._yAxis_options.subColor).width("1")}}};f.prototype.resetSubGridLineShape=function(){for(var j=0,h=this._subGridLineShape.length;j<h;j++){this._seriesMaskLayer.removeShape(this._subGridLineShape[j])}};f.prototype.resetMajorGridLineShape=function(){for(var h=0;h<this._majorGridLineShape.length;h++){this._seriesMaskLayer.removeShape(this._majorGridLineShape[h])}this._majorGridLineShape=[]};f.prototype.resetMinorGridLineShape=function(){for(var h=0;h<this._minorGridLineShape.length;h++){this._seriesMaskLayer.removeShape(this._minorGridLineShape[h])}this._minorGridLineShape=[]};f.prototype.gestureUpdate=function(j,m){for(var l=0;l<this._majorGridLineShape.length;++l){var k=this._majorGridLineShape[l];k.update(k.width(),{x:k.from().x+j,y:k.from().y+m},{x:k.to().x+j,y:k.to().y+m})}for(var l=0;l<this._minorGridLineShape.length;++l){var h=this._minorGridLineShape[l];h.update(h.width(),{x:h.from().x+j,y:h.from().y+m},{x:h.to().x+j,y:h.to().y+m})}};return f});sap.riv.module({qname:"sap.riv.viz.xychart.XYChartPlotComponent",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"},{qname:"sap.riv.core.Logger",version:"3.4.0"},{qname:"sap.riv.vizkit.Canvas2DSurfaceComponent",version:"3.4.0"},{qname:"sap.riv.graphics.Layer",version:"3.4.0"},{qname:"sap.riv.core.UADetector",version:"3.4.0"},{qname:"sap.riv.vizkit.PinchGestureDetector",version:"3.4.0"},{qname:"sap.riv.vizkit.PanGestureDetector",version:"3.4.0"},{qname:"sap.riv.vizkit.LongPressGestureDetector",version:"3.4.0"},{qname:"sap.riv.viz.shared.gridLine.GridLine",version:"3.4.0"},{qname:"sap.riv.vizkit.TapGestureDetector",version:"3.4.0"},{qname:"sap.riv.viz.shared.context.Context",version:"3.4.0"}],function Setup(d,b,g,o,l,f,h,n,c,k,a,e,m){var j=d.derive(l,{constructor:function(q){this._canvasSurface=this.getCanvasSurface();this._rootLayer=this._canvasSurface.getRootLayer();this._chart_options=q.chart;this._metaData=this._chart_options.metaData;this._dataTree=this._chart_options.dataTree;this._xaxes=[];this._yaxes=[];this._gridLine=null;this._xaxisLayers=[];this._yaxisLayers=[];this._gridLineLayer=null;this._seriesLayer=null;this._seriesMaskLayer=null;this._chartModule=null;this._init(false);this._registerMSGestureEvents()},_registerMSGestureEvents:function(){var q=this;var r=function(t){if(t.pointerType!==t.MSPOINTER_TYPE_TOUCH){return}q._msGestureEventsHandler.apply(q,[t])};if(window&&window.navigator&&window.navigator.msPointerEnabled){var s=this._container[0];s.addEventListener("MSGestureStart",r,false);s.addEventListener("MSGestureEnd",r,false);s.addEventListener("MSGestureChange",r,false);s.addEventListener("MSGestureTap",r,false);s.addEventListener("MSGestureHold",r,false);s.addEventListener("MSPointerDown",r,false);s.addEventListener("MSPointerMove",r,false);s.addEventListener("contextmenu",function(t){t.preventDefault()},false);this._msGesture=new MSGesture();this._msGesture.target=s}},_msGestureEventsHandler:function(r){if(r.type=="MSPointerDown"){this._msGesture.target=this._container[0];this._msGesture.addPointer(r.pointerId);return}var q=this._seriesLayer.convertPointFromGlobal({x:r.offsetX,y:r.offsetY});if(r.type=="MSGestureHold"){r.preventDefault();this._enterHold=true;this._chartModule.onhover(q)}else{if(r.type=="MSGestureEnd"){if(this._enterHold){this._enterHold=false;this._chartModule.onblur()}else{if(this._enterSacale){this._enterSacale=false;this._chartModule.scaleChartEnd(this)}}}else{if(r.type=="MSGestureChange"){if(this._enterHold){var s=this._seriesMaskLayer.convertPointFromGlobal({x:r.offsetX,y:r.offsetY});if(this._seriesMaskLayer.containsPoint(s)){this._chartModule.onhover(q)}}else{if(r.scale!=1){this._enterSacale=true;this._chartModule.scaleChart(r.scale,q,this)}else{this._chartModule.translateChart({x:r.translationX,y:r.translationY},this)}}}else{if(r.type=="MSGestureTap"){this._chartModule.onclick(q)}}}}},_init:function(q){if(!q){this._initModule()}this._chartModule.init();if(!q){this._seriesMaskLayer=new f({anchor:{x:0,y:0}});this._seriesMaskLayer.clipToBounds(true);this._rootLayer.addSubLayer(this._seriesMaskLayer);this._seriesLayer=new f({anchor:{x:0,y:0}});this._seriesMaskLayer.addSubLayer(this._seriesLayer)}this._initAxesLayer();this._chartModule.initRenderer(this._seriesLayer);this._gridLine=this._chartModule._gridLine;this._initGridLine();if(!q){this._registerEvents()}},_initGridLine:function(){this._gridLine.setXAxisLayer(this._xaxisLayers);this._gridLine.setYAxisLayer(this._yaxisLayers);this._gridLine.setSeriesMaskLayer(this._seriesMaskLayer);this._gridLine.setSeriesLayer(this._seriesLayer);this._gridLine.setXAxis(this._xaxes[0]);this._gridLine.setYAxis(this._yaxes[0])},_initAxesLayer:function(){this._initXAxesLayer();this._initYAxesLayer()},_initXAxesLayer:function(){this._xaxes=[];for(var s=0,q=this._xaxisLayers.length;s<q;s++){this._rootLayer._removeSubLayer(this._xaxisLayers[s])}this._xaxisLayers=[];this._xaxes=this._chartModule._xaxes;for(var s=0,q=this._xaxes.length;s<q;s++){var r=new f({anchor:{x:0,y:0}});this._xaxes[s].setLayer(r);this._xaxisLayers.push(r);this._rootLayer.addSubLayer(r)}},_initYAxesLayer:function(){this._yaxes=[];for(var r=0,q=this._yaxisLayers.length;r<q;r++){this._rootLayer._removeSubLayer(this._yaxisLayers[r])}this._yaxisLayers=[];this._yaxes=this._chartModule._yaxes;for(var r=0,q=this._yaxes.length;r<q;r++){var s=new f({anchor:{x:0,y:0}});this._yaxes[r].setLayer(s);this._yaxisLayers.push(s);this._rootLayer.addSubLayer(s)}},_initModule:function(){if(this._chart_options.chartModule!=null){this._chartModule=new this._chart_options.chartModule(this._chart_options)}},_chart_layout:function(q){this._chartModule.doChartLayout(q,this._yaxisLayers,this._xaxisLayers,this._seriesMaskLayer,this._seriesLayer)},_doDraw:function(s){if(this._xaxes.length===0||this._yaxes.length===0){return}this._chart_layout(s);this._gridLine.drawGridLine();this._chartModule.drawSeries();for(var r=0,q=this._xaxes.length;r<q;r++){this._xaxes[r].draw()}for(var r=0,q=this._yaxes.length;r<q;r++){this._yaxes[r].draw()}this._rootLayer.setNeedsDisplay()},_resetEventStatusVariables:function(){this._mouseAlreadyDown=false;this._mouseAlreadyMoved=false;this._mouseMoveThreshold=1;this._previousMousePosition=undefined},_registerEvents:function(){this._resetEventStatusVariables();var r=[{eventName:"touchstart",listener:this._touchEventHandler,scope:this},{eventName:"touchend",listener:this._touchEventHandler,scope:this},{eventName:"touchmove",listener:this._touchEventHandler,scope:this},{eventName:"touchcancel",listener:this._touchEventHandler,scope:this}];if(h.os()!="iPad"&&h.os()!="Android"){r.push({eventName:"mousemove",listener:this._mouseEventHandler,scope:this},{eventName:"mouseup",listener:this._mouseEventHandler,scope:this},{eventName:"mousedown",listener:this._mouseEventHandler,scope:this},{eventName:"mouseleave",listener:this._mouseEventHandler,scope:this})}this._seriesMaskLayer.on(r);var t=this._oPinchGestureDetector=new n();t.addGestureAction(this._pinchingResize);t.enable(true);this.addGestureDetector(t);var s=this._oPanGestureDetector=new c(1);s.cancelTouches(false).addGestureAction(this._panMove);s.enable(true);this.addGestureDetector(s);var q=this._oLongPressGestureDetector=new k();q.addGestureAction(this._longPressHandler);q.enable(true);q.minimumPressDuration(500);this.addGestureDetector(q);var u=this._oTapGestureDetector=new e();u.addGestureAction(this._tapHandler);u.enable(true);this.addGestureDetector(u)},_convertXYForMouseEvent:function(t){if(this._seriesLayer==null){d.error("Series Layer should be initialized before any event handler!")}var s=t.targetLocalXY();var q=t.targetLayer();var r=this._seriesLayer.convertPointFromLayer(s,q);return r},_convertXYForTouch:function(t){if(this._seriesLayer==null){b.error("Series Layer should be initialized before any event handler!")}var s=t.localXY();var q=t.targetLayer();var r=this._seriesLayer.convertPointFromLayer(s,q);return r},_mouseEventHandler:function(s){var q=s.type();switch(q){case"mousedown":this._mouseAlreadyDown=true;this._mouseAlreadyMoved=false;break;case"mouseup":this._mouseAlreadyDown=false;if(!this._mouseAlreadyMoved){this._chartModule.onclick(this._convertXYForMouseEvent(s))}this._mouseAlreadyMoved=false;break;case"mousemove":if(this._previousMousePosition){var r=s.targetLocalXY();if(Math.abs(r.x-this._previousMousePosition.x)>this._mouseMoveThreshold||Math.abs(r.y-this._previousMousePosition.y)>this._mouseMoveThreshold){if(this._mouseAlreadyDown){this._chartModule.marqueeOverPoint(s.targetLocalXY())}else{this._chartModule.onhover(this._convertXYForMouseEvent(s))}this._previousMousePosition=undefined;this._mouseAlreadyMoved=true}}else{this._previousMousePosition=s.targetLocalXY()}break;case"mouseleave":this._chartModule.onblur(this._convertXYForMouseEvent(s));this._resetEventStatusVariables();break;default:break}},_touchEventHandler:function(q){var r=q.type();switch(r){case"touchstart":break;case"touchmove":break;case"touchend":if(this.islongPressGesture){this.islongPressGesture=false;this._chartModule.onblur()}break;case"touchcancel":if(this.islongPressGesture){this.islongPressGesture=false;this._chartModule.onblur()}break;default:break}},_pinchingResize:function(q){q.attachedComponent()._chartModule.pinchingResize(q)},_panMove:function(q){q.attachedComponent()._chartModule.panMove(q)},_longPressHandler:function(q){q.attachedComponent()._chartModule.longPressHandler(q)},_tapHandler:function(q){q.attachedComponent()._chartModule.tapHandler(q)},doContentResize:function(r,q){this.callParent("doContentResize",r,q);this._doDraw(q)},applyTheme:function(s){this._chartModule.applyTheme(s);for(var r=0,q=this._xaxes.length;r<q;r++){this._xaxes[r].applyTheme(s)}for(var r=0,q=this._yaxes.length;r<q;r++){this._yaxes[r].applyTheme(s)}this._gridLine.applyTheme(s)},updateProperties:function(q){this._chart_options.properties=q;this._chartModule.updateProperties(q);this._chartModule.backUp();this._chartModule.updateSeriesVisibilty();this._chartModule.updateValueAxisRange();this._chartModule.initAxes();this._initAxesLayer();this._chartModule.bindSeriesWithAxes();this._chartModule.initGridLineProperties();this._initGridLine();this._doDraw(this.size())},updateOptions:function(r){this._chart_options=r;this._metaData=r.metaData;this._dataTree=r.dataTree;if(this._chartModule!=null){this._chartModule.backUp()}this._xaxes=[];this._yaxes=[];for(var s=0,q=this._xaxisLayers.length;s<q;s++){this._xaxisLayers[s].removeFromSuperLayer()}for(var s=0,q=this._yaxisLayers.length;s<q;s++){this._yaxisLayers[s].removeFromSuperLayer()}this._xaxisLayers=[];this._yaxisLayers=[];this._chartModule.updateOptions(this._chart_options);this._chartModule.clearDrawing();this._init(true);this._doDraw(this.size())},statesChangeHandler:function(q){switch(q.name){case"ChangeSeriesVisibility":this._chartModule.backUp();this._chartModule.updateSeriesVisibilty();this._chartModule.updateValueAxisRange();this._chartModule.initAxes();this._initAxesLayer();this._chartModule.bindSeriesWithAxes();this._chartModule.initGridLineProperties();this._initGridLine();this._doDraw(this.size());break;default:break}},getSupportedAppEvents:function(){return this._chartModule.getSupportedAppEvents()},doPrint:function(q){},selectData:function(r,q){this._chartModule.selectData(r,q)},unSelectData:function(r,q){this._chartModule.unSelectData(r,q)},getPlotArea:function(){var r=this.position();var q=this._chartModule.getPlotArea();return{top:q.top+r.y,left:q.left+r.x,bottom:q.bottom+r.y,right:q.right+r.x}}});return j});sap.riv.module({qname:"sap.riv.viz.shared.series.WaterfallRenderer",version:"3.4.0"},[{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.utils.ColorSeriesGenerator",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.ColumnBarRenderer",version:"3.4.0"},{qname:"sap.riv.core.Math",version:"3.4.0"},{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.Animator",version:"3.4.0"}],function Setup(a,e,g,d,f,c){var b=f.derive(g,{_parseOptions:function(h){this._barStyle.isShowGradient=h.bar.isShowGradient;this._barStyle.isShowInnerBorder=h.bar.isShowInnerBorder;this._barStyle.isShowOutBorder=h.bar.isShowOutBorder;this._barStyle.isShowShadow=h.bar.isShowShadow;this._waterfallOptions=h.waterfall},_update:function(){var n=this.getSeriesGroups();if(n.length==0){return}var l=n[0].getSeriesList();if(l.length==0){return}var o=this._waterfallOptions.markerSize;var m=this.calculateBarSize(o*this._scale);this.calculateSeriesPoints(m);for(var k=0,h=l.length;k<h;k++){this._drawSeries(l[k])}var j=true;if(this._enableAllAnimation){if(this._isInitialization){j=!this._enableInitAnimation}}this._doAnimation(j)},calculateSeriesPoints:function(C){var w=this.getSeriesGroups();if(w.length===0){return}var A=w[0].getSeriesList();if(A.length===0){return}var q=this.getVisibleSeriesCount();var r=A[0].getXAxis();var x=r.getMajorTicks();var z=-1;for(var D=0,u=A.length;D<u;D++){var t=A[D];if(t.isVisible()){z++}var h=t.getYAxis();var m=h.getMajorTicks()[0];var s=h.u2p(0);var G=h.getMaxValue();var v=h.getMinValue();var o=d.round(C/8);var k=t.getSeriesItems();var n=0;if(a.isExist(this.verticalAxesOffset)){n=(h._sax_options.index!=1)?0:this.verticalAxesOffset}var l=0;for(var E=0,F=k.length;E<F;E++){var B={};var H=k[E].getData()[0].value;if(H==null||isNaN(H)){H=0}B.x1=x[E]-((q-2*z)*(C+o)-o)/2;if(E==F-1){l=0}B.y1=l+H;if(m<l){B.y2=m}else{B.y2=l}B.y2=B.y2+n;if(H>0){B.y1=h.u2p(d.max(v,d.min(l+H,G)))+n;B.y2=h.u2p(d.max(v,d.min(l,G)))+n}else{B.y1=h.u2p(d.min(G,d.max(l+H,v)))+n;B.y2=h.u2p(d.min(G,d.max(l,v)))+n}B.x2=B.x1+C;k[E].setPosition(B);l=l+H}}},_drawSeries:function(o,m){var l=o.getOptions().fillColor;var k;var h;var j=o.getSeriesItems();for(var n=j.length;n--;){h=j[n].getPosition();var q=j[n].getData()[0].value;if(q==null||isNaN(q)){q=0}if(n==0){l=this._waterfallOptions.startColor}else{if(n==j.length-1){l=this._waterfallOptions.endColor}else{if(q>=0){l=this._waterfallOptions.positiveColor}else{l=this._waterfallOptions.negativeColor}}}k=e.getColorSeriesForBar(l);this._drawSeriesItem(j[n],h,l,k)}},_updateSeries:function(s,u){var l=this.getSeriesGroups();if(l.length){var k=l[0].getSeriesList();if(k.length){var o,q,h,v;for(var n=0,r=k.length;n<r;n++){o=k[n];q=o.getSeriesItems();for(var m=0;m<q.length;m++){var t=q[m].getPosition();if(m==0){h=this._waterfallOptions.startColor}else{if(m==q.length-1){h=this._waterfallOptions.endColor}else{if(q[m].getData()[0].value>=0){h=this._waterfallOptions.positiveColor}else{h=this._waterfallOptions.negativeColor}}}v=e.getColorSeriesForBar(h);if(s===true){this._updateSeriesItemDuringAnimation(q[m],t,h,u[0],v)}else{this._updateSeriesItem(q[m],t,h,1,this._drawBorderTopLine(n,r),v)}}}}}}});return b});sap.riv.module({qname:"sap.riv.viz.shared.series.PieRenderer",version:"3.4.0"},[{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.ColorUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.BaseRenderer",version:"3.4.0"},{qname:"sap.riv.core.Math",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.Series",version:"3.4.0"},{qname:"sap.riv.core.utils.TextRuler",version:"3.4.0"},{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.Animator",version:"3.4.0"},{qname:"sap.riv.vizkit.ThemeManager",version:"3.4.0"},{qname:"sap.riv.viz.shared.utils.NumericFormatUtils",version:"3.4.0"},{qname:"sap.riv.graphics.shape.Paths",version:"3.4.0"},{qname:"sap.riv.graphics.shape.Circle",version:"3.4.0"},{qname:"sap.riv.graphics.shape.TextLine",version:"3.4.0"},{qname:"sap.riv.graphics.shape.Sector",version:"3.4.0"}],function Setup(b,q,j,e,m,k,g,a,l,f,o,d,n,h){var c="The quick brown fox jumps over the lazy dog";var r=g.derive(j,{aestheticsConstants:{plotPadding:{top:6,right:0,bottom:6,left:0}},constructor:function(t,s,u){this._fontFamily="Arial";this._donutType="donut";this._pieType="pie";this._donutMeasureFont="bold 14px Arial";this._donutMeasureColor="#000";this._donutBackground="#FFF";this._innerShadowBlur=20;this._multiMode=u;this._subChartTitleVisible=false;this._centralSeriesNameVisible=false;this._truncReplacement="...";this._isDrawn=false;this._shapes={pieSectors:[],centerCircle:null,measureLabel:null,sectorInnerShadow:[],sectorOuterShadow:[],cover:null,subChartTitle:null};this._isShowInnerShadow=false;this._isShowOuterShadow=false;this._tooltip={shape:null,dimensionLabel:null,valueLabel:null,percentLabel:null};this._tooltipPercents=[];this._tooltipLabels=[];this._tooltipValues=[];this._isTooltipPercentOnly=false;this._isTooltipShown=true;this._meta={center:null,radiusInner:null,radiusOutter:null};this._values=[];this._alertObjs=[];this._allSelectable=true;this._allDeSelectable=true;this._defaultSelectedSectorIndexes=[];this._interactionStatus={mouseDown:false,mouseOnPieIndex:null,selected:[]};this._parseOptions(s);this._initialize(s)},_parseOptions:function(s){this._options=s.properties;this._selectionMode=this._options.selectionMode;this._allSelectable=this._options.allSelectable;this._allDeSelectable=this._options.allDeSelectable;this._defaultSelectedSectorIndexes=this._options.selectedDataIndexes;this._isShowInnerShadow=this._options.isShowPieInnerShadow;this._isShowOuterShadow=this._options.isShowPieOuterShadow;this._subChartTitleVisible=this._multiMode&&this._options.subChartTitle.visible;this._centralSeriesNameVisible=(this._options.pieType===this._donutType)&&(!this._multiMode);this._colorList=this._options._additional.colorList;this._type=this._options.pieType;this._toolTipTextFont=this._options.tooltip.text.font;this._toolTipTextFontColor=this._options.tooltip.text.color;this._toolTipTextFormatString=this._options._additional.tooltipeTextNumberFormat;this._toolTipMainValueFont=this._options.tooltip.mainValue.font;this._toolTipMainValueFontColor=this._options.tooltip.mainValue.color;this._toolTipMainValueFormatString=this._options._additional.tooltipeMainValueNumberFormat;this._toolTipSubValueFont=this._options.tooltip.subValue.font;this._toolTipSubValueFontColor=this._options.tooltip.subValue.color;this._toolTipSubValueFormatString=this._options._additional.tooltipeSubValueNumberFormat;this._tooltipEnable=this._options.tooltip.enable;this._tooltipEnableSmartLayout=this._options.tooltip.enableSmartLayout},setAlertObj:function(s){this._alertObjs=s},_getSeries:function(){var u=this.getSeriesGroups();if(u.length==0){return}var t=u[0].getSeriesList();if(t.length==0){return}var s=t[0];return s},draw:function(){this._reset();var s=this._getSeries();if(s){this._initSeries(s);this._isDrawn=true;this._update()}},redraw:function(){this._reCalculateSize();this._update();this.refresh()},_update:function(){var s=this._getSeries();if(s){this._drawSeries(s)}},_reCalculateSize:function(){delete this._meta;this._meta={center:null,radiusInner:null,radiusOutter:null};var A=this.getLayer();var w=A.size();var v=0;if(this._subChartTitleVisible){var z=this._getSeries();if(z){var x=z.getName();var u=this._options.subChartTitle.font;v=k.measureHeight(u,x)}}var t=w.height-v;this._meta.center={x:w.width/2,y:t/2};var s=(w.width<t)?w.width:t;this._meta.radiusInner=s/((1.5+1)*2);this._meta.radiusOutter=this._meta.radiusInner*2.3-this.aestheticsConstants.plotPadding.top},_initSeries:function(u){var C=u.getData();this._reCalculateSize(u);var x=this.getLayer();var A=0;var s=0,w=false;for(var v=0;v<C.length;v++){var t={vo:C[v]};this._values.push(t);if(!isNaN(C[v].value)){w=true;if(C[v].value==0){s++}else{A+=e.abs(C[v].value)}}}if(!w){return}var B=0,z=0;for(var v=0;v<C.length;v++){if(isNaN(this._values[v].vo.value)){continue}else{if(A===0){this._values[v].percent=1/s}else{this._values[v].percent=e.abs(this._values[v].vo.value)/A}}this._values[v].color=this._colorList[this._values[v].vo.dimensionItemIndex];this._shapes.sectorOuterShadow.push(x.addShape(new o()));this._shapes.pieSectors.push(x.addShape(new h()));this._shapes.sectorInnerShadow.push(x.addShape(new h()));this._tooltipPercents.push(this._values[v].percent);this._tooltipLabels.push(this._values[v].vo.dimensionItem);this._tooltipValues.push(this._values[v].vo.value)}this._shapes.centerCircle=x.addShape(new d());this._shapes.measureLabel=x.addShape(new n());if(this._type==this._pieType){this._shapes.centerCircle.visible(false)}this._shapes.subChartTitle=x.addShape(new n()).visible(this._subChartTitleVisible);this._tooltip.shape=x.addShape(new o());this._tooltip.dimensionLabel=x.addShape(new n());this._tooltip.valueLabel=x.addShape(new n());this._tooltip.percentLabel=x.addShape(new n())},_drawSeries:function(B){var z=this._meta.radiusOutter;if(z<=0||this._shapes.pieSectors.length==0){return}for(var K=0,A=0,x=0;K<this._shapes.pieSectors.length;K++){x=A+this._values[K].percent*e.PI*2;this._shapes.pieSectors[K].center(this._meta.center).radius(this._meta.radiusOutter).clockwise(true).startAngle(A).endAngle(x);if(b.isExist(this._alertObjs[K])){this._shapes.pieSectors[K].fillingColor(this._alertObjs[K].color)}else{this._shapes.pieSectors[K].fillingColor(this._values[K].color)}if(this._values[K].percent!=1){this._shapes.pieSectors[K].borderWidth(1).borderColor("#fff")}this._shapes.sectorOuterShadow[K].reset();this._shapes.sectorOuterShadow[K].visible(this._isShowOuterShadow).arc(this._meta.center,this._meta.radiusOutter,A,x,true).borderWidth(2).borderColor("#fff").shadow({offsetX:1,offsetY:1,blur:8,color:"#000"});var D=this._innerShadowBlur;this._shapes.sectorInnerShadow[K].visible(this._isShowInnerShadow).center(this._meta.center).radius(this._meta.radiusOutter).clockwise(true).startAngle(A).endAngle(x).fillingColor({t:"rg",s:{c:this._meta.center,r:z},e:{c:this._meta.center,r:(z-D<0)?0:z-D},st:[{o:0,v:"#000"},{o:1,v:"#fff"}]}).compositionMode({alpha:0.2});A=x}if(this._subChartTitleVisible){var Q=B.getName();var E=this._options.subChartTitle.font;var J=this._options.subChartTitle.color;var P=this.getLayer();var s=P.size();var u=k.measureHeight(E,Q);var I=k.measureWidth(E,Q);this._shapes.subChartTitle.center([this._meta.center.x,s.height-u/2]).width(I).text(Q).font(E).textColor(J)}if(this._type==this._donutType){var L=B.getName();this._shapes.centerCircle.center(this._meta.center).radius(this._meta.radiusInner).fillingColor(this._donutBackground);this._shapes.measureLabel.width(k.measureWidth(this._donutMeasureFont,L)).text(L).font(this._donutMeasureFont).center([this._meta.center.x,this._meta.center.y]).textColor(this._donutMeasureColor);if(this._shapes.pieSectors.length<1){this._shapes.centerCircle.visible(false)}}this._shapes.measureLabel.visible(this._centralSeriesNameVisible);this._hideTooltip();this._defaultSelectedSectorIndexes=[];var G=/(\d+)(px|em|pt|%)/i;var N=14,F=14,t=14;var C="bold ",M=" Arial";var H,O,w;if(b.isExist(this._toolTipMainValueFont)){N=this._fontSizeConvertor(G,this._toolTipMainValueFont);var v=this._toolTipMainValueFont.split(G.exec(this._toolTipMainValueFont)[0]);C=v[0];M=v[1];if(this._tooltipEnableSmartLayout&&N>10){N=this._getTooltipValueFontSize(C,N,M)}}else{N=this._getTooltipValueFontSize(C,N,M)}O=C+N+"px"+M;if(b.isExist(this._toolTipTextFont)){F=this._fontSizeConvertor(G,this._toolTipTextFont);var v=this._toolTipTextFont.split(G.exec(this._toolTipTextFont)[0]);C=v[0];M=v[1];if(this._tooltipEnableSmartLayout&&F>10){F=this._getTooltipLabelFontSize(C,F,M)}}else{C="normal ";F=this._getTooltipLabelFontSize(C,F,M)}H=C+F+"px"+M;if(b.isExist(this._toolTipSubValueFont)){t=this._fontSizeConvertor(G,this._toolTipSubValueFont);var v=this._toolTipSubValueFont.split(G.exec(this._toolTipSubValueFont)[0]);C=v[0];M=v[1];if(this._tooltipEnableSmartLayout&&t>10){t=this._getTooltipPercentFontSize(C,t,M)}}else{C="normal ";t=this._getTooltipPercentFontSize(C,t,M)}w=C+t+"px"+M;this._applyTooltipFontStyleSetting(H,O,w);this._refresh()},_fontSizeConvertor:function(x,u){var t=x.exec(u);var v=10;var w=0;if(t){switch(t[2]){case"em":w=parseFloat(t[1])*v;break;case"%":w=parseFloat(t[1])*v/100;break;case"pt":w=parseFloat(t[1])*1.33;break;case"px":w=parseInt(t[1]);break}}return e.ceil(w)},_getTooltipValueFontSize:function(z,C,x){var B=[];var s=this._getLongestNumberOfLetters(this._toolTipMainValueFormatString,this._tooltipValues,B);var u,A=true;for(var w=0;w<B.length;w++){if(B[w].toString().length===s){for(;C>10;C--){u=z+C+"px"+x;var v=k.measureWidth(u,B[w]);var t=k.measureHeight(u,B[w]);if(t<=e.sqrt(3)*this._meta.radiusInner/3-6&&v<=this._meta.radiusInner*2){A=false;break}}}}this._isTooltipPercentOnly=A;return C},_getTooltipPercentFontSize:function(x,C,w){var A=[];var D=this._getLongestNumberOfLetters(this._toolTipSubValueFormatString,this._tooltipPercents,A);var t,z=true;var B=[];for(var v=0;v<A.length;v++){if(A[v].toString().length===D){for(;C>10;C--){t=x+C+"px"+w;var u=k.measureWidth(t,A[v]);var s=k.measureHeight(t,A[v]);if(s<=this._meta.radiusInner&&u<=e.sqrt(3)*this._meta.radiusInner){B.push(C)}if(s<=e.sqrt(3)*this._meta.radiusInner/3&&u<=this._meta.radiusInner){z=false;break}}}}if(!this._isTooltipPercentOnly){this._isTooltipPercentOnly=z}if(B.length==0){this._isTooltipShown=false}return this._isTooltipPercentOnly&&b.isExist(B[0])?B[0]:C},_getTooltipLabelFontSize:function(w,A,v){var z=[];var B=this._getLongestNumberOfLetters(this._toolTipTextFormatString,this._tooltipLabels,z);var t,x=true;for(var u=0;u<z.length;u++){if(z[u].toString().length===B){for(;A>10;A--){t=w+A+"px"+v;var s=k.measureHeight(t,z[u]);if(s<=e.sqrt(3)*this._meta.radiusInner/3){x=false;break}}}}if(!this._isTooltipPercentOnly){this._isTooltipPercentOnly=x}return A},_getLongestNumberOfLetters:function(w,s,u){var v=0;for(var t=0;t<s.length;t++){u.push(f.formatToText(s[t],w[t],true));if(u[t].toString().length>=v){v=u[t].toString().length}}return v},_applyTooltipFontStyleSetting:function(u,t,s){this._toolTipTextFont=b.isExist(u)?u:this._toolTipTextFont;this._toolTipMainValueFont=b.isExist(t)?t:this._toolTipMainValueFont;this._toolTipSubValueFont=b.isExist(s)?s:this._toolTipSubValueFont},applyTheme:function(K){var J=l.getThemeSettings(K);var x=J.global;var B=J.pie;var M=B.donut;var D=g.extend(true,{},x,M.measureLabel);this._donutMeasureFont=D["font-weight"]+" "+D["font-size"]+" "+D["font-family"];this._donutMeasureColor=D.color;this._donutBackground=b.isExist(M.background)?M.background:J.background;var A=this._isShowOuterShadow=B.isShowOuterShadow;var u=this._isShowInnerShadow=B.isShowInnerShadow;var L=B.tooltip;var t=g.extend(true,{},x,L.dimensionLabel);this._toolTipTextFont=t["font-weight"]+" "+t["font-size"]+" "+t["font-family"];this._toolTipTextFontColor=t.color;var H=g.extend(true,{},x,L.valueLabel);this._toolTipMainValueFont=H["font-weight"]+" "+H["font-size"]+" "+H["font-family"];this._toolTipMainValueFontColor=H.color;var C=g.extend(true,{},x,L.percentLabel);this._toolTipSubValueFont=C["font-weight"]+" "+C["font-size"]+" "+C["font-family"];this._toolTipSubValueFontColor=C.color;if(this._isDrawn){this._shapes.centerCircle.fillingColor(this._donutBackground);if(this._type==this._donutType){this._shapes.measureLabel.width(k.measureWidth(this._donutMeasureFont,this._getSeries().getName())).font(this._donutMeasureFont).textColor(this._donutMeasureColor)}var z=this._shapes.sectorOuterShadow;var E=this._shapes.sectorInnerShadow;var w=this._shapes.pieSectors.length;for(var I=0;I<w;I++){z[I].visible(A);E[I].visible(u)}var N=this._interactionStatus.selected;for(var I=0,v=N.length;I<v;I++){z[N[I]].visible(false)}if(this._interactionStatus.mouseOnPieIndex!==null){var F=this._mainValueFT.display(this._values[this._interactionStatus.mouseOnPieIndex].vo.value);this._tooltip.valueLabel.font(this._toolTipMainValueFont).textColor(this._toolTipMainValueFontColor).width(k.measureWidth(this._toolTipMainValueFont,F));var G=this._textValueFT.display(this._values[this._interactionStatus.mouseOnPieIndex].vo.dimensionItem);this._tooltip.dimensionLabel.font(this._toolTipTextFont).textColor(this._toolTipTextFontColor).width(k.measureWidth(this._toolTipTextFont,G));var s=this._subValueFT.display(this._values[this._interactionStatus.mouseOnPieIndex].percent);this._tooltip.percentLabel.font(this._toolTipSubValueFont).textColor(this._toolTipSubValueFontColor).width(k.measureWidth(this._toolTipSubValueFont,s))}}this.getTooltipFontStyle();this._refresh()},_reset:function(){delete this._values;this._values=[];this._resetShapes()},_resetShapes:function(){var v=this.getLayer();var t=this._shapes.pieSectors;var w=this._shapes.sectorInnerShadow;var x=this._shapes.sectorOuterShadow;for(var u=0,s=t.length;u<s;u++){v.removeShape(t[u]);v.removeShape(x[u]);v.removeShape(w[u])}v.removeShape(this._shapes.centerCircle);v.removeShape(this._shapes.measureLabel);v.removeShape(this._shapes.subChartTitle);v.removeShape(this._tooltip.shape);v.removeShape(this._tooltip.dimensionLabel);v.removeShape(this._tooltip.valueLabel);v.removeShape(this._tooltip.percentLabel);delete this._shapes;this._shapes={pieSectors:[],centerCircle:null,measureLabel:null,sectorInnerShadow:[],sectorOuterShadow:[],cover:null,subChartTitle:null};delete this._tooltip;this._tooltip={shape:null,dimensionLabel:null,valueLabel:null,percentLabel:null}},_refresh:function(){this.getLayer().setNeedsDisplay()},_mouseMoveOnPie:function(s){this._moveOnPie(s.currentLocalXY())},_mouseDownOnPie:function(s){this._clickOnPie(s.currentLocalXY())},_touchStartOnPie:function(s){var t=s.targetTouches().item(0);this._moveOnPie(t.localXY())},_touchEndOnPie:function(s){if(s.changedTouches().length()!=1){return}var t=s.changedTouches().item(0);this._clickOnPie(t.localXY())},_touchMoveOnPie:function(s){if(s.targetTouches().length()!=1){return}var t=s.targetTouches().item(0);this._moveOnPie(t.localXY())},_getPieIndexByPos:function(u){var t=null;if(this._type==this._donutType&&this._shapes.centerCircle.doPointInTest(u)){return t}for(var s=0;s<this._shapes.pieSectors.length;s++){if(this._shapes.pieSectors[s].endAngle()===this._shapes.pieSectors[s].startAngle()){continue}if(this._shapes.pieSectors[s].doPointInTest(u)){t=s;break}}return t},_moveOnPie:function(v,s){var u=this._getPieIndexByPos(v);var t=this._interactionStatus.mouseOnPieIndex;this._interactionStatus.mouseOnPieIndex=u;if(this._interactionStatus.mouseOnPieIndex==null){if(this._isTooltipShown){this._hideTooltip()}return}if(t!=this._interactionStatus.mouseOnPieIndex||s){if(this._isTooltipShown){this._hideTooltip();this._showTooltip()}}return{dimensionAxisIndex:0,dimensionIndex:0,dimensionItemIndex:this._values[u].vo.dimensionItemIndex,measureIndex:this._values[u].vo.measureIndex,dimensionLabel:this._values[u].vo.dimensionItem,measureValue:this._values[u].vo.value}},_checkDualSelectedIndex:function(t,s){if(t.length===0){return s}else{for(var u=0;u<t.length;u++){if(t[u]===s){return}}return s}},_clickOnPie:function(A){var t,u;if(!this._allSelectable){return}if(!b.isExist(A.x)){t=A;u=true}else{t=this._getPieIndexByPos(A)}var w=null;for(var v=0;v<this._interactionStatus.selected.length;v++){if(this._interactionStatus.selected[v]===t){w=v;break}}var s=[];if(t!=null){if(u||w==null){if((this._selectionMode==="single")&&(b.isDefined(this._interactionStatus.selected[0]))){s.push(this._interactionStatus.selected[0]);this._deselectPies(this._interactionStatus.selected);this._interactionStatus.selected=[];w=null}this._selectPie(t);var t=this._checkDualSelectedIndex(this._interactionStatus.selected,t);if(b.isDefined(t)){this._interactionStatus.selected.push(t)}}else{if(this._allDeSelectable){s.push(t);this._interactionStatus.selected.splice(w,1);this._deselectPies([t])}}}else{if(this._allDeSelectable){s=this._interactionStatus.selected;this._deselectPies(this._interactionStatus.selected);this._interactionStatus.selected=[]}}var z=[];z=this._parseIndexToDataContext(this._interactionStatus.selected);var x=[];x=this._parseIndexToDataContext(s);return{SelectDataContext:z,unSelectDataContext:x}},_parseIndexToDataContext:function(x){var v=[];for(var u=0,s=x.length;u<s;u++){var t=x[u];var w={measureIndex:this._values[t].vo.measureIndex,dimensionLabel:this._values[t].vo.dimensionItem,measureValue:this._values[t].vo.value,dimensionPath:this._values[t].vo.dimensionPath,dimensionItemIndex:this._values[t].vo.dimensionItemIndex};v.push(w)}return v},_showTooltip:function(){if(!this._tooltipEnable){return}this._shapes.measureLabel.visible(false);var t=this._shapes.pieSectors[this._interactionStatus.mouseOnPieIndex];var u=(t.endAngle()+t.startAngle())/2;var v=this._meta.radiusInner*1.2;var A;var C;var x=this._values[this._interactionStatus.mouseOnPieIndex].vo.dimensionItemIndex;this._tooltip.shape.reset();this._tooltip.shape.visible(true).arc(this._meta.center,this._meta.radiusInner,u-0.15,u+0.15,false).lineTo(this._meta.center.x+v*e.cos(u),this._meta.center.y+v*e.sin(u)).shadow({offsetX:0,offsetY:0,blur:5,color:"#000000"});this._tooltip.shape.fillingColor("#FFFFFF");if(!this._isTooltipPercentOnly){A=f.formatToTextWithColor(this._values[this._interactionStatus.mouseOnPieIndex].vo.value,f.getFormatString(this._toolTipMainValueFormatString,x),true);var B=A.text;C=A.color?A.color:this._toolTipMainValueFontColor;var s=k.measureText(this._toolTipMainValueFont,B).height;this._tooltip.valueLabel.visible(true).width(k.measureWidth(this._toolTipMainValueFont,B)).text(B).font(this._toolTipMainValueFont).textColor(C).center([this._meta.center.x,this._meta.center.y]);var z=this._values[this._interactionStatus.mouseOnPieIndex].vo.dimensionItem;z=this._getDimensionItemText(z);A=f.formatToTextWithColor(z,f.getFormatString(this._toolTipTextFormatString,x),true);z=A.text;C=A.color?A.color:this._toolTipTextFontColor;this._tooltip.dimensionLabel.visible(true).width(k.measureWidth(this._toolTipTextFont,z)).text(z).font(this._toolTipTextFont).textColor(C).bottomCenter([this._tooltip.valueLabel.topCenter().x,this._tooltip.valueLabel.topCenter().y-s/4]);var w=f.toPercentage(this._values[this._interactionStatus.mouseOnPieIndex].percent,2);this._tooltip.percentLabel.visible(true).width(k.measureWidth(this._toolTipSubValueFont,w)).text(w).font(this._toolTipSubValueFont).textColor(this._toolTipSubValueFontColor).topCenter([this._tooltip.valueLabel.bottomCenter().x,this._tooltip.valueLabel.bottomCenter().y+s/4])}else{var w=f.toPercentage(this._values[this._interactionStatus.mouseOnPieIndex].percent,2);this._tooltip.percentLabel.visible(true).width(k.measureWidth(this._toolTipSubValueFont,w)).text(w).font(this._toolTipSubValueFont).textColor(this._toolTipSubValueFontColor).center([this._meta.center.x,this._meta.center.y])}this._refresh()},_getDimensionItemText:function(s){if(s==null){return""}else{if(b.isPlainObject(s)){if(b.isExist(s.value)){return s.value}else{return""}}else{return s}}},_hideTooltip:function(){if(!this._tooltipEnable||!this._tooltip||this._tooltip.shape==null){return}this._tooltip.shape.visible(false);this._tooltip.dimensionLabel.visible(false);this._tooltip.valueLabel.visible(false);this._tooltip.percentLabel.visible(false);this._shapes.measureLabel.visible(this._centralSeriesNameVisible);this._refresh()},_selectPie:function(v,x){if(this._shapes.pieSectors.length==1){return}if(this._meta.radiusOutter<=0){return}var s=this._shapes.pieSectors[v];var u=this._shapes.sectorInnerShadow[v];var C=this._innerShadowBlur;var w=this._meta.radiusOutter;var D=this;if(this._isShowOuterShadow){D._shapes.sectorOuterShadow[v].visible(false)}D._refresh();var t=(s.endAngle()+s.startAngle())/2;var B;var A;var z;if(x&&D.currentDuration){B=D.currentX;A=D.currentY;z=(200-D.currentDuration)}else{B=D._meta.center.x;A=D._meta.center.y;z=200}if(this._animateID!=null){a.cancelAnimation(this._animateID)}this._animateID=a.animate({values:[{type:"POINT",from:[B,A],to:[D._meta.center.x+10*e.cos(t),D._meta.center.y+10*e.sin(t)]}],duration:z,onStep:function(E){D.currentX=E[0][0];D.currentY=E[0][1];D.currentDuration=200*((D.currentX-D._meta.center.x)/(10*e.cos(t)));var F={x:D.currentX,y:D.currentY};s.center(F);u.center(F).fillingColor({t:"rg",s:{c:F,r:w},e:{c:F,r:w-C},st:[{o:0,v:"#000"},{o:1,v:"#fff"}]});D._refresh()},onComplete:function(){D._animateID=null;D.currentX=D._meta.center.x;D.currentY=D._meta.center.y;D.currentDuration=0}})},_deselectPies:function(u){if(this._shapes.pieSectors.length==1){return}var x=this._innerShadowBlur;var s=this._meta.radiusOutter;var t=this;var w=[];for(var v=0;v<u.length;v++){var z=this._shapes.pieSectors[u[v]];w.push({type:"POINT",from:[z.center().x,z.center().y],to:[t._meta.center.x,t._meta.center.y]})}a.animate({values:w,duration:200,onStep:function(A){var D,C,E;for(var B=0;B<u.length;B++){E={x:A[B][0],y:A[B][1]};C=t._shapes.sectorInnerShadow[u[B]];C.center(E).fillingColor({t:"rg",s:{c:E,r:s},e:{c:E,r:s-x},st:[{o:0,v:"#000"},{o:1,v:"#fff"}]});D=t._shapes.pieSectors[u[B]];D.center(E)}t._refresh()},onComplete:function(){var B=t._isShowOuterShadow;for(var A=0;A<u.length;A++){if(B){t._shapes.sectorOuterShadow[u[A]].visible(true)}}}})},updateProperties:function(v){this._options=v;this._tooltipEnable=v.tooltip.enable;this._tooltipEnableSmartLayout=v.tooltip.enableSmartLayout;this._selectionMode=v.selectionMode;if(this._selectionMode=="single"&&this._interactionStatus.selected.length>1){var t=this._interactionStatus.selected.slice(0,this._interactionStatus.selected.length-1);this._interactionStatus.selected.splice(0,this._interactionStatus.selected.length-1);this._deselectPies(t)}this._colorList=v._additional.colorList;for(var u=0,s=this._shapes.pieSectors.length;u<s;u++){this._values[u].color=this._colorList[this._values[u].vo.dimensionItemIndex];this._shapes.pieSectors[u].fillingColor(this._values[u].color)}this._type=v.pieType;this._centralSeriesNameVisible=(this._type===this._donutType)&&(!this._multiMode);if(this._shapes.centerCircle){if(this._type==this._pieType){this._shapes.centerCircle.visible(false)}else{this._shapes.centerCircle.visible(true)}}this._isShowInnerShadow=v.isShowPieInnerShadow;this._isShowOuterShadow=v.isShowPieOuterShadow;this._toolTipTextFont=v.tooltip.text.font;this._toolTipTextFontColor=v.tooltip.text.color;this._toolTipTextFormatString=v.tooltip.text.numberFormat;this._toolTipTextFormatString=v._additional.tooltipeTextNumberFormat;this._toolTipMainValueFont=v.tooltip.mainValue.font;this._toolTipMainValueFontColor=v.tooltip.mainValue.color;this._toolTipMainValueFormatString=v.tooltip.mainValue.numberFormat;this._toolTipMainValueFormatString=v._additional.tooltipeMainValueNumberFormat;this._toolTipSubValueFont=v.tooltip.subValue.font;this._toolTipSubValueFontColor=v.tooltip.subValue.color;this._toolTipSubValueFormatString=v.tooltip.subValue.numberFormat;this._toolTipSubValueFormatString=v._additional.tooltipeSubValueNumberFormat;this._refresh()},updateOptions:function(s){this._resetShapes();this._shapes={pieSectors:[],centerCircle:null,measureLabel:null,sectorInnerShadow:[],sectorOuterShadow:[],cover:null};this._isShowInnerShadow=false;this._isShowOuterShadow=false;this._interactionStatus={mouseDown:false,mouseOnPieIndex:null,selected:[]};this._tooltip={shape:null,dimensionLabel:null,valueLabel:null,percentLabel:null};this._parseOptions(s)},highlightOnPoint:function(s){var t=this._clickOnPie(s);return t},hoverOnPoint:function(s,u){var t=this._moveOnPie(s,u);return t},selectData:function(v){var B;var x=this._values;if(!this._multiMode){for(var u=0;u<x.length;u++){if(x[u].vo.measureIndex!==v.measureIndex){continue}var A=x[u].vo.dimensionPath[x[u].vo.dimensionPath.length-1];var w=v.dimensionPath.length;if(A.dimensionItemIndex===v.dimensionPath[w-1].dimensionItemIndex){if(A.analysisAxisIndex===v.dimensionPath[w-1].analysisAxisIndex){if(A.dimensionIndex===v.dimensionPath[w-1].dimensionIndex){B=u;return this._clickOnPie(B)}}}}}else{for(var u=0;u<x.length;u++){var s=true;if(x[u].vo.dimensionPath.length===v.dimensionPath.length){for(var t=0,C=x[u].vo.dimensionPath.length;t<C;t++){var A=x[u].vo.dimensionPath[t];var z=v.dimensionPath[t];if(!(b.isDefined(z)&&A.analysisAxisIndex===z.analysisAxisIndex&&A.dimensionIndex===z.dimensionIndex&&A.dimensionItemIndex===z.dimensionItemIndex)){s=false;break}}}else{s=false}if(s){B=u;break}}if(!isNaN(B)&&b.isDefined(B)){return this._clickOnPie(B)}}},unSelectData:function(z){var D=this._values;var C=undefined,B;for(var v=0,A=D.length;v<A;v++){B=D[v];if(B.vo.measureIndex===z.measureIndex){if(B.vo.dimensionPath.length===z.dimensionPath.length){for(var u=0,E=B.vo.dimensionPath.length;u<E;u++){var x=B.vo.dimensionPath[u];var w=z.dimensionPath[u];if(x.analysisAxisIndex===w.analysisAxisIndex&&x.dimensionIndex===w.dimensionIndex&&x.dimensionItemIndex===w.dimensionItemIndex){C=v;break}}}}if(b.isDefined(C)){break}}var s=undefined,t=undefined;if(b.isDefined(C)){for(var v=0;v<this._interactionStatus.selected.length;v++){if(this._interactionStatus.selected[v]===C){t=v;break}}if(b.isDefined(t)){this._interactionStatus.selected.splice(t,1);this._deselectPies([C])}s={measureIndex:this._values[C].vo.measureIndex,dimensionLabel:this._values[C].vo.dimensionItem,measureValue:this._values[C].vo.value,dimensionPath:this._values[C].vo.dimensionPath,dimensionItemIndex:this._values[C].vo.dimensionItemIndex}}return s}});return r});sap.riv.module({qname:"sap.riv.viz.AbstractVisualization",version:"3.4.0"},[{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"}],function Setup(a){var d=0;var b=function(){return(d++).toString()};var c=function(e,f,g){this._viz=null;this._id=b()};c.prototype={id:function(){return this._id},size:function(e){if(e){if(this._viz){this._viz.size(e);return this}}else{if(this._viz){return this._viz.size()}}},setDataset:function(e){if(this._viz){this._viz.setDataset(e);return this}},applyTheme:function(e){if(this._viz){this._viz.applyTheme(e);return this}},properties:function(e){if(e){if(this._viz){this._viz.properties(e);return this}}else{if(this._viz){return this._viz.properties(e)}}},updateProperties:function(e){if(this._viz){this._viz.properties(e);return this}},addListener:function(e,f){if(this._viz){this._viz.addListener(e,f);return this}},removeListener:function(e,f){if(this._viz){this._viz.removeListener(e,f);return this}},getSupportedEvents:function(){if(this._viz){return this._viz.getSupportedEvent()}},selectData:function(f,j){if(this._viz){var k=null;if(!a.isArray(f)){k=[f]}else{k=f}for(var h=0,e=k.length;h<e;h++){var g=k[h];if(a.isExist(g.dimensionItemIndex)&&!a.isExist(g.dimensionPath)){g.dimensionPath=[{analysisAxisIndex:0,dimensionIndex:0,dimensionItemIndex:g.dimensionItemIndex}]}}this._viz.invokePublicMethod("selectData",[k,j]);return this}},unSelectData:function(f,j){if(this._viz){var k=null;if(!a.isArray(f)){k=[f]}else{k=f}for(var h=0,e=k.length;h<e;h++){var g=k[h];if(a.isExist(g.dimensionItemIndex)&&!a.isExist(g.dimensionPath)){g.dimensionPath=[{analysisAxisIndex:0,dimensionIndex:0,dimensionItemIndex:g.dimensionItemIndex}]}}this._viz.invokePublicMethod("unSelectData",[k,j]);return this}},getVizApplication:function(){return this._viz}};return c});sap.riv.module({qname:"sap.riv.viz.shared.axis.LogarithmicAxisRenderer",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.Math",version:"3.4.0"},{qname:"sap.riv.core.utils.TextRuler",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.axis.LinearAxisRenderer",version:"3.4.0"},{qname:"sap.riv.viz.shared.axis.FoucsCalculator",version:"3.4.0"},{qname:"sap.riv.viz.shared.axis.PositionCalculator",version:"3.4.0"}],function Setup(h,e,d,c,f,b,g){var a=h.derive(f,{constructor:function(j){this._RenardSeriesList={1:[1],2:[1,5],3:[1,2,5],5:[1,1.5,2.5,4,6],10:[1,1.2,1.5,2,2.5,3,4,5,6,8],20:[1,1.1,1.2,1.4,1.5,1.8,2,2.2,2.5,2.8,3,3.5,4,4.5,5,5.5,6,7,8,9],40:[1,1.05,1.1,1.2,1.25,1.3,1.4,1.5,1.6,1.7,1.8,1.9,2,2.1,2.2,2.4,2.5,2.6,2.8,3,3.2,3.4,3.6,3.8,4,4.2,4.5,4.8,5,5.3,5.6,6,6.3,6.7,7.1,7.5,8,8.5,9,9.5],RSeries:[1,2,3,5,10,20,40]};this._realMaxData=j.maxValue},_createLabelsAndPosition:function(){this._labels.itemsValue=[];this._labels.itemsPosition=[];var j=this._calculateLogarithmicLablesAndPosition();this._labels.itemsValue=j.labels;this._labels.itemsPosition=j.labelPositions},_calculateLogarithmicLablesAndPosition:function(){var k=[];var o=[];var v=function(j){return e.ceil(e.log(j)/e.log(10))};var u=function(j){return e.floor(e.log(j)/e.log(10))};if(this._minValue===0){this._minValue=1e-7}var q=this._calculateBestRenardNumber();var w=this._calculatePositionMultiplier(false);var r=v(this._maxValue);var l=u(this._minValue);for(var n=l;n<=r;n++){for(var m=0;m<q.length;m++){var t=new this.Label();t.visible(true);currentData=e.pow(10,n)*q[m];if(currentData>this._maxValue){break}position=this._calculatePositionFromValue(currentData,w);k.push(position||0);var s=c.isExist(this._valueAxisFT)?this._valueAxisFT.display(parseFloat(currentData.toFixed(8))):parseFloat(currentData.toFixed(8));t.value(s);o.push(t)}}return{labels:o,labelPositions:k}},_calculateBestRenardNumber:function(){var z=this._calculatePositionMultiplier(false);var x=function(A){return e.ceil(parseFloat((e.log(A)/e.log(10)).toFixed(8)))};var v=function(A){return e.floor(parseFloat((e.log(A)/e.log(10)).toFixed(8)))};var n=this._minValue;var u=this._maxValue;var l=v(n);var k=v(u);var r=x(u);var s=Number.POSITIVE_INFINITY,m;var w=this._distance/(r-l);for(var q=l;q<=r;q++){if(e.pow(10,q)<u){m=this._calculateRenardSeriesForInterval(w,e.pow(10,q),e.pow(10,q+1),z);if(m<s){s=m}}}var t=this._RenardSeriesList[s],o=this._maxValue;if(this._maxValue===1){o=this._maxValue}else{if(v(this._realMaxData)===x(this._realMaxData)){o=this._realMaxData}else{for(var q=0,j=v(this._realMaxData);q<t.length;q++){if(t[q]*e.pow(10,j)>this._realMaxData){o=t[q]*e.pow(10,j);break}}}}this._maxValue=o;this._positionMultiplier=null;return t},_calculateRenardSeriesForInterval:function(G,r,q,t){var j=this._RenardSeriesList.RSeries;var F=0;if(this._position=="hb"||this._position==="ht"){var k=this._calculatePositionFromValue(q,t),q=c.isExist(this._valueAxisFT)?this._valueAxisFT.display(q):q,x=d.measureWidth(this._labels.font,q.toString()),n=this._calculatePositionFromValue(r,t),r=c.isExist(this._valueAxisFT)?this._valueAxisFT.display(r):r,H=d.measureWidth(this._labels.font,r.toString());for(var C=j.length-1;C>=0;C--){var B=this._RenardSeriesList[j[C]];var m=B[B.length-1]*r,u=this._calculatePositionFromValue(m,t),m=c.isExist(this._valueAxisFT)?this._valueAxisFT.display(m):m,D=d.measureWidth(this._labels.font,m.toString());var E=true;if(B.length>1){var w=B[1]*r,s=this._calculatePositionFromValue(w,t),w=c.isExist(this._valueAxisFT)?this._valueAxisFT.display(w):w,l=d.measureWidth(this._labels.font,w.toString());if((n+H/2)>(s-l/2)){E=false}}if((u+D/2)<(k-x/2)&&E){F=C;break}}}else{var k=this._calculatePositionFromValue(q,t),q=c.isExist(this._valueAxisFT)?this._valueAxisFT.display(q):q,o=d.measureHeight(this._labels.font),n=this._calculatePositionFromValue(r,t),r=c.isExist(this._valueAxisFT)?this._valueAxisFT.display(r):r,A=d.measureHeight(this._labels.font);for(var C=j.length-1;C>=0;C--){var B=this._RenardSeriesList[j[C]];var m=B[B.length-1]*r,u=this._calculatePositionFromValue(m,t),m=c.isExist(this._valueAxisFT)?this._valueAxisFT.display(m):m,z=d.measureHeight(this._labels.font);var E=true;if(B.length>1){var w=B[1]*r,s=this._calculatePositionFromValue(w,t),w=c.isExist(this._valueAxisFT)?this._valueAxisFT.display(w):w,v=d.measureHeight(this._labels.font);if((n+A/2)>(s-v/2)){E=false}}if((u+z/2)<(k-o/2)&&E){F=C;break}}}return j[F]},_getLongestWidth:function(){if(!c.isExist(this._longestWidth)||this._longestWidth==0){var n=d;var m=this._minValue,j=this._maxValue,o=c.isExist(this._valueAxisFT)?this._valueAxisFT.display(m):m.toString(),l=c.isExist(this._valueAxisFT)?this._valueAxisFT.display(j):j.toString(),k;if(o.length>l.length){k=o}else{k=l}if(c.isExist(this._valueAxisFT)){this._longestWidth=n.measureWidth(this._labels.font,k.toString())}else{this._longestWidth=n.measureWidth(this._labels.font,k.toString()+".0")}}return this._longestWidth}});return a});sap.riv.module({qname:"sap.riv.viz.shared.series.SeriesHighlighter",version:"3.4.0"},[{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.SeriesItem",version:"3.4.0"}],function Setup(d,g){var c=function(l,h){var m=null;for(m in l){if(typeof h[m]==="undefined"){return false}}for(m in l){if(l[m]){switch(typeof l[m]){case"object":if(l[m].constructor===Array){var j=l[m];subOther=h[m];for(var k=0;k<j.length;k++){j=j[k];for(subProp in j){if(!j[subProp]===subOther[k][subProp]){return false}}}}else{if(!l[m].equals(h[m])){return false}}break;case"function":if(typeof h[m]==="undefined"||(m!=="equals"&&l[m].toString()!==h[m].toString())){return false}break;default:if(l[m]!==h[m]){return false}}}else{if(h[m]){return false}}}for(m in l){if(typeof l[m]==="undefined"){return false}}return true};var e=function(l,k,j){var h=l.slice((j||k)+1||l.length);l.length=k<0?l.length+k:k;return l.push.apply(l,h)};var a=function(){var h;if(arguments.length===0){h=[]}else{if(arguments.length>0&&typeof arguments[0]!=="number"){h=arguments[0].toArray()}else{h=[];h.length=arguments[0]}}function j(l){var k=0;this.hasNext=function(){return k<l.length};this.next=function(){return l[k++]};this.remove=function(){l.splice(k-1,1)};this.getIndex=function(){return k-1}}this.add=function(k){h.push(k)};this.addAll=function(m,l){if(typeof m!=="number"){return}if(m<0||m>h.length){return}var k=new j(l);while(k.hasNext()){h.push(k.next())}};this.insert=function(k,l){h.splice(k,0,l)};this.indexOf=function(l){for(var k=0;k<h.length;k++){if(c(h[k],l)){return k}}return -1};this.get=function(k){return h[k]};this.size=function(){return h.length};this.exchange=function(m,l){var k=h[m];h[m]=h[l];h[l]=k};this.contains=function(l){for(var k=0;k<h.length;k++){if(c(h[k],l)){return true}}return false};this.deleteItem=function(l){var k=this.indexOf(l);if(k!==-1){e(h,k)}};this.remove=function(l,k){e(h,l,k)};this.removeAll=function(){h.splice(0,h.length)};this.toArray=function(){return h.slice(0)};this.iterator=function(){return new j(h)}};var b=function(l){var k=new a();var h=Number.MAX_VALUE;var j=16;this.setCapacity=function(m){j=m};this.offerFirst=function(m){if(this.remainingCapacity()<1){this.removeLast()}k.insert(0,m)};this.offerLast=function(m){if(this.remainingCapacity()<1){this.removeFirst()}k.add(m)};this.removeFirst=function(){k.remove(0)};this.removeLast=function(){k.remove(k.size()-1)};this.pollFirst=function(){var m=this.peekFirst();k.remove(0);return m};this.pollLast=function(){var m=this.peekLast();k.remove(k.size()-1);return m};this.peekFirst=function(){if(k.size()>0){return k.get(0)}else{return null}};this.peekLast=function(){if(k.size()>0){return k.get(k.size()-1)}else{return null}};this.size=function(){return k.size()};this.iterator=function(){return k.iterator()};this.toArrayList=function(){return k};this.toArray=function(){return k.toArray()};this.remainingCapacity=function(){if(l){return(j-k.size())}else{return(h-k.size())}}};var f=function(j,h){var k=new b(true);k.setCapacity(h);this.setTargets=function(){if(!arguments[0]||arguments[0].constructor!==Array){return}var n=arguments[0],s,o=false;for(var q=0,l=n.length;q<l;q++){s=n[q];o=false;var m=k.iterator();while(m.hasNext()){var r=m.next();if(this.isSameSeriesItem(r,s)){o=true}}if(!o){k.offerLast(s)}}};this.remove=function(o){var n=null;var l=k.iterator();while(l.hasNext()){var m=l.next();if(this.isSameSeriesItem(m,o)){n=m;l.remove()}}return n};this.isSameSeriesItem=function(n,o){var m=false;if(o instanceof g){if(n instanceof g){if(o===n){m=true}}else{if(this.isSameDataContext(n,o.getData()[0])){m=true}}}else{var l=null;if(!(n instanceof g)){l=n}else{l=n.getData()[0]}if(this.isSameDataContext(l,o)){m=true}}return m};this.erase=function(){k.toArrayList().removeAll()};this.run=function(){var o=this._getSeriesItemsToBeHighlight();var q=[],n,l;for(n=0,l=j.length;n<l;n++){var r=j[n].getRenderer();r.clearHighlight(j[n])}if(o.length>0){for(n=0;n<j.length;n++){j[n].getRenderer().highlight()}for(n=0,l=o.length;n<l;n++){var m=o[n];var r=m.getSeries().getRenderer();r.highlight(m);q.push(m.getData()[0])}}return q};this.isSameDataContext=function(o,m){if(o==null||m==null){return false}if(o.measureIndex!==m.measureIndex){return false}else{if(o.dimensionPath.length!==m.dimensionPath.length){return false}else{for(var r=0,l=o.dimensionPath.length;r<l;r++){var q=o.dimensionPath[r];var n=m.dimensionPath[r];if(q.analysisAxisIndex!==n.analysisAxisIndex||q.dimensionIndex!==n.dimensionIndex||q.dimensionItemIndex!==n.dimensionItemIndex){return false}}}}return true};this.getHighlightedSeriesItemsContext=function(){var q=[];var o=this._getSeriesItemsToBeHighlight();if(o.length>0){for(var n=0,l=o.length;n<l;n++){var m=o[n];q.push(m.getData()[0])}}return q};this._getSeriesItemsToBeHighlight=function(){var m=k.iterator(),l=[],o;while(m.hasNext()){var u=m.next();if(u==null){continue}if(u instanceof g){l.push(u)}else{for(o=0,len=j.length;o<len;o++){var r=j[o].getSeriesItems();for(var n=0,t=r.length;n<t;n++){var s=r[n];var q=s.getData()[0];if(u.measureIndex!==q.measureIndex){break}if(this.isSameDataContext(u,q)){l.push(s);break}}}}}return l}};return f});sap.riv.module({qname:"sap.riv.core.utils.ArrayUtils",version:"3.4.0"},function Setup(){var a={each:function(e,d){e=e||[];for(var c=0,b=e.length;c<b;c++){d.call(e,c,e[c])}},unique:function(c){c=c||[];c=c.sort();for(var b=1;b<c.length;b++){if(c[b]===c[b-1]){c.splice(b--,1)}}return c}};return a});sap.riv.module({qname:"sap.riv.viz.shared.background.BackgroundComponent",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.vizkit.UIComponent",version:"3.4.0"},{qname:"sap.riv.viz.shared.misc.PropsMgr",version:"3.4.0"},{qname:"sap.riv.graphics.Layer",version:"3.4.0"},{qname:"sap.riv.vizkit.ThemeManager",version:"3.4.0"}],function Setup(d,b,c,f,a){var e=d.derive(b,{constructor:function(g){this._options=g.backgroundOptions;this._bgc_setBgColor()},_bgc_setBgColor:function(){if(this._options.visible){if(this._options.color){this._container.css("background",this._options.color)}}},updateProperties:function(g){delete this._options;this._options=g.background;this._bgc_setBgColor()},applyTheme:function(h){var g=a.getThemeSettings(h);this.updateProperties({background:{color:g.background}})},doPrint:function(g){g.drawImage(this._canvasElement,0,0)}});return e});sap.riv.module({qname:"sap.riv.viz.shared.layout.BasicLayout",version:"3.4.0"},[{qname:"sap.riv.core.Logger",version:"3.4.0"}],function Setup(b){var a=function(e){var d={};if(typeof e.length!=="undefined"&&e.length===4){d.top=e[0];d.right=e[1];d.bottom=e[2];d.left=e[3]}return d};var c=function(e,f,d){this._container=e;this._components={};this._layoutChanged=false;this._manifest={container:{size:{width:f.width,height:f.height},measurementUnit:"px",unitEmValue:10,padding:a([20,20,20,20])},title:{preferredSize:{width:0,height:0},margin:{top:0,right:0,bottom:8,left:0},parts:{main:{visible:true},sub:{visible:true}}},legend:{preferredSize:{width:0,height:0},margin:{top:8,right:8,bottom:8,left:8},dock:"right",visible:true,offside:false},plot:{preferredSize:{width:0,height:0},margin:{top:0,right:0,bottom:0,left:0},}};this._digestOptions(d)};c.prototype={supportedLayoutComponent:{title:"title",legend:"legend",plot:"plot",background:"background"},_digestOptions:function(d){if(d.legend){var f=this._manifest.legend;if(f.visible!==d.legend.visible){f.visible=d.legend.visible;this.setLayoutChanged(true)}if(f.dock!==d.legend.position){f.dock=d.legend.position;this.setLayoutChanged(true)}}if(d.title){var g=this._manifest.title.parts;if(d.title.main){if(g.main.visible!==d.title.main.visible){g.main.visible=d.title.main.visible;this.setLayoutChanged(true)}}if(d.title.sub){if(g.main.visible&&g.sub.visible!==d.title.sub.visible){g.sub.visible=d.title.sub.visible;this.setLayoutChanged(true)}}}if(d.layout){var e=a(d.layout.padding);if(this._manifest.container.padding.top!==e.top||this._manifest.container.padding.right!==e.right||this._manifest.container.padding.bottom!==e.bottom||this._manifest.container.padding.left!==e.left){this._manifest.container.padding=e;this.setLayoutChanged(true)}if(this._manifest.legend.offside!==d.layout.legendOffside){this._manifest.legend.offside=d.layout.legendOffside;this.setLayoutChanged(true)}}},addLayoutComponent:function(e,d){if(this.supportedLayoutComponent[e]&&!this._components[e]){this._components[e]=d}},removeLayoutComponent:function(d){if(this._components[d]){delete this._components[d]}},setLayoutChanged:function(d){this._layoutChanged=d},isLayoutChanged:function(){return this._layoutChanged},resize:function(d){if(this._manifest.container.size.width!==d.width||this._manifest.container.size.height!==d.height){this._manifest.container.size.width=d.width;this._manifest.container.size.height=d.height;this.setLayoutChanged(true)}},updateProperties:function(d){this._digestOptions(d)},getLayoutData:function(){var l={},f={X:0,Y:0,width:0,height:0},k={X:0,Y:0,width:0,height:0},g={X:0,Y:0,width:0,height:0},m={X:0,Y:0,width:0,height:0},d=this._manifest.container.size,j=this._manifest.container.padding,q={width:d.width-j.left-j.right,height:d.height-j.top-j.bottom};if(this._manifest.title.parts.main.visible){var e=this._components[this.supportedLayoutComponent.title].getPreferredSize(q,this._container.getAllProperties().title);f.width=d.width-j.left-j.right;f.height=e.height;f.X=j.left;f.Y=j.top;l[this.supportedLayoutComponent.title]=f}if(this._manifest.legend.visible){var h=this._components[this.supportedLayoutComponent.legend].calMaxLegendSize(this._container.getAllProperties());var o=h.width;var n=h.height;if(this._manifest.legend.dock==="left"||this._manifest.legend.dock==="right"){k.width=o;k.Y=0;if(this._manifest.legend.dock==="left"){k.X=j.left}else{k.X=d.width-o-j.right}k.height=d.height;if(f.height===0){g.height=q.height;g.Y=j.top}else{g.height=q.height-f.height-this._manifest.title.margin.bottom;g.Y=j.top+f.height+this._manifest.title.margin.bottom}g.width=q.width-k.width-this._manifest.legend.margin.right;g.X=j.left;if(this._manifest.legend.dock==="left"){g.X+=k.width;g.X+=this._manifest.legend.margin.right}}else{k.width=q.width;k.height=n;k.X=0;if(f.height===0){k.Y=j.top;g.height=q.height-k.height}else{k.Y=f.Y+f.height+this._manifest.title.margin.bottom;g.height=q.height-f.height-this._manifest.title.margin.bottom-k.height}g.width=q.width;g.X=j.left;if(this._manifest.legend.dock==="top"){g.Y=k.Y+k.height+this._manifest.legend.margin.bottom;g.height-=this._manifest.legend.margin.bottom}else{k.Y=d.height-j.bottom-k.height;g.Y=f.Y+f.height+this._manifest.legend.margin.top;g.height-=this._manifest.legend.margin.top}}l[this.supportedLayoutComponent.legend]=k;l[this.supportedLayoutComponent.plot]=g}else{g.width=q.width;if(f.height===0){g.height=q.height;g.Y=j.top}else{g.height=q.height-f.height-this._manifest.title.margin.bottom;g.Y=f.Y+f.height+this._manifest.title.margin.bottom}g.X=j.left;l[this.supportedLayoutComponent.plot]=g}m.width=d.width;m.height=d.height;l[this.supportedLayoutComponent.background]=m;return l},layout:function(){var f=this.getLayoutData();for(var d in this._components){var e=this._components[d];if(e==null){continue}if(!e.superComponent()){b.debug("chartComponent["+this._container.id()+"]subComponent["+e.getCanvasSurface().getRootLayer().id()+"]initialized.","perf");this._container.addSubComponent(e)}var g=f[d];if(g==null){g={x:0,y:0,width:0,height:0}}e.position({x:g.X,y:g.Y});e.size({width:Math.max(0,g.width),height:Math.max(0,g.height)})}}};return c});sap.riv.module({qname:"sap.riv.viz.shared.shape.Triangle",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.graphics.shape.Polygon",version:"3.4.0"},{qname:"sap.riv.graphics.shape.Paths",version:"3.4.0"}],function Setup(d,a,b){var c=d.derive(a,{constructor:function(){this._point={x:0,y:0};this._size=0},size:function(e){if(e!==undefined){this._size=e;return this}if(this._size){return this._size}},centerPoint:function(e){if(e!==undefined){this._point.x=e.x;this._point.y=e.y;return this}return{x:this._point.x,y:this._point.y}},doDrawShape:function(){var f=this._point;var g=this;var h=this._size;var e=h/2;g.addVertices(f.x,f.y-e);g.addVertices(f.x+e,f.y+e);g.addVertices(f.x-e,f.y+e);return g},doDrawSelectionMarkup:function(){var e=this._point;var j=new b();this.doDrawShape();var f=this._vertices;j.reset();for(var g=0,h=f.length;g<h;g++){j.moveTo(e.x,e.y);j.lineTo(f[g][0],f[g][1])}return j},doPointInTest:function(g){var j=this._point;var f=this._size*1.5/2;var e=g.x-j.x;var h=g.y-j.y;return(e*e+h*h)<=f*f}});return c});sap.riv.module({qname:"sap.riv.viz.shared.tooltip.TooltipRenderer",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TextRuler",version:"3.4.0"},{qname:"sap.riv.graphics.shape.Paths",version:"3.4.0"},{qname:"sap.riv.graphics.shape.TextLine",version:"3.4.0"},{qname:"sap.riv.graphics.shape.Line",version:"3.4.0"},{qname:"sap.riv.graphics.shape.Circle",version:"3.4.0"},{qname:"sap.riv.graphics.shape.Rectangle",version:"3.4.0"},{qname:"sap.riv.graphics.shape.Polygon",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.shape.Triangle",version:"3.4.0"},{qname:"sap.riv.viz.shared.shape.Diamond",version:"3.4.0"},{qname:"sap.riv.viz.shared.shape.Cross",version:"3.4.0"},{qname:"sap.riv.viz.shared.shape.Pentagon",version:"3.4.0"},{qname:"sap.riv.viz.shared.context.Context",version:"3.4.0"},{qname:"sap.riv.viz.shared.utils.NumericFormatUtils",version:"3.4.0"}],function Setup(f,l,o,n,g,b,c,h,a,e,m,j,r,q,d){var k=function(s,t){this._layer=t;this._display={singleMeasure:{label:{font:"bold 10px Arial",color:"#808080"},value:{font:"bold 14px Arial",color:"#000000"},padding:{vertical:9,horizontal:10}},multipleMeasure:{label:{font:["bold 10px Arial"],color:["#808080"]},value:{font:"bold 12px Arial",color:"#000000"},padding:{vertical:8,horizontal:10,inline:6,markerGap:7,defaultSpace:8}},title:{color:"#808080",font:"bold 10px Arial",formatString:""},valueFormat:[],labelFormat:[],maxDimensionLabelWidth:150,maxMeasureLabelWidth:80};this._finalWidth={dimension:undefined,measure:undefined,value:undefined};this._shapeLayout={padding:3,radius:4,markerWidth:12,markerHeight:8,borderWidth:2};this._shapes={tooltip:null,tooltipRB:null,dimensionLabel:null,separateLine:null,measureLabels:[],measureMarks:[],valueLabels:[]};this._currentValue={dimensionIndex:undefined,offset:undefined};this._defaultToolTipColors={backgroundColor:"#f2f2f2",borderColor:"#AAAAAA",separateLineColor:["#ffffff","#8a8a8a","#ffffff"],guideLineColor:"#333333"};this._parseOptions(s)};k.prototype._parseOptions=function(B){this._dataTree=B.dataTree;this._metaData=B.metaData;this._options=B.properties;var s=B.properties._additional.statesManagerId;this._statesManager=q.get(s);this._statesManager.addStatesChangeHandler(this._statesManager.CHANGESERIESVISIBILITY,this._seriesChangedHandler,this);var t=this._options.tooltip;if(t.title.color!=null){this._display.title.color=t.title.color}if(t.title.font!=null){this._display.title.font=t.title.font}if(t.title.formatString!=null){this._display.title.formatString=t.title.formatString}if(t.label.color.length>0){this._display.singleMeasure.label.color=t.label.color}var u=null;for(var v=0,x=this._metaData.measureMembers.length;v<x;v++){if(a.isExist(t.label.color[v])){u=this._display.multipleMeasure.label.color[v]=t.label.color[v]}else{this._display.multipleMeasure.label.color[v]=u}}if(t.label.font.length>0){this._display.singleMeasure.label.font=t.label.font}var A=null;for(var v=0,x=this._metaData.measureMembers.length;v<x;v++){if(a.isExist(t.label.font[v])){A=this._display.multipleMeasure.label.font[v]=t.label.font[v]}else{this._display.multipleMeasure.label.font[v]=A}}var z=null;for(var v=0,x=this._metaData.measureMembers.length;v<x;v++){if(a.isExist(t.label.formatString[v])){z=this._display.labelFormat[v]=t.label.formatString[v]}else{this._display.labelFormat[v]=z}}if(t.mainValue.color!=null){this._display.singleMeasure.value.color=t.mainValue.color;this._display.multipleMeasure.value.color=t.mainValue.color}if(t.border.color!=null){this._borderColor=t.border.color}else{this._borderColor=this._defaultToolTipColors.borderColor}if(t.backgroundColor!=null){this._bgColor=t.backgroundColor}else{this._bgColor=this._defaultToolTipColors.backgroundColor}if(t.separateLineColor!=null&&t.separateLineColor.length==3){this._separateLineColor=t.separateLineColor}else{this._separateLineColor=this._defaultToolTipColors.separateLineColor}if(t.guideLineColor!=null){this._guideLineColor=t.guideLineColor}if(t.border.size!=null){this._shapeLayout.borderWidth=t.border.size;if(this._shapeLayout.borderWidth==1){this._shapeLayout.borderWidth=1.001}}var w=null;for(var v=0,x=this._metaData.measureMembers.length;v<x;v++){if(a.isExist(t.mainValue.formatString[v])){w=this._display.valueFormat[v]=t.mainValue.formatString[v]}else{this._display.valueFormat[v]=w}}this._seriesChanged=true;this._markerPos=this._getMarkerPos()};k.prototype._seriesChangedHandler=function(s){this._seriesChanged=true};k.prototype.drawShape=function(u){if(u===this._currentValue.offset){return}else{this._currentValue.offset=u}var x=this._shapeLayout.padding,C=this._shapeLayout.padding,v=this._shapeLayout.radius,t=this._shapeLayout.markerWidth,z=this._shapeLayout.markerHeight;var s=this._size.width,A=this._size.height;if(this._markerPos=="left"){x+=z}if(this._markerPos=="top"){C+=z}if(this._shapes.tooltip===null){this._shapes.tooltip=this._layer.addShape(new o())}else{this._shapes.tooltip=this._layer.replaceShape(this._shapes.tooltip,new o())}if(this._shapes.tooltipRB===null){this._shapes.tooltipRB=this._layer.addShape(new o())}else{this._shapes.tooltipRB=this._layer.replaceShape(this._shapes.tooltipRB,new o())}var B=this._shapes.tooltip;var w=this._shapes.tooltipRB;B.moveTo(x,C+v);if(this._markerPos=="left"){B.lineTo(x,C+A/2-u-t/2);B.lineTo(x-z,C+A/2-u);B.lineTo(x,C+A/2-u+t/2)}B.lineTo(x,C+A-v);B.arc({x:x+v,y:C+A-v},v,Math.PI,Math.PI/2,false);w.lineTo(x,C+A-v);w.arc({x:x+v,y:C+A-v},v,Math.PI,Math.PI/2,false);if(this._markerPos=="bottom"){B.lineTo(x+s/2+u-t/2,C+A);B.lineTo(x+s/2+u,C+A+z);B.lineTo(x+s/2+u+t/2,C+A);w.lineTo(x+s/2+u-t/2,C+A);w.lineTo(x+s/2+u,C+A+z);w.lineTo(x+s/2+u+t/2,C+A)}B.lineTo(x+s-v,C+A);B.arc({x:x+s-v,y:C+A-v},v,Math.PI/2,0,false);w.lineTo(x+s-v,C+A);w.arc({x:x+s-v,y:C+A-v},v,Math.PI/2,0,false);if(this._markerPos=="right"){B.lineTo(x+s,C+A/2-u+t/2);B.lineTo(x+s+z,C+A/2-u);B.lineTo(x+s,C+A/2-u-t/2);w.lineTo(x+s,C+A/2-u+t/2);w.lineTo(x+s+z,C+A/2-u);w.lineTo(x+s,C+A/2-u-t/2)}B.lineTo(x+s,C+v);B.arc({x:x+s-v,y:C+v},v,0,3*Math.PI/2,false);w.lineTo(x+s,C+v);w.arc({x:x+s-v,y:C+v},v,0,3*Math.PI/2,false);if(this._markerPos=="top"){B.lineTo(x+s/2+u+t/2,C);B.lineTo(x+s/2+u,C-z);B.lineTo(x+s/2+u-t/2,C)}B.lineTo(x+v,C);B.arc({x:x+v,y:C+v},v,3*Math.PI/2,Math.PI,false);B.fillingColor(this._bgColor).borderWidth(this._shapeLayout.borderWidth).borderColor(this._borderColor);w.borderWidth(this._shapeLayout.borderWidth).borderColor(this._borderColor).shadow({offsetX:1,offsetY:1,blur:5,color:"rgba(0,0,0,0.4)"})};k.prototype.drawContent=function(X){var B=X.dimensionItemIndex;if(B===this._currentValue.dimensionIndex){return}else{this._currentValue.dimensionIndex=B}var s=this._dataTree.getSubMemberLabels();var Y=this._metaData.measureMembers;var A=this._shapeLayout.padding;var E=this._shapeLayout.padding;if(this._markerPos==="left"){A+=this._shapeLayout.markerHeight}if(this._markerPos==="top"){E+=this._shapeLayout.markerHeight}var P;var R;var u=this;if(Y.length==1){P=this._display.singleMeasure;if(this._shapes.dimensionLabel===null){this._shapes.dimensionLabel=this._layer.addShape(new n())}else{this._shapes.dimensionLabel=this._layer.replaceShape(this._shapes.dimensionLabel,new n())}if(this._shapes.valueLabels.length===0){this._shapes.valueLabels[0]=this._layer.addShape(new n())}else{this._shapes.valueLabels[0]=this._layer.replaceShape(this._shapes.valueLabels[0],new n())}R=d.formatToTextWithColor(s[B].value,this._display.title.formatString,true);var Z=R.text;var O=R.color?R.color:this._display.title.color;if(!a.isExist(Z)){Z=""}var aa=l.measureText(this._display.title.font,Z).width;this._shapes.dimensionLabel.text(Z).textAlign("c").font(this._display.title.font).textColor(O).width(this._finalWidth.dimension>aa?aa:this._finalWidth.dimension).visible(true);var N=this._dataTree.getMeasuresAt([B])[Y[0].key].sum.result;N=a.isNaN(N)?"":N;var V=d.getFormatString(this._display.valueFormat,0);R=d.formatToTextWithColor(N,V,true);N=R.text;var M=R.color?R.color:P.value.color;var L=l.measureText(P.value.font,N).width;this._shapes.valueLabels[0].text(N).font(P.value.font).textColor(M).width(this._finalWidth.value>L?L:this._finalWidth.value).visible(true);var T;if(this._markerPos==="left"){this._shapes.dimensionLabel.topLeft([A+P.padding.horizontal,E+P.padding.vertical]);T=this._shapes.dimensionLabel.bottomLeft().y;this._shapes.valueLabels[0].topLeft([A+P.padding.horizontal,T+P.padding.vertical])}else{if(this._markerPos==="top"||this._markerPos==="bottom"){var F=A+this._size.width/2;this._shapes.dimensionLabel.topCenter([F,E+P.padding.vertical]);T=this._shapes.dimensionLabel.bottomLeft().y;this._shapes.valueLabels[0].topCenter([F,T+P.padding.vertical])}}}else{P=this._display.multipleMeasure;var F=A+this._size.width/2;if(this._shapes.dimensionLabel!=null){this._layer.removeShape(this._shapes.dimensionLabel)}R=d.formatToTextWithColor(s[B].value,this._display.title.formatString,true);var Z=R.text;var O=R.color?R.color:this._display.title.color;if(!a.isExist(Z)){Z=""}var aa=l.measureText(this._display.title.font,Z).width;this._shapes.dimensionLabel=this._layer.addShape(new n()).text(Z).font(this._display.title.font).textColor(O).textAlign("c").width(this._finalWidth.dimension>aa?aa:this._finalWidth.dimension).visible(true).topCenter([F,E+P.padding.vertical]);var D=this._shapes.dimensionLabel.bottomLeft().y+P.padding.vertical;var U=A+this._size.width-P.padding.horizontal;var H=A+P.padding.horizontal;var J=this._separateLineColor;this._shapes.separateLine=this._layer.addShape(new g()).from({x:H,y:D}).to({x:U,y:D}).width(1).color({t:"lg",s:{x:H,y:D},e:{x:U,y:D},st:[{o:0,v:J[0]},{o:0.5,v:J[1]},{o:1,v:J[2]}]}).visible(true);D+=P.padding.vertical;var W=this._statesManager.getStatesItemValue(this._statesManager.CHANGESERIESVISIBILITY);var z=this._options._additional;for(var Q=0,S=Y.length;Q<S;Q++){if(this._shapes.valueLabels[Q]!=undefined){this._layer.removeShape(this._shapes.valueLabels[Q])}if(W[Q]===false){continue}var N=this._dataTree.getMeasuresAt([B])[Y[Q].key].sum.result;N=a.isNaN(N)?"":N;var V=d.getFormatString(this._display.valueFormat,Q);R=d.formatToTextWithColor(N,V,true);N=R.text;var M=R.color?R.color:P.value.color;var x=l.measureText(P.value.font,N);this._shapes.valueLabels[Q]=this._layer.addShape(new n()).text(N).font(P.value.font).textColor(M).width(x.width).visible(true).rightCenter([U,D+x.height/2]);var w=d.getFormatString(this._display.labelFormat,Q);R=d.formatToTextWithColor(Y[Q].value,w,true);var v=R.text;var K=R.color?R.color:P.label.color[Q];var C=l.measureText(P.label.font[Q],v);if(this._shapes.measureMarks[Q]==undefined){this._shapes.measureMarks[Q]=t(z.legendMarkers[Q],{x:H,y:D+x.height/2-C.height/2},z.colorList[Q],C.height)}var G=H+C.height+P.padding.markerGap;var I=C.width>this._finalWidth.measure?this._finalWidth.measure:C.width;if(this._shapes.measureLabels[Q]==undefined){this._shapes.measureLabels[Q]=this._layer.addShape(new n()).text(v).font(P.label.font[Q]).textColor(K).width(I).visible(true).leftCenter([G,D+x.height/2])}D+=x.height+P.padding.inline}}function t(ad,ac,ai,af){var ab=null;var ah=af;var ag={x:ac.x+ah/2,y:ac.y+ah/2};var ae=function(ak,am,aj,al){ak.fillingColor(al);ak.size(am).centerPoint(aj);ak.doDrawShape();ak.close()};switch(ad){case"triangle":ab=u._layer.addShape(new e());ae(ab,ah,ag,ai);break;case"diamond":ab=u._layer.addShape(new m());ae(ab,ah,ag,ai);break;case"pentagon":ab=u._layer.addShape(new r());ae(ab,ah,ag,ai);break;case"cross":ab=u._layer.addShape(new j());ae(ab,ah,ag,ai);break;case"circle":ab=u._layer.addShape(new b()).fillingColor(ai).center({x:ag.x,y:ag.y}).radius(ah/2);break;case"rect":default:ab=u._layer.addShape(new c());ab.topLeft([ac.x,ac.y]).width(ah).height(ah).color(ai);break}return ab}};k.prototype.getSize=function(){if(this._seriesChanged){this._size=this.getShapeSize();this._seriesChanged=false}var t=this._size.width+this._shapeLayout.padding*2;var s=this._size.height+this._shapeLayout.padding*2;if(this._markerPos==="bottom"||this._markerPos==="top"){s+=this._shapeLayout.markerHeight}else{if(this._markerPos==="left"||this._markerPos==="right"){t+=this._shapeLayout.markerHeight}}return{width:t,height:s}};k.prototype.getShapeSize=function(){var H=0,G=0;var s=this._dataTree.getSubMemberLabels();var T=this._metaData.measureMembers;var x=0,P=0,U=0,w=0,R=0,K=0;var L=T.length>1?this._display.multipleMeasure:this._display.singleMeasure;var t=this;var z=function(){var W=U<t._display.maxMeasureLabelWidth?t._display.maxMeasureLabelWidth:U;t._finalWidth.measure=W;return w+L.padding.markerGap+L.padding.defaultSpace+W+R};var Q=this._statesManager.getStatesItemValue(this._statesManager.CHANGESERIESVISIBILITY);var S=0;for(var M=0,D=T.length;M<D;M++){if(Q[M]===false){continue}S++;for(var J=0,E=s.length;J<E;J++){if(S==1){var V=d.formatToText(s[J].value,this._display.title.formatString,true);var F=l.measureText(this._display.title.font,V);x=F.width>x?F.width:x;P=F.height>P?F.height:P}if(this._dataTree.getMeasuresAt([J])){var I=this._dataTree.getMeasuresAt([J])[T[M].key].sum.result;I=d.formatToText(I,this._display.valueFormat[M],true);var v=l.measureText(L.value.font,I);R=v.width>R?v.width:R;K=v.height>K?v.height:K;var u=d.getFormatString(this._display.labelFormat,M);var B=d.formatToText(T[M].value,u,true);var A=l.measureText(L.label.font[M],B);U=A.width>U?A.width:U;w=A.height>w?A.height:w}}}if(T.length==1){if(R<x&&this._display.maxDimensionLabelWidth>x){H=x+L.padding.horizontal*2;this._finalWidth.dimension=x}else{var O=R>x?R:x;H=O+L.padding.horizontal*2;this._finalWidth.dimension=O}G=K+P+L.padding.vertical*3;this._finalWidth.value=R}else{var N=z();var C=x>this._display.maxDimensionLabelWidth?this._display.maxDimensionLabelWidth:x;H=(N>C?N:C)+2*L.padding.horizontal;G=P+L.padding.vertical*4+S*K+(S-1)*L.padding.inline;this._finalWidth.dimension=(N>C?N:C);this._finalWidth.value=R}return{width:H,height:G}};k.prototype.reset=function(t){if(this._shapes.tooltip!=null){this._layer.removeShape(this._shapes.tooltip)}if(this._shapes.tooltipRB!==null){this._layer.removeShape(this._shapes.tooltipRB)}if(this._shapes.dimensionLabel!=null){this._layer.removeShape(this._shapes.dimensionLabel)}if(this._shapes.separateLine!=null){this._layer.removeShape(this._shapes.separateLine)}for(var u=0,s=this._shapes.measureLabels.length;u<s;u++){this._layer.removeShape(this._shapes.measureLabels[u])}for(var u=0,s=this._shapes.measureMarks.length;u<s;u++){this._layer.removeShape(this._shapes.measureMarks[u])}for(var u=0,s=this._shapes.valueLabels.length;u<s;u++){this._layer.removeShape(this._shapes.valueLabels[u])}this._shapes={tooltip:null,tooltipRB:null,dimensionLabel:null,separateLine:null,measureLabels:[],measureMarks:[],valueLabels:[]};this._currentValue={dimensionIndex:undefined,offset:undefined};if(a.isExist(t)){this._finalWidth={dimension:undefined,measure:undefined,value:undefined};this._parseOptions(t)}};k.prototype._getMarkerPos=function(){switch(this._options.type){case"bar":case"stackedBar":return"left";case"combination":case"stackedColumn":return"bottom";default:return}};k.prototype.getMarkerHeight=function(){return this._shapeLayout.markerHeight+this._shapeLayout.borderWidth};return k});sap.riv.module({qname:"sap.riv.viz.shared.tooltip.TooltipComponent",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.vizkit.Canvas2DSurfaceComponent",version:"3.4.0"},{qname:"sap.riv.viz.shared.misc.PropsMgr",version:"3.4.0"},{qname:"sap.riv.graphics.Layer",version:"3.4.0"},{qname:"sap.riv.core.utils.TextRuler",version:"3.4.0"},{qname:"sap.riv.viz.shared.tooltip.TooltipRenderer",version:"3.4.0"}],function Setup(e,c,d,g,a,f){var b=e.derive(c,{constructor:function(h,j){this._options=h.tooltip;this._canvasSurface=this.getCanvasSurface();this._layer=this._canvasSurface.getRootLayer();if(this._options.properties.tooltip.zIndex!=null){this._container.css("z-index",this._options.properties.tooltip.zIndex)}this._initialize(j)},_initialize:function(h){if(h!=null){this._renderer=new h(this._options,this._layer)}else{this._renderer=new f(this._options,this._layer)}},getSize:function(){return this._renderer.getSize()},translate:function(h,k){var j="translate("+h+"px,"+k+"px)";this._container.css({"-webkit-transform":j,"-moz-transform":j,msTransform:j})},doContentResize:function(j,h){this.callParent("doContentResize",j,h)},draw:function(h,j){this._renderer.drawShape(j);this._renderer.drawContent(h);this._layer.setNeedsDisplay()},reset:function(h){this._renderer.reset(h);if(h.properties.tooltip.zIndex!=null){this._container.css("z-index",h.properties.tooltip.zIndex)}},getMarkerHeight:function(){return this._renderer.getMarkerHeight()},hide:function(){this._renderer.reset();this._layer.setNeedsDisplay();this.markHide()}});return b});sap.riv.module({qname:"sap.riv.viz.shared.utils.TextProcessor",version:"3.4.0"},[{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TextRuler",version:"3.4.0"}],function Setup(b,c){var a=function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};var d=function(f,e){if(b.isExist(f)&&b.isExist(e)){this._text=f;this._lineCapacity=e.lineWidth;this._wordWrap=e.wordWrap}};d.prototype={constructor:this,getLines:function(){this._lineData=[];this._text=a(this._text+"");var g=this._text.split("");if(this._wordWrap){if(g.length<=this._lineCapacity){this._lineData.push(this._text);return this._lineData}var f=" ";var h=[];for(var k=0;k<g.length;k++){if(g[k]===f){h.push(k)}}h.push(g.length);var m=0;var l=this._lineCapacity;var n,j,e;for(k=0;k<h.length;k++){j=h[k]-m;if(j===l){n=g.slice(m,h[k]).join("");this._lineData.push(n);m=h[k];e=h[k]}else{if(j>l){n=g.slice(m,h[k-1]).join("");this._lineData.push(n);m=h[k-1]+1;e=h[k-1]}else{continue}}}if(b.isDefined(e)&&a(this._lineData.join("")).length<g.length){n=g.slice(e+1,g.length);this._lineData.push(n.join(""))}return this._lineData}},setText:function(e){this._text=e},setWidth:function(e){this._lineCapacity=e},setWordWrapEnabled:function(e){this._wordWrap=e},getLineCapacity:function(j,f){var e=0;var h="r";var g=c.measureText(j,h).width;e=Math.floor(f/g);return e},};return d});sap.riv.module({qname:"sap.riv.viz.shared.tooltip.BaseTooltip",version:"3.4.0"},[{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.tooltip.TooltipComponent",version:"3.4.0"}],function Setup(b,c){var a=function(e,f){this._init(e,f)};var d=a.prototype;d._init=function(e,f){this._parent=e.parent;this._options=e;this._component=new c({enable:true,hidden:true,anchor:{x:0,y:0},position:{x:0,y:0},size:{w:0,h:0},tooltip:{metaData:e.metaData,dataTree:e.dataTree,data:e.data,properties:e.properties},id:"tooltipComponent"},f);this._parent.addSubComponent(this._component)};d.getZone=function(){return{top:0,left:0,bottom:this._parent.size().height,right:this._parent.size().width}};d.getPlotArea=function(){return this._parent._chartComponent.getPlotArea()};d.show=function(m){if(!this._options.properties.tooltip.enable){return}this._size=this._getSize();this._component.size(this._size);var g=this.getZone();if(!g.left||g.left>0){g.left=0}if(!g.top||g.top>0){g.top=0}if(!g.bottom||g.bottom<this._parent.size().height){g.bottom=this._parent.size().height}if(!g.right||g.right<this._parent.size().width){g.right=this._parent.size().width}var e=this.getPlotArea();var l=this._component.getMarkerHeight();var n=this._size;var k=m.data[0].point;var j,h,f=0;switch(this._options.properties.type){case"bar":case"stackedBar":j=g.right>(e.right+n.width-l)?e.right-l:(g.right-n.width);if(g.top>k.y-n.height/2){h=g.top;f=g.top-(k.y-n.height/2)}else{if(g.bottom<k.y+n.height/2){h=g.bottom-n.height;f=g.bottom-(k.y+n.height/2)}else{h=k.y-n.height/2}}break;case"combination":case"stackedColumn":case"bubble":h=g.top<(e.top-n.height+l)?(e.top-n.height+l):g.top;if(g.left>k.x-n.width/2){j=g.left;f=k.x-n.width/2-g.left}else{if(g.right<k.x+n.width/2){j=g.right-n.width;f=k.x+n.width/2-g.right}else{j=k.x-n.width/2}}break;default:break}this._component.translate(j,h);this._draw(m.data[0],f);this._component.markShow()};d.hide=function(e){if(!this._options.properties.tooltip.enable){return}this._component.hide()};d.reset=function(e){this._options=e;this._component.reset(e);this._size=this._getSize();this._component.size(this._size)};d._getSize=function(){return this._component.getSize()};d._draw=function(e,f){return this._component.draw(e,f)};d.getCustomization=function(){return this._options.properties.tooltip.customization};return a});sap.riv.module({qname:"sap.riv.viz.shared.title.TitleCanvasComponent",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TextRuler",version:"3.4.0"},{qname:"sap.riv.vizkit.Canvas2DSurfaceComponent",version:"3.4.0"},{qname:"sap.riv.viz.shared.misc.PropsMgr",version:"3.4.0"},{qname:"sap.riv.vizkit.ThemeManager",version:"3.4.0"},{qname:"sap.riv.graphics.shape.TextLine",version:"3.4.0"},{qname:"sap.riv.viz.shared.utils.TextProcessor",version:"3.4.0"},{qname:"sap.riv.viz.shared.utils.NumericFormatUtils",version:"3.4.0"}],function Setup(f,b,g,k,j,h,l,c,e,d){var a=f.derive(k,{constructor:function(m){this._options=m.titleOptions;this._canvasSurface=this.getCanvasSurface();this._layer=this._canvasSurface.getRootLayer();this._textShapes=[];this._anchor={x:0,y:0};this._textProcessor;this._theme},paint:function(n){for(var q=0;q<this._textShapes.length;q++){this._layer.removeShape(this._textShapes[q])}if(!n||!n.main||!n.main.visible){this._refresh();return}this._textShapes.splice(0,this._textShapes.length);this._anchor={x:0,y:0};var o=this.wrapWord(n.main.text,this.getLineCapacity(n.main.font));var r;for(q=0;q<o.length;q++){r=this._layer.addShape(new l());this.paintln({text:o[q],font:n.main.font,color:n.main.formatColor?n.main.formatColor:n.main.color,align:n.main.horizontalAlign},r);this._textShapes.push(r)}if(n.sub&&n.sub.visible){var s=this.wrapWord(n.sub.text,this.getLineCapacity(n.sub.font));var m;for(q=0;q<s.length;q++){m=this._layer.addShape(new l());this.paintln({text:s[q],font:n.sub.font,color:n.sub.formatColor?n.sub.formatColor:n.sub.color,align:n.sub.horizontalAlign},m);this._textShapes.push(m)}}this._refresh()},paintln:function(n,q){if(!n||!q){return}var r=g.measureWidth(n.font,n.text);q.text(n.text).font(n.font).textColor(n.color).width(r).visible(true);var o=this._containerSize.width/2;var m=g.measureHeight(n.font);switch(n.align.toLowerCase()){case"center":this._anchor.x=o;q.center([this._anchor.x,this._anchor.y+m/2]);break;case"left":this._anchor.x=0;q.leftCenter([this._anchor.x,this._anchor.y+m/2]);break;case"right":this._anchor.x=this._containerSize.width;q.rightCenter([this._anchor.x,this._anchor.y+m/2]);break;default:this._anchor.x=o;q.center([this._anchor.x,this._anchor.y+m/2])}this._anchor.y+=m},wrapWord:function(s,q){if(s==null){return[""]}var r=s.toString();if(r.length==0){return[""]}if(this._textProcessor==null){this._textProcessor=new c()}this._textProcessor.setWidth(q);this._textProcessor.setWordWrapEnabled(true);var n=r.split("\n");var m=[];for(var o=0;o<n.length;o++){this._textProcessor.setText(n[o]);m=m.concat(this._textProcessor.getLines())}return m},getPreferredSize:function(t,r){if(!t||!r||!r.main){return}this._containerSize=t;var m={width:0,height:0},q,s,o;if(b.isExist(r.main.visible)&&!r.main.visible){return m}q=this.getLineCapacity(r.main.font);if(r.main.text.length>=q){m.width=s=this._containerSize.width}else{if(r.sub&&r.sub.visible){q=this.getLineCapacity(r.sub.font);if(r.sub.text.length>=q){m.width=o=this._containerSize.width}else{s=g.measureWidth(r.main.font,r.main.text);o=g.measureWidth(r.sub.font,r.sub.text);s>o?m.width=s:m.width=o}}}q=this.getLineCapacity(r.main.font);var n=this.wrapWord(r.main.text,q);m.height+=(n.length*g.measureHeight(r.main.font));q=this.getLineCapacity(r.sub.font);var u=this.wrapWord(r.sub.text,q);m.height+=(u.length*g.measureHeight(r.sub.font));return m},setPreferredSize:function(m){this._containerSize=m},getLineCapacity:function(q){var m=0;var o="r";var n=g.measureText(q,o).width;m=Math.floor(this._containerSize.width/n);return m},_refresh:function(){this._layer.setNeedsDisplay()},_applyNumberFormat:function(){var m=e.formatToTextWithColor(this._options.main.text,this._options.main.formatString,true);this._options.main.text=m.text;this._options.main.formatColor=m.color;m=e.formatToTextWithColor(this._options.sub.text,this._options.sub.formatString,true);this._options.sub.text=m.text;this._options.sub.formatColor=m.color},updateProperties:function(m){delete this._options;this._options=m.title;this._applyNumberFormat();this.paint(this._options)},doContentResize:function(n,m){this.callParent("doContentResize",n,m);this._applyNumberFormat();this.paint(this._options)},applyTheme:function(s){this._theme=h.getThemeSettings(s);var n,m,r=" ";var q=f.extend(true,{},this._theme.global,this._theme.title.mainTitle);var o=f.extend(true,{},this._theme.global,this._theme.title.subTitle);n=q["font-weight"]+r+q["font-size"]+r+q["font-family"];m=q.color;this._options.main.font=n;this._options.main.color=m;if(this._options.sub){n=o["font-weight"]+r+o["font-size"]+r+o["font-family"];m=o.color;this._options.sub.font=n;this._options.sub.color=m}if(this._textShapes.length!==0){this.paint(this._options)}},doPrint:function(m){m.drawImage(this._canvasElement,0,0)}});return a});sap.riv.module({qname:"sap.riv.viz.pie.BasicModule",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"},{qname:"sap.riv.core.Observable",version:"3.4.0"}],function Setup(c,d,b){var a=c.derive(b,{constructor:function(e){this._chart_options=e;this._dataTree=this._chart_options.dataTree;this._metaData=this._chart_options.metaData;this._defaultSelectionArmed=true;this.addEvents(this.getSupportedAppEvents())},init:function(){this.buildData();this.initSeries()},updateProperties:function(f){var e={};e.properties=f;this._chart_options=e},updateOptions:function(e){this._chart_options=e;this._dataTree=this._chart_options.dataTree;this._metaData=this._chart_options.metaData;this._hasDrawed=false},buildData:d.unsupported,initSeries:d.unsupported,drawSeries:d.unsupported,doChartLayout:d.unsupported,bindRenderer:d.unsupported,applyTheme:d.unsupported,getSupportedAppEvents:d.unsupported,marqueeOverPoint:d.noop,hoverOnPoint:d.noop,clickOnPoint:d.noop,clickOnPoint:d.noop,selectData:d.noop,unSelectData:d.noop});return a});sap.riv.module({qname:"sap.riv.viz.shared.legend.XYLegendCanvasComponent",version:"3.4.0"},[{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TextRuler",version:"3.4.0"},{qname:"sap.riv.core.UADetector",version:"3.4.0"},{qname:"sap.riv.vizkit.Canvas2DSurfaceComponent",version:"3.4.0"},{qname:"sap.riv.graphics.Layer",version:"3.4.0"},{qname:"sap.riv.viz.shared.misc.PropsMgr",version:"3.4.0"},{qname:"sap.riv.vizkit.ThemeManager",version:"3.4.0"},{qname:"sap.riv.viz.shared.utils.NumericFormatUtils",version:"3.4.0"},{qname:"sap.riv.graphics.shape.Circle",version:"3.4.0"},{qname:"sap.riv.graphics.shape.TextLine",version:"3.4.0"},{qname:"sap.riv.graphics.shape.Rectangle",version:"3.4.0"},{qname:"sap.riv.graphics.shape.Polygon",version:"3.4.0"},{qname:"sap.riv.viz.shared.utils.ScrollBarRenderer",version:"3.4.0"},{qname:"sap.riv.viz.shared.utils.ColorSeriesGenerator",version:"3.4.0"},{qname:"sap.riv.viz.shared.shape.Triangle",version:"3.4.0"},{qname:"sap.riv.viz.shared.shape.Diamond",version:"3.4.0"},{qname:"sap.riv.viz.shared.shape.Cross",version:"3.4.0"},{qname:"sap.riv.viz.shared.shape.Pentagon",version:"3.4.0"},{qname:"sap.riv.viz.shared.context.Context",version:"3.4.0"}],function Setup(q,e,c,j,o,f,s,v,h,t,n,b,a,m,d,u,g,l,w,r){var x="The quick brown fox jumps over the lazy dog";var k=e.derive(o,{METRICS:{itemLineHeight:1,padding_left:0,padding_right:0,padding_bottom:0,markupSize:0.75,markupMarginRight:0,itemHorizontalSpace:0,itemVerticalSpace:0,titlePadding:0},XC_METRICS:{paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,verticalGap:2,horizontalGap:10,spacing:4},constructor:function(z){this._scrollBar=[];this._options=z.legendOptions.properties.legend;this._isLegendSelectable=false;this._parseOptions(z.legendOptions.properties);this.statesManagerId=z.legendOptions.properties._additional.statesManagerId;this._canvasSurface=this.getCanvasSurface();this._maskLayer=this._canvasSurface.getRootLayer();this._content=null;this._maxLabelHeight=null;this._curmaxLabelHeight=this._maxLabelHeight;this._stateChangeable=false;this._initScrollBar();this._hasScrollBar=false;this._initialize();this._hookEvents()},_parseOptions:function(z){this._titletxt=z._additional.legendTitle||"";this._colorList=z._additional.colorList;this._labels=z._additional.legendLabels;this._labelFont=z.legend.labelFont;this._labelFontColor=z.legend.labelColor;this._titleLabelFont=z.legend.titleFont;this._titleLabelFontColor=z.legend.titleColor;this._markerList=z._additional.legendMarkers||[];this._formatString=z._additional.legendNumberFormat;this._legendFirst=z.layout.legendFirst;this._isLegendSelectable=z.measure.visibilityChangeable},_measureWidth:function(z,A){return c.measureWidth(z,A)+2},_measureHeight:function(z,A){return c.measureHeight(z,A)+2},_measureText:function(z,B){var A=c.measureText(z,B);return{width:A.width+2,height:A.height+2}},_initialize:function(){var G=this._labels;this._title=this._layer.addShape(new n());this._content=[];var A=this._markerList;var F;this._maxLabelHeight=this._measureText(this._labelFont,x).height;var D=r.get(this.statesManagerId);var z=D.getStatesItemValue(D.CHANGESERIESVISIBILITY);var E;for(var C=0;C<G.length;C++){var B={};if(z[C]===false){B.active=false}else{B.active=true}B.labelShape=this._layer.addShape(new n());B.colorListIndex=C;if(!this._legendFirst){E=h.formatToTextWithColor(G[C].category,h.getFormatString(this._formatString,C),true);G[C].category=E.text;G[C].formatColor=E.color}B.measureIndex=G[C].measureIndex;this._createMarkupShape(B,A[C]);B.clickableRegion=this._layer.addShape(new b());this._content.push(B)}},_initScrollBar:function(){if(this._scrollBar.length>0){for(var z=0;z<this._scrollBar.length;z++){this._scrollBar[z].remove()}}this._scrollBar=[];this._scrollBar[0]=new m();this._layer=new f({anchor:{x:0,y:0}})},_createMarkupShape:function(A,z){switch(z){case"circle":A.markupShape=this._layer.addShape(new t());break;case"diamond":A.markupShape=this._layer.addShape(new g());break;case"triangle":A.markupShape=this._layer.addShape(new u());break;case"pentagon":A.markupShape=this._layer.addShape(new w());break;case"cross":A.markupShape=this._layer.addShape(new l());break;case"rect":default:A.markupShape=this._layer.addShape(new b());break}},_refresh:function(){this._layer.setNeedsDisplay()},_resetShapes:function(){this._layer.removeShape(this._title);for(var A=0,z=this._content.length;A<z;A++){this._layer.removeShape(this._content[A].labelShape);this._layer.removeShape(this._content[A].markupShape);this._layer.removeShape(this._content[A].clickableRegion)}if(this._scrollBar.length>0){for(var A=0;A<this._scrollBar.length;A++){this._scrollBar[A].remove()}}this._scrollBar=[];this._scrollBar[0]=new m()},_update:function(){var F=this._options;var A=this._markerList;var B=this._maxLabelHeight;var X=this.METRICS;var E=X.itemLineHeight*B;var I=this.XC_METRICS;var ac=I.paddingLeft,z=I.paddingRight,aa=I.paddingTop,K=I.paddingBottom;var H=I.spacing;var R=X.markupSize*B;if(F.position=="right"||F.position=="left"){var V=0;var G=this._chartWidth||0;var J=I.verticalGap;V=this._maxLabelHeight*this._content.length+aa+K+J*(this._content.length-1);var Z=0;var Y=(this._chartHeight-V)/2;Y=Y-F.verticalOffset;if(Y<0){Y=0}var P=Y+aa;var T=this._maxLabelHeight;var O=Z+ac+2;var N=Math.round(Z+ac+R+H);var D=G-(ac+R+H);for(var W=0;W<this._content.length;W++){var C=this._content[W];C.clickableRegion.topLeft([Z,P]).width(G).height(T);this._drawMarkup(A[W],C.markupShape,{x:O+R/2,y:P+T/2},this._colorList[W]);var U=this._labels[W].formatColor?this._labels[W].formatColor:this._labelFontColor;C.labelShape.text(this._labels[W].category).textAlign("l").font(this._labelFont).textColor(U).leftCenter([N,P+T/2]).width(D);P+=T+J}}else{var S=0,Z=0,Y=0,G;var L=I.horizontalGap;for(var W=0;W<this._content.length;W++){var ab=this._measureWidth(this._labelFont,this._labels[W].category);var M=R+H+ab;S+=M}S+=(this._content.length-1)*L+ac+8;var V=this._maxLabelHeight+8;Z=Z+(this._chartWidth-S)/2;Z=Z+F.horizontalOffset;if(Z<0){Z=0}this._title.text("");var Q=Z;for(var W=0;W<this._content.length;W++){var C=this._content[W];var D=this._measureWidth(this._labelFont,this._labels[W].category);this._drawMarkup(A[W],C.markupShape,{x:Q+ac+R/2,y:Y+V/2},this._colorList[W]);var U=this._labels[W].formatColor?this._labels[W].formatColor:this._labelFontColor;C.labelShape.text(this._labels[W].category).textAlign("l").font(this._labelFont).textColor(U).leftCenter([Q+ac+R+H,Y+V/2]).width(D);G=ac+R+H+D;C.clickableRegion.topLeft([Q,Y]).width(G).height(V);Q+=G+L}}this._hasScrollBar=false;this._updateLabelStatus();this._refresh()},_updateLabelStatus:function(){var F=r.get(this.statesManagerId);var B=F.getStatesItemValue(F.CHANGESERIESVISIBILITY);var G=this._labels;var E=this._content;var C,A;for(var D=0,z=G.length;D<z;D++){if(B[D]===false){this._deactivateItem(D);E[D].active=false}else{this._activateItem(D);E[D].active=true}}},_drawMarkup:function(A,z,D,C){var B=this._maxLabelHeight*this.METRICS.markupSize;switch(A){case"triangle":case"diamond":case"pentagon":case"cross":z.reset();z.fillingColor(C);z.size(B).centerPoint(D);z.doDrawShape();z.close();break;case"circle":z.fillingColor(C).center(D).radius(B/2);break;case"rect":default:z.topLeft([D.x-B/2,D.y-B/2]).width(B).height(B);z.color(C);break}},doContentResize:function(A,z){this.callParent("doContentResize",A,z);this._chartHeight=z.height;this._chartWidth=z.width;this._layer.position({x:0,y:0});this._layer.size({width:this._chartWidth,height:this._chartHeight});this._maskLayer.addSubLayer(this._layer);this._update()},updateOptions:function(z){this._parseOptions(z.properties);this._resetShapes();this._title=null;this._content=null;this._initialize();this._update()},updateProperties:function(E){var H=this._markerList;this._options=E.legend;this._parseOptions(E);for(var A=0,D=H.length;A<D;A++){if(H[A]!==this._markerList[A]){var B=this._content[A];this._layer.removeShape(B.markupShape);this._layer.removeShape(B.clickableRegion);this._createMarkupShape(B,this._markerList[A])}}this._maxLabelHeight=this._measureText(this._labelFont,x).height;var C=this._labels;if(!this._legendFirst){var G;for(var A=0;A<C.length;A++){G=h.formatToTextWithColor(C[A].category,h.getFormatString(this._formatString,A),true);C[A].category=G.text;C[A].formatColor=G.color}}var F=r.get(this.statesManagerId);var z=F.getStatesItemValue(F.CHANGESERIESVISIBILITY);for(var A=0,D=this._content.length;A<D;A++){if(z[A]===false){this._content[A].active=false}}this._update()},doPrint:function(z){z.drawImage(this._canvasElement,0,0)},calMaxLegendSize:function(L){var H=L.legend.labelFont;var G=0,z=0;var I=0,C=0,B;var F=L._additional.legendLabels;var E=F.length;var K;for(var D=0;D<E;D++){K=h.formatToTextWithColor(F[D].category,h.getFormatString(L._additional.legendNumberFormat,D),true);F[D].category=K.text;F[D].formatColor=K.color;B=this._measureText(H,F[D].category);C=B.height;I=B.width;if(C>G){G=C}if(I>z){z=I}}var A=this.METRICS.markupSize;var J=z+A*G+this.XC_METRICS.paddingLeft+this.XC_METRICS.spacing+this.XC_METRICS.paddingRight+2;return{width:J,height:G+this.XC_METRICS.paddingTop+this.XC_METRICS.paddingBottom}},getStateChangeable:function(){return this._stateChangeable},setStateChangeable:function(z){this._stateChangeable=z},_hookEvents:function(){var z=[{eventName:"touchstart",listener:this._dispatchEvent,scope:this},{eventName:"touchend",listener:this._dispatchEvent,scope:this},{eventName:"touchmove",listener:this._dispatchEvent,scope:this},{eventName:"touchcancel",listener:this._dispatchEvent,scope:this}];if(j.os()!="iPad"&&j.os()!="Android"){z.push({eventName:"mouseup",listener:this._dispatchEvent,scope:this},{eventName:"mousemove",listener:this._dispatchEvent,scope:this},{eventName:"mousedown",listener:this._dispatchEvent,scope:this},{eventName:"mouseleave",listener:this._dispatchEvent,scope:this})}this._layer.on(z)},_dispatchEvent:function(A){var z=A.type();switch(z){case"mousedown":this._mouseDown=true;this._mouseMove=false;this._previousPosition=undefined;this._hoveredSeriesIndex=undefined;this._handleHighlightItem(A.targetLocalXY());break;case"touchstart":this._mouseDown=true;this._mouseMove=false;this._previousPosition=undefined;this._hoveredSeriesIndex=undefined;this._handleHighlightItem(A.targetTouches().item(0).localXY());break;case"mousemove":this._handleMouseMove(A.targetLocalXY());break;case"touchmove":this._handleMouseMove(A.targetTouches().item(0).localXY());break;case"mouseup":if(!this._mouseMove){this._handleClick(A.targetLocalXY())}this._handleCompleted();break;case"touchend":if(!this._mouseMove){this._handleClick(A.changedTouches().item(0).localXY())}if(this._hasScrollBar){this._scrollBar[0].unHighLight()}this._handleCompleted();break;case"mouseleave":case"touchcancel":if(this._hasScrollBar){this._scrollBar[0].unHighLight()}this._handleCompleted();break;default:break}},_handleCompleted:function(){if(q.isDefined(this._hoveredSeriesIndex)){this._content[this._hoveredSeriesIndex].clickableRegion.color(false);this._refresh()}this._previousPostion=undefined;this._hoveredSeriesIndex=undefined;this._mouseDown=false;this._mouseMove=false},_handleMouseMove:function(C){if(this._hasScrollBar){this._scrollBar[0].highLight()}if(this._mouseDown&&this._hasScrollBar){this._mouseMove=true;if(q.isDefined(this._previousPosition)){var A=this._layer.position();if(this._options.position=="right"||this._options.position=="left"){if(Math.abs(C.y-this._previousPosition.y)>5){var z=A.y+C.y-this._previousPosition.y;var D=this._layer.height()-this._maskLayer.height();if((z>0)&&(A.y<0)){z=0}if(!(z>0)&&(Math.abs(z)<D)){this._layer.position({x:A.x,y:z});this._scrollBar[0].update();this._previousPosition=undefined}}}else{if(Math.abs(C.x-this._previousPosition.x)>5){var B=A.x+C.x-this._previousPosition.x;var D=this._layer.width()-this._maskLayer.width();if((B>0)&&(A.x<0)){B=0}if(!(B>0)&&(Math.abs(B)<D)){this._layer.position({x:B,y:A.y});this._scrollBar[0].update();this._previousPosition=undefined}}}}else{this._previousPosition=e.extend(true,{},C)}}else{this._handleHighlightItem(C)}this._refresh()},_handleHighlightItem:function(z){var B;if(this._isLegendSelectable){for(var A=0;A<this._content.length;A++){B=this._content[A].clickableRegion;if(this._content[A].clickableRegion.doPointInTest(z)){if(this._hoveredSeriesIndex==A){return}if(q.isExist(this._hoveredSeriesIndex)){this._content[this._hoveredSeriesIndex].clickableRegion.color(false)}this._hoveredSeriesIndex=this._content[A].colorListIndex;B.color(this._labelFontColor).compositionMode({alpha:0.15})}}}},_handleClick:function(A){if(!this._stateChangeable){return}var D={};for(var B=0;B<this._content.length;B++){if(this._content[B].clickableRegion.doPointInTest(A)){D.seriesIndex=this._content[B].colorListIndex;if(this._content[B].active){this._content[B].active=false;D.setVisible=false}else{this._content[B].active=true;D.setVisible=true}}}this._refresh();if(!q.isDefined(D.seriesIndex)){return}var C=r.get(this.statesManagerId);var z=C.getStatesItemValue(C.CHANGESERIESVISIBILITY);z[D.seriesIndex]=D.setVisible;C.setStatesItemValue(C.CHANGESERIESVISIBILITY,z)},_activateItem:function(A){var C=this._content[A];var B=this._labels[A];var z=B.formatColor?B.formatColor:this._labelFontColor;C.labelShape.textColor(z).compositionMode({alpha:1});z=this._colorList[A];(q.isExist(C.markupShape.fillingColor))?C.markupShape.fillingColor(z):C.markupShape.color(z);C.markupShape.compositionMode({alpha:1})},_deactivateItem:function(B){var D=this._content[B];var C=this._labels[B];var A=C.formatColor?C.formatColor:this._labelFontColor;var z=d.getUnsaturatedColor(A);D.labelShape.textColor(z).compositionMode({alpha:0.35});(q.isExist(D.markupShape.fillingColor))?D.markupShape.fillingColor(z):D.markupShape.color(z);D.markupShape.compositionMode({alpha:0.15})},statesChangeHandler:function(B){switch(B.name){case"ChangeSeriesVisibility":var C=B.data;for(var A=0,z=this._content.length;A<z;A++){if(C[A]!==this._content[A]){if(C[A]===false){this._deactivateItem(A)}else{this._activateItem(A)}}}break;default:break}}});return k});sap.riv.module({qname:"sap.riv.viz.shared.multilayout.ColumnMultiLayout",version:"3.4.0"},[{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.core.Math",version:"3.4.0"}],function Setup(a,b){var c=function(e,d){this._size={width:e.width,height:e.height};this._layoutChanged=false;this._itemLength=0;this._columnLength=2;this._layoutInfo=null;this._parseOptions(d)};c.prototype._parseOptions=function(d){if(a.isExist(d.itemLength)){this._itemLength=d.itemLength}if(a.isExist(d.columnLength)){this._columnLength=d.columnLength>0?d.columnLength:2}this._layoutChanged=true};c.prototype.layoutChanged=function(){return this._layoutChanged};c.prototype.updateSize=function(d){if(this._size.width!=d.width||this._size.height!=d.height){this._size.width=d.width;this._size.height=d.height;this._layoutChanged=true}};c.prototype.updateSettings=function(d){this._parseOptions(d)};c.prototype.getLayoutInfo=function(){if(this._layoutInfo!=null&&!this._layoutChanged){return this._layoutInfo}else{this._layoutInfo=[];var d=this._layoutInfo;if(this._itemLength>0){var g=this._columnLength;var k=b.ceil(this._itemLength/g);var h=b.floor(this._size.width/g);var l=b.floor(this._size.height/k);for(var f=0;f<k;f++){for(var e=0;e<g;e++){d.push({x:e*h,y:f*l,width:h,height:l})}}}this._layoutChanged=false;return this._layoutInfo}};return c});sap.riv.module({qname:"sap.riv.viz.pie.MultiPieModule",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.pie.BasicModule",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.SeriesGroup",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.Series",version:"3.4.0"},{qname:"sap.riv.viz.shared.multilayout.ColumnMultiLayout",version:"3.4.0"},{qname:"sap.riv.graphics.Layer",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.PieRenderer",version:"3.4.0"}],function Setup(b,a,e,j,g,h,c,d){var f=b.derive(e,{events:["selectData","unSelectData"],constructor:function(k){this._seriesGroups=null;this._multiLayout=null;this._layoutModeType=null;this._pieRenderers=[];this._mainLayer=null;this._subLayers=[];this._hasDrawed=false;this._options=k},buildData:function(){this._data=[];var l=this._metaData.axisNum;var m=this._dataTree;var s=0;if(l===2){s=1}var G=[];var B=[];var q=this._metaData.dimension;for(var D=0,F=q.length;D<F;D++){var u=q[D];if(u.analysisAxisIndex!==s){if(G.length===0){var I=m.getSubMembersAt();var o=m.getSubMemberLabels();for(var C=0,t=I.length;C<t;C++){G.push([I[C]]);B.push([o[C].value])}}else{var E=[];var L=[];for(var C=0,t=G.length;C<t;C++){var v=G[C];var w=m.getSubMembersAt(v);var K=m.getSubMemberLabels(v);for(var A=0,z=w.length;A<z;A++){E.push(v.concat(w[A]));L.push(B[C].concat(K[A].value))}}G=E;B=L}}else{if(G.length===0){G.push([]);B.push([])}for(var C=0,t=G.length;C<t;C++){var v=G[C];var w=m.getSubMembersAt(v);var K=m.getSubMemberLabels(v);var n={};for(var A=0,z=w.length;A<z;A++){var r=m.getMeasuresAt(v.concat(w[A]));for(var J in r){if(r.hasOwnProperty(J)){if(!a.isExist(n[J])){n[J]={namePath:B[C].concat(J),data:[]}}var x=r[J].sum.result;n[J].data.push({value:(a.isNumber(x))?x:"NaN",dimensionPath:r[J].sum.tags.dimensionPath,measureIndex:r[J].sum.tags.measureIndex,measureKey:r[J].sum.tags.measureKey,dimensionItem:K[A].value,dimensionItemIndex:A})}}}for(var H in n){this._data.push(n[H])}}}}},initSeries:function(){var x=this._chart_options.properties.measures;var r=this._alertUtils=this._chart_options.properties._additional.alertUtils;var n=this._chart_options.properties.measureDefault;this._seriesGroups=[];this._alertObjsAll=[];for(var u=0,w=this._data.length;u<w;u++){var t=this._data[u];var z=new j();var m=b.extend(true,{},n,x[u]);var C=new g(m);C.setName(t.namePath.join("/"));var l=[];var B=t.data;var k=[];for(var q=0,A=B.length;q<A;q++){var v=B[q];if(v.value!=="NaN"&&v.value>0){k.push(r.applyAlertRules(v));l.push(v)}}this._processData(l);this._alertObjsAll.push(k);C.setData(l);z.addSeries(C);this._seriesGroups.push(z)}},_processData:function(o){var n=o.slice();n.sort(function(r,q){return r-q});var m=n[n.length-1];for(var l=0,k=o.length;l<k;l++){if((o[l]/m-0.0001)<0){o[l]=0}}},bindRenderer:function(o){this._mainLayer=o;this._layoutModeType=this._options.properties.layoutMode.type;switch(this._layoutModeType){case"column":default:if(this._multiLayout==null){this._multiLayout=new h(o.size(),{itemLength:this._seriesGroups.length,columnLength:this._options.properties.layoutMode.columnLength})}else{this._multiLayout.updateSize(o.size());this._multiLayout.updateSettings({itemLength:this._seriesGroups.length,columnLength:this._options.properties.layoutMode.columnLength})}break}this._mainLayer.clearContent();this._subLayers.splice(0,this._subLayers.length);if(this._seriesGroups.length<this._pieRenderers.length){this._pieRenderers.splice(this._seriesGroups.length,this._pieRenderers.length-this._seriesGroups.length)}for(var n=0,k=this._seriesGroups.length;n<k;n++){var m=new c({anchor:{x:0,y:0}});this._subLayers.push(m);this._mainLayer.addSubLayer(m);var q=this._seriesGroups[n];var l=this._pieRenderers[n];if(!a.isExist(l)){l=new d(m,this._options,true);this._pieRenderers[n]=l}else{l.setLayer(m);l.resetSeriesGroups()}l.addSeriesGroup(q)}},drawSeries:function(){if(!this._hasDrawed){for(var q=0,l=this._pieRenderers.length;q<l;q++){var n=this._pieRenderers[q];n.setAlertObj(this._alertObjsAll[q]);n.draw()}this._hasDrawed=true}else{for(var q=0,l=this._pieRenderers.length;q<l;q++){var n=this._pieRenderers[q];n.setAlertObj(this._alertObjsAll[q]);n.redraw()}}if(this._defaultSelectionArmed){var k=this._chart_options.properties.selectedDataIndexes;if(this._chart_options.properties.allSelectable&&k.length>0){for(q=0;q<this._pieRenderers.length;q++){for(var o=0,m=k.length;o<m;o++){if(!this._pieRenderers[q]._shapes.pieSectors[k[o]]){continue}if(this._chart_options.properties.selectionMode.toLowerCase()==="single"&&o===1){break}this._pieRenderers[q]._selectPie(k[o]);this._pieRenderers[q]._interactionStatus.selected.push(k[o])}}}this._defaultSelectionArmed=false}var r;for(q=0,l=this._pieRenderers.length;q<l;q++){r=this._pieRenderers[q]._interactionStatus.selected;if(a.isExist(r)&&r.length>0){for(var o=0,m=r.length;o<m;o++){if(this._chart_options.properties.selectionMode.toLowerCase()==="single"&&o===1){break}this._pieRenderers[q]._selectPie(r[o])}}}},doChartLayout:function(m,k,l){k.size(m);k.position({x:0,y:0});l.size(m);l.position({x:0,y:0});this._multiLayout.updateSize(m);this._relayoutSubItems()},_relayoutSubItems:function(){if(this._multiLayout.layoutChanged()){var m=this._multiLayout.getLayoutInfo();for(var l=0,k=this._subLayers.length;l<k;l++){this._subLayers[l].position({x:m[l].x,y:m[l].y});this._subLayers[l].size({width:m[l].width,height:m[l].height})}}},updateProperties:function(A){this.callParent("updateProperties",A);var o=this._alertUtils;var s=this._mainLayer;var B=this._options.properties.layoutMode.type;if(B!==this._layoutModeType){this._layoutModeType=B;switch(this._layoutModeType){case"column":default:this._multiLayout=new h(s.size(),{itemLength:this._seriesGroups.length,columnLength:this._options.properties.layoutMode.columnLength});break}}else{this._multiLayout.updateSettings(this._options.properties.layoutMode)}this._relayoutSubItems();for(var r=0,u=this._pieRenderers.length;r<u;r++){this._pieRenderers[r].updateProperties(A)}var v=this._chart_options.properties.measures;var w=this._chart_options.properties.measureDefault;var n=[];this._alertObjsAll=[];for(var r=0,u=this._data.length;r<u;r++){var q=this._data[r];var z=q.data;var l=[];for(var m=0,x=z.length;m<x;m++){var t=z[m];if(t.value!=="NaN"&&t.value>0){l.push(o.applyAlertRules(t))}}this._alertObjsAll.push(l)}for(var r=0,u=v.length;r<u;r++){var k=b.extend(true,{},w,v[r]);n.push(k)}for(var r=0,u=this._seriesGroups.length;r<u;r++){this._seriesGroups[r].updateProperties(n)}},getSupportedAppEvents:function(){return["selectData","unSelectData"]},clickOnPoint:function(l){for(var n=0,k=this._subLayers.length;n<k;n++){var m=this._subLayers[n];var q=m.convertPointFromSuperLayer(l);if(m.containsPoint(q)){var o=this._pieRenderers[n].highlightOnPoint(q);if(o.SelectDataContext&&(o.SelectDataContext.length>0)){this.fireEvent("selectData",{name:"selectData",data:o.SelectDataContext})}if(o.unSelectDataContext&&(o.unSelectDataContext.length>0)){this.fireEvent("unSelectData",{name:"unSelectData",data:o.unSelectDataContext})}}}},hoverOnPoint:function(l){for(var n=0,k=this._subLayers.length;n<k;n++){var m=this._subLayers[n];var o=m.convertPointFromSuperLayer(l);if(m.containsPoint(o)){this._pieRenderers[n].hoverOnPoint(o)}}},applyTheme:function(m){for(var l=0,k=this._pieRenderers.length;l<k;l++){this._pieRenderers[l].applyTheme(m)}},updateOptions:function(m){this.callParent("updateOptions",m);for(var n=0,k=this._pieRenderers.length;n<k;n++){var l=this._pieRenderers[n];l.updateOptions(m)}},_checkDualLayerIndex:function(l,k){if(l.length===0){return k}else{for(var m=0;m<l.length;m++){if(l[m]===k){return false}}return k}},_fireSelectDataEvt:function(k){if(k.length>0){this.fireEvent("selectData",{name:"selectData",data:k})}},selectData:function(v,u){var A;var x;var D;var z;var n;var l;var w;var m;var t=[];var C=[];var o={};var B=this._options.properties.selectionMode;if(B==="none"){return}for(var s=0;s<v.length;s++){A=v[s].dimensionPath;if(A.length==1){if(B==="single"){w=v[s].measureIndex;if(w<this._pieRenderers.length){w=this._checkDualLayerIndex(t,w)}if(w===false){continue}t.push(w);m=this._pieRenderers[w].selectData(v[s]);if(a.isDefined(m)&&m.SelectDataContext){C=C.concat(m.SelectDataContext)}}else{if(B==="multiple"){w=v[s].measureIndex;if(!isNaN(w)&&w<this._pieRenderers.length){m=this._pieRenderers[w].selectData(v[s]);if(a.isDefined(m)&&m.SelectDataContext){o[w]=m.SelectDataContext}}}}}else{for(var r=0;r<A.length;r++){if(A[r].analysisAxisIndex===0){x=A[r].dimensionItemIndex;break}}for(var q=0;q<A.length;q++){if(A[q].analysisAxisIndex===1){D=A[q].dimensionItemIndex;break}}z=v[s].measureIndex;n=this._data[s].data.length;l=this._metaData.measureMembers;if(B==="single"){if(D!=z){continue}if(z<n*l.length){w=l.length*x+Math.floor(z/n);if(!isNaN(w)&&w<this._pieRenderers.length){w=this._checkDualLayerIndex(t,w,true);if(w===false){continue}t.push(w);m=this._pieRenderers[w].selectData(v[s]);if(a.isDefined(m)&&m.SelectDataContext){C=C.concat(m.SelectDataContext)}}}}else{if(B==="multiple"){if(D!=z){continue}if(z<n*l.length){w=l.length*x+Math.floor(z/n);if(!isNaN(w)&&w<this._pieRenderers.length){m=this._pieRenderers[w].selectData(v[s]);if(a.isDefined(m)&&m.SelectDataContext){o[w]=m.SelectDataContext}}}}}}}if(!(a.isDefined(u)&&u===true)){if(B==="multiple"){for(p in o){C=C.concat(o[p])}}if(C.length>0){this._fireSelectDataEvt(C)}return}}});return f});sap.riv.module({qname:"sap.riv.viz.shared.state.StatesManager",version:"3.4.0",exported:true},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.core.Observable",version:"3.4.0"}],function Setup(d,e,b,c){var a=d.derive(c,{events:["ChangeSeriesVisibility"],constructor:function(){this.statesItems={};this.CHANGESERIESVISIBILITY="ChangeSeriesVisibility";this._addStatesItem(this.CHANGESERIESVISIBILITY,{eventName:this.CHANGESERIESVISIBILITY,value:[]})},_addStatesItem:function(f,g){this.statesItems[f]=g;this.addEvents(g.eventName)},_removeStatesItem:function(f){delete this.statesItems[f]},getStatesItemValue:function(f){return this.statesItems[f]?this.statesItems[f].value:null},_getStatesItem:function(f){return this.statesItems[f]},setStatesItemValue:function(f,g){var h=this._getStatesItem(f);h.value=g;this.fireEvent(h.eventName,{name:h.eventName,data:h.value})},addStatesChangeHandler:function(g,j,h){var f=this._getStatesItem(g).eventName;this.on({eventName:f,listener:j,scope:h})},});return a});sap.riv.module({qname:"sap.riv.vizkit.DataTree",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"}],function Setup(b){var c=function(e,d){this._gr=e;this._stats=d};c.dataTreeFromObject=function(e){var g=[];var d={member:"root",subNodes:{},subMembers:[],subMemberLabels:[],leafMemberCount:0,result:{}};var l=[{rNode:d,cNode:e,traversed:false,cIdx:0}];while(l.length){var j=l[l.length-1];var m=j.cNode;var k=j.rNode;if(!j.traversed){k.member=m.member;for(var f in m.measureValues){k.result[f]=b.extend({},m.measureValues[f])}j.traversed=true;g[l.length-1]=g[l.length-1]||{longest:m.member,shortest:m.member,allMembers:[]};g[l.length-1].allMembers.push(m.member);if(g[l.length-1].longest.length<m.member.length){g[l.length-1].longest=m.member}if(g[l.length-1].shortest.length>m.member.length){g[l.length-1].shortest=m.member}}if(m.subNodes.length>j.cIdx){k.subMembers.push(m.subNodes[j.cIdx].member);k.subMemberLabels.push(m.subNodes[j.cIdx].label);var h={member:"",subNodes:{},subMembers:[],subMemberLabels:[],leafMemberCount:0,result:{}};k.subNodes[m.subNodes[j.cIdx].member]=h;l.push({rNode:h,cNode:m.subNodes[j.cIdx],traversed:false,cIdx:0});j.cIdx++}else{if(m.subNodes.length==0){l.pop();if(l.length){l[l.length-1].rNode.leafMemberCount++}}else{l.pop();if(l.length){l[l.length-1].rNode.leafMemberCount+=k.leafMemberCount}}}}g.shift();return new c(d,g)};c.dataTreeFromJSON=function(d){var e=JSON.parse(d);return c.dataTreeFromObject(e)};var a=c.prototype;a.dataTreeToJSON=function(){var d={member:"",measureValues:{},subNodes:[]};var h=[{rNode:d,cNode:this._gr,traversed:false,cIdx:0}];while(h.length){var k=h[h.length-1];var e=k.cNode;var f=k.rNode;if(!k.traversed){f.member=e.member;for(var g in e.result){f.measureValues[g]=b.extend({},e.result[g])}k.traversed=true}if(e.subMembers.length>k.cIdx){var j={member:"",measureValues:{},subNodes:[]};f.subNodes.push(j);h.push({rNode:j,cNode:e.subNodes[e.subMembers[k.cIdx]],traversed:false,cIdx:0});k.cIdx++}else{h.pop()}}return JSON.stringify(d)};a.getGroupDepth=function(){return this._stats.length};a.getLevelStatistics=function(d){return this._stats[d]};a.getSubMembersAt=function(g){var f=this._gr;if(g!==undefined){for(var e=0,d=g.length;e<d;e++){f=f.subNodes[g[e]];if(!f){return undefined}}}return f.subMembers};a.getSubMemberLabels=function(g){var f=this._gr;if(g!==undefined){for(var e=0,d=g.length;e<d;e++){f=f.subNodes[g[e]];if(!f){return undefined}}}return f.subMemberLabels};a.getMeasuresAt=function(g){var f=this._gr;if(g!==undefined){for(var e=0,d=g.length;e<d;e++){f=f.subNodes[g[e]];if(!f){return undefined}}}return f.result};a.getLeafMemberCount=function(g){var f=this._gr;if(g!==undefined){for(var e=0,d=g.length;e<d;e++){f=f.subNodes[g[e]]}}return f.leafMemberCount};a.getContriRows=function(g){var f=this._gr;if(g!==undefined){for(var e=0,d=g.length;e<d;e++){f=f.subNodes[g[e]]}}return f.contriRows?f.contriRows.concat():undefined};a.setMeasureTagsAt=function(l,h,f,e){var k=this._gr;if(l!==undefined){for(var g=0,d=l.length;g<d;g++){k=k.subNodes[l[g]]}}for(var j in k.result){if(j===h){if(k.result[j].hasOwnProperty(f)){k.result[j][f].tags=e}}}};return c});sap.riv.module({qname:"sap.riv.vizkit.Event",version:"3.4.0"},function Setup(){var a=function(c,e,d){this._type=c;this._target=this._currentTarget=e;this._canBubbling=d!==undefined?d:true;this._timestamp=+new Date};var b=a.prototype;b._setCurrentTarget_=function(c){this._currentTarget=c};b.type=function(){return this._type};b.timestamp=function(){return this._timestamp};b.target=function(){return this._target};b.currentTarget=function(){return this._currentTarget};b.isInBubbling=function(){return this._target.id()!=this._currentTarget.id()};b.shouldBubble=function(){return this._canBubbling};b.stopPropagation=function(){this._canBubbling=false};return a});sap.riv.module({qname:"sap.riv.viz.xychart.XYChartComponent",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.core.Logger",version:"3.4.0"},{qname:"sap.riv.vizkit.UIComponent",version:"3.4.0"},{qname:"sap.riv.viz.shared.title.TitleCanvasComponent",version:"3.4.0"},{qname:"sap.riv.viz.shared.background.BackgroundComponent",version:"3.4.0"},{qname:"sap.riv.viz.shared.legend.XYLegendCanvasComponent",version:"3.4.0"},{qname:"sap.riv.viz.shared.tooltip.BaseTooltip",version:"3.4.0"},{qname:"sap.riv.viz.shared.misc.PropsMgr",version:"3.4.0"},{qname:"sap.riv.viz.shared.layout.BasicLayout",version:"3.4.0"},{qname:"sap.riv.vizkit.ThemeManager",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.Series",version:"3.4.0"},{qname:"sap.riv.viz.xychart.XYChartPlotComponent",version:"3.4.0"},{qname:"sap.riv.viz.shared.state.StatesManager",version:"3.4.0"},{qname:"sap.riv.viz.shared.context.Context",version:"3.4.0"}],function Setup(d,b,r,g,a,c,f,o,m,q,k,j,e,l,n){var h=d.derive(g,{constructor:function(s){this._dataTree=s.dataset.dataTree;this._metaData=s.dataset.metaData;this._chartModule=s.chartModule;this._xychart_options={layout:{padding:[0,0,0,0],legendFirst:true,legendOffside:true},type:"bar",measure:{visibilityChangeable:false},measures:[],xAxis:[{}],yAxis:[{}],selectability:{mode:"single",deSelectable:true,defaultSelectedItems:[]},bar:{barMarkerSize:undefined,isShowGradient:false,isShowInnerBorder:false,isShowOutBorder:false,isShowShadow:false},line:{lineThickness:1,lineMarkerSize:10,isShowMarkerShadow:false,isShowLineShadow:false},measureDefault:{colors:["#748CB2","#9CC677","#EACF5E","#F9AD79","#D16A7C","#8873A2","#3A95B3","#B6D949","#FDD36C","#F47958","#A65084","#0063B1","#0DA841","#FCB71D","#F05620","#B22D6E","#3C368E","#8FB2CF","#95D4AB","#EAE98F","#F9BE92","#EC9A99","#BC98BD","#1EB7B2","#73C03C","#F48323","#EB271B","#D9B5CA","#AED1DA","#DFECB2","#FCDAB0","#F5BCB4"]},visibleRange:{start:0,end:Number.POSITIVE_INFINITY},theme:undefined};this._propsMgr=new m(s.descriptor);var u=this._propsMgr.properties(s.xyChartOptions);this._xychart_options=d.extend(true,this._xychart_options,u);if(b.isExist(this._xychart_options.line.marker)){this._xychart_options.line.marker.size=this._xychart_options.line.marker.size!=10?this._xychart_options.line.marker.size:this._xychart_options.line.lineMarkerSize}if(b.isExist(s.xyChartOptions.theme)&&s.xyChartOptions.theme!==""){var t=s.xyChartOptions.theme;this._resolveThemeAndProperties(this._xychart_options,s.xyChartOptions,t)}this._propsMgr.properties(this._xychart_options);this._attach_additional_properties();this._xychart_options._additional.data=s.dataset.data;this._statesManager=new l();this._buildStates();this._legendComponent=null;this._chartComponent=null;this._titleComponent=null;this._layoutMgr=null;this._colorList=null;this._initSubComponents();this._statesManager.addStatesChangeHandler(this._statesManager.CHANGESERIESVISIBILITY,this._chartComponent.statesChangeHandler,this._chartComponent);this._statesManager.addStatesChangeHandler(this._statesManager.CHANGESERIESVISIBILITY,this._legendComponent.statesChangeHandler,this._legendComponent)},_buildStates:function(){var w=this._xychart_options._additional;w.statesManagerId=n.register(n.newId(),this._statesManager);var u=this._statesManager.getStatesItemValue(this._statesManager.CHANGESERIESVISIBILITY);var t=this._xychart_options.measures;for(var v=0,s=this._metaData.measureMembers.length;v<s;v++){var x=d.extend(true,{},t[v]);if(u[v]!==undefined){}else{if(x.visible!==undefined){u[v]=x.visible}else{u[v]=true}}}},_resolveThemeAndProperties:function(u,v,J){var I=k.getThemeSettings(J);if(b.isUndefined(I)){return}var z=I.global;v.background=v.background||{};u.background.color=v.background.color||I.background;var F=I.legend;var A=d.extend(true,{},z,F.title);var D=d.extend(true,{},z,F.label);v.legend=v.legend||{};u.legend.titleFont=v.legend.titleFont||(A["font-weight"]+" "+A["font-size"]+" "+A["font-family"]);u.legend.titleColor=v.legend.titleColor||(A.color);u.legend.labelFont=v.legend.labelFont||(D["font-weight"]+" "+D["font-size"]+" "+D["font-family"]);u.legend.labelColor=v.legend.labelColor||(D.color);var x=d.extend(true,{},z,I.title.mainTitle);var C=d.extend(true,{},z,I.title.subTitle);v.title=v.title||{};v.title.main=v.title.main||{};u.title.main.font=v.title.main.font||(x["font-weight"]+" "+x["font-size"]+" "+x["font-family"]);u.title.main.color=v.title.main.color||(x.color);v.title.sub=v.title.sub||{};u.title.sub.font=v.title.sub.font||(C["font-weight"]+" "+C["font-size"]+" "+C["font-family"]);u.title.sub.color=v.title.sub.color||(C.color);var E=I.bar;v.bar=v.bar||{};u.bar.isShowGradient=v.bar.isShowGradient||E.isShowGradient;u.bar.isShowInnerBorder=v.bar.isShowInnerBorder||E.isShowInnerBorder;u.bar.isShowOutBorder=v.bar.isShowOutBorder||E.isShowOutBorder;u.bar.isShowShadow=v.bar.isShowShadow||E.isShowShadow;var t=I.line;v.line=v.line||{};u.line.isShowLineShadow=(v.line.isShowLineShadow||t.line.isShowShadow);u.line.isShowMarkerShadow=(v.line.isShowMarkerShadow||t.marker.isShowShadow);u.line.lineThickness=(v.line.lineThickness||t.line.size);u.line.lineMarkerSize=(v.line.lineMarkerSize||t.marker.size);var L=I.axis;var w=d.extend(true,{},z,L.title);var K=d.extend(true,{},z,L.label);if(b.isUndefined(v.xAxis)){v.xAxis=[{}]}for(var G=0,H=v.xAxis.length;G<H;G++){var s=u.xAxis[G];var B=v.xAxis[G];this._resolveAxisThemeAndProperties(s,B,w,K,L.lineColor);B.gridLine=B.gridLine||{};s.gridLine=s.gridLine||{};s.gridLine.majorColor=B.gridLine.majorColor||L.xAxisMajorGridLine.color;s.gridLine.majorThickness=B.gridLine.majorThickness||L.xAxisMajorGridLine.thickness;s.gridLine.minorColor=B.gridLine.minorColor||L.xAxisMinorGridLine.color;s.gridLine.minorThickness=B.gridLine.minorThickness||L.xAxisMinorGridLine.thickness;s.gridLine.subColor=B.gridLine.subColor||L.xAxisSubGridLine.color}if(b.isUndefined(v.yAxis)){v.yAxis=[{}]}for(var G=0,H=v.yAxis.length;G<H;G++){var s=u.yAxis[G];var B=v.yAxis[G];this._resolveAxisThemeAndProperties(s,B,w,K,L.lineColor);B.gridLine=B.gridLine||{};s.gridLine=s.gridLine||{};s.gridLine.majorColor=B.gridLine.majorColor||L.yAxisMajorGridLine.color;s.gridLine.majorThickness=B.gridLine.majorThickness||L.yAxisMajorGridLine.thickness;s.gridLine.minorColor=B.gridLine.minorColor||L.yAxisMinorGridLine.color;s.gridLine.minorThickness=B.gridLine.minorThickness||L.yAxisMinorGridLine.thickness;s.gridLine.subColor=B.gridLine.subColor||L.yAxisSubGridLine.color}},_resolveAxisThemeAndProperties:function(u,w,v,t,s){w=w||{};u.titleFont=(w.titleFont||v["font-weight"]+" "+v["font-size"]+" "+v["font-family"]);u.titleColor=(w.titleColor||v.color);u.labelFont=(w.labelFont||t["font-weight"]+" "+t["font-size"]+" "+t["font-family"]);u.labelColor=(w.labelColor||t.color);u.lineColor=(w.lineColor||s)},_createCustomizedLegendRenderer:function(t){var s=this._xychart_options.legend;if(s&&b.isFunction(s.renderer)){return new s.renderer(t)}return null},_initSubComponents:function(){this.autoresizeSubComponents(false);var t=this.size();this._layoutMgr=new q(this,t,this._xychart_options);this._backgroundComponent=new c({enable:true,anchor:{x:0,y:0},position:{x:0,y:0},size:{w:t.width,h:t.height},backgroundOptions:this._xychart_options.background,id:"backgroundComponent"});this.addSubComponent(this._backgroundComponent);this._titleComponent=new a({enable:true,anchor:{x:0,y:0},position:{x:0,y:0},size:{w:t.width,h:t.height},titleOptions:this._xychart_options.title,id:"xyChartTitleComponent"});this._chartComponent=new e({enable:true,anchor:{x:0,y:0},position:{x:0,y:0},size:{w:t.width,h:t.height},chart:{metaData:this._metaData,dataTree:this._dataTree,chartModule:this._chartModule,properties:this._xychart_options},id:"xyChartPlotComponent"});var s={enable:true,anchor:{x:0,y:0},position:{x:0,y:0},size:{w:t.width,h:t.height},legendOptions:{properties:this._xychart_options},id:"xyChartLegendComponent"};this._legendComponent=this._createCustomizedLegendRenderer(s);if(this._legendComponent==null){this._legendComponent=new f(s)}if(b.isDefined(this._xychart_options.measure.visibilityChangeable)&&this._xychart_options.measure.visibilityChangeable){this._legendComponent.setStateChangeable(true)}},doContentResize:function(t,s){this.callParent("doContentResize",t,s);this._layoutMgr.resize(s);this._relayout()},_attach_additional_properties:function(){if(this._xychart_options){var z=this._xychart_options;var v=z._additional?z._additional.statesManagerId:undefined;delete z._additional;var L={};L.statesManagerId=v;var D=[];var u=[];var t=[];var s=z.measureDefault.colors;var B=z.measureDefault.numberFormats;var w=z.measure;var J=this._getEffectiveLables();var K=z.bar;var I=z.line;var F=z.measures||{};var x=this._metaData.measureMembers;for(var G=0,H=J.length;G<H;G++){var E=F[G]||{};if(E.type==="bar"||w.type==="bar"){E=d.extend(true,{},K,E)}else{E=d.extend(true,{},I,E)}D.push(b.isExist(E.fillColor)?E.fillColor:s[G%s.length]);if(z.type==="bar"||w.type==="bar"||z.type==="stackedBar"||z.type==="stackedColumn"){t.push("rect")}else{if(z.type==="bubble"){t.push("circle")}else{if(b.isExist(E.type)&&E.type==="bar"){t.push("rect")}else{if(b.isExist(E.markerSymbol)){t.push(E.markerSymbol)}else{t.push("circle")}}}}}var A=z.legend.formatString;for(var G=0,C=A.length,H=J.length;G<H;G++){if(G<C){u.push(A[G])}else{u.push(A[C-1])}}L.colorList=D;L.legendNumberFormat=u;L.legendLabels=J;L.legendMarkers=t;this._xychart_options._additional=L}},_getEffectiveLables:function(){var t=this._dataTree;var u=this._xychart_options.measures||{};var x=this._metaData.measureMembers;var A=[],w;var z=x.length;var s=true;for(var v=0;v<z;v++){s=(b.isExist(u[v])&&b.isExist(u[v].visible))?u[v].visible:true;A.push({category:x[v].value,visible:s})}return A},_processLayoutOfComponent:function(t,s){if(!s){t.detachFromSuperComponent()}else{r.debug("chartComponent["+this.id()+"]subComponent["+t.getCanvasSurface().getRootLayer().id()+"]initialized.","perf");if(!t.superComponent()){this.addSubComponent(t)}t.position({x:s[0],y:s[1],});t.size({width:s[2],height:s[3],})}},_relayout:function(s){if(this._layoutMgr.isLayoutChanged()||s){this._layoutMgr.addLayoutComponent(this._layoutMgr.supportedLayoutComponent.background,this._backgroundComponent);this._layoutMgr.addLayoutComponent(this._layoutMgr.supportedLayoutComponent.title,this._titleComponent);this._layoutMgr.addLayoutComponent(this._layoutMgr.supportedLayoutComponent.legend,this._legendComponent);this._layoutMgr.addLayoutComponent(this._layoutMgr.supportedLayoutComponent.plot,this._chartComponent);this._layoutMgr.layout()}},applyTheme:function(t){var s=this._xychart_options;this._setThemes(s,t);this.updateProperties(s)},_setThemes:function(J,C){var w=k.getThemeSettings(C);if(b.isUndefined(w)){return}var D=w.global;J.background.color=w.background;var H=w.legend;var u=d.extend(true,{},D,H.title);var s=d.extend(true,{},D,H.label);J.legend.titleFont=(u["font-weight"]+" "+u["font-size"]+" "+u["font-family"]);J.legend.titleColor=(u.color);J.legend.labelFont=(s["font-weight"]+" "+s["font-size"]+" "+s["font-family"]);J.legend.labelColor=(s.color);var v=d.extend(true,{},D,w.title.mainTitle);var z=d.extend(true,{},D,w.title.subTitle);J.title.main.font=(v["font-weight"]+" "+v["font-size"]+" "+v["font-family"]);J.title.main.color=(v.color);J.title.sub.font=(z["font-weight"]+" "+z["font-size"]+" "+z["font-family"]);J.title.sub.color=(z.color);var I=w.bar;J.bar.isShowGradient=I.isShowGradient;J.bar.isShowInnerBorder=I.isShowInnerBorder;J.bar.isShowOutBorder=I.isShowOutBorder;J.bar.isShowShadow=I.isShowShadow;var F=w.line;J.line.isShowLineShadow=F.line.isShowShadow;J.line.isShowMarkerShadow=F.marker.isShowShadow;J.line.lineThickness=F.line.size;J.line.lineMarkerSize=F.marker.size;var E=w.axis;var x=d.extend(true,{},D,E.title);var B=d.extend(true,{},D,E.label);if(b.isExist(J.xAxis)){for(var A=0,G=J.xAxis.length;A<G;A++){var t=J.xAxis[A];this._setAxisThemes(t,x,B,E.lineColor);t.gridLine=t.gridLine||{};t.gridLine.majorColor=E.xAxisMajorGridLine.color;t.gridLine.majorThickness=E.xAxisMajorGridLine.thickness;t.gridLine.minorColor=E.xAxisMinorGridLine.color;t.gridLine.minorThickness=E.xAxisMinorGridLine.thickness;t.gridLine.subColor=E.xAxisSubGridLine.color}}if(b.isExist(J.yAxis)){for(var A=0,G=J.yAxis.length;A<G;A++){var t=J.yAxis[A];this._setAxisThemes(t,x,B,E.lineColor);t.gridLine=t.gridLine||{};t.gridLine.majorColor=E.yAxisMajorGridLine.color;t.gridLine.majorThickness=E.yAxisMajorGridLine.thickness;t.gridLine.minorColor=E.yAxisMinorGridLine.color;t.gridLine.minorThickness=E.yAxisMinorGridLine.thickness;t.gridLine.subColor=E.yAxisSubGridLine.color}}},_setAxisThemes:function(u,v,t,s){u.titleFont=v["font-weight"]+" "+v["font-size"]+" "+v["font-family"];u.titleColor=v.color;u.labelFont=t["font-weight"]+" "+t["font-size"]+" "+t["font-family"];u.labelColor=t.color;u.lineColor=s},updateProperties:function(t){var s=this._propsMgr.properties(t);this._xychart_options=d.extend(true,this._xychart_options,s);this._attach_additional_properties();this._buildStates();this._layoutMgr.updateProperties(this._xychart_options);this._relayout(false);this._backgroundComponent.updateProperties(this._xychart_options);this._chartComponent.updateProperties(this._xychart_options);this._titleComponent.updateProperties(this._xychart_options);this._legendComponent.updateProperties(this._xychart_options)},getProperties:function(){return this._propsMgr.properties()},getAllProperties:function(){return this._xychart_options},setDataset:function(w){this._dataTree=w.dataTree;this._metaData=w.metaData;this._attach_additional_properties();this._buildStates();this._xychart_options._additional.data=w.data;this._relayout(false);this._chartComponent.updateOptions({metaData:this._metaData,dataTree:this._dataTree,properties:this._xychart_options});var u=[];var z=this._xychart_options.measureDefault.colors;var A=this._metaData.measureMembers;var v=this._xychart_options.measures||{};for(var t=0,s=A.length;t<s;t++){var x=v[t]||{};u.push(b.isExist(x.fillColor)?x.fillColor:z[t%z.length])}this._legendComponent.updateOptions({labels:A,legendTitle:this._metaData.dimension[0],colorList:u,properties:this._xychart_options})},getOptions:function(){return this._xychart_options},getSupportedAppEvents:function(){return this._chartComponent.getSupportedAppEvents()},doPrint:function(s){},selectData:function(t,s){this._chartComponent.selectData(t,s)},unSelectData:function(t,s){this._chartComponent.unSelectData(t,s)}});return h});sap.riv.module({qname:"sap.riv.viz.shared.axis.DimensionAxisRenderer",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TextRuler",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.graphics.shape.TextLine",version:"3.4.0"},{qname:"sap.riv.viz.shared.axis.BasicAxisRenderer",version:"3.4.0"},{qname:"sap.riv.viz.shared.utils.NumericFormatUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.axis.PositionCalculator",version:"3.4.0"}],function Setup(h,d,c,e,b,f,g){var a=h.derive(b,{constructor:function(j){this._daxr_initialize();this._textMargin={top:4,left:2,right:2,bottom:3}},getTitleMargin:function(){var j=this.getOptions();if(j.titleMargin!=null){return j.titleMargin}else{return{top:3,right:3,bottom:3,left:3}}},getMaxValue:function(){var k=0;var j=this.getOptions();if(j!=null&&j.labels!=null){k=j.labels.length}return k+1},getMinValue:function(){return 0},_daxr_initialize:function(){this._maxValue=this.getMaxValue();this._minValue=this.getMinValue();for(var j=0;j<this._baxr_options.labels.length;j++){if(!c.isExist(this._baxr_options.labels[j])){this._baxr_options.labels[j]=""}}this._hideOverlappingLabels=false},_getLargestHeight:function(){if(!c.isExist(this._largestHeight)||this._largestHeight==0){var q=d.measureHeight(this._labels.font);var l=0;for(var m=0,o=this._baxr_options.labels,j=o.length;m<j;m++){var n=(o[m]==null)?"":o[m].toString();var k=n.split("\n");if(k.length>l){l=k.length}}this._largestHeight=q*l}return this._largestHeight},_getLongestWidth:function(){if(!c.isExist(this._longestWidth)||this._longestWidth==0){var n=d;var o;var l,q=0;for(var m=0,r=this._baxr_options.labels,k=r.length;m<k;m++){var j=f.getFormatString(this._labels.formatString,m);l=f.formatToText(r[m],j,true);o=this._measureLabelWidth(l);if(o>q){q=o}}this._longestWidth=q}return this._longestWidth},_measureLabelWidth:function(m){m=(m==null)?"":m.toString();var k=m.split("\n");var n=0;for(var l=0;l<k.length;l++){var j=d.measureWidth(this._labels.font,k[l]);if(j>n){n=j}}return n},_createLabelsAndPosition:function(){var n=this._baxr_options;var l=this._labels.itemsValue;var k=this._labels.itemsPosition=[];var r=this._calculatePositionMultiplier();for(var m=0,q=n.labels;m<q.length;m++){l[m]=new this.Label();var j=f.getFormatString(this._labels.formatString,m);var o=f.formatToTextWithColor(q[m],j,true);l[m].value(o.text);l[m].formatColor(o.color);l[m].visible(true);k[m]=g.calculateLinearPosition(m+1,r,this._minValue)}},_drawLabel:function(m,v,w,t,o,l){var z=v.value();if(z==null){return}var j=v.formatColor();j=j?j:this._labels.color;var A=z.split("\n");var s=d.measureHeight(this._labels.font);var r=this._measureLabelWidth(z);var u=(this._direction=="horizontal");var v;var q;var n=A.length;for(var k=0;k<n;k++){v=m.addShape(new e());l.push(v);v.visible(true).text(A[k]).font(this._labels.font).textColor(j);q=d.measureWidth(this._labels.font,A[k]);v.width(q);if(u){if(this._position=="vl"){v[o]([w-(r-q)/2,t+s*(k+0.5-n/2)])}else{v[o]([w,t+s*k])}}else{v.translate(w+s*(k+0.5-n/2),t+(r-q)/2).rightCenter([0,0]).rotate(-Math.PI/2)}}},distance:function(j){if(c.isExist(j)){this._distance=j;this._createLabelsAndPosition();if(this._hideOverlappingLabels){this._removeOverlappingLabels(this._labels.itemsPosition.length)}this._updateAxisMetrics();return this}return this._distance},_updateAxisMetrics:function(){if(this._position=="hb"||this._position=="ht"){this._axisMatrics.left=this._axisMatrics.right=0}else{this._axisMatrics.bottom=this._axisMatrics.top=0}},zoom:function(k,j,n){this._scaled=true;this._positionMultiplier=null;this._majorTickPositions=null;this._minorTickPositions=null;var l=this.getSubLayer();var m=l.size();l.size({height:m.height*j,width:m.width*k});this.distance(this._distance*n);this.draw()},setVisibleRange:function(k,j,n){this._scaled=true;this._positionMultiplier=null;this._majorTickPositions=null;this._minorTickPositions=null;var l=this.getSubLayer();var m=this._layer.size();l.size({height:m.height*j,width:m.width*k});this.distance(this._distance*n)},_showLabels:function(){var m=this.callParent("_showLabels");if(!m){return false}var n=true,l,k,j=this._baxr_options.labels;if(j&&j.length>0){for(l=0,k=j.length;l<k;l++){if(j[l]!==null&&j[l]!==undefined&&j[l]!==""){n=false;break}}}return !n}});return a});sap.riv.module({qname:"sap.riv.viz.pie.PieModule",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.pie.BasicModule",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.PieRenderer",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.Series",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.SeriesGroup",version:"3.4.0"}],function Setup(f,b,a,e,c,g){var d=f.derive(a,{events:["selectData","unSelectData"],constructor:function(h){this._seriesGroup=null;this._pieRenderer=null;this._hasDrawed=false},buildData:function(){this._data=[];var q=this._dataTree.getSubMembersAt();var o=this._dataTree.getSubMemberLabels();var n=[];for(var r=0,t=this._metaData.measureMembers.length;r<t;r++){var h=this._metaData.measureMembers[r];for(var m=0,z=q.length;m<z;m++){var l=[q[m]];var s=this._dataTree.getMeasuresAt(l)[h.key].sum;n.push(s.result)}}this._processData(n);for(r=0,t=this._metaData.measureMembers.length;r<t;r++){var v=[];var h=this._metaData.measureMembers[r];for(var m=0,A=q.length;m<A;m++){var u=[q[m]];var k=this._dataTree.getMeasuresAt(u)[h.key].sum;var x=k.tags.dimensionPath;var w=n[m];v.push({value:b.isNumber(w)?w:"NaN",dimensionItemIndex:x[x.length-1].dimensionItemIndex,dimensionPath:x,measureIndex:k.tags.measureIndex,measureKey:h.key,dimensionItem:b.isExist(o[m].value)?o[m].value:o[m]})}this._data.push(v)}},_processData:function(m){var l=m.slice();l.sort(function(o,n){return o-n});var k=l[l.length-1];for(var j=0,h=m.length;j<h;j++){if((Math.abs(m[j]/k)-0.0001)<0){m[j]=0}}},initSeries:function(){var v=this._chart_options.properties.measures;var m=this._metaData.measureMembers;var l=this._chart_options.properties.measureDefault;this._seriesGroup=new g();this._alertObjsAll=[];var q=this._chart_options.properties._additional.alertUtils;for(var r=0,u=this._metaData.measureMembers.length;r<u;r++){var k=f.extend(true,{},l,v[r]);var z=new c(k);z.setName(m[r].value);var h=[];var x=this._data[r];for(var n=0,w=x.length;n<w;n++){var t=x[n];if(t.value!=="NaN"){this._alertObjsAll.push(q.applyAlertRules(t));h.push(t)}}z.setData(h);this._seriesGroup.addSeries(z)}},bindRenderer:function(h){if(this._pieRenderer==null){this._pieRenderer=new e(h,this._chart_options,false)}else{this._pieRenderer.resetSeriesGroups()}this._pieRenderer.addSeriesGroup(this._seriesGroup)},drawSeries:function(m){this._pieRenderer.setAlertObj(this._alertObjsAll);if(!this._hasDrawed){this._pieRenderer.draw();this._hasDrawed=true}else{this._pieRenderer.redraw()}if(this._defaultSelectionArmed){var h=this._chart_options.properties.selectedDataIndexes;if(this._chart_options.properties.allSelectable&&h.length>0){for(var j=0;j<h.length;j++){if(!this._pieRenderer._shapes.pieSectors[h[j]]){continue}if(this._chart_options.properties.selectionMode.toLowerCase()==="single"&&j===1){break}this._pieRenderer._selectPie(h[j]);this._pieRenderer._interactionStatus.selected.push(h[j])}}this._defaultSelectionArmed=false}else{var l=this._pieRenderer._interactionStatus.selected;if(b.isExist(l)&&l.length>0){for(var k=0;k<l.length;k++){if(this._chart_options.properties.selectionMode.toLowerCase()==="single"&&k===1){break}this._pieRenderer._selectPie(l[k],m)}}}},doChartLayout:function(k,h,j){h.size(k);h.position({x:0,y:0});j.size(k);j.position({x:0,y:0})},updateProperties:function(v){this.callParent("updateProperties",v);this._pieRenderer.updateProperties(v);var r=this._chart_options.properties.measures;var s=this._chart_options.properties.measureDefault;var m=[];for(var n=0,q=r.length;n<q;n++){var h=f.extend(true,{},s,r[n]);m.push(h)}this._alertObjsAll=[];var l=this._chart_options.properties._additional.alertUtils;for(var n=0,q=this._metaData.measureMembers.length;n<q;n++){var u=this._data[n];for(var k=0,t=u.length;k<t;k++){var o=u[k];if(o.value!=="NaN"&&o.value>0){this._alertObjsAll.push(l.applyAlertRules(o))}}}this._seriesGroup.updateProperties(m)},getSupportedAppEvents:function(){return["selectData","unSelectData"]},_fireSelectDataEvt:function(h){this.fireEvent("selectData",{name:"selectData",data:h})},selectData:function(q,l){if(this._pieRenderer==null){f.error("No renderer to handle selectData!")}for(var m=0,k=q.length;m<k;m++){var h=q[m];if(!b.isExist(h.measureIndex)){h.measureIndex=0}}var r=this._chart_options.properties.selectionMode;if(r==="single"){q=q.slice(0,1)}var o=[];for(var n=0;n<q.length;n++){var h=this._pieRenderer.selectData(q[n]);if(h&&h.SelectDataContext&&h.SelectDataContext.length>0){o.push(h.SelectDataContext)}}if(o.length>0){if(!(b.isDefined(l)&&l===true)){h=o[o.length-1];this._fireSelectDataEvt(h)}}},unSelectData:function(m,j){if(this._pieRenderer==null){f.error("No renderer to handle selectData!")}var l=[];for(var k=0;k<m.length;k++){var h=this._pieRenderer.unSelectData(m[k]);if(b.isDefined(h)){l.push(h)}}if(!(b.isDefined(j)&&j===true)){if(l.length>0){this.fireEvent("unSelectData",{name:"unSelectData",data:l})}}},clickOnPoint:function(h){if(this._pieRenderer==null){f.error("No renderer to handle event!")}var j=this._pieRenderer.highlightOnPoint(h);if(!b.isExist(j)){return}if(j.SelectDataContext&&(j.SelectDataContext.length>0)){this.fireEvent("selectData",{name:"selectData",data:j.SelectDataContext})}if(j.unSelectDataContext&&(j.unSelectDataContext.length>0)){this.fireEvent("unSelectData",{name:"unSelectData",data:j.unSelectDataContext})}},hoverOnPoint:function(h){if(this._pieRenderer==null){f.error("No renderer to handle event!")}this._pieRenderer.hoverOnPoint(h)},applyTheme:function(h){this._pieRenderer.applyTheme(h)},updateOptions:function(h){this.callParent("updateOptions",h);this._pieRenderer.updateOptions(h)},});return d});sap.riv.module({qname:"sap.riv.viz.pie.PiePlotComponent",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.Logger",version:"3.4.0"},{qname:"sap.riv.vizkit.UIComponent",version:"3.4.0"},{qname:"sap.riv.vizkit.Canvas2DSurfaceComponent",version:"3.4.0"},{qname:"sap.riv.graphics.Layer",version:"3.4.0"},{qname:"sap.riv.viz.pie.MultiPieModule",version:"3.4.0"},{qname:"sap.riv.viz.pie.PieModule",version:"3.4.0"}],function Setup(g,b,c,f,h,a,e){var d=g.derive(f,{constructor:function(j){this._canvasSurface=this.getCanvasSurface();this._rootLayer=this._canvasSurface.getRootLayer();this._chart_options=j.chart;this._metaData=this._chart_options.metaData;this._dataTree=this._chart_options.dataTree;this._seriesLayer=null;this._seriesMaskLayer=null;this._chartModule=null;this._init(false)},_init:function(j){if(!j){this._initModule()}this._chartModule.init();if(!j){this._seriesMaskLayer=new h({anchor:{x:0,y:0}});this._seriesMaskLayer.clipToBounds(true);this._rootLayer.addSubLayer(this._seriesMaskLayer);this._seriesLayer=new h({anchor:{x:0,y:0}});this._seriesMaskLayer.addSubLayer(this._seriesLayer)}this._chartModule.bindRenderer(this._seriesLayer);if(!j){this._registerEvents()}},_initModule:function(){switch(this._chart_options.properties.type){case"multipie":this._chartModule=new a(this._chart_options);break;case"pie":default:this._chartModule=new e(this._chart_options);break}},_chart_layout:function(j){this._chartModule.doChartLayout(j,this._seriesMaskLayer,this._seriesLayer)},_doDraw:function(j,k){this._chart_layout(j);this._chartModule.drawSeries(k);this._rootLayer.setNeedsDisplay();if(k&&this._currentPosition){if(this._chartModule._pieRenderer){this._chartModule._pieRenderer.hoverOnPoint(this._currentPosition,true)}}},_resetEventStatusVariables:function(){this._mouseAlreadyDown=false;this._mouseAlreadyMoved=false;this._mouseMoveThreshold=0.3;this._previousMousePosition=undefined},_registerEvents:function(){this._resetEventStatusVariables();this._seriesMaskLayer.on([{eventName:"mousemove",listener:this._mouseEventHandler,scope:this},{eventName:"mouseup",listener:this._mouseEventHandler,scope:this},{eventName:"mousedown",listener:this._mouseEventHandler,scope:this},{eventName:"mouseleave",listener:this._mouseEventHandler,scope:this},{eventName:"touchstart",listener:this._touchEventHandler,scope:this},{eventName:"touchend",listener:this._touchEventHandler,scope:this},{eventName:"touchmove",listener:this._touchEventHandler,scope:this},{eventName:"touchcancel",listener:this._touchEventHandler,scope:this}])},_convertXYForMouseEvent:function(m){if(this._seriesLayer==null){g.error("Series Layer should be initialized before any event handler!")}var l=m.targetLocalXY();var j=m.targetLayer();var k=this._seriesLayer.convertPointFromLayer(l,j);return k},_convertXYForTouch:function(m){if(this._seriesLayer==null){g.error("Series Layer should be initialized before any event handler!")}var l=m.localXY();var j=m.targetLayer();var k=this._seriesLayer.convertPointFromLayer(l,j);return k},_mouseEventHandler:function(l){var j=l.type();switch(j){case"mousedown":this._mouseAlreadyDown=true;this._mouseAlreadyMoved=false;break;case"mouseup":this._mouseAlreadyDown=false;if(!this._mouseAlreadyMoved){this._chartModule.clickOnPoint(this._convertXYForMouseEvent(l))}this._mouseAlreadyMoved=false;break;case"mousemove":this._currentPosition=l.targetLocalXY();if(this._previousMousePosition){var k=l.targetLocalXY();if(Math.abs(k.x-this._previousMousePosition.x)>this._mouseMoveThreshold||Math.abs(k.x-this._previousMousePosition.x)>this._mouseMoveThreshold){this._chartModule.hoverOnPoint(this._convertXYForMouseEvent(l));this._previousMousePosition=undefined;this._mouseAlreadyMoved=true}}else{this._previousMousePosition=l.targetLocalXY()}break;case"mouseleave":delete this._currentPosition;this._resetEventStatusVariables();break;default:break}},_touchEventHandler:function(j){var k=j.type();switch(k){case"touchstart":var l=j.targetTouches().item(0);this._currentPosition=l.localXY();this._chartModule.hoverOnPoint(this._convertXYForTouch(l));break;case"touchmove":if(j.targetTouches().length()!=1){return}var l=j.targetTouches().item(0);this._chartModule.hoverOnPoint(this._convertXYForTouch(l));break;case"touchend":if(j.changedTouches().length()!=1){return}var l=j.changedTouches().item(0);this._chartModule.clickOnPoint(this._convertXYForTouch(l));break;case"touchcancel":break;default:break}},doContentResize:function(k,j){this.callParent("doContentResize",k,j);this._doDraw(j)},applyTheme:function(j){this._chartModule.applyTheme(j)},updateProperties:function(j){this._chart_options.properties=j;this._chartModule.updateProperties(j);this._doDraw(this.size(),true)},updateOptions:function(j){this._chart_options=j;this._metaData=j.metaData;this._dataTree=j.dataTree;this._chartModule.updateOptions(this._chart_options);this._init(true);this._doDraw(this.size())},getSupportedAppEvents:function(){return this._chartModule.getSupportedAppEvents()},selectData:function(k,j){this._chartModule.selectData(k,j)},unSelectData:function(k,j){this._chartModule.unSelectData(k,j)},doPrint:function(j){}});return d});sap.riv.module({qname:"sap.riv.viz.shared.legend.LegendCanvasComponent",version:"3.4.0"},[{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TextRuler",version:"3.4.0"},{qname:"sap.riv.vizkit.Canvas2DSurfaceComponent",version:"3.4.0"},{qname:"sap.riv.graphics.Layer",version:"3.4.0"},{qname:"sap.riv.viz.shared.misc.PropsMgr",version:"3.4.0"},{qname:"sap.riv.vizkit.ThemeManager",version:"3.4.0"},{qname:"sap.riv.viz.shared.utils.NumericFormatUtils",version:"3.4.0"},{qname:"sap.riv.graphics.shape.Circle",version:"3.4.0"},{qname:"sap.riv.graphics.shape.TextLine",version:"3.4.0"},{qname:"sap.riv.graphics.shape.Rectangle",version:"3.4.0"},{qname:"sap.riv.graphics.shape.Polygon",version:"3.4.0"},{qname:"sap.riv.viz.shared.utils.ScrollBarRenderer",version:"3.4.0"},{qname:"sap.riv.viz.shared.utils.ColorSeriesGenerator",version:"3.4.0"},{qname:"sap.riv.viz.shared.shape.Triangle",version:"3.4.0"},{qname:"sap.riv.viz.shared.shape.Diamond",version:"3.4.0"},{qname:"sap.riv.viz.shared.shape.Cross",version:"3.4.0"},{qname:"sap.riv.viz.shared.shape.Pentagon",version:"3.4.0"},{qname:"sap.riv.viz.shared.utils.TextProcessor",version:"3.4.0"}],function Setup(o,e,c,n,f,q,t,h,r,m,b,a,l,d,s,g,k,u,w){var v={visible:true,position:"right",verticalOffset:0,horizontalOffset:0,labelFont:"bold 16px Arial",labelColor:"#000000",titleFont:"bold 16px Arial",titleColor:"#000000",formatString:[""]};var x="The quick brown fox jumps over the lazy dog";var j=e.derive(n,{METRICS:{itemLineHeight:1,padding_left:0,padding_right:0,padding_bottom:0,markupSize:0.75,markupMarginRight:0,itemHorizontalSpace:0,itemVerticalSpace:0,titlePadding:0},XC_METRICS:{paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,verticalGap:2,horizontalGap:10,spacing:4},constructor:function(z){this._scrollBar=[];this._options=z.legendOptions.properties.legend;this._isLegendSelectable=false;this._parseOptions(z.legendOptions.properties);this._canvasSurface=this.getCanvasSurface();this._maskLayer=this._canvasSurface.getRootLayer();this._content=null;this._maxLabelHeight=null;this._curmaxLabelHeight=this._maxLabelHeight;this._eventObservers=[];this._stateChangeable=false;this._initScrollBar();this._hasScrollBar=false;this._textProcessor;this._initialize();this._hookEvents()},_parseOptions:function(z){this._titletxt=z._additional.legendTitle||"";this._colorList=z._additional.colorList;this._labels=z._additional.legendLabels;this._labelFont=z.legend.labelFont;this._labelFontColor=z.legend.labelColor;this._titleLabelFont=z.legend.titleFont;this._titleLabelFontColor=z.legend.titleColor;this._markerList=z._additional.legendMarkers||[];this._formatString=z._additional.legendNumberFormat;this._legendFirst=z.layout.legendFirst;this._alertUtils=z._additional.alertUtils},_measureWidth:function(z,A){return c.measureWidth(z,A)+2},_measureHeight:function(z,A){return c.measureHeight(z,A)+2},_measureText:function(z,B){var A=c.measureText(z,B);return{width:A.width+2,height:A.height+2}},_initialize:function(){var E=this._labels;this._title=this._layer.addShape(new m());this._content=[];var z=this._markerList;this._maxLabelHeight=this._measureText(this._labelFont,x).height;this._labelsOfAlert=this._alertUtils.getLegendLablesOfAlert();this._textProcessor=new w();var D;for(var C=0;C<E.length;C++){var B={};B.active=true;B.type="normalLabel";B.labelShape=this._layer.addShape(new m());B.colorListIndex=C;if(!this._legendFirst){D=h.formatToTextWithColor(this._getCategoryText(E[C].category),h.getFormatString(this._formatString,C),true);E[C].category=D.text;E[C].formatColor=D.color}B.measureIndex=E[C].measureIndex;this._createMarkupShape(B,z[C]);B.clickableRegion=this._layer.addShape(new b());this._content.push(B)}for(var A=0;A<this._labelsOfAlert.length;A++){var B={};B.type="alertLabel";B.subLableShape=[];B.labelShape=this._layer.addShape(new m());B.text=this._labelsOfAlert[A].text;B.color=this._labelsOfAlert[A].color;this._createMarkupShape(B,"rect");this._content.push(B)}},_initScrollBar:function(){if(this._scrollBar.length>0){for(var z=0;z<this._scrollBar.length;z++){this._scrollBar[z].remove()}}this._scrollBar=[];this._scrollBar[0]=new l();this._layer=new f({anchor:{x:0,y:0}})},_createMarkupShape:function(A,z){switch(z){case"circle":A.markupShape=this._layer.addShape(new r());break;case"diamond":A.markupShape=this._layer.addShape(new g());break;case"triangle":A.markupShape=this._layer.addShape(new s());break;case"pentagon":A.markupShape=this._layer.addShape(new u());break;case"cross":A.markupShape=this._layer.addShape(new k());break;case"rect":default:A.markupShape=this._layer.addShape(new b());break}},_refresh:function(){this._layer.setNeedsDisplay()},_resetShapes:function(){this._layer.removeShape(this._title);for(var A=0,z=this._content.length;A<z;A++){this._layer.removeShape(this._content[A].labelShape);this._layer.removeShape(this._content[A].markupShape);this._layer.removeShape(this._content[A].clickableRegion)}if(this._scrollBar.length>0){for(var A=0;A<this._scrollBar.length;A++){this._scrollBar[A].remove()}}this._scrollBar=[];this._scrollBar[0]=new l()},_update:function(){var F=this._options;var A=this._markerList;var B=this._maxLabelHeight;var X=this.METRICS;var E=X.itemLineHeight*B;var I=this.XC_METRICS;var ac=I.paddingLeft,z=I.paddingRight,aa=I.paddingTop,K=I.paddingBottom;var H=I.spacing;var R=X.markupSize*B;if(F.position=="right"||F.position=="left"){var V=0;var G=this._chartWidth||0;var J=I.verticalGap;V=this._maxLabelHeight*this._content.length+aa+K+J*(this._content.length-1);var Z=0;var Y=(this._chartHeight-V)/2;Y=Y-F.verticalOffset;if(Y<0){Y=0}var P=Y+aa;var T=this._maxLabelHeight;var O=Z+ac+2;var N=Math.round(Z+ac+R+H);var D=G-(ac+R+H);for(var W=0;W<this._content.length;W++){var C=this._content[W];C.clickableRegion.topLeft([Z,P]).width(G).height(T);this._drawMarkup(A[W],C.markupShape,{x:O+R/2,y:P+T/2},this._colorList[W]);var U=this._labels[W].formatColor?this._labels[W].formatColor:this._labelFontColor;C.labelShape.text(this._getCategoryText(this._labels[W].category)).textAlign("l").font(this._labelFont).textColor(U).leftCenter([N,P+T/2]).width(D);P+=T+J}}else{var S=0,Z=0,Y=0,G;var L=I.horizontalGap;for(var W=0;W<this._content.length;W++){var ab=this._measureWidth(this._labelFont,this._getCategoryText(this._labels[W].category));var M=R+H+ab;S+=M}S+=(this._content.length-1)*L+ac+8;var V=this._maxLabelHeight+8;Z=Z+(this._chartWidth-S)/2;Z=Z+F.horizontalOffset;if(Z<0){Z=0}this._title.text("");var Q=Z;for(var W=0;W<this._content.length;W++){var C=this._content[W];var D=this._measureWidth(this._labelFont,this._getCategoryText(this._labels[W].category));this._drawMarkup(A[W],C.markupShape,{x:Q+ac+R/2,y:Y+V/2},this._colorList[W]);var U=this._labels[W].formatColor?this._labels[W].formatColor:this._labelFontColor;C.labelShape.text(this._getCategoryText(this._labels[W].category)).textAlign("l").font(this._labelFont).textColor(U).leftCenter([Q+ac+R+H,Y+V/2]).width(D);G=ac+R+H+D;C.clickableRegion.topLeft([Q,Y]).width(G).height(V);Q+=G+L}}this._hasScrollBar=false;this._updateLabelStatus();this._refresh()},_getCategoryText:function(z){if(z==null){return""}else{if(o.isPlainObject(z)){if(o.isExist(z.value)){return z.value}else{return""}}else{return z}}},_updateLabelStatus:function(){var E=this._labels;var D=this._content;var B,A;for(var C=0,z=E.length;C<z;C++){B=E[C].visible;A=D[C].active;if(B!==A){if(B===false){this._deactivateItem(C)}else{this._activateItem(C)}D[C].active=E[C].visible}}},_drawMarkup:function(A,z,D,C){var B=this._maxLabelHeight*this.METRICS.markupSize;switch(A){case"triangle":case"diamond":case"pentagon":case"cross":z.reset();z.fillingColor(C);z.size(B).centerPoint(D);z.doDrawShape();z.close();break;case"circle":z.fillingColor(C).center(D).radius(B/2);break;case"rect":default:z.topLeft([D.x-B/2,D.y-B/2]).width(B).height(B);z.color(C);break}},doContentResize:function(A,z){this.callParent("doContentResize",A,z);this._chartHeight=z.height;this._chartWidth=z.width;this._layer.position({x:0,y:0});this._layer.size({width:this._chartWidth,height:this._chartHeight});this._maskLayer.addSubLayer(this._layer);this._update()},updateOptions:function(z){this._parseOptions(z.properties);this._resetShapes();this._title=null;this._content=null;this._initialize();this._update()},updateProperties:function(E){var C=this._markerList;this._options=E.legend;this._parseOptions(E);for(var B=0,z=C.length;B<z;B++){if(C[B]!==this._markerList[B]){var A=this._content[B];this._layer.removeShape(A.markupShape);this._layer.removeShape(A.clickableRegion);this._createMarkupShape(A,this._markerList[B])}}this._maxLabelHeight=this._measureText(this._labelFont,x).height;var F=this._labels;if(!this._legendFirst){var D;for(var B=0;B<F.length;B++){D=h.formatToTextWithColor(this._getCategoryText(F[B].category),h.getFormatString(this._formatString,B),true);F[B].category=D.text;F[B].formatColor=D.color}}this._update()},doPrint:function(z){z.drawImage(this._canvasElement,0,0)},calMaxLegendSize:function(L){var H=L.legend.labelFont;var G=0,z=0;var I=0,C=0,B;var F=L._additional.legendLabels;var E=F.length;var K;for(var D=0;D<E;D++){K=h.formatToTextWithColor(this._getCategoryText(F[D].category),h.getFormatString(L._additional.legendNumberFormat,D),true);F[D].category=K.text;F[D].formatColor=K.color;B=this._measureText(H,F[D].category);C=B.height;I=B.width;if(C>G){G=C}if(I>z){z=I}}var A=this.METRICS.markupSize;var J=z+A*G+this.XC_METRICS.paddingLeft+this.XC_METRICS.spacing+this.XC_METRICS.paddingRight+2;return{width:J,height:G+this.XC_METRICS.paddingTop+this.XC_METRICS.paddingBottom}},addEventObserver:function(z){this._eventObservers.push(z)},getStateChangeable:function(){return this._stateChangeable},setStateChangeable:function(z){this._stateChangeable=z},_hookEvents:function(){this._layer.on([{eventName:"mouseup",listener:this._dispatchEvent,scope:this},{eventName:"touchstart",listener:this._dispatchEvent,scope:this},{eventName:"touchend",listener:this._dispatchEvent,scope:this},{eventName:"touchmove",listener:this._dispatchEvent,scope:this},{eventName:"mousemove",listener:this._dispatchEvent,scope:this},{eventName:"mousedown",listener:this._dispatchEvent,scope:this},{eventName:"mouseleave",listener:this._dispatchEvent,scope:this},{eventName:"touchcancel",listener:this._dispatchEvent,scope:this}])},_dispatchEvent:function(A){var z=A.type();switch(z){case"mousedown":this._mouseDown=true;this._mouseMove=false;this._previousPosition=undefined;this._hoveredSeriesIndex=undefined;this._handleHighlightItem(A.targetLocalXY());break;case"touchstart":this._mouseDown=true;this._mouseMove=false;this._previousPosition=undefined;this._hoveredSeriesIndex=undefined;this._handleHighlightItem(A.targetTouches().item(0).localXY());break;case"mousemove":this._handleMouseMove(A.targetLocalXY());break;case"touchmove":this._handleMouseMove(A.targetTouches().item(0).localXY());break;case"mouseup":if(!this._mouseMove){this._handleClick(A.targetLocalXY())}this._handleCompleted();break;case"touchend":if(!this._mouseMove){this._handleClick(A.changedTouches().item(0).localXY())}if(this._hasScrollBar){this._scrollBar[0].unHighLight()}this._handleCompleted();break;case"mouseleave":case"touchcancel":if(this._hasScrollBar){this._scrollBar[0].unHighLight()}this._handleCompleted();break;default:break}},_handleCompleted:function(){if(o.isDefined(this._hoveredSeriesIndex)){this._content[this._hoveredSeriesIndex].clickableRegion.color(false);this._refresh()}this._previousPostion=undefined;this._hoveredSeriesIndex=undefined;this._mouseDown=false;this._mouseMove=false},_handleMouseMove:function(C){if(this._hasScrollBar){this._scrollBar[0].highLight()}if(this._mouseDown&&this._hasScrollBar){this._mouseMove=true;if(o.isDefined(this._previousPosition)){var A=this._layer.position();if(this._options.position=="right"||this._options.position=="left"){if(Math.abs(C.y-this._previousPosition.y)>5){var z=A.y+C.y-this._previousPosition.y;var D=this._layer.height()-this._maskLayer.height();if((z>0)&&(A.y<0)){z=0}if(!(z>0)&&(Math.abs(z)<D)){this._layer.position({x:A.x,y:z});this._scrollBar[0].update();this._previousPosition=undefined}}}else{if(Math.abs(C.x-this._previousPosition.x)>5){var B=A.x+C.x-this._previousPosition.x;var D=this._layer.width()-this._maskLayer.width();if((B>0)&&(A.x<0)){B=0}if(!(B>0)&&(Math.abs(B)<D)){this._layer.position({x:B,y:A.y});this._scrollBar[0].update();this._previousPosition=undefined}}}}else{this._previousPosition=e.extend(true,{},C)}}else{this._handleHighlightItem(C)}this._refresh()},_handleHighlightItem:function(z){var B;if(this._isLegendSelectable){for(var A=0;A<this._content.length;A++){B=this._content[A].clickableRegion;if(o.isExist(this._content[A].clickableRegion)&&this._content[A].clickableRegion.doPointInTest(z)){if(this._hoveredSeriesIndex==A){return}if(o.isExist(this._hoveredSeriesIndex)){this._content[this._hoveredSeriesIndex].clickableRegion.color(false)}this._hoveredSeriesIndex=this._content[A].colorListIndex;B.color(this._labelFontColor).compositionMode({alpha:0.15})}}}},_handleClick:function(z){if(!this._stateChangeable){return}var B=new Object();B.commandText="ChangeSeriesVisibility";for(var A=0;A<this._content.length;A++){if(this._content[A].clickableRegion.doPointInTest(z)){B.seriesIndex=this._content[A].colorListIndex;if(this._content[A].active){this._content[A].active=false;B.setVisible=false;this._deactivateItem(B.seriesIndex)}else{this._content[A].active=true;B.setVisible=true;this._activateItem(B.seriesIndex)}}}this._refresh();if(!o.isDefined(B.seriesIndex)){return}for(A=0;A<this._eventObservers.length;A++){this._eventObservers[A].notify(B)}},_activateItem:function(A){var C=this._content[A];var B=this._labels[A];var z=B.formatColor?B.formatColor:this._labelFontColor;C.labelShape.textColor(z).compositionMode({alpha:1});z=this._colorList[A];(o.isExist(C.markupShape.fillingColor))?C.markupShape.fillingColor(z):C.markupShape.color(z);C.markupShape.compositionMode({alpha:1})},_deactivateItem:function(B){var D=this._content[B];var C=this._labels[B];var A=C.formatColor?C.formatColor:this._labelFontColor;var z=d.getUnsaturatedColor(A);D.labelShape.textColor(z).compositionMode({alpha:0.35});(o.isExist(D.markupShape.fillingColor))?D.markupShape.fillingColor(z):D.markupShape.color(z);D.markupShape.compositionMode({alpha:0.15})}});j.getDefaultOption=function(){return v};return j});sap.riv.module({qname:"sap.riv.viz.shared.utils.AlertUtils",version:"3.4.0"},[{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.ArrayUtils",version:"3.4.0"}],function Setup(a,c){var b=function(){this._measureMembers=null;this._options=null};auProp=b.prototype;auProp.parseOptions=function(d){this._options=d};auProp.getOptions=function(){return this._options};auProp.setMeasureMembers=function(d){this._measureNames=[];this._measureKeys=[];for(var e=0;e<d.length;e++){this._measureNames[d[e].key]=d[e].value;this._measureKeys[e]=d[e].key}c.unique(this._measureNames);c.unique(this._measureKeys)};auProp.getLegendLablesOfAlert=function(){var e;var l,n=[];var h=this._options;if(a.isExist(this._measureNames)){for(var g=0;g<h.length;g++){var m=a.isExist(h[g].measureTargets)?h[g].measureTargets:this._measureKeys;for(var f=0;f<m.length;f++){if(a.isExist(m[f])&&m[f].trim()!=""){e=m[f];for(var d=0;d<h[g].Ranges.length;d++){l=this._measureNames[e];if(h[g].Ranges[d].min.value==Number.NEGATIVE_INFINITY){if(h[g].Ranges[d].max.value==Number.POSITIVE_INFINITY){n.push({text:l,color:h[g].Ranges[d].color})}else{l+=" "+(h[g].Ranges[d].max.include?"<=":"<")+" "+h[g].Ranges[d].max.value;n.push({text:l,color:h[g].Ranges[d].color})}}else{if(h[g].Ranges[d].max.value==Number.POSITIVE_INFINITY){l+=" "+(h[g].Ranges[d].min.include?">=":">")+" "+h[g].Ranges[d].min.value;n.push({text:l,color:h[g].Ranges[d].color})}else{l+=" between "+h[g].Ranges[d].min.value+" and "+h[g].Ranges[d].max.value;n.push({text:l,color:h[g].Ranges[d].color})}}}}}}}return n};auProp.applyAlertRules=function(f){var r=this._options;var s=[],t=[],e=[];var d=false,g=false,u=false;var o=undefined;var v=0;for(var q=0;q<r.length;q++){s=r[q].measureTargets;if(a.isExist(s)){for(var n=0;n<s.length;n++){if(s[n]==f.measureKey){d=true;break}}}else{d=true}if(d){t=r[q].dimensionTargets;if(a.isExist(t)){for(var l=0;l<t.length;l++){if(!(t[l] instanceof Array)){if(t[l]==f.dimensionItemKey){g=true;break}}else{for(var w=0;w<t[l].length;w++){if(t[l][w]==f.dimensionPath[l].dimensionItemKey||t[l][w]=="*"){v++;break}}}}if(v==t.length){g=true}}else{g=true}}if(d&&g){e=r[q].Ranges;for(var h=0;h<e.length;h++){u=((e[h].min.include)?f.value>=e[h].min.value:f.value>e[h].min.value)&&((e[h].max.include)?f.value<=e[h].max.value:f.value<e[h].max.value);if(u){o={isAlert:true,color:e[h].color}}}}if(a.isExist(o)){break}}return o};return b});sap.riv.module({qname:"sap.riv.viz.shared.axis.Axis",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.axis.DimensionAxisRenderer",version:"3.4.0"},{qname:"sap.riv.viz.shared.axis.LinearAxisRenderer",version:"3.4.0"},{qname:"sap.riv.viz.shared.axis.LogarithmicAxisRenderer",version:"3.4.0"}],function Setup(f,c,b,e,a){var d=function(g){this._sax_options=f.extend(true,{},g);this._sax_initialize(this._sax_options);return this};d.NUMERIC="numeric";d.DIMENSION="dimension";d.prototype._sax_initialize=function(g){this._sax_mode=g.mode;switch(this._sax_mode){case d.DIMENSION:if(c.isFunction(g.renderer)){this._sax_renderer=new g.renderer(g)}else{this._sax_renderer=new b(g)}break;case d.NUMERIC:default:if(g.scaling==="linear"){if(c.isFunction(g.renderer)){this._sax_renderer=new g.renderer(g)}else{this._sax_renderer=new e(g)}}else{this._sax_renderer=new a(g)}break}};d.prototype.getOptions=function(){return this._sax_options};d.prototype.setLayer=function(g){this._sax_renderer.setLayer(g)};d.prototype.draw=function(){this._sax_renderer.draw()};d.prototype.getPreferredSize=function(){return this._sax_renderer.getPreferredSize()};d.prototype.getPreferredWidth=function(){return this._sax_renderer.getPreferredWidth()};d.prototype.getPreferredHeight=function(){return this._sax_renderer.getPreferredHeight()};d.prototype.updateProperties=function(g){var h=false;if(g&&g.distance&&g.distance!==this.getDistance()){h=true}if(h){this._sax_renderer.reset()}if(g&&g.distance){this._sax_renderer.distance(g.distance)}return this};d.prototype.u2p=function(g){return this._sax_renderer.u2p(g)};d.prototype.p2u=function(g){return this._sax_renderer.p2u(g)};d.prototype.position=function(g,h){this._sax_renderer.position(g,h)};d.prototype.zoom=function(h,g,j){this._sax_renderer.zoom(h,g,j)};d.prototype.setVisibleRange=function(h,g,j){this._sax_renderer.setVisibleRange(h,g,j)};d.prototype.getMajorTicks=function(){return this._sax_renderer.getMajorTicks()};d.prototype.getMinorTicks=function(){return this._sax_renderer.getMinorTicks()};d.prototype.getAxisWidth=function(){return this._sax_renderer.getAxisWidth()};d.prototype.getTickInterval=function(){return this._sax_renderer.getTickInterval()};d.prototype.getFirstTickOffset=function(){return this._sax_renderer.getFirstTickOffset()};d.prototype.getLastTickOffset=function(){return this._sax_renderer.getLastTickOffset()};d.prototype.getLineThickness=function(){return this._sax_renderer.getLineThickness()};d.prototype.getMajorTickWidth=function(){return this._sax_renderer.getMajorTickWidth()};d.prototype.getDistance=function(){return this._sax_renderer.distance()};d.prototype.applyTheme=function(g){return this._sax_renderer.applyTheme(g)};d.prototype.getMinValue=function(){return this._sax_renderer.getMinValue()};d.prototype.getMaxValue=function(){return this._sax_renderer.getMaxValue()};d.prototype.getMaxValueWidth=function(){return this._sax_renderer.getMaxValueWidth()};d.prototype.getMaxValueHeight=function(){return this._sax_renderer.getMaxValueHeight()};d.prototype.getMinValueWidth=function(){return this._sax_renderer.getMinValueWidth()};d.prototype.getMinValueHeight=function(){return this._sax_renderer.getMinValueHeight()};d.prototype.getAxisMetrics=function(){return this._sax_renderer.getAxisMetrics()};d.prototype.getLabelDirection=function(){return this._sax_renderer.getLabelDirection()};d.prototype.setInternalDistance=function(g){if(g!==this.getDistance()){this._sax_renderer.resetLayoutExceptLabelDirection();this._sax_renderer.distance(g)}};return d});sap.riv.module({qname:"sap.riv.viz.shared.descriptor.Descriptor",version:"3.4.0"},function Setup(){var a={getCommonChartProperties:function(){var b={type:{name:"type",supportedValueType:"String",supportedValues:"combination",defaultValue:"combination",description:"internal property to determine which chart module we should use",isExported:false},theme:{name:"theme",supportedValueType:"List",supportedValues:["classic-day","classic-night","XC-classic-day"],defaultValue:undefined,description:"Set theme of chart. Be noted that theme can only be updated through applyTheme()."},background:{name:"background",supportedValueType:"Object",supportedValues:[{name:"color",supportedValueType:"Color",defaultValue:"#ffffff",description:"Set background color of chart."},{name:"visible",supportedValueType:"Boolean",defaultValue:true,description:"Set visibility of background."}],description:"Set background of chart."},alert:{name:"alert",supportedValueType:"ObjectArray",minArrayLength:0,supportedValues:[{name:"alert member",supportedValueType:"Object",supportedValues:[{name:"measureTargets",supportedValueType:"StringArray",defaultValue:undefined,description:"Set keys of measures which needs to be applied alert rules."},{name:"dimensionTargets",supportedValueType:"ObjectArray",supportedValues:[{name:"dimensionTarget members",supportedValueType:"StringArray",defaultValue:undefined,description:"Set each keys of dimensions which needs to be applied alert rules."}],description:"Set all keys of dimensions which needs to be applied alert rules."},{name:"Ranges",supportedValueType:"ObjectArray",supportedValues:[{name:"range member",supportedValueType:"Object",supportedValues:[{name:"min",supportedValueType:"Object",supportedValues:[{name:"value",supportedValueType:"Number",defaultValue:Number.NEGATIVE_INFINITY,description:"Set min value to apply alert rules"},{name:"include",supportedValueType:"Boolean",defaultValue:true,description:"Set whether including the min value for data range."}],description:"Set min boundary of data range."},{name:"max",supportedValueType:"Object",supportedValues:[{name:"value",supportedValueType:"Number",defaultValue:Number.POSITIVE_INFINITY,description:"Set max value to apply alert rules"},{name:"include",supportedValueType:"Boolean",defaultValue:true,description:"Set whether including the max value for data range."}],description:"Set max boundary of data range."},{name:"color",supportedValueType:"Color",defaultValue:"#000000",description:"Set color for alert to display."}],description:"Set data ranges to apply alert rules and colors to display"}],description:"Set data ranges member"}],description:"Set alert-realted properties"}],description:"Apply alert rules of chart."},animation:{name:"animation",supportedValueType:"Object",supportedValues:[{name:"init",supportedValueType:"Object",supportedValues:[{name:"enable",supportedValueType:"Boolean",defaultValue:true,description:"enable animation of chart initialization"}],description:"Set animation of chart initialization"},{name:"enable",supportedValueType:"Boolean",defaultValue:true,description:"enable all animation of chart"},{name:"duration",supportedValueType:"PositiveInt",defaultValue:800,isExported:false,description:"animation duration in milliseconds"}],description:"Enable or disbale animation."},legend:{name:"legend",supportedValueType:"Object",supportedValues:[{name:"position",supportedValueType:"List",supportedValues:["left","right","top","bottom"],defaultValue:"right",description:"Set legend position."},{name:"verticalOffset",supportedValueType:"Int",defaultValue:0,description:"Set vertical offset of legend only if legend position is left or right."},{name:"horizontalOffset",supportedValueType:"Int",defaultValue:0,description:"Set horizontal offset of legend only if legend position is top or bottom."},{name:"visible",supportedValueType:"Boolean",defaultValue:true,description:"Set visibility of legend."},{name:"legendOffside",supportedValueType:"Boolean",defaultValue:false,description:"Legend offside supportability"},{name:"labelFont",supportedValueType:"Font",defaultValue:"bold 16px Arial",description:"Set label font style of legend label."},{name:"labelColor",supportedValueType:"Color",defaultValue:"#333333",description:"Set label color of legend label."},{name:"titleFont",supportedValueType:"Font",defaultValue:"bold 16px Arial",description:"Set title font style of legend title.",isExported:false},{name:"titleColor",supportedValueType:"Color",defaultValue:"#333333",description:"Set title color of legend title.",isExported:false},{name:"formatString",supportedValueType:"StringArray",defaultValue:[""],description:"Set format string of legend and re-use the last one in the array."},{name:"renderer",supportedValueType:"Function",defaultValue:undefined,description:"Customized legend renderer.",isExported:false}],description:"Set legend related properties. The labels come from measure names for Bar/Column/Line/Combination chart and dimension names for Pie chart."},layout:{name:"layout",supportedValueType:"Object",supportedValues:[{name:"padding",supportedValueType:"IntArray[4]",defaultValue:[0,0,0,0],description:"Set padding of layout. The padding clears an area inside of chart. The corresponding directions of padding are top, right, bottom, left."},{name:"legendFirst",supportedValueType:"Boolean",defaultValue:true,description:"Set whether the layout is legend first.",isExported:false}],description:"Set the layout related properties."},tooltip:{name:"tooltip",supportedValueType:"Object",supportedValues:[{name:"enable",supportedValueType:"Boolean",defaultValue:true,description:"Set whether the tooltip is enabled."},{name:"customization",supportedValueType:"Function",defaultValue:undefined,description:"Set tooltip object defination customized by consumer."},{name:"text",supportedValueType:"Object",supportedValues:[{name:"font",supportedValueType:"Font",defaultValue:undefined,description:"Set font style of tooltip text. "},{name:"color",supportedValueType:"Color",defaultValue:undefined,description:"Set color of tooltip text."},{name:"formatString",supportedValueType:"String",defaultValue:"",description:"Set number format of tooltip text."}],description:"Set display properties of tooltip text."},{name:"mainValue",supportedValueType:"Object",supportedValues:[{name:"font",supportedValueType:"Font",defaultValue:undefined,description:"Set font style of tooltip main value."},{name:"color",supportedValueType:"Color",defaultValue:undefined,description:"Set font color of tooltip main value."},{name:"formatString",supportedValueType:"StringArray",defaultValue:[""],description:"Set number format of tooltip main value and re-use the last one in the array."}],description:"Set display properties of tooltip main value."},{name:"subValue",supportedValueType:"Object",supportedValues:[{name:"font",supportedValueType:"Font",defaultValue:undefined,description:"Set font style of sub value."},{name:"color",supportedValueType:"Color",defaultValue:undefined,description:"Set font color of tooltip sub value."},{name:"formatString",supportedValueType:"StringArray",defaultValue:["0.00%"],description:"Set number format of tooltip sub value."}],description:"Set display property of tooltip sub value."}],description:"Set tooltip related properties."},title:{name:"title",supportedValueType:"Object",supportedValues:[{name:"main",supportedValueType:"Object",supportedValues:[{name:"text",supportedValueType:"String",defaultValue:"Default Chart Title",description:"Set text value of main title."},{name:"font",supportedValueType:"Font",defaultValue:"bold 16px Arial",description:"Set font style of main title."},{name:"color",supportedValueType:"Color",defaultValue:"#333333",description:"Set font color of main title."},{name:"visible",supportedValueType:"Boolean",defaultValue:false,description:"Set visibility of main title."},{name:"horizontalAlign",supportedValueType:"List",supportedValues:["center","left","right"],defaultValue:"center",description:"Set horizontal align of main title."},{name:"formatString",supportedValueType:"String",defaultValue:"",description:"Set format string of main title."}],description:"Set main title related properties."},{name:"sub",supportedValueType:"Object",supportedValues:[{name:"text",supportedValueType:"String",defaultValue:"Default Sub Title",description:"Set text value of sub title."},{name:"font",supportedValueType:"Font",defaultValue:"bold 14px Arial",description:"Set font style of sub title."},{name:"color",supportedValueType:"Color",defaultValue:"#333333",description:"Set font color of sub title."},{name:"visible",supportedValueType:"Boolean",defaultValue:false,description:"Set visibility of sub title."},{name:"horizontalAlign",supportedValueType:"List",supportedValues:["center","left","right"],defaultValue:"center",description:"Set horizontal align of sub title."},{name:"formatString",supportedValueType:"String",defaultValue:"",description:"Set format string of sub title."}],description:"Set sub title related properties."}],description:"Set the title related properties."},selectability:{name:"selectability",supportedValueType:"Object",supportedValues:[{name:"mode",supportedValueType:"List",supportedValues:["single","multiple","none"],defaultValue:"single",description:"Set select mode. Be noted that it cannot be updated after chart initialization."},{name:"deSelectable",supportedValueType:"Boolean",defaultValue:true,description:"Set whether it can be de-selectable. Be noted that it cannot be updated after chart initialization."},{name:"defaultSelectedItems",supportedValueType:"ObjectArray",minArrayLength:0,supportedValues:[{name:"defaultSeletedItem member",supportedValueType:"Object",supportedValues:[{name:"measureIndex",supportedValueType:"PositiveInt",defaultValue:undefined,description:"Set default selected measure items. Be noted that it cannot be updated after chart initialization. for crosstable dataset, it means the index in the flattened data."},{name:"dimensionItemIndex",supportedValueType:"PositiveInt",defaultValue:undefined,description:"Set default selected dimension items. Be noted that it cannot be updated after chart initialization. This is a convenient way for SimpleDMDataset only, use dimensionPath when you are dealing with hierarchy data."},{name:"dimensionPath",supportedValueType:"ObjectArray",minArrayLength:0,supportedValues:[{name:"dimensionPath member",supportedValueType:"Object",supportedValues:[{name:"analysisAxisIndex",supportedValueType:"PositiveInt",defaultValue:0,description:"Analysis axis index for the path item, for crosstable dataset, row axis is #0 analysis axis, column axis is #1 analysis axis. for simpleDMDataset, just use 0 or omit it."},{name:"dimensionIndex",supportedValueType:"PositiveInt",defaultValue:0,description:"Dimension index for the path item, for crosstable dataset, currently we only support one dimension in column axis. for simpleDMDataset, just use 0 or omit it."},{name:"dimensionItemIndex",supportedValueType:"PositiveInt",defaultValue:0,description:"Dimension item index for the path item, for crosstable dataset, it means the index in the flattened data."}]}]}],description:"Set default selectedItems member, Be noted that it cannot be updated after chart initialization."}],defaultValue:[],description:"Set default selectedItems. Be noted that it cannot be updated after chart initialization."}],description:"Set the selectability related properties. Be noted that it cannot be updated after chart initialization."},xAxis:{name:"xAxis",supportedValueType:"ObjectArray",minArrayLength:1,supportedValues:[{name:"xAxis member",supportedValueType:"Object",supportedValues:[{name:"renderer",supportedValueType:"Function",defaultValue:undefined,description:"customized axis renderer, can be value axis renderer or dimension axis renderer, depends on current chart type"},{name:"title",supportedValueType:"String",defaultValue:"X1",description:"Set value of X axis title."},{name:"lineThickness",supportedValueType:"PositiveInt",defaultValue:1,description:"set line thickness of X axis."},{name:"lineColor",supportedValueType:"Color",defaultValue:"#333333",description:"Set line color of X axis."},{name:"labelColor",supportedValueType:"Color",defaultValue:"#ffffff",description:"Set label color of X axis."},{name:"titleColor",supportedValueType:"Color",defaultValue:"#333333",description:"Set X axis title color."},{name:"labelFont",supportedValueType:"Font",defaultValue:"normal 11px Arial",description:"Set label font of X axis."},{name:"titleFont",supportedValueType:"Font",defaultValue:"bold 13px Arial",description:"Set title font of X axis."},{name:"showTitle",supportedValueType:"Boolean",defaultValue:false,description:"Show/hide X axis title."},{name:"titleFormatString",supportedValueType:"String",defaultValue:"",description:"Set title format string."},{name:"showMajorTicks",supportedValueType:"Boolean",defaultValue:false,description:"Show/hide X axis majorTicks."},{name:"showMinorTicks",supportedValueType:"Boolean",defaultValue:false,description:"Show/hide X axis minorTicks."},{name:"labelsFormatString",supportedValueType:"StringArray",defaultValue:[""],description:"Set X axis labels format string, re-use the last one in the array."},{name:"visible",supportedValueType:"Boolean",defaultValue:true,description:"Show/hide X axis."},{name:"label",supportedValueType:"Object",supportedValues:[{name:"color",supportedValueType:"Color",defaultValue:"#333333",description:"Set label color of X axis."},{name:"font",supportedValueType:"Font",defaultValue:undefined,description:"Set label color of X axis."},{name:"formatString",supportedValueType:"StringArray",defaultValue:undefined,description:"Set X axis labels format string, re-use the last one in the array."},{name:"visible",supportedValueType:"Boolean",defaultValue:true,description:"Show/hide X axis labels."}],description:"Set X axis labels format string, re-use the last one in the array."},{name:"gridLine",supportedValueType:"Object",supportedValues:[{name:"showMajor",supportedValueType:"Boolean",defaultValue:undefined,description:"Show/hide major grid line and only works on value axis"},{name:"majorColor",supportedValueType:"Color",defaultValue:"#d8d8d8",description:"Set the major grid line color."},{name:"majorThickness",supportedValueType:"Int",defaultValue:1,description:"Set the major grid line thickness."},{name:"showMinor",supportedValueType:"Boolean",defaultValue:false,description:"Show/hide minor grid line and only works on value axis. If showMajor is false, this option will not work"},{name:"minorColor",supportedValueType:"Color",defaultValue:"#B8B8B8",description:"Set the minor grid line color."},{name:"minorThickness",supportedValueType:"Int",defaultValue:1,description:"Set the minor grid line thickness."},{name:"showSub",supportedValueType:"Boolean",defaultValue:false,description:"Show/hide sub grid line and only works on dimension axis"},{name:"subColor",supportedValueType:"Color",defaultValue:"#B8B8B8",description:"Set sub grid line color."}],description:"Set the grid line releated properties.For value axis, only showMajor and showMinor options work. If showSub is set to true on value axis, it takes effect but the behavior is unexpected.For dimension axis, only showSub option works. If showMajor and showMinor options are set to true on dimension axis, it takes effect but the behavior is unexpected."},{name:"manualScale",supportedValueType:"Object",supportedValues:[{name:"enable",supportedValueType:"Boolean",defaultValue:false,description:"Set the enable value of manual scale."},{name:"min",supportedValueType:"Number",defaultValue:0,description:"Set the min value of manual scale."},{name:"max",supportedValueType:"Number",defaultValue:500,description:"Set the max value of manual scale."},{name:"division",supportedValueType:"PositiveInt",defaultValue:3,description:"Set the division value of manual scale."},{name:"minorDivision",supportedValueType:"PositiveInt",defaultValue:3,isExported:false,description:"Set the minor division value of manual scale."},{name:"space",supportedValueType:"PositiveNumber",defaultValue:undefined,description:"Set the space value of manual scale."}],description:"Set the manual scale releated properties."},{name:"scaling",supportedValueType:"List",supportedValues:["linear","logarithmic"],defaultValue:"linear",description:"Set the scaling mode of axis."}]}],description:"Set X axis releated properties."},yAxis:{name:"yAxis",supportedValueType:"ObjectArray",minArrayLength:1,supportedValues:[{name:"yAxis member",supportedValueType:"Object",supportedValues:[{name:"renderer",supportedValueType:"Function",defaultValue:undefined,description:"customized axis renderer, can be value axis renderer or dimension axis renderer, depends on current chart type"},{name:"title",supportedValueType:"String",defaultValue:"Y1",description:"Set value of Y axis title."},{name:"lineColor",supportedValueType:"Color",defaultValue:"#333333",description:"Set line color of Y axis."},{name:"lineThickness",supportedValueType:"PositiveInt",defaultValue:1,description:"Set line thickness of Y axis."},{name:"labelColor",supportedValueType:"Color",defaultValue:"#333333",description:"Set label color of Y axis."},{name:"titleColor",supportedValueType:"Color",defaultValue:"#333333",description:"Set Y axis title color."},{name:"labelFont",supportedValueType:"Font",defaultValue:"normal 11px Arial",description:"Set label font style of Y axis."},{name:"titleFont",supportedValueType:"Font",defaultValue:"bold 13px Arial",description:"Set title font style of Y axis."},{name:"showTitle",supportedValueType:"Boolean",defaultValue:false,description:"Show/hide Y axis title."},{name:"titleFormatString",supportedValueType:"String",defaultValue:"",description:"set the title format string."},{name:"showMajorTicks",supportedValueType:"Boolean",defaultValue:false,description:"Show/hide Y axis majorTicks."},{name:"showMinorTicks",supportedValueType:"Boolean",defaultValue:false,description:"Show/hide Y axis minorTicks."},{name:"labelsFormatString",supportedValueType:"StringArray",defaultValue:[""],description:"Set Y axis labels fromat string and re-use the last one in the array."},{name:"visible",supportedValueType:"Boolean",defaultValue:true,description:"Show/hide Y axis."},{name:"label",supportedValueType:"Object",supportedValues:[{name:"color",supportedValueType:"Color",defaultValue:"#333333",description:"Set label color of X axis."},{name:"font",supportedValueType:"Font",defaultValue:undefined,description:"Set label color of X axis."},{name:"formatString",supportedValueType:"StringArray",defaultValue:undefined,description:"Set Y axis labels format string, re-use the last one in the array."},{name:"visible",supportedValueType:"Boolean",defaultValue:true,description:"Show/hide Y axis labels."}],description:"Set X axis labels format string, re-use the last one in the array."},{name:"gridLine",supportedValueType:"Object",supportedValues:[{name:"showMajor",supportedValueType:"Boolean",defaultValue:undefined,description:"Show/hide major grid line and only works on value axis"},{name:"majorColor",supportedValueType:"Color",defaultValue:"#d8d8d8",description:"Set the major grid line color."},{name:"majorThickness",supportedValueType:"Int",defaultValue:1,description:"Set the major grid line thickness."},{name:"showMinor",supportedValueType:"Boolean",defaultValue:false,description:"Show/hide the minor grid line and only works on value axis. If showMajor is false, this option will not work"},{name:"minorColor",supportedValueType:"Color",defaultValue:"#B8B8B8",description:"Set minor grid line color."},{name:"minorThickness",supportedValueType:"Int",defaultValue:1,description:"Set the minor grid line thickness."},{name:"showSub",supportedValueType:"Boolean",defaultValue:false,description:"Show/hide sub grid line and only works on dimension axis"},{name:"subColor",supportedValueType:"Color",defaultValue:"#B8B8B8",description:"Set sub grid line color."}],description:"Set the grid line releated properties.For value axis, only showMajor and showMinor options work. If showSub is set to true on value axis, it takes effect but the behavior is unexpected.For dimension axis, only showSub option works. If showMajor and showMinor options are set to true on dimension axis, it takes effect but the behavior is unexpected."},{name:"manualScale",supportedValueType:"Object",supportedValues:[{name:"enable",supportedValueType:"Boolean",defaultValue:false,description:"Set the enable value of manual scale."},{name:"min",supportedValueType:"Number",defaultValue:0,description:"Set the min value of manual scale."},{name:"max",supportedValueType:"Number",defaultValue:500,description:"Set the max value of manual scale."},{name:"division",supportedValueType:"PositiveInt",defaultValue:3,description:"Set the division value of manual scale."},{name:"minorDivision",supportedValueType:"PositiveInt",defaultValue:3,isExported:false,description:"Set the minor division value of manual scale."},{name:"space",supportedValueType:"PositiveNumber",defaultValue:undefined,description:"Set the space value of manual scale."}],description:"Set the manual scale releated properties."},{name:"scaling",supportedValueType:"List",supportedValues:["linear","logarithmic"],defaultValue:"linear",description:"Set the scaling mode of axis."}]}],description:"Set Y axis releated properties."},measures:{name:"measures",supportedValueType:"ObjectArray",minArrayLength:0,supportedValues:[{name:"measure member",supportedValueType:"Object",supportedValues:[{name:"type",supportedValueType:"List",supportedValues:["bar","line"],defaultValue:"line",description:"Set measure type"},{name:"valueAxis",supportedValueType:"PositiveInt",defaultValue:0,description:"Set index value for the axis."},{name:"fillColor",supportedValueType:"Color",defaultValue:undefined,description:'Set barMarker color of measure member. if it is unspecified, we will use following color palette: [ "#113975", "#e06f00", "#5a92e2", "#624628", "#e03c2f", "#ffbe7f", "#96a8c3", "#a9a9a9", "#830b00", "#344b6d", "#e2ce44", "#ff6657" ]'},{name:"barMarkerSize",supportedValueType:"PositiveInt",defaultValue:undefined,description:"An internal properties, as it does not make sense to set size per series. Set barMarker size of measure member.",isExported:false},{name:"lineMarkerSize",supportedValueType:"PositiveInt",defaultValue:10,description:"An internal properties, as it does not make sense to set size per series. Set lineMarker size of measure member.",isExported:false},{name:"lineColor",supportedValueType:"Color",defaultValue:"#000000",description:"Set line color of measure member."},{name:"lineThickness",supportedValueType:"PositiveInt",defaultValue:1,description:"Set line thickness of measure member."},{name:"markerSymbol",supportedValueType:"List",supportedValues:["circle","triangle","diamond","pentagon","cross"],defaultValue:"circle",description:"Set line markerSymbol of measure member."}],description:"Set measure member related properties."}],description:"Set measures related properties."},visibleRange:{name:"visibleRange",supportedValueType:"Object",supportedValues:[{name:"start",supportedValueType:"Int",defaultValue:0,description:"Set start value of visible range."},{name:"end",supportedValueType:"Int",defaultValue:Number.POSITIVE_INFINITY,description:"Set end value of visible range."}],description:"Set the visible range releated propertie.",isExported:false}};return b},getDataLabelProperty:function(){return{name:"dataLabel",supportedValueType:"Object",supportedValues:[{name:"visible",supportedValueType:"Boolean",defaultValue:false,description:"Set visible value of dataLabel."},{name:"font",supportedValueType:"Font",defaultValue:"normal normal 12px Verdana",description:"Set font value of dataLabel."},{name:"color",supportedValueType:"Color",defaultValue:null,description:"Set Color value of dataLabel."},{name:"position",supportedValueType:"String",defaultValue:null,description:"Set position value of dataLabel."},{name:"offset",supportedValueType:"Object",description:"Set offset value of dataLabel.",supportedValues:[{name:"x",supportedValueType:"Int",defaultValue:0,description:"Set x value of offset."},{name:"y",supportedValueType:"Int",defaultValue:0,description:"Set y value of offset."}]},{name:"valueVisible",supportedValueType:"Boolean",defaultValue:true,description:"Set valueVisible value of dataLabel."},{name:"valueFormatString",supportedValueType:"StringArray",defaultValue:[""],description:"Set formatstring for value."},{name:"dimensionVisible",supportedValueType:"Boolean",defaultValue:false,description:"Set dimensionVisible value of dataLabel."},{name:"dimensionFormatString",supportedValueType:"StringArray",defaultValue:[""],description:"Set formatstring for dimension."},{name:"measureVisible",supportedValueType:"Boolean",defaultValue:false,description:"Set measureVisible value of dataLabel."},{name:"measureFormatString",supportedValueType:"String",defaultValue:"",description:"Set formatstring for measure."},{name:"separator",supportedValueType:"String",defaultValue:"",description:"Set separator value of dataLabel."}]}},getBubbleDataLabelProperty:function(){return{name:"dataLabel",supportedValueType:"Object",supportedValues:[{name:"visible",supportedValueType:"Boolean",defaultValue:false,description:"Set visible value of dataLabel."},{name:"font",supportedValueType:"Font",defaultValue:"normal normal 12px Verdana",description:"Set font value of dataLabel."},{name:"color",supportedValueType:"Color",defaultValue:null,description:"Set Color value of dataLabel."},{name:"position",supportedValueType:"String",defaultValue:null,description:"Set position value of dataLabel."},{name:"offset",supportedValueType:"Object",description:"Set offset value of dataLabel.",supportedValues:[{name:"x",supportedValueType:"Int",defaultValue:0,description:"Set x value of offset."},{name:"y",supportedValueType:"Int",defaultValue:0,description:"Set y value of offset."}]},{name:"xVisible",supportedValueType:"Boolean",defaultValue:true,description:"Set xVisible value of dataLabel."},{name:"yVisible",supportedValueType:"Boolean",defaultValue:false,description:"Set yVisible value of dataLabel."},{name:"zVisible",supportedValueType:"Boolean",defaultValue:false,description:"Set zVisible value of dataLabel."},{name:"valueFormatString",supportedValueType:"ObjectArray",minArrayLength:1,defaultValue:[{}],description:"Set formatstring for value.",supportedValues:[{name:"valueFormatString member",supportedValueType:"Object",supportedValues:[{name:"x",supportedValueType:"String",defaultValue:"",description:"Set format string for x value."},{name:"y",supportedValueType:"String",defaultValue:"",description:"Set format string for y value."},{name:"z",supportedValueType:"String",defaultValue:"",description:"Set format string for z value."}],description:"Set format string for x,y and z value in data labels."}]},{name:"measureVisible",supportedValueType:"Boolean",defaultValue:false,description:"Set measureVisible value of dataLabel."},{name:"measureFormatString",supportedValueType:"String",defaultValue:"",description:"Set formatstring for measure."},{name:"separator",supportedValueType:"String",defaultValue:"",description:"Set separator value of dataLabel."}]}},getXYChartProperties:function(){var b={tooltip:{name:"tooltip",supportedValueType:"Object",supportedValues:[{name:"enable",supportedValueType:"Boolean",defaultValue:true,description:"Set whether the tooltip is enabled."},{name:"backgroundColor",supportedValueType:"Color",defaultValue:"#f2f2f2",description:"Set the tooltip background color."},{name:"border",supportedValueType:"Object",supportedValues:[{name:"color",supportedValueType:"Color",defaultValue:"#AAAAAA",description:"Set the tooltip border color."},{name:"size",supportedValueType:"PositiveInt",defaultValue:2,description:"Set the border width"}],description:"Set border properties of tooltip."},{name:"separateLineColor",supportedValueType:"ColorArray",minArrayLength:3,defaultValue:["#ffffff","#8a8a8a","#ffffff"],description:"Set the tooltip separate line color, a list of gradient color."},{name:"guideLineColor",supportedValueType:"Color",defaultValue:"#333333",description:"Set the tooltip guide line color."},{name:"customization",supportedValueType:"Function",defaultValue:undefined,description:"Set tooltip object defination customized by consumer."},{name:"title",supportedValueType:"Object",supportedValues:[{name:"font",supportedValueType:"String",defaultValue:"bold 10px Arial",description:"Set font style of tooltip title."},{name:"color",supportedValueType:"Color",defaultValue:"#808080",description:"Set font color of tooltip title."},{name:"formatString",supportedValueType:"String",defaultValue:"",description:"Set format string of tooltip title."}],description:"Set display properties of tooltip title."},{name:"label",supportedValueType:"Object",supportedValues:[{name:"font",supportedValueType:"StringArray",minArrayLength:1,defaultValue:["bold 10px Arial"],description:"Set font style of tooltip label. "},{name:"color",supportedValueType:"ColorArray",minArrayLength:1,defaultValue:["#808080"],description:"Set font color of tooltip label and re-use the last one in the array."},{name:"formatString",supportedValueType:"StringArray",minArrayLength:1,defaultValue:[""],description:"Set format string of tooltip label and re-use the last one in the array."}],description:"Set display properties of tooltip label."},{name:"mainValue",supportedValueType:"Object",supportedValues:[{name:"font",supportedValueType:"Font",defaultValue:undefined,description:"Set font style of tooltip main value."},{name:"color",supportedValueType:"Color",defaultValue:"#000000",description:"Set font color of tooltip main value and re-use the last one in the array."},{name:"formatString",supportedValueType:"StringArray",minArrayLength:1,defaultValue:[""],description:"Set number format of tooltip main value and re-use the last one in the array."}],description:"Set display properties of tooltip main value."},{name:"zIndex",supportedValueType:"PositiveInt",defaultValue:undefined,description:"Set z-index of tooltip container",isExported:false}],description:"Set tooltip related properties."},};return b},getBarDescriptor:function(){var d=this.getCommonChartProperties();this.changeValue(d,["xAxis","xAxis member","gridLine","showMajor"],"defaultValue",true);this.changeValue(d,["yAxis","yAxis member","gridLine","showMajor"],"defaultValue",false);var c={theme:d.theme,background:d.background,animation:d.animation,legend:d.legend,layout:d.layout,tooltip:this.getXYChartProperties().tooltip,title:d.title,selectability:d.selectability,xAxis:d.xAxis,yAxis:d.yAxis,bar:{name:"bar",supportedValueType:"Object",supportedValues:[{name:"renderer",supportedValueType:"Function",defaultValue:undefined,description:"customized bar renderer"},{name:"barMarkerSize",supportedValueType:"PositiveInt",defaultValue:undefined,description:"Set bar marker size of bar."}],description:"It is applied for all bar series."},visibleRange:d.visibleRange,measure:{name:"measure",supportedValueType:"Object",supportedValues:[{name:"visibilityChangeable",supportedValueType:"Boolean",defaultValue:false,description:"Set the visibility changeable property."}],description:"Set measure releated properties.",isExported:false},measures:{name:"measures",supportedValueType:"ObjectArray",minArrayLength:0,supportedValues:[{name:"measure member",supportedValueType:"Object",supportedValues:[{name:"fillColor",supportedValueType:"Color",defaultValue:undefined,description:'Set the fill color of measure member. if it is unspecified, we will use following color palette: [ "#113975", "#e06f00", "#5a92e2", "#624628", "#e03c2f", "#ffbe7f", "#96a8c3", "#a9a9a9", "#830b00", "#344b6d", "#e2ce44", "#ff6657" ]'},{name:"barMarkerSize",supportedValueType:"PositiveInt",defaultValue:undefined,description:"An internal properties, as it does not make sense to set size per series. Set the bar marker size of measure member.",isExported:false},{name:"valueAxis",supportedValueType:"PositiveInt",defaultValue:0,description:"Set value axis of measure member."},{name:"visible",supportedValueType:"Boolean",defaultValue:true,description:"Set visibility of measure member.",isExported:true}],description:"Set the measure member releated properties."}],description:"Set the measures releated properties."}};var b=this.getDataLabelProperty();c.measures.supportedValues[0].supportedValues.push(b);return c},getCombinationDescriptor:function(){var d=this.getCommonChartProperties();this.changeValue(d,["xAxis","xAxis member","gridLine","showMajor"],"defaultValue",false);this.changeValue(d,["yAxis","yAxis member","gridLine","showMajor"],"defaultValue",true);var c={type:d.type,theme:d.theme,background:d.background,animation:d.animation,legend:d.legend,layout:d.layout,tooltip:this.getXYChartProperties().tooltip,title:d.title,xAxis:d.xAxis,yAxis:d.yAxis,selectability:d.selectability,line:{name:"line",supportedValueType:"Object",supportedValues:[{name:"marker",supportedValueType:"Object",supportedValues:[{name:"size",supportedValueType:"PositiveInt",defaultValue:10,description:"Set line marker size of series."},{name:"visible",supportedValueType:"Boolean",defaultValue:false,description:"Set the visibility line marker."}],description:"Set line marker related properties."},{name:"lineThickness",supportedValueType:"PositiveInt",defaultValue:1,description:"Set line thinkness of series."},{name:"lineMarkerSize",supportedValueType:"PositiveInt",defaultValue:10,description:"Set line marker size of series."},{name:"renderer",supportedValueType:"Function",defaultValue:undefined,isExported:false,description:"customized line renderer"}],description:"Set line releated properties."},bar:{name:"bar",supportedValueType:"Object",supportedValues:[{name:"renderer",supportedValueType:"Function",defaultValue:undefined,isExported:false,description:"customized bar renderer"},{name:"barMarkerSize",supportedValueType:"PositiveInt",defaultValue:undefined,description:"Set bar marker size of series."}],description:"Set bar releated properties."},visibleRange:d.visibleRange,measure:{name:"measure",supportedValueType:"Object",supportedValues:[{name:"visibilityChangeable",supportedValueType:"Boolean",defaultValue:false,description:"Set the visibility changeable property."}],description:"Set measure releated properties.",isExported:false},measures:{name:"measures",supportedValueType:"ObjectArray",minArrayLength:0,supportedValues:[{name:"measure member",supportedValueType:"Object",supportedValues:[{name:"type",supportedValueType:"List",supportedValues:["bar","line"],defaultValue:"line",description:"Set the measure type. Be noted that it cannot be updated after chart initialization."},{name:"fillColor",supportedValueType:"Color",defaultValue:undefined,description:'Set the fill color of measure member. if it is unspecified, we will use following color palette: [ "#113975", "#e06f00", "#5a92e2", "#624628", "#e03c2f", "#ffbe7f", "#96a8c3", "#a9a9a9", "#830b00", "#344b6d", "#e2ce44", "#ff6657" ]'},{name:"barMarkerSize",supportedValueType:"PositiveInt",defaultValue:undefined,description:"An internal properties, as it does not make sense to set size per series. Set the bar marker size of measure member.",isExported:false},{name:"lineMarkerSize",supportedValueType:"PositiveInt",defaultValue:10,description:"An internal properties, as it does not make sense to set size per series. Set the line marker size of measure member.",isExported:false},{name:"lineColor",supportedValueType:"Color",defaultValue:undefined,description:"Set the line color of measure member."},{name:"lineThickness",supportedValueType:"PositiveInt",defaultValue:1,description:"Set the line size of measure member.",isExported:false},{name:"valueAxis",supportedValueType:"PositiveInt",defaultValue:0,description:"Set value axis of measure member."},{name:"visible",supportedValueType:"Boolean",defaultValue:true,description:"Set visibility of measure member.",isExported:true},{name:"markerSymbol",supportedValueType:"List",supportedValues:["circle","triangle","diamond","pentagon","cross"],defaultValue:"circle",description:"Set marker symbol of measure member."}],description:"Set the measure member releated properties"}],description:"Set the measures releated properties."}};var b=this.getDataLabelProperty();c.measures.supportedValues[0].supportedValues.push(b);return c},getMultiPieDescriptor:function(){var c=this.getCommonChartProperties();var b={alert:c.alert,type:c.type,theme:c.theme,background:c.background,legend:c.legend,title:c.title,layout:c.layout,pieType:{name:"pieType",supportedValueType:"List",supportedValues:["pie","donut"],defaultValue:"pie",description:"Set display type of every sub pie."},selectionMode:{name:"selectionMode",supportedValueType:"List",supportedValues:["single","multiple"],defaultValue:"single",description:"Set the selection mode of every sub pie."},allSelectable:{name:"allSelectable",supportedValueType:"Boolean",defaultValue:true,description:"Set whether every sub pie is selectable. Be noted that it cannot be updated after chart initialization."},allDeSelectable:{name:"allDeSelectable",supportedValueType:"Boolean",defaultValue:true,description:"Set whether every sub pie is deselectable. Be noted that it cannot be updated after chart initialization."},selectedDataIndexes:{name:"selectedDataIndexes",supportedValueType:"IntArray",defaultValue:[],description:"Set the default selected sector. Be noted that it cannot be updated after chart initialization."},measures:{name:"measures",supportedValueType:"ObjectArray",minArrayLength:0,supportedValues:[{name:"measure member",supportedValueType:"Object",supportedValues:[{name:"sectorColors",supportedValueType:"ColorArray",defaultValue:["#748CB2","#9CC677","#EACF5E","#F9AD79","#D16A7C","#8873A2","#3A95B3","#B6D949","#FDD36C","#F47958","#A65084","#0063B1","#0DA841","#FCB71D","#F05620","#B22D6E","#3C368E","#8FB2CF","#95D4AB","#EAE98F","#F9BE92","#EC9A99","#BC98BD","#1EB7B2","#73C03C","#F48323","#EB271B","#D9B5CA","#AED1DA","#DFECB2","#FCDAB0","#F5BCB4"],description:"Color palette to be used for sectors of each sub pie."}],description:"Set measure member for each sub pie."}],description:"Set measure properties."},tooltip:{name:"tooltip",supportedValueType:"Object",supportedValues:[{name:"enable",supportedValueType:"Boolean",defaultValue:true,description:"Set whether the tooltip is enabled."},{name:"enableSmartLayout",supportedValueType:"Boolean",defaultValue:false,description:"Set whether the smartLayout is enabled."},{name:"mainValue",supportedValueType:"Object",supportedValues:[{name:"color",supportedValueType:"Color",defaultValue:undefined,description:"Set color of tooltip main value."},{name:"font",supportedValueType:"Font",defaultValue:undefined,description:"Set font of tooltip main value."},{name:"formatString",supportedValueType:"StringArray",defaultValue:[""],description:"Set format string of tooltip main value."}],description:"Set properties of tooltip main value (data value) for every sub pie. "},{name:"subValue",supportedValueType:"Object",supportedValues:[{name:"color",supportedValueType:"Color",defaultValue:undefined,description:"Set color of tooltip sub value."},{name:"font",supportedValueType:"Font",defaultValue:undefined,description:"Set font of tooltip sub value."},{name:"formatString",supportedValueType:"StringArray",defaultValue:["0.00%"],description:"Set format string of tooltip sub value."}],description:"Set properties of tooltip sub value (percentage) for every sub pie."},{name:"text",supportedValueType:"Object",supportedValues:[{name:"color",supportedValueType:"Color",defaultValue:undefined,description:"Set color of tooltip text."},{name:"font",supportedValueType:"Font",defaultValue:undefined,description:"Set font of tooltip text."},{name:"formatString",supportedValueType:"StringArray",defaultValue:[""],description:"Set format string of tooltip text."}],description:"Set properties of tooltip text (dimension label) for every sub pie."}],description:"Set tooltip properties for every sub pie."},layoutMode:{name:"layoutMode",supportedValueType:"Object",supportedValues:[{name:"type",supportedValueType:"List",supportedValues:["column"],defaultValue:"column",description:"Set the layout mode of multi-pie."},{name:"columnLength",supportedValueType:"PositiveInt",defaultValue:2,description:"Set the column number of column layout mode."}],description:"Set layout mode of multi-pie."},subChartTitle:{name:"subChartTitle",supportedValueType:"Object",supportedValues:[{name:"visible",supportedValueType:"Boolean",defaultValue:true,description:"Set the visibility of sub chart title."},{name:"font",supportedValueType:"Font",defaultValue:"normal 14px Arial",description:"Set font of sub chart title."},{name:"color",supportedValueType:"Color",defaultValue:"#ffffff",description:"Set color of sub chart title."}],description:"Set sub chart title releated properties of multi-pie."}};return b},getPieDescriptor:function(){var c=this.getCommonChartProperties();var b={alert:c.alert,type:c.type,theme:c.theme,background:c.background,legend:c.legend,title:c.title,layout:c.layout,pieType:{name:"pieType",supportedValueType:"List",supportedValues:["pie","donut"],defaultValue:"pie",description:"Set display type of pie chart."},selectionMode:{name:"selectionMode",supportedValueType:"List",supportedValues:["single","multiple"],defaultValue:"single",description:"Set the selection mode of pie chart."},allSelectable:{name:"allSelectable",supportedValueType:"Boolean",defaultValue:true,description:"Set whether the pie chart is selectable. Be noted that it cannot be updated after chart initialization."},allDeSelectable:{name:"allDeSelectable",supportedValueType:"Boolean",defaultValue:true,description:"Set whether the pie chart is deselectable. Be noted that it cannot be updated after chart initialization."},selectedDataIndexes:{name:"selectedDataIndexes",supportedValueType:"IntArray",defaultValue:[],description:"Set the default selected sector. Be noted that it cannot be updated after chart initialization."},measures:{name:"measures",supportedValueType:"ObjectArray",minArrayLength:0,supportedValues:[{name:"measure member",supportedValueType:"Object",supportedValues:[{name:"sectorColors",supportedValueType:"ColorArray",defaultValue:["#748CB2","#9CC677","#EACF5E","#F9AD79","#D16A7C","#8873A2","#3A95B3","#B6D949","#FDD36C","#F47958","#A65084","#0063B1","#0DA841","#FCB71D","#F05620","#B22D6E","#3C368E","#8FB2CF","#95D4AB","#EAE98F","#F9BE92","#EC9A99","#BC98BD","#1EB7B2","#73C03C","#F48323","#EB271B","#D9B5CA","#AED1DA","#DFECB2","#FCDAB0","#F5BCB4"],description:"Color palette to be used for sectors of each sub pie."}],description:"Set measure member for each sub pie."}],description:"Set measure properties."},tooltip:{name:"tooltip",supportedValueType:"Object",supportedValues:[{name:"enable",supportedValueType:"Boolean",defaultValue:true,description:"Set whether the tooltip is enabled."},{name:"enableSmartLayout",supportedValueType:"Boolean",defaultValue:false,description:"Set whether the smartLayout is enabled."},{name:"mainValue",supportedValueType:"Object",supportedValues:[{name:"color",supportedValueType:"Color",defaultValue:"#000000",description:"Set color of tooltip main value."},{name:"font",supportedValueType:"Font",defaultValue:undefined,description:"Set font of tooltip main value."},{name:"formatString",supportedValueType:"StringArray",defaultValue:[""],description:"Set format string of tooltip main value."}],description:"Set properties of tooltip main value (data value)."},{name:"subValue",supportedValueType:"Object",supportedValues:[{name:"color",supportedValueType:"Color",defaultValue:"#000000",description:"Set color of tooltip sub value."},{name:"font",supportedValueType:"Font",defaultValue:undefined,description:"Set font of tooltip sub value."},{name:"formatString",supportedValueType:"StringArray",defaultValue:["0.00%"],description:"Set format string of tooltip sub value."}],description:"Set properties of tooltip sub value (percentage)."},{name:"text",supportedValueType:"Object",supportedValues:[{name:"color",supportedValueType:"Color",defaultValue:"#000000",description:"Set color of tooltip text."},{name:"font",supportedValueType:"Font",defaultValue:undefined,description:"Set font of tooltip text."},{name:"formatString",supportedValueType:"StringArray",defaultValue:[""],description:"Set format string of tooltip text."}],description:"Set properties of tooltip text (dimension label)."}],description:"Set tooltip properties of pie chart."}};return b},getColumnDescriptor:function(){var d=this.getCommonChartProperties();var c={type:d.type,theme:d.theme,background:d.background,animation:d.animation,legend:d.legend,layout:d.layout,tooltip:this.getXYChartProperties().tooltip,title:d.title,xAxis:d.xAxis,yAxis:d.yAxis,visibleRange:d.visibleRange,selectability:d.selectability,measure:{name:"measure",supportedValueType:"Object",supportedValues:[{name:"visibilityChangeable",supportedValueType:"Boolean",defaultValue:false,description:"Set the visibility changeable property."},{name:"type",supportedValueType:"String",defaultValue:"",description:"Top level type of element shapes",isExported:false}],description:"Set the measure releated properties.",isExported:false},measures:{name:"measures",supportedValueType:"ObjectArray",minArrayLength:0,supportedValues:[{name:"measure member",supportedValueType:"Object",supportedValues:[{name:"fillColor",supportedValueType:"Color",defaultValue:undefined,description:'Set the fill color of measure member. if it is unspecified, we will use following color palette: [ "#113975", "#e06f00", "#5a92e2", "#624628", "#e03c2f", "#ffbe7f", "#96a8c3", "#a9a9a9", "#830b00", "#344b6d", "#e2ce44", "#ff6657" ]'},{name:"barMarkerSize",supportedValueType:"PositiveInt",defaultValue:undefined,description:"Set the bar marker size of measure member.",isExported:false},{name:"valueAxis",supportedValueType:"PositiveInt",defaultValue:0,description:"Set value axis of measure member."},{name:"visible",supportedValueType:"Boolean",defaultValue:true,description:"Set visibility of measure member.",isExported:true}],description:"Set the measure member releated properties."}],description:"Set the measures releated properties."},bar:{name:"bar",supportedValueType:"Object",supportedValues:[{name:"renderer",supportedValueType:"Function",defaultValue:undefined,isExported:false,description:"customized bar renderer"},{name:"barMarkerSize",supportedValueType:"PositiveInt",defaultValue:undefined,description:"Set bar marker size of series."}],description:"Set bar releated properties."}};var b=this.getDataLabelProperty();c.measures.supportedValues[0].supportedValues.push(b);return c},getWaterfallDescriptor:function(){var d=this.getCommonChartProperties();var c={type:d.type,theme:d.theme,background:d.background,animation:d.animation,legend:d.legend,layout:d.layout,tooltip:this.getXYChartProperties().tooltip,title:d.title,xAxis:d.xAxis,yAxis:d.yAxis,visibleRange:d.visibleRange,selectability:d.selectability,measure:{name:"measure",supportedValueType:"Object",supportedValues:[{name:"visibilityChangeable",supportedValueType:"Boolean",defaultValue:false,description:"Set the visibility changeable property."},{name:"type",supportedValueType:"String",defaultValue:"",description:"Top level type of element shapes",isExported:false}],description:"Set the measure releated properties.",isExported:false},measures:{name:"measures",supportedValueType:"ObjectArray",minArrayLength:0,supportedValues:[{name:"measure member",supportedValueType:"Object",supportedValues:[{name:"fillColor",supportedValueType:"Color",defaultValue:undefined,description:'Set the fill color of measure member. if it is unspecified, we will use following color palette: [ "#113975", "#e06f00", "#5a92e2", "#624628", "#e03c2f", "#ffbe7f", "#96a8c3", "#a9a9a9", "#830b00", "#344b6d", "#e2ce44", "#ff6657" ]'},{name:"barMarkerSize",supportedValueType:"PositiveInt",defaultValue:undefined,description:"Set the bar marker size of measure member.",isExported:false},{name:"valueAxis",supportedValueType:"PositiveInt",defaultValue:0,description:"Set value axis of measure member."},{name:"visible",supportedValueType:"Boolean",defaultValue:true,description:"Set visibility of measure member.",isExported:true}],description:"Set the measure member releated properties."}],description:"Set the measures releated properties."},waterfall:{name:"waterfall",supportedValueType:"Object",supportedValues:[{name:"renderer",supportedValueType:"Function",defaultValue:undefined,isExported:false,description:"customized bar renderer"},{name:"markerSize",supportedValueType:"PositiveInt",defaultValue:undefined,description:"Set bar marker size of series."},{name:"startColor",supportedValueType:"Color",defaultValue:undefined,description:'Set the fill color of measure member. if it is unspecified, we will use following color palette: [ "#113975", "#e06f00", "#5a92e2", "#624628", "#e03c2f", "#ffbe7f", "#96a8c3", "#a9a9a9", "#830b00", "#344b6d", "#e2ce44", "#ff6657" ]'},{name:"endColor",supportedValueType:"Color",defaultValue:undefined,description:'Set the fill color of measure member. if it is unspecified, we will use following color palette: [ "#113975", "#e06f00", "#5a92e2", "#624628", "#e03c2f", "#ffbe7f", "#96a8c3", "#a9a9a9", "#830b00", "#344b6d", "#e2ce44", "#ff6657" ]'},{name:"positiveColor",supportedValueType:"Color",defaultValue:undefined,description:'Set the fill color of measure member. if it is unspecified, we will use following color palette: [ "#113975", "#e06f00", "#5a92e2", "#624628", "#e03c2f", "#ffbe7f", "#96a8c3", "#a9a9a9", "#830b00", "#344b6d", "#e2ce44", "#ff6657" ]'},{name:"negativeColor",supportedValueType:"Color",defaultValue:undefined,description:'Set the fill color of measure member. if it is unspecified, we will use following color palette: [ "#113975", "#e06f00", "#5a92e2", "#624628", "#e03c2f", "#ffbe7f", "#96a8c3", "#a9a9a9", "#830b00", "#344b6d", "#e2ce44", "#ff6657" ]'}],description:"Set waterfall chart releated properties."},bar:{name:"bar",supportedValueType:"Object",supportedValues:[{name:"renderer",supportedValueType:"Function",defaultValue:undefined,isExported:false,description:"customized bar renderer"},{name:"barMarkerSize",supportedValueType:"PositiveInt",defaultValue:undefined,description:"Set bar marker size of series."}],description:"Set bar releated properties."}};var b=this.getDataLabelProperty();c.measures.supportedValues[0].supportedValues.push(b);return c},getLineDescriptor:function(){var d=this.getCommonChartProperties();var c={type:d.type,theme:d.theme,background:d.background,animation:d.animation,legend:d.legend,layout:d.layout,tooltip:this.getXYChartProperties().tooltip,title:d.title,xAxis:d.xAxis,yAxis:d.yAxis,selectability:d.selectability,line:{name:"line",supportedValueType:"Object",supportedValues:[{name:"marker",supportedValueType:"Object",supportedValues:[{name:"size",supportedValueType:"PositiveInt",defaultValue:10,description:"Set line marker size of series."},{name:"visible",supportedValueType:"Boolean",defaultValue:false,description:"Set the visibility line marker."}],description:"Set line marker related properties."},{name:"lineThickness",supportedValueType:"PositiveInt",defaultValue:1,description:"Set line thinkness of series."},{name:"lineMarkerSize",supportedValueType:"PositiveInt",defaultValue:10,description:"Set line marker size of series."},{name:"renderer",supportedValueType:"Function",defaultValue:undefined,isExported:false,description:"customized line renderer"}],description:"Set the line releated properties."},visibleRange:d.visibleRange,measure:{name:"measure",supportedValueType:"Object",supportedValues:[{name:"visibilityChangeable",supportedValueType:"Boolean",defaultValue:false,description:"Set the visibility changeable property."}],description:"Set the measure releated properties.",isExported:false},measures:{name:"measures",supportedValueType:"ObjectArray",minArrayLength:0,supportedValues:[{name:"measure member",supportedValueType:"Object",supportedValues:[{name:"fillColor",supportedValueType:"Color",defaultValue:undefined,description:'Set the fill color of measure member. if it is unspecified, we will use following color palette: [ "#113975", "#e06f00", "#5a92e2", "#624628", "#e03c2f", "#ffbe7f", "#96a8c3", "#a9a9a9", "#830b00", "#344b6d", "#e2ce44", "#ff6657" ]'},{name:"lineMarkerSize",supportedValueType:"PositiveInt",defaultValue:10,description:"An internal properties, as it does not make sense to set size per series. Set the line marker size of measure member.",isExported:false},{name:"lineColor",supportedValueType:"Color",defaultValue:undefined,description:"Set the line color of measure mmeber."},{name:"lineThickness",supportedValueType:"PositiveInt",defaultValue:1,description:"Set the line size of measure mmeber.",isExported:false},{name:"valueAxis",supportedValueType:"PositiveInt",defaultValue:0,description:"Set value axis of measure mmeber."},{name:"visible",supportedValueType:"Boolean",defaultValue:true,description:"Set visibility of measure mmeber.",isExported:true},{name:"markerSymbol",supportedValueType:"List",supportedValues:["circle","triangle","diamond","pentagon","cross"],defaultValue:"circle",description:"Set marker symbol of measure mmeber."}],description:"Set the measure mmeber releated properties."}],description:"Set the measures releated properties."}};var b=this.getDataLabelProperty();c.measures.supportedValues[0].supportedValues.push(b);return c},getStackedBarDescriptor:function(){var d=this.getCommonChartProperties();var c={type:d.type,theme:d.theme,background:d.background,animation:d.animation,legend:d.legend,layout:d.layout,tooltip:this.getXYChartProperties().tooltip,title:d.title,selectability:d.selectability,xAxis:d.xAxis,yAxis:d.yAxis,bar:{name:"bar",supportedValueType:"Object",supportedValues:[{name:"renderer",supportedValueType:"Function",defaultValue:undefined,isExported:false,description:"customized Stacked bar renderer"},{name:"barMarkerSize",supportedValueType:"PositiveInt",defaultValue:undefined,description:"Set bar marker size of bar."}],description:"It is applied for all bar series."},visibleRange:d.visibleRange,measure:{name:"measure",supportedValueType:"Object",supportedValues:[{name:"visibilityChangeable",supportedValueType:"Boolean",defaultValue:false,description:"Set the visibility changeable property."}],description:"Set measure releated properties.",isExported:false},measures:{name:"measures",supportedValueType:"ObjectArray",minArrayLength:0,supportedValues:[{name:"measure member",supportedValueType:"Object",supportedValues:[{name:"fillColor",supportedValueType:"Color",defaultValue:undefined,description:'Set the fill color of measure member. if it is unspecified, we will use following color palette: [ "#113975", "#e06f00", "#5a92e2", "#624628", "#e03c2f", "#ffbe7f", "#96a8c3", "#a9a9a9", "#830b00", "#344b6d", "#e2ce44", "#ff6657" ]'},{name:"visible",supportedValueType:"Boolean",defaultValue:true,description:"Set visibility of measure member.",isExported:false}],description:"Set the measure member releated properties."}],description:"Set the measures releated properties."}};var b=this.getDataLabelProperty();c.measures.supportedValues[0].supportedValues.push(b);return c},getStackedColumnDescriptor:function(){return this.getStackedBarDescriptor()},_getBubbleTooltipDescriptor:function(){var b={name:"tooltip",supportedValueType:"Object",supportedValues:[{name:"enable",supportedValueType:"Boolean",defaultValue:true,description:"Set whether the tooltip is enabled."},{name:"backgroundColor",supportedValueType:"Color",defaultValue:"#f2f2f2",description:"Set the tooltip background color."},{name:"border",supportedValueType:"Object",supportedValues:[{name:"color",supportedValueType:"Color",defaultValue:"#AAAAAA",description:"Set the tooltip border color."},{name:"size",supportedValueType:"PositiveInt",defaultValue:2,description:"Set the border width"}],description:"Set border properties of tooltip."},{name:"separateLineColor",supportedValueType:"ColorArray",minArrayLength:3,defaultValue:["#ffffff","#8a8a8a","#ffffff"],description:"Set the tooltip separate line color, a list of gradient color."},{name:"guideLineColor",supportedValueType:"Color",defaultValue:"#333333",description:"Set the tooltip guide line color."},{name:"customization",supportedValueType:"Function",defaultValue:undefined,description:"Set tooltip object defination customized by consumer."},{name:"title",supportedValueType:"Object",supportedValues:[{name:"font",supportedValueType:"String",defaultValue:"bold 10px Arial",description:"Set font style of tooltip title."},{name:"color",supportedValueType:"Color",defaultValue:"#808080",description:"Set font color of tooltip title."},{name:"description",supportedValueType:"Array",defaultValue:null,description:"Set description of tooltip title."},{name:"descriptionFormatString",supportedValueType:"StringArray",defaultValue:[""],description:"Set formatString of description."},{name:"formatString",supportedValueType:"StringArray",minArrayLength:1,defaultValue:[""],description:"Set format string of tooltip title."}],description:"Set display properties of tooltip title."},{name:"label",supportedValueType:"Object",supportedValues:[{name:"font",supportedValueType:"StringArray",minArrayLength:1,defaultValue:["bold 10px Arial"],description:"Set font style of tooltip label. "},{name:"color",supportedValueType:"ColorArray",minArrayLength:1,defaultValue:["#808080"],description:"Set font color of tooltip label and re-use the last one in the array."},{name:"formatString",supportedValueType:"StringArray",minArrayLength:1,defaultValue:[""],description:"Set format string of tooltip label and re-use the last one in the array."}],description:"Set display properties of tooltip label."},{name:"mainValue",supportedValueType:"Object",supportedValues:[{name:"font",supportedValueType:"Font",defaultValue:undefined,description:"Set font style of tooltip main value."},{name:"color",supportedValueType:"Color",defaultValue:"#000000",description:"Set font color of tooltip main value and re-use the last one in the array."},{name:"formatString",supportedValueType:"ObjectArray",minArrayLength:1,supportedValues:[{name:"formatString member",supportedValueType:"Object",supportedValues:[{name:"x",supportedValueType:"String",defaultValue:"",description:"Set format string for x value."},{name:"y",supportedValueType:"String",defaultValue:"",description:"Set format string for y value."},{name:"z",supportedValueType:"String",defaultValue:"",description:"Set format string for z value."}],description:"Set format string for x,y and z value."}],defaultValue:[{}],description:"Set number format of tooltip main value and re-use the last one in the array."}],description:"Set display properties of tooltip main value."},{name:"zIndex",supportedValueType:"PositiveInt",defaultValue:undefined,description:"Set z-index of tooltip container",isExported:false}],description:"Set tooltip related properties."};return b},getBubbleDescriptor:function(){var d=this.getCommonChartProperties();this.changeValue(d,["xAxis","xAxis member","gridLine","showMajor"],"defaultValue",true);this.changeValue(d,["yAxis","yAxis member","gridLine","showMajor"],"defaultValue",false);var b={theme:d.theme,background:d.background,animation:d.animation,legend:d.legend,layout:d.layout,tooltip:this._getBubbleTooltipDescriptor(),title:d.title,selectability:d.selectability,xAxis:d.xAxis,yAxis:d.yAxis,visibleRange:d.visibleRange,type:{name:"type",supportedValueType:"String",supportedValues:"bubble",defaultValue:"bubble",description:"internal property to determine which chart module we should use",isExported:false},measure:{name:"measure",supportedValueType:"Object",supportedValues:[{name:"visibilityChangeable",supportedValueType:"Boolean",defaultValue:false,description:"Set the visibility changeable property."}],description:"Set measure releated properties.",isExported:false},measures:{name:"measures",supportedValueType:"ObjectArray",minArrayLength:0,supportedValues:[{name:"measure member",supportedValueType:"Object",supportedValues:[{name:"fillColor",supportedValueType:"Color",defaultValue:undefined,description:'Set the fill color of measure member. if it is unspecified, we will use following color palette: [ "#113975", "#e06f00", "#5a92e2", "#624628", "#e03c2f", "#ffbe7f", "#96a8c3", "#a9a9a9", "#830b00", "#344b6d", "#e2ce44", "#ff6657" ]'},{name:"barMarkerSize",supportedValueType:"PositiveInt",defaultValue:undefined,description:"An internal properties, as it does not make sense to set size per series. Set the bar marker size of measure member.",isExported:false},{name:"valueAxis",supportedValueType:"PositiveInt",defaultValue:0,description:"Set value axis of measure member."},{name:"visible",supportedValueType:"Boolean",defaultValue:true,description:"Set visibility of measure member.",isExported:true}],description:"Set the measure member releated properties."}],description:"Set the measures releated properties."}};b.bubble={name:"bubble",supportedValueType:"Object",supportedValues:[{name:"size",supportedValueType:"Number",defaultValue:25,description:"Set the diameter of bubble."}],description:"Set bubble releated properties.",isExported:false};var c=this.getBubbleDataLabelProperty();b.measures.supportedValues[0].supportedValues.push(c);return b},deepCopy:function(d){var b=new Object();if(typeof(d)=="object"){if(d instanceof Array){b=new Array()}for(var c in d){if(d[c]!=null&&typeof(d[c])=="object"){b[c]=this.deepCopy(d[c])}else{b[c]=d[c]}}}return b},changeValue:function(h,g,c,f){var b=g.length-1;for(var d=0;d<g.length;d++){for(var e in h){if(d==0&&e==g[d]){if(b===0){h[e][c]=f;break}h=h[e]["supportedValues"]}else{if(h[e]!=undefined&&h[e]["name"]==g[d]){if(b===1){h[e][c]=f;break}else{if(h[e]["supportedValues"]!=undefined){if(d==b){h[e]["supportedValues"]=f}else{h=h[e]["supportedValues"]}}else{h[e][c]=f}}}}}}}};return a});sap.riv.module({qname:"sap.riv.viz.xychart.ChartModule",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.core.Logger",version:"3.4.0"},{qname:"sap.riv.viz.shared.gridLine.GridLine",version:"3.4.0"},{qname:"sap.riv.core.Observable",version:"3.4.0"},{qname:"sap.riv.graphics.shape.Rectangle",version:"3.4.0"},{qname:"sap.riv.viz.shared.context.Context",version:"3.4.0"}],function Setup(d,e,b,j,a,g,c,h){var f=d.derive(g,{constructor:function(k){this._chart_options=k;this._dataTree=this._chart_options.dataTree;this._metaData=this._chart_options.metaData;this._xaxes=null;this._yaxes=null;this._data=null;this._defaultSelectionArmed=true;this._scrollBar=[];this._seriesLayer=null;this.addEvents(this.getSupportedAppEvents());this._gridLine=new a();this._tooltipEnabled=k.properties.tooltip.enable;this._visibleRangeChanged=true},init:function(){this._buildData();this.initSeries();this.initAxes();this.bindSeriesWithAxes();this.initScrollBar();this.initGridLineProperties()},_buildData:function(){this._data=this._chart_options.properties._additional.data},_isVisibleRangeChanged:function(k,l){if(l==null||(l.start==null&&l.end==null)){return false}if(k==null){return true}if(k.start===l.start&&k.end===l.end){return false}else{return true}},updateProperties:function(l){var k={};k.properties=l;this._visibleRangeChanged=this._isVisibleRangeChanged(this._chart_options.properties.visibleRange,l.visibleRange);this._chart_options=k;if(l.tooltip!=null&&l.tooltip.enable!=null){this._tooltipEnabled=l.tooltip.enable}},updateOptions:function(k){this._chart_options=k;this._dataTree=this._chart_options.dataTree;this._metaData=this._chart_options.metaData;this._hasDrawn=false},isSelectable:function(){if(b.isExist(this._chart_options)&&b.isExist(this._chart_options.properties)&&b.isExist(this._chart_options.properties.selectability)){var k=(this._chart_options.properties.selectability.mode!="none");return k}else{return true}},isDeselectable:function(){if(b.isExist(this._chart_options)&&b.isExist(this._chart_options.properties)&&b.isExist(this._chart_options.properties.selectability)&&b.isExist(this._chart_options.properties.selectability.deSelectable)){return this._chart_options.properties.selectability.deSelectable}else{return true}},_hasVisibleSeries:function(){var n=this._chart_options.properties._additional;var m=h.get(n.statesManagerId);var k=m.getStatesItemValue(m.CHANGESERIESVISIBILITY);for(var l=0;l<k.length;l++){if(k[l]!==false){return true}}return false},_findSeriesItemsUnderPoint:function(m,s,l){for(var r=0,k=s.length;r<k;r++){var o=s[r].getSeriesItems();for(var q=0,n=o.length;q<n;q++){if(o[q].containsPoint(m)){l.push(o[q])}}}},initAxes:e.unsupported,initSeries:e.unsupported,initScrollBar:e.noop,bindSeriesWithAxes:e.unsupported,drawSeries:e.unsupported,doChartLayout:e.unsupported,initRenderer:e.unsupported,initGridLineProperties:e.unsupported,getSupportedAppEvents:e.unsupported,clearDrawing:e.unsupported,marqueeOverPoint:e.noop,onhover:e.noop,onclick:e.noop,onblur:e.noop,drawViewPort:e.noop,position:e.noop,scaleChart:e.noop,scaleChartEnd:e.noop,translateChart:e.noop,scale:e.noop,panMove:e.noop,pinchingResize:e.noop,backUp:e.noop,restore:e.noop,getPlotArea:e.noop,selectData:e.noop,unSelectData:e.noop,position:function(k,l){this._seriesLayer.position({x:k,y:l})},updateSeriesVisibilty:e.noop});return f});sap.riv.module({qname:"sap.riv.viz.shared.series.LineRenderer",version:"3.4.0"},[{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.core.Math",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.BaseRenderer",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.Series",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.SeriesItem",version:"3.4.0"},{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.Animator",version:"3.4.0"},{qname:"sap.riv.vizkit.ThemeManager",version:"3.4.0"},{qname:"sap.riv.graphics.Layer",version:"3.4.0"},{qname:"sap.riv.graphics.shape.Line",version:"3.4.0"},{qname:"sap.riv.graphics.shape.Polygon",version:"3.4.0"},{qname:"sap.riv.graphics.shape.Circle",version:"3.4.0"},{qname:"sap.riv.graphics.shape.Paths",version:"3.4.0"},{qname:"sap.riv.viz.shared.shape.Triangle",version:"3.4.0"},{qname:"sap.riv.viz.shared.shape.Diamond",version:"3.4.0"},{qname:"sap.riv.viz.shared.shape.Cross",version:"3.4.0"},{qname:"sap.riv.viz.shared.shape.Pentagon",version:"3.4.0"},{qname:"sap.riv.graphics.shape.TextLine",version:"3.4.0"}],function Setup(m,h,a,g,c,k,u,r,e,n,b,o,t,q,f,j,s,l){var d=k.derive(a,{supportedMarkerType:{circle:"circle",triangle:"triangle",diamond:"diamond",pentagon:"pentagon",cross:"cross"},renderParameters:{hiddenBorderWidth:2,hoveringBorderWidthFactor:1.5,highlightBorderWidthFactor:1.7},constructor:function(w,v){this._markerShadowVisible=false;this._lineShadowVisible=false;this._guideLine=w.addShape(new n());this._parseOptions(v);this._isInitialization=true},_parseOptions:function(v){this._lineShadowVisible=v.line.isShowLineShadow;this._markerShadowVisible=v.line.isShowMarkerShadow;this._hiddenBorderColor=v.background.color},draw:function(){var w=this.getSeriesGroups();if(w.length===0){return}var v=w[0].getSeriesList();if(v.length===0){return}this._initSeries(v);this._update();this._regEvent()},_update:function(){var B=this.getSeriesGroups();var A=B[0].getSeriesList();var C=A[0].getXAxis();var w=C.getMajorTicks();for(var z=0,v=A.length;z<v;z++){this._calculateSeriesPoints(A[z],w)}var x=true;if(this._enableAllAnimation){if(this._isInitialization){x=!this._enableInitAnimation}}if(x){for(var z=0;z<A.length;z++){this._drawSeries(A[z])}}this._doAnimation(x)},redraw:function(){var w=this.getSeriesGroups();if(w.length===0){return}var v=w[0].getSeriesList();if(v.length===0){return}this._updateMarkerSymbol(v);this._update();this.refresh()},_updateMarkerSymbol:function(v){var B=this.getLayer();for(var x=0,E=v.length;x<E;x++){var z=v[x];var C=z.getOptions().markerSymbol;var A=z.getSeriesItems();for(var w=0,G=A.length;w<G;w++){var D=this._getMarkerObject(C);var F=A[w].getMainShapes()[0];if(!(F instanceof D)){B.removeShape(F);A[w].setMainShapes([B.addShape(new D())])}}}},_getMarkerObject:function(w){var v;switch(w){case this.supportedMarkerType.triangle:v=q;break;case this.supportedMarkerType.diamond:v=f;break;case this.supportedMarkerType.pentagon:v=s;break;case this.supportedMarkerType.cross:v=j;break;case this.supportedMarkerType.circle:default:v=o;break}return v},_calculateSeriesPoints:function(B,w){var z=B.getData();var v=B.getYAxis();var E=v.getMaxValue();var F=v.getMinValue();var A=(v._sax_options.index!=1)?this.verticalAxes0Offset:this.verticalAxes1Offset;var C=B.getSeriesItems(),H;for(var x=0,D=z.length;x<D;x++){H={};H.x=w[x];var G=h.max(F,h.min(E,z[x].value));H.y=v.u2p(G)+A;C[x].setPosition(H)}},getDataLabelLayer:function(){var v=this.getLayer();if(this._dataLabelLayer==null){this._dataLabelLayer=new e({anchor:{x:0,y:0}});this._dataLabelLayer.clipToBounds(true);v.addSubLayer(this._dataLabelLayer)}this._dataLabelLayer.size(v.size());return this._dataLabelLayer},_initSeries:function(w){var E=this.getLayer(),A,x;var v=this.getDataLabelLayer();var H;var G;for(A=0,len=w.length;A<len;A++){var B=w[A];var D=B.getOptions().markerSymbol;var z=B.getOptions().dataLabel;var C=B.getSeriesItems();for(x=0,jlen=C.length;x<jlen;x++){var F=this._getMarkerObject(D);if(A==0&&x==0){H=E.addShape(new n());G=E.addShape(new F())}else{H=E.insertShapeAfter(new n(),H);G=E.insertShapeAfter(new F(),G)}C[x].setDecoratingShapes({line:H});C[x].setMainShapes([G]);if(z&&z.visible){C[x].setDataLabelShapes([v.addShape(new l())])}}}},_drawSeries:function(w,F,E){var z=w.getSeriesItems();var v=z.length;if(arguments.length===3){v=E}for(var x=0;x<v;x++){if((m.isExist(F))&&(F[x]!==1)){break}var C=z[x];var D=C.getMainShapes()[0];var A=C.getDecoratingShapes();var B=w.getOptions().marker.visible;var G=A.line;if(!C.isVisible()){D.visible(false);G.visible(false);if(m.isDefined(A.border)){A.border.visible(false)}if(m.isDefined(A.cross)){A.cross.visible(false)}}else{D.visible(B);G.visible(true);if(m.isDefined(A.border)){A.border.visible(B)}if(m.isDefined(A.cross)){A.cross.visible(B)}}this._drawDataLabel(C);if(B){this._drawMarkShadow(D)}this._drawLineShadow(G)}this._drawMarkAndLine(z,w,F,v)},_getDataLabelAnchor:function(w,v,A){var x=A.getSeries().getOptions();var B=x.marker.size/2;var z={x:v.x,y:v.y};if(w=="above"){z.align="bottom";z.y=v.y-B}else{if(w=="below"){z.align="top";z.y=v.y+B}else{if(w=="left"){z.align="right";z.x=v.x-B}else{if(w=="right"){z.align="left";z.x=v.x+B}else{z.align="center"}}}}return z},_drawMarkShadow:function(v){if(this._markerShadowVisible){v.shadow({offsetX:1,offsetY:2,blur:2,color:"rgba(0,0,0,0.5)"})}else{v.shadow({offsetX:0,offsetY:0,blur:0,color:"rgba(0,0,0,0.5)"})}},_removeMarkShadow:function(v){v.shadow({offsetX:0,offsetY:0,blur:0,color:"rgba(0,0,0,0.5)"})},_drawLineShadow:function(v){if(this._lineShadowVisible){v.shadow({offsetX:0,offsetY:2,blur:3,color:"rgba(0,0,0,0.5)"})}else{v.shadow({offsetX:0,offsetY:0,blur:0,color:"rgba(0,0,0,0.5)"})}},_doAnimation:function(w){var v=this;if(!w){var B=v._highlights;var z=v.getSeriesGroups()[0].getSeriesList();for(var x=0,A=B.length;x<A;x++){this._removeHighlight(B[x])}for(var x=0,A=B.length;x<A;x++){this._doHighlight(B[x],z[B[x].measureIndex])}u.animate({values:[{type:"FLOAT",from:0,to:1}],duration:this._animationDuration,onStep:function(E){var D=z[0].getSeriesItems();var F=D.length;var H=v.getLayer().size().width*E[0];for(var G=0,C=D.length;G<C;G++){if(D[G].getPosition().x>=H){F=G;break}}if(F>=1&&F<=D.length){for(var G=0,C=z.length;G<C;G++){v._drawSeries(z[G],undefined,F)}}v.refresh()},onComplete:function(){for(var C=0;C<z.length;C++){v._drawSeries(z[C])}}})}else{var z=v.getSeriesGroups()[0].getSeriesList();var B=v._highlights;for(var x=0,A=B.length;x<A;x++){this._removeHighlight(B[x])}for(var x=0,A=B.length;x<A;x++){this._doHighlight(B[x],z[B[x].measureIndex])}var B=v._highlights;for(var x=0,A=B.length;x<A;x++){B[x].crossShape.visible(true);B[x].borderShape.visible(true)}v.refresh()}this._isInitialization=false},_drawMarkAndLine:function(B,A,L,J){var v=B.length;if(arguments.length==4){v=J}var w=A.getOptions();var I=w.marker.size;var K=w.lineThickness;var x=w.fillColor;var F=w.lineColor;var C=w.markerSymbol;for(var z=0;z<v;z++){var E=B[z].getMainShapes()[0];var M=B[z].getDecoratingShapes()["line"];var H=B[z].getPosition();if(m.isExist(L)){if(L[z]===1){var D=E.fillingColor(x);this._drawLineMarker(D,H,I,C);if(z!=0){var G=B[z-1].getPosition();M.cap("round");M.color(F).update(K,G,H)}}}else{var D=E.fillingColor(x);this._drawLineMarker(D,H,I,C);if(z!=0){var G=B[z-1].getPosition();M.cap("round");M.color(F).update(K,G,H)}}}},_clearSeriesItemDrawing:function(x){var w=x.getMainShapes()[0];var v=x.getDecoratingShapes();var C=x.getDataLabelShapes();var B=this.getLayer();B.removeShape(w);B.removeShape(v.line);B.removeShape(v.border);B.removeShape(v.cross);B.removeShape(v.hoveringBorder);B.removeShape(v.hiddenHoveringBorder);B.removeShape(v.hiddenMark);var A=this.getDataLabelLayer();if(C!=null&&C.length>0){for(var z=0;z<C.length;z++){A.removeShape(C[z])}}},_regEvent:function(){},_highlightSeriesItem:function(x){var A=this.getLayer(),z;var w=x.getSeries().getSeriesItems();for(z=0,len=w.length;z<len;z++){if(w[z].getMainShapes()!=null){var v=w[z].getMainShapes()[0];if(v){A.removeShape(v);A.addShape(v)}}}this._doHighlight(x);x.setStatus(x.getStatus()|c.status.highlighted);this.refresh()},_doHighlight:function(z){var x=z.getSeries().getOptions();var w={};w.color=x.fillColor;w.shapeSymbol=x.markerSymbol;w.size=this.renderParameters.highlightBorderWidthFactor*x.marker.size;w.lineMarkerVisible=x.marker.visible;if(!m.isExist(z.getMainShapes())){return}var v=z.getDecoratingShapes();var C=this._createBorder(z,w);v.border=C;C.visible(w.lineMarkerVisible&&z.isVisible());var A=this._drawSelectionMarkup(z,w,C);v.cross=A;A.visible(w.lineMarkerVisible&&z.isVisible());var B=z.getMainShapes()[0];this._removeMarkShadow(B)},_removeHighlight:function(w){var x=this.getLayer();var v=w.getDecoratingShapes();var z=w.getSeries().getOptions().marker.visible;if(v.border){x.removeShape(v.border)}if(v.cross){x.removeShape(v.cross)}if(!z){return}if(!w.isHovered()){this._drawMarkShadow(w.getMainShapes()[0])}else{x.removeShape(w.getDecoratingShapes().hoveringBorder);x.addShape(w.getDecoratingShapes().hoveringBorder);x.removeShape(w.getMainShapes()[0]);x.addShape(w.getMainShapes()[0])}},_clearSeriesItemHighlight:function(v){this._removeHighlight(v);v.setStatus(v.getStatus()&(~c.status.highlighted));this.refresh()},updateProperties:function(v){a.prototype.updateProperties.apply(this,arguments);this._parseOptions(v)},hoverAround:function(R,C,E){var L=this.getSeriesGroups(),N,v=[];if(L.length===0){return}N=L[0].getSeriesList();if(N.length===0){return}var H=false,P,O;for(P=0;P<N.length;P++){if(N[P].isVisible()){H=true;break}}if(!H){return}for(P=0;P<N.length;P++){for(O=0;O<N[P].getSeriesItems().length;O++){v.push(N[P].getSeriesItems()[O])}}var I=N[0].getXAxis();var M=I.getMajorTicks();var S=I.getTickInterval()/2;var B=0,z=M.length-1,J=false,T=0,U;while(!J&&(B<=z)){T=h.round((B+z)/2);U=M[T]-R.x;if(h.abs(U)<=S){J=true}else{if(U<=0){B=T+1}else{z=T-1}}}if(!J){return}if(this._lastHoveredIndex===T){return}var x=[];for(P=0;P<v.length;P++){if(v[P].getDataIndex()===this._lastHoveredIndex){x.push(v[P])}}if(x.length>0){var A,K;for(P=0;P<x.length;P++){A=x[P].getDecoratingShapes();K=x[P].getSeries().getOptions().marker.visible;if(m.isDefined(A.hoveringBorder)){A.hoveringBorder.visible(false)}if(m.isDefined(A.hiddenHoveringBorder)){A.hiddenHoveringBorder.visible(false)}if(m.isDefined(A.hiddenMark)){A.hiddenMark.visible(false)}if(x[P].isHighlighted()){A.border.visible(K&&x[P].isVisible());A.cross.visible(K&&x[P].isVisible())}else{x[P].getMainShapes()[0].shadow({offsetX:1,offsetY:2,blur:2,color:"rgba(0, 0, 0, 0.5)"})}x[P].setStatus(x[P].getStatus()&(~c.status.hovered))}}if(C){this._guideLine.visible(true).color(E).update(2,{x:M[T],y:N[0].getYAxis().getLastTickOffset()},{x:M[T],y:this.getLayer().size().height});this._guideLine.shadow({offsetX:0,offsetY:0,blur:5,color:"rgba(80,80,80,1)"});this.refresh()}var w,Q,D,V,G,K,W=this.getLayer(),F={};for(P=0;P<v.length;P++){if(v[P].getDataIndex()===T){G=v[P].getSeries().getOptions();K=G.marker.visible;F.lineMarkerVisible=K;F.shapeSymbol=G.markerSymbol;F.color=G.fillColor;F.size=this.renderParameters.hoveringBorderWidthFactor*G.marker.size;if(K){w=this._createBorder(v[P],F);v[P].getDecoratingShapes().hoveringBorder=w;V=v[P].getMainShapes()[0];W.removeShape(w);W.addShape(w);W.removeShape(V);W.addShape(V);w.visible(K&&v[P].isVisible())}else{F.shapeSymbol=this.supportedMarkerType.circle;F.color=this._hiddenBorderColor;F.size=G.lineThickness+2*this.renderParameters.hiddenBorderWidth;Q=this._createBorder(v[P],F);v[P].getDecoratingShapes().hiddenHoveringBorder=Q;V=v[P].getMainShapes()[0];W.removeShape(Q);W.addShape(Q);W.removeShape(V);W.addShape(V);Q.visible(!K&&v[P].isVisible());F.color=G.lineColor;F.size=G.lineThickness;D=this._createBorder(v[P],F);v[P].getDecoratingShapes().hiddenMark=D;W.removeShape(D);W.addShape(D);D.visible(!K&&v[P].isVisible())}v[P].getMainShapes()[0].shadow({offsetX:0,offsetY:0,blur:0,color:"rgba(0, 0, 0, 0.5)"});if(v[P].isHighlighted()){v[P].getDecoratingShapes().border.visible(false);v[P].getDecoratingShapes().cross.visible(false)}v[P].setStatus(v[P].getStatus()|c.status.hovered)}}this._lastHoveredIndex=T;R.x=M[T];return{dimensionItemIndex:T,point:R}},blurOut:function(){var B=this.getSeriesGroups(),A,v=[],z,x;if(B.length===0){return}A=B[0].getSeriesList();if(A.length===0){return}for(z=0;z<A.length;z++){for(x=0;x<A[z].getSeriesItems().length;x++){v.push(A[z].getSeriesItems()[x])}}var C,D,w;for(z=0;z<v.length;z++){C=v[z].getMainShapes()[0];w=v[z].getDecoratingShapes();D=v[z].getSeries().getOptions().lineMarkerVisible;if(v[z].isHovered()){if(m.isDefined(w.hoveringBorder)){w.hoveringBorder.visible(false)}if(m.isDefined(w.hiddenHoveringBorder)){w.hiddenHoveringBorder.visible(false)}if(m.isDefined(w.hiddenMark)){w.hiddenMark.visible(false)}}if(v[z].isHighlighted()){w.border.visible(D&&v[z].isVisible());w.cross.visible(D&&v[z].isVisible())}else{C.shadow({offsetX:1,offsetY:2,blur:2,color:"rgba(0, 0, 0, 0.5)"})}v[z].setStatus(v[z].getStatus()&(~c.status.hovered))}this._lastHoveredIndex=-1;this._guideLine.visible(false);this.refresh()},_createBorder:function(x,w){var C=null;var B=x.getMainShapes()[0];var z=this.getLayer();var v=this._getMarkerObject(w.shapeSymbol);C=z.insertShapeBefore(new v(),B);if(w.lineMarkerVisible){C.fillingColor("white").borderWidth(1).borderColor(w.color)}else{C.fillingColor(w.color)}C.visible(false);var A=x.getPosition();this._drawLineMarker(C,A,w.size,w.shapeSymbol);return C},_drawSelectionMarkup:function(w,v,z){var x=w.getPosition();switch(v.shapeSymbol){case this.supportedMarkerType.triangle:selectionMark=new q();break;case this.supportedMarkerType.diamond:selectionMark=new f();break;case this.supportedMarkerType.pentagon:selectionMark=new s();break;case this.supportedMarkerType.cross:case this.supportedMarkerType.circle:default:selectionMark=new j();break}selectionMark.reset();selectionMark.size(v.size).centerPoint(x);selectionMark=selectionMark.doDrawSelectionMarkup();selectionMark.borderWidth(1).borderColor(v.color).visible(false);selectionMark=this.getLayer().insertShapeAfter(selectionMark,z);return selectionMark},_drawLineMarker:function(w,v,z,x){if(typeof x==="undefined"||x===this.supportedMarkerType.circle){w.center({x:v.x,y:v.y}).radius(z/2)}else{w.reset();w.size(z).centerPoint(v);w.doDrawShape();w.close()}}});return d});sap.riv.module({qname:"sap.riv.viz.xychart.CombinationModule",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"},{qname:"sap.riv.core.Logger",version:"3.4.0"},{qname:"sap.riv.core.UADetector",version:"3.4.0"},{qname:"sap.riv.vizkit.GestureDetector",version:"3.4.0"},{qname:"sap.riv.core.Animator",version:"3.4.0"},{qname:"sap.riv.viz.shared.axis.Axis",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.SeriesGroup",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.Series",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.SeriesItem",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.ColumnBarRenderer",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.LineRenderer",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.SeriesHighlighter",version:"3.4.0"},{qname:"sap.riv.viz.xychart.ChartModule",version:"3.4.0"},{qname:"sap.riv.viz.shared.utils.ScrollBarRenderer",version:"3.4.0"},{qname:"sap.riv.viz.shared.context.Context",version:"3.4.0"}],function Setup(d,q,s,j,e,o,u,g,a,f,b,k,c,m,h,l,r){var t={xAxis:{showMajor:false,majorColor:"#c9c9c9",majorThickness:"1",showMinor:false,minorColor:"#c9c9c9",minorThickness:"1",showSub:false,subColor:"#c9c9c9"},yAxis:{showMajor:true,majorColor:"#c9c9c9",majorThickness:"1",showMinor:false,minorColor:"#c9c9c9",minorThickness:"1",showSub:false,subColor:"#c9c9c9"}};var n=d.derive(h,{events:["selectData","unSelectData","showTooltip","hideTooltip"],constructor:function(v){this._valueAxisRange=[];this._seriesList=null;this._barSeriesGroup=null;this._lineSeriesGroup=null;this._columnBarRenderer=null;this._lineRenderer=null;this._hasDrawn=false;this._hasBacked=false;this._parseGuideLineColor()},initGridLineProperties:function(){this._xAxis_gridLine_option=d.extend(true,t.xAxis,this._chart_options.properties.xAxis[0].gridLine);this._yAxis_gridLine_option=d.extend(true,t.yAxis,this._chart_options.properties.yAxis[0].gridLine);this._gridLine.setXAxisOptions(this._xAxis_gridLine_option);this._gridLine.setYAxisOptions(this._yAxis_gridLine_option)},_parseGuideLineColor:function(){if(this._chart_options.properties.tooltip.guideLineColor!=null){this._guideLineColor=this._chart_options.properties.tooltip.guideLineColor}else{this._guideLineColor="#333333"}},gridLinePropertiesCheck:function(){if((!this._yAxis_gridLine_option.showMajor&&this._yAxis_gridLine_option.showSub)||this._xAxis_gridLine_option.showMajor||this._xAxis_gridLine_option.showMinor){s.error("Wrong settings for grid line of combination chart")}},initAxes:function(){this._initXAxes();this._initYAxes()},_initXAxes:function(){this._xaxes=[];var C=this._chart_options.properties.xAxis;var D=this._dataTree.getSubMemberLabels();var z=[];for(var A=0;A<D.length;A++){z.push(D[A].value)}for(var A=0,w=C.length;A<w;A++){if(q.isExist(C[A].showTitle)&&C[A].showTitle&&!q.isExist(C[A].title)){C[A].title="X"+(A+1)}var B={mode:g.DIMENSION,position:"hb",index:A,labels:z};var v=new g(d.extend(true,B,C[A]));this._xaxes.push(v)}},_initYAxes:function(){this._yaxes=[];var z=this._chart_options.properties.yAxis;for(var w=0,v=z.length;w<v;w++){if(q.isExist(z[w].showTitle)&&z[w].showTitle&&!q.isExist(z[w].title)){z[w].title="Y"+(w+1)}var x={mode:g.NUMERIC,position:w===0?"vl":"vr",index:w,maxValue:q.isExist(this._valueAxisRange[w])?this._valueAxisRange[w].max:0,minValue:q.isExist(this._valueAxisRange[w])?this._valueAxisRange[w].min:0};var A=new g(d.extend(true,x,z[w]));this._yaxes.push(A)}},initSeries:function(){delete this._highlighter;this._valueAxisRange=[];var B=this._chart_options.properties.measures;var P=this._metaData.measureMembers;var H=this._chart_options.properties.measureDefault.colors;var N=this._chart_options.properties.bar;var L=this._chart_options.properties.line;delete this._seriesList;this._seriesList=[];this._barSeriesGroup=new a();this._lineSeriesGroup=new a();var w=this._chart_options.properties._additional;var x=r.get(w.statesManagerId);var O=x.getStatesItemValue(x.CHANGESERIESVISIBILITY);for(var I=0,K=P.length;I<K;I++){var C=B[I]||{},D;var A=q.isExist(C.fillColor)?C.fillColor:H[I%H.length];if(this._chart_options.properties.measure.type==="bar"||C.type==="bar"){C=d.extend(true,{},N,C);C.fillColor=A;D=new f(C);D.setIndex(I);if(O[I]===false){C.visible=false}D.setVisible(C.visible);D.setName(P[I].value);D.setData(this._data[I]);this._barSeriesGroup.addSeries(D);this._seriesList.push(D)}else{C=d.extend(true,{},L,C);C.fillColor=A;C.lineColor=C.lineColor||A;D=new f(C);if(O[I]===false){C.visible=false}D.setVisible(C.visible);D.setName(P[I]);D.setData(this._data[I]);this._lineSeriesGroup.addSeries(D);this._seriesList.push(D)}var M=this._data[I];for(var G=0,E=M.length;G<E;G++){var F=new b();F.setData([M[G]]);F.setDataIndex(M[G].dimensionPath[0].dimensionItemIndex);if(C.visible===false){F.setStatus(F.getStatus()|b.status.invisible)}D.addSeriesItem(F)}if(D.isVisible()){var J=C.valueAxis||0;this._updateValueAxisRange(D.getDataRange(),J)}}var v=this._chart_options.properties.selectability;var z=0;if(v.mode==="single"){z=1}if(v.mode==="multiple"){z=1000}this._highlighter=new m(this._seriesList,z,true)},initScrollBar:function(){if(this._scrollBar.length>0){for(var v=0;v<this._scrollBar.length;v++){this._scrollBar[v].remove()}}this._scrollBar=[];this._scrollBar[0]=new l()},updateValueAxisRange:function(){this._valueAxisRange=[];var H=this._chart_options.properties.measures;var x=this._chart_options.properties.measure;var B=0,A=0;var F=this._barSeriesGroup.getSeriesList();var C=this._lineSeriesGroup.getSeriesList();var w=this._chart_options.properties._additional;var I=r.get(w.statesManagerId);var v=I.getStatesItemValue(I.CHANGESERIESVISIBILITY);var E;for(var D=0,G=this._metaData.measureMembers.length;D<G;D++){var z=H[D]||{};z.visible=v[D];var J=z.valueAxis||0;if(z.type==="bar"||x.type=="bar"){E=F[B];B++}else{E=C[A];A++}if(z.visible&&E){this._updateValueAxisRange(E.getDataRange(),J)}}},_updateValueAxisRange:function(v,w){if(this._valueAxisRange[w]===undefined){this._valueAxisRange[w]={max:Number.NEGATIVE_INFINITY,min:Number.POSITIVE_INFINITY}}if(v.max>this._valueAxisRange[w].max){this._valueAxisRange[w].max=v.max}if(v.min<this._valueAxisRange[w].min){this._valueAxisRange[w].min=v.min}},bindSeriesWithAxes:function(){var E=this._chart_options.properties.measures;var x=0,w=0;var C=this._barSeriesGroup.getSeriesList();var z=this._lineSeriesGroup.getSeriesList();var A;for(var B=0,D=this._metaData.measureMembers.length;B<D;B++){var v=E[B]||{};var F=v.valueAxis||0;if(this._chart_options.properties.measure.type==="bar"||v.type==="bar"){A=C[x];x++}else{A=z[w];w++}if(A){A.setXAxis(this._xaxes[0]);A.setYAxis(this._yaxes[F])}}},initRenderer:function(w){if(this._columnBarRenderer==null&&this._lineRenderer==null){var x=this._chart_options.properties.bar;if(x&&q.isFunction(x.renderer)){this._columnBarRenderer=new x.renderer(w,this._chart_options.properties)}else{this._columnBarRenderer=new k(w,this._chart_options.properties)}var v=this._chart_options.properties.line;if(v&&q.isFunction(v.renderer)){this._lineRenderer=new v.renderer(w,this._chart_options.properties)}else{this._lineRenderer=new c(w,this._chart_options.properties)}}else{this._columnBarRenderer.resetSeriesGroups();this._lineRenderer.resetSeriesGroups()}this._columnBarRenderer.addSeriesGroup(this._barSeriesGroup);this._lineRenderer.addSeriesGroup(this._lineSeriesGroup)},drawSeries:function(){if(!this._hasDrawn){this._columnBarRenderer.draw();this._lineRenderer.draw();this._hasDrawn=true}else{this._columnBarRenderer.redraw();this._lineRenderer.redraw()}var w=this._chart_options.properties.selectability;if(this._defaultSelectionArmed){var x=w.defaultSelectedItems;if(w.mode!=="none"&&x.length!==0&&q.isDefined(x[0].measureIndex)){for(var A=0,v=x.length;A<v;A++){var z=x[A];if(q.isExist(z.dimensionItemIndex)&&q.isExist(z.dimensionPath)&&z.dimensionPath.length===0){z.dimensionPath=[{dimensionItemIndex:z.dimensionItemIndex,analysisAxisIndex:0,dimensionIndex:0}]}}this._highlighter.setTargets(w.defaultSelectedItems)}this._defaultSelectionArmed=false}this._highlighter.run()},doChartLayout:function(B,x,C,E,A){this._seriesLayer=A;var z={width:0,height:0};var w={width:0,height:0};var G={width:0,height:0};w.width+=this._yaxes[0].getPreferredWidth();if(this._yaxes.length>1){G.width+=this._yaxes[1].getPreferredWidth()}var D=B.width-w.width-G.width;this._xaxes[0].updateProperties({distance:D});z.width+=this._xaxes[0].getPreferredWidth();z.height+=this._xaxes[0].getPreferredHeight();var F=this._yaxes[0].getAxisMetrics(),J,v=F.top,I=Math.max(F.top,z.height),H;if(this._yaxes.length>1){J=this._yaxes[1].getAxisMetrics();v=Math.max(v,J.top);I=Math.max(I,J.bottom)}H=B.height-v-I;this._yaxes[0].updateProperties({distance:H});w.height+=this._yaxes[0].getPreferredHeight();x[0].size({width:w.width+this._yaxes[0].getMajorTickWidth()/2,height:w.height});x[0].position({x:0,y:v-F.top});if(this._yaxes.length>1){this._yaxes[1].updateProperties({distance:H});G.height+=this._yaxes[1].getPreferredHeight();x[1].size({width:G.width+this._yaxes[1].getMajorTickWidth()/2,height:G.height});x[1].position({x:w.width+z.width-this._yaxes[1].getMajorTickWidth()/2,y:v-J.top})}C[0].size({width:z.width,height:z.height});C[0].position({x:w.width,y:B.height-I-1});if(this._columnBarRenderer!=null){this._columnBarRenderer.verticalAxes0Offset=v-F.top;this._columnBarRenderer.verticalAxes1Offset=J?v-J.top:0}if(this._lineRenderer!=null){this._lineRenderer.verticalAxes0Offset=v-F.top;this._lineRenderer.verticalAxes1Offset=J?v-J.top:0}E.size({width:D,height:v+H+2});E.position({x:w.width,y:0});A.size(E.size());A.position({x:0,y:0});this._scrollBar[0].init(E,A,"horizontal");if(this._visibleRangeChanged){this._visibleRangeChanged=false;this._updateVisibleRange()}else{this.restore()}this._topBound=this._yaxes[0].getLastTickOffset()},_updateVisibleRange:function(){var B=this._chart_options.properties.visibleRange;var z=B.start;var A=B.end;if(z<0||A<0||z>this._dataTree.getSubMemberLabels().length-1||A>this._dataTree.getSubMemberLabels().length-1||z>A){z=0;A=this._dataTree.getSubMemberLabels().length-1}if(z===0&&A===this._dataTree.getSubMemberLabels().length-1){return}var w=A-z+1;var C=(this._xaxes[0]._sax_renderer.getMaxValue()-this._xaxes[0]._sax_renderer.getMinValue())/w;this._xaxes[0].setVisibleRange(C,1,C);var v=this._xaxes[0].getTickInterval();this._xaxes[0].position(-v*(z-this._xaxes[0]._sax_renderer.getMinValue()+0.5),0);var x=this._seriesLayer.size();this._seriesLayer.size({width:x.width*C,height:x.height});this.position(-v*(z-this._xaxes[0]._sax_renderer.getMinValue()+0.5),0);if(e.os()==="iPad"){this._scrollBar[0].update();this._scrollBar[0].unHighLight()}},updateProperties:function(F){h.prototype.updateProperties.apply(this,arguments);var E=this._chart_options.properties.measures;var w=this._chart_options.properties.measure;var z=[],D=[];var x=this._chart_options.properties.measureDefault.colors;var B=this._chart_options.properties.bar;var G=this._chart_options.properties.line;this._guideLineColor=this._chart_options.properties.tooltip.guideLineColor;if(q.isExist(B)){this._columnBarRenderer.updateProperties(this._chart_options.properties)}if(q.isExist(G)){this._lineRenderer.updateProperties(this._chart_options.properties)}for(var A=0,C=this._metaData.measureMembers.length;A<C;A++){var v=E[A]||{};if(v.type==="bar"||w.type==="bar"){v=d.extend(true,{},v,B);v.fillColor=q.isExist(v.fillColor)?v.fillColor:x[A%x.length];z.push(v)}else{v=d.extend(true,{},v,G);v.fillColor=q.isExist(v.fillColor)?v.fillColor:x[A%x.length];v.lineColor=q.isExist(v.lineColor)?v.lineColor:x[A%x.length];D.push(v)}}this._barSeriesGroup.updateProperties(z);this._lineSeriesGroup.updateProperties(D);if(!this._hasDrawn){this.initSeries();this._columnBarRenderer.resetSeriesGroups();this._lineRenderer.resetSeriesGroups();this._columnBarRenderer.addSeriesGroup(this._barSeriesGroup);this._lineRenderer.addSeriesGroup(this._lineSeriesGroup)}},applyTheme:function(v){if(this._columnBarRenderer){this._columnBarRenderer.applyTheme(v)}if(this._lineRenderer){this._lineRenderer.applyTheme(v)}},getSupportedAppEvents:function(){return["selectData","unSelectData","showTooltip","hideTooltip"]},onclick:function(v){if(!this.isSelectable()){return}if(this._columnBarRenderer===null&&this._lineRenderer===null){s.error("No renderer to handle event!")}var z=true;var w=this._getSeriesItemsUnderPoint(v);if(w.length===0){if(this.isDeselectable()){var x=this._highlighter.getHighlightedSeriesItemsContext();this._fireUnSelectDataEvent(x);this._highlighter.erase()}}else{if(w[0].isHighlighted()){if(this.isDeselectable()){this._highlighter.remove(w[0]);this._fireUnSelectDataEvent(w[0].getData())}z=false}else{this._highlighter.setTargets([w[0]])}}var x=this._highlighter.run();if(z){this._fireSelectDataEvent(x)}},_fireSelectDataEvent:function(z){if(z.length>0){var x=[];for(var w=0,v=z.length;w<v;w++){x.push({dimensionPath:z[w].dimensionPath,dimensionItemIndex:z[w].dimensionPath[z[w].dimensionPath.length-1].dimensionItemIndex,measureIndex:z[w].measureIndex,dimensionLabel:z[w].dimensionLabel,measureValue:z[w].value})}this.fireEvent("selectData",{name:"selectData",data:x})}},_fireUnSelectDataEvent:function(z){if(z.length>0){var x=[];for(var w=0,v=z.length;w<v;w++){x.push({dimensionPath:z[w].dimensionPath,dimensionItemIndex:z[w].dimensionPath[z[w].dimensionPath.length-1].dimensionItemIndex,measureIndex:z[w].measureIndex,dimensionLabel:z[w].dimensionLabel,measureValue:z[w].value})}}this.fireEvent("unSelectData",{name:"unSelectData",data:x})},_getSeriesItemsUnderPoint:function(F){var C=[];var D=this._lineSeriesGroup.getSeriesList();for(var x=D.length-1;x>=0;x--){var z=D[x].getSeriesItems();for(var w=0,H=z.length;w<H;w++){if(z[w].getSeries().getOptions().marker.visible&&z[w].containsPoint(F)){C.push(z[w])}}}var B=this._barSeriesGroup.getSeriesList();for(var x=0,A=B.length;x<A;x++){var z=B[x].getSeriesItems();for(var w=0,H=z.length;w<H;w++){var E=z[w].getMainShapes()[0];var G=E.topLeft();var v=E.topRight();if(G.x<=F.x&&v.x>=F.x){C.push(z[w])}}}return C},panMove:(function(){var v;var B;var A;var z;var w;var x;var C;return function(R){var I=R.attachedComponent();var H=R.rangeInXY();if(R.state()===o.TransitionState.Began){x=I._seriesLayer.position();z=I._xaxes[0]._sax_renderer._subLayer.size();w=I._xaxes[0]._sax_renderer._subLayer.position();A=I._xaxes[0]._sax_renderer._layer.size();B=new Date().getTime();if(z.width>A.width){I._chartModule._scrollBar[0].highLight()}C=false}else{if(R.state()===o.TransitionState.Changed){if(R.attachedComponent().islongPressGesture===true){var F=R.globalLocOfGesture();var L=I.convertPointFromGlobal(F);var D=I._rootLayer;var N=I._seriesLayer.convertPointFromLayer(L,D);var O=I._seriesMaskLayer.convertPointFromLayer(L,D);if(!I._seriesMaskLayer.containsPoint(O)){I._chartModule.onblur()}else{I._chartModule.onhover(N)}return}C=true;var J=0;if((x.x+H.x)>0){J=-x.x}else{if(x.x+H.x+I._seriesLayer.size().width<=I._seriesMaskLayer.size().width){J=I._seriesMaskLayer.size().width-x.x-I._seriesLayer.size().width}else{J=H.x}}I._chartModule.position(x.x+J,x.y);I._chartModule._scrollBar[0].update();var M=I._xaxes;for(var G=M.length;G--;){M[G].position(x.x+J,0)}v=R.velocityInXY().x;B=new Date().getTime()}else{if(R.state()===o.TransitionState.Ended){if((x.x+H.x)>=0||(x.x+H.x+I._seriesLayer.size().width<=I._seriesMaskLayer.size().width)){if(z.width>A.width){I._chartModule._scrollBar[0].unHighLight();I._rootLayer.setNeedsDisplay()}C=false;return}if(C){if(v===0){C=false;I._chartModule._scrollBar[0].unHighLight();I._rootLayer.setNeedsDisplay();return}var K=(v-0)/(new Date().getTime()-B);var P=I;var E=P._seriesLayer.position();var Q=v*v/(2*K)*10;u.animate({values:[{type:"FLOAT",from:0,to:Q}],duration:600,easing:"EaseOut",onStep:function(S){if((E.x+S[0])>0||E.x+S[0]+P._seriesLayer.size().width<=P._seriesMaskLayer.size().width){return}P._seriesLayer.position({x:E.x+S[0],y:0});P._xaxes[0].position(E.x+S[0],0);P._chartModule._scrollBar[0].update();P._rootLayer.setNeedsDisplay()},onComplete:function(){var T=I._seriesLayer.position().x;var S=I._seriesLayer.size().width+T;if(T>0){u.animate({values:[{type:"FLOAT",from:T,to:0}],duration:500,easing:"EaseOut",onStep:function(U){P._seriesLayer.position({x:U[0],y:0});P._xaxes[0].position(U[0],0);P._chartModule._scrollBar[0].update();P._rootLayer.setNeedsDisplay()},onComplete:function(){P._chartModule._scrollBar[0].unHighLight()}})}else{if(S<A.width){u.animate({values:[{type:"FLOAT",from:T,to:(A.width-S+T)}],duration:500,easing:"EaseOut",onStep:function(U){P._seriesLayer.position({x:U[0],y:0});P._xaxes[0].position(U[0],0);P._chartModule._scrollBar[0].update();P._rootLayer.setNeedsDisplay()},onComplete:function(){P._chartModule._scrollBar[0].unHighLight()}})}else{P._chartModule._scrollBar[0].unHighLight()}}}});C=false}else{I._chartModule._scrollBar[0].unHighLight();I._rootLayer.setNeedsDisplay()}}else{if(R.state()===o.TransitionState.Cancelled){}}}}}})(),translateChart:function(A,v){var z=v._seriesLayer.position();var x=0;if((z.x+A.x)>0){x=-z.x}else{if(z.x+A.x+v._seriesLayer.size().width<=v._seriesMaskLayer.size().width){x=v._seriesMaskLayer.size().width-z.x-v._seriesLayer.size().width}else{x=A.x}}v._chartModule.position(z.x+x,z.y);v._chartModule._scrollBar[0].update();var B=v._xaxes;for(var w=B.length;w--;){B[w].position(z.x+x,0)}},pinchingResize:(function(){var G;var C;var z;var H;var D;var B;var F;var A;var E;var x;var w;var v;return function(J){var Q=J.attachedComponent();var U=J.scale();U=Math.round(U*100)/100;if(J.state()===o.TransitionState.Began){G=Q._seriesLayer.size();C=Q._seriesLayer.position();z=Q._seriesMaskLayer.size();H=J.globalLocOfGesture();H.x=H.x-Q._seriesMaskLayer.position().x;D=new Date().getTime();B=Q._xaxes[0].getMajorTicks();x=Q._xaxes[0].getTickInterval();var W=x/2;F=-1;for(var P=0,R=B.length;P<R;P++){if(Math.abs(B[P]-H.x+C.x)<=W){F=P;break}}if(F===-1){F=Math.floor(B.length/2)}A=Q._metaData.measureMembers.length>20?20:Q._metaData.measureMembers.length;E=Q._dataTree.getSubMemberLabels().length;Q._chartModule._scrollBar[0].highLight();Q._rootLayer.setNeedsDisplay();w=U;if(Q.islongPressGesture===true){Q.islongPressGesture=false;Q._chartModule.onblur()}}else{if(J.state()==o.TransitionState.Changed){var L=0;L=Math.round((U/w)*100)/100;if(U===w){return}w=U;var K=new Date().getTime();if((K-D)>5){D=K;if(L>=1&&x*L>=z.width){return}if(L<1&&x*L<=z.width/(2*E)){return}x*=L;var S=Q._xaxes;for(var P=S.length;P--;){S[P].zoom(L,1,L)}var O={x:0,y:0};var N=Q._xaxes[0].getMajorTicks();if(L>=1){O.x=B[F]-N[F]+C.x}else{O.x=C.x-(N[F]-B[F])}G.width=G.width*L;Q._chartModule.scale(L,1,z);var T=Q._seriesLayer.size();var M=0;if(T.width>z.width){if(O.x>0){M=0-O.x;v="left"}else{if((T.width+O.x)<z.width){M=z.width-(T.width+O.x);v="right"}}}else{if(v==="left"){M=0-O.x}else{M=z.width-(T.width+O.x)}}O.x=O.x+M;Q._chartModule.position(O.x,O.y);Q._chartModule._scrollBar[0].update();S[0].position(O.x,0);Q._chartModule._highlighter.run();Q._rootLayer.setNeedsDisplay()}}else{if(J.state()==o.TransitionState.Ended||J.state()==o.TransitionState.Cancelled){Q._chartModule.scale(1,1);Q._chartModule._scrollBar[0].update();Q._chartModule._scrollBar[0].unHighLight();Q._chartModule._highlighter.run();Q._rootLayer.setNeedsDisplay();var V=Q._seriesLayer.size();if(V.width<=z.width){var I=z.width/V.width;var S=Q._xaxes;for(var P=S.length;P--;){S[P].zoom(I,1,I);S[P].position(0,0)}Q._chartModule.scale(I,1);Q._seriesLayer.position({x:0,y:0});Q._chartModule._scrollBar[0].update();Q._chartModule._scrollBar[0].hidden();Q._chartModule._highlighter.run();Q._rootLayer.setNeedsDisplay()}}}}}})(),longPressHandler:(function(){return function(w){var x=w.attachedComponent();if(w.state()===o.TransitionState.Began){var C=w.globalLocOfGesture();var B=x.convertPointFromGlobal(C);var A=x._rootLayer;var v=x._seriesLayer.convertPointFromLayer(B,A);var z=x._seriesMaskLayer.convertPointFromLayer(B,A);if(x._seriesMaskLayer.containsPoint(z)){x.islongPressGesture=true;x._chartModule.onhover(v)}}}})(),tapHandler:function(w){var x=w.attachedComponent();if(w.state()===o.TransitionState.Ended){var B=w.globalLocOfGesture();var A=x.convertPointFromGlobal(B);var z=x._rootLayer;var v=x._seriesLayer.convertPointFromLayer(A,z);x._chartModule.onclick(v)}},scaleChart:function(x,L,F){var v=F._xaxes[0].getTickInterval();var B=F._metaData.measureMembers.length>20?20:F._metaData.measureMembers.length;var H=F._dataTree.getSubMemberLabels().length;var K=F._seriesLayer.size();var w=F._seriesMaskLayer.size();var E=F._seriesLayer.position();var D=F._xaxes[0].getMajorTicks();L.x=L.x-F._seriesMaskLayer.position().x;if(x>=1&&v*x>=w.width){return}if(x<1&&v*x<=w.width/(2*H)){return}var M=v/2;var I=-1;for(var C=0,G=D.length;C<G;C++){if(Math.abs(D[C]-L.x+E.x)<=M){I=C;break}}if(I===-1){I=Math.floor(D.length/2)}v*=x;var J=F._xaxes;for(var C=J.length;C--;){J[C].zoom(x,1,x)}var A={x:0,y:0};var z=F._xaxes[0].getMajorTicks();if(x>=1){A.x=D[I]-z[I]+E.x}else{A.x=E.x-(z[I]-D[I])}K.width=K.width*x;F._chartModule.position(A.x,A.y);F._chartModule.scale(x,1,w);F._chartModule._scrollBar[0].update();J[0].position(A.x,0);F._chartModule._highlighter.run();F._rootLayer.setNeedsDisplay()},scaleChartEnd:function(w){var A=w._seriesMaskLayer.size();w._chartModule.scale(1,1);w._chartModule._scrollBar[0].update();w._chartModule._scrollBar[0].unHighLight();w._chartModule._highlighter.run();w._rootLayer.setNeedsDisplay();var z=w._seriesLayer.size();if(z.width<=A.width){var v=A.width/z.width;var B=w._xaxes;for(var x=B.length;x--;){B[x].zoom(v,1,v);B[x].position(0,0)}w._chartModule.scale(v,1);w._seriesLayer.position({x:0,y:0});w._chartModule._scrollBar[0].update();w._chartModule._scrollBar[0].hidden();w._chartModule._highlighter.run();w._rootLayer.setNeedsDisplay()}},scale:function(w,v){var x=this._seriesLayer.size();this._seriesLayer.size({width:x.width*w,height:x.height*v});this._columnBarRenderer.setScale(w);this._lineRenderer.setScale(w);this._columnBarRenderer.redraw();this._lineRenderer.redraw()},backUp:function(){this._backedXScale=this._xaxes[0]._sax_renderer._subLayer.size().width/this._xaxes[0]._sax_renderer._layer.size().width;if(this._backedXScale>1.0000001){this._hasBacked=true;var v=this._xaxes[0]._sax_renderer._subLayer.position().x;this._backedXPercentage=v/this._xaxes[0]._sax_renderer._subLayer.width()}},restore:function(){if(this._hasBacked&&q.isExist(this._backedXScale)&&q.isExist(this._backedXPercentage)){if(this._backedXScale<=1.00000000001){return}this._xaxes[0].setVisibleRange(this._backedXScale,1,this._backedXScale);var v=this._seriesLayer.size();var w=v.width*this._backedXScale;var x=w*this._backedXPercentage;this._xaxes[0].position(x,0);this._seriesLayer.size({width:w,height:v.height});this.position(x,0);if(e.os()==="iPad"){this._scrollBar[0].update();this._scrollBar[0].unHighLight()}}},_hasVisibleBar:function(){var B=this._chart_options.properties._additional;var A=r.get(B.statesManagerId);var v=A.getStatesItemValue(A.CHANGESERIESVISIBILITY);var w=0;var z=this._barSeriesGroup.getSeriesList();for(var x=0;x<z.length;x++){for(;w<this._seriesList.length;w++){if(this._seriesList[w]===z[x]){if(v[w]!==false){return true}else{break}}}}return false},onhover:function(A){if(!this._tooltipEnabled){return}if(!this._columnBarRenderer&&!this._lineRenderer){return}if(!this._hasVisibleSeries()){return}var w,z,x;if(this._barSeriesGroup.getSeriesList().length>0&&this._lineSeriesGroup.getSeriesList().length>0){var v=!this._hasVisibleBar();z=this._columnBarRenderer.hoverAround(A);x=this._lineRenderer.hoverAround(A,v,this._guideLineColor);w=z||x;if(w){this.fireEvent("showTooltip",{name:"showTooltip",data:[{dimensionItemIndex:w.dimensionItemIndex,point:w.point}]})}}else{if(this._lineSeriesGroup.getSeriesList().length>0){x=this._lineRenderer.hoverAround(A,this._tooltipEnabled,this._guideLineColor);if(x){this.fireEvent("showTooltip",{name:"showTooltip",data:[{dimensionItemIndex:x.dimensionItemIndex,point:x.point}]})}}else{z=this._columnBarRenderer.hoverAround(A);if(z){this.fireEvent("showTooltip",{name:"showTooltip",data:[{dimensionItemIndex:z.dimensionItemIndex,point:z.point}]})}}}},onblur:function(v){if(!this._tooltipEnabled){return}if(this._barSeriesGroup.getSeriesList().length>0){this._columnBarRenderer.blurOut(v);this._lineRenderer.blurOut(v)}else{this._lineRenderer.blurOut(v)}this.fireEvent("hideTooltip",{name:"hideTooltip",data:[{}]})},selectData:function(w,v){if(this._chart_options.properties.selectability.mode==="single"){w=w.slice(0,1)}this._highlighter.setTargets(w);var w=this._highlighter.run();if(!(q.isDefined(v)&&v===true)){this._fireSelectDataEvent(w)}},unSelectData:function(B,x){if(this._barRenderer===null){s.error("No renderer to handle event!")}var w=[],A;for(var z=0,v=B.length;z<v;z++){A=this._highlighter.remove(B[z]);if(q.isExist(A)){w.push(A)}}if(!(q.isDefined(x)&&x===true)){this._fireUnSelectDataEvent(w)}this._highlighter.run()},getPlotArea:function(){return{top:this._topBound,left:0,bottom:0,right:0}},updateSeriesVisibilty:function(){var A=this._chart_options.properties._additional;var z=r.get(A.statesManagerId);var w=z.getStatesItemValue(z.CHANGESERIESVISIBILITY);for(var x=0,v=this._seriesList.length;x<v;x++){this._seriesList[x].setVisible(w[x])}},clearDrawing:function(){if(this._columnBarRenderer!==null){this._columnBarRenderer.clearDrawing()}if(this._lineRenderer!==null){this._lineRenderer.clearDrawing()}}});return n});sap.riv.module({qname:"sap.riv.viz.pie.PieComponent",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.core.Logger",version:"3.4.0"},{qname:"sap.riv.vizkit.UIComponent",version:"3.4.0"},{qname:"sap.riv.viz.shared.title.TitleCanvasComponent",version:"3.4.0"},{qname:"sap.riv.viz.shared.background.BackgroundComponent",version:"3.4.0"},{qname:"sap.riv.viz.shared.legend.LegendCanvasComponent",version:"3.4.0"},{qname:"sap.riv.viz.shared.misc.PropsMgr",version:"3.4.0"},{qname:"sap.riv.viz.shared.descriptor.Descriptor",version:"3.4.0"},{qname:"sap.riv.viz.shared.layout.BasicLayout",version:"3.4.0"},{qname:"sap.riv.viz.pie.PiePlotComponent",version:"3.4.0"},{qname:"sap.riv.vizkit.ThemeManager",version:"3.4.0"},{qname:"sap.riv.viz.shared.utils.AlertUtils",version:"3.4.0"}],function Setup(e,b,o,j,a,c,d,l,n,m,g,k,f){var h=e.derive(j,{constructor:function(q){this._dataTree=q.dataset.dataTree;this._metaData=q.dataset.metaData;this._pie_options={selectionMode:"single",allSelectable:true,allDeSelectable:true,selectedDataIndexes:[],pieType:"pie",type:"pie",measures:[],measureDefault:{sectorColors:["#748CB2","#9CC677","#EACF5E","#F9AD79","#D16A7C","#8873A2","#3A95B3","#B6D949","#FDD36C","#F47958","#A65084","#0063B1","#0DA841","#FCB71D","#F05620","#B22D6E","#3C368E","#8FB2CF","#95D4AB","#EAE98F","#F9BE92","#EC9A99","#BC98BD","#1EB7B2","#73C03C","#F48323","#EB271B","#D9B5CA","#AED1DA","#DFECB2","#FCDAB0","#F5BCB4"]},tooltip:{text:{font:undefined,color:"#000000",formatString:[""]},mainValue:{font:undefined,color:"#000000",formatString:[""]},subValue:{font:undefined,color:"#000000",formatString:["0.00%"]}},layout:{padding:[0,0,0,0],legendFirst:true},theme:undefined,isShowPieInnerShadow:false,isShowPieOuterShadow:false};var s;if(q.pieOptions.type==="pie"){s=n.getPieDescriptor()}else{if(q.pieOptions.type==="multipie"){s=n.getMultiPieDescriptor()}}this._propsMgr=new l(s);var r=this._propsMgr.properties(q.pieOptions);this._pie_options=e.extend(true,this._pie_options,r);if(b.isExist(q.pieOptions.theme)&&q.pieOptions.theme!==""){this._resolveThemeAndProperties(this._pie_options,q.pieOptions)}this._propsMgr.properties(this._pie_options);this._alertUtils=new f();this._alertUtils.parseOptions(this._pie_options.alert);this._alertUtils.setMeasureMembers(this._metaData.measureMembers);this._attach_additional_properties();this._legendComponent=null;this._pieComponent=null;this._titleComponent=null;this._layoutMgr=null;this._mode=null;this._colorList=null;this._initSubComponents(false)},_resolveThemeAndProperties:function(H,E){var B=E.theme;var w=k.getThemeSettings(B);if(b.isUndefined(w)){return}var C=w.global;E.background=E.background||{};H.background.color=E.background.color||w.background;var G=w.legend;var v=e.extend(true,{},C,G.title);var q=e.extend(true,{},C,G.label);E.legend=E.legend||{};H.legend.titleFont=E.legend.titleFont||(v["font-weight"]+" "+v["font-size"]+" "+v["font-family"]);H.legend.titleColor=E.legend.titleColor||(v.color);H.legend.labelFont=E.legend.labelFont||(q["font-weight"]+" "+q["font-size"]+" "+q["font-family"]);H.legend.labelColor=E.legend.labelColor||(q.color);var u=e.extend(true,{},C,w.title.mainTitle);var z=e.extend(true,{},C,w.title.subTitle);E.title=E.title||{};E.title.main=E.title.main||{};H.title.main.font=E.title.main.font||(u["font-weight"]+" "+u["font-size"]+" "+u["font-family"]);H.title.main.color=E.title.main.color||(u.color);E.title.sub=E.title.sub||{};H.title.sub.font=E.title.sub.font||(z["font-weight"]+" "+z["font-size"]+" "+z["font-family"]);H.title.sub.color=E.title.sub.color||(z.color);var F=w.pie;H.isShowPieInnerShadow=E.isShowPieInnerShadow||F.isShowInnerShadow;H.isShowPieOuterShadow=E.isShowPieOuterShadow||F.isShowOuterShadow;var t=F.donut;var s=e.extend(true,{},C,t.measureLabel);var A=F.tooltip;E.tooltip=E.tooltip||{};var D=e.extend(true,{},C,A.dimensionLabel);E.tooltip.text=E.tooltip.text||{};H.tooltip.text.font=E.tooltip.text.font||D["font-weight"]+" "+D["font-size"]+" "+D["font-family"];H.tooltip.text.color=E.tooltip.text.color||D.color;var r=e.extend(true,{},C,A.valueLabel);E.tooltip.mainValue=E.tooltip.mainValue||{};H.tooltip.mainValue.font=E.tooltip.mainValue.font||r["font-weight"]+" "+r["font-size"]+" "+r["font-family"];H.tooltip.mainValue.color=E.tooltip.mainValue.color||r.color;var x=e.extend(true,{},C,A.percentLabel);E.tooltip.subValue=E.tooltip.subValue||{};H.tooltip.subValue.font=E.tooltip.subValue.font||x["font-weight"]+" "+x["font-size"]+" "+x["font-family"];H.tooltip.subValue.color=E.tooltip.subValue.color||x.color},_initSubComponents:function(r){this.autoresizeSubComponents(false);var q=this.size();if(!r){this._layoutMgr=new m(this,q,this._pie_options)}if(!r){this._backgroundComponent=new c({enable:true,anchor:{x:0,y:0},position:{x:0,y:0},size:{w:q.width,h:q.height},backgroundOptions:this._pie_options.background,id:"backgroundComponent"});this.addSubComponent(this._backgroundComponent);this._titleComponent=new a({enable:true,anchor:{x:0,y:0},position:{x:0,y:0},size:{w:q.width,h:q.height},titleOptions:this._pie_options.title,id:"pieTitleComponent"});this._legendComponent=new d({enable:true,anchor:{x:0,y:0},position:{x:0,y:0},size:{w:q.width,h:q.height},legendOptions:{properties:this._pie_options},id:"pieLegendComponent"});this._pieComponent=new g({enable:true,anchor:{x:0,y:0},position:{x:0,y:0},size:{w:q.width,h:q.height},chart:{metaData:this._metaData,dataTree:this._dataTree,properties:this._pie_options},id:"piePlotComponent"})}},doContentResize:function(r,q){this.callParent("doContentResize",r,q);this._layoutMgr.resize(q);this._pie_relayout()},_attach_additional_properties:function(){if(this._pie_options){var F=this._pie_options;delete F._additional;var r={};var w=[];var E=[],q=[],C=[],G=[];var x=this._getEffectiveLables();if(F.measures){var t=F.measures[0];if(t&&t.sectorColors&&t.sectorColors.length>0){var s=t.sectorColors;for(var v=0,u=0,B=s.length,z=x.length;v<z;v++){u=v%B;w.push(s[u])}}else{var s=F.measureDefault.sectorColors;if(s){for(var v=0,u=0,B=s.length,z=x.length;v<z;v++){u=v%B;w.push(s[u])}}}}var A=F.legend.formatString;for(var v=0,D=A.length,z=x.length;v<z;v++){if(v<D){E.push(A[v])}else{E.push(A[D-1])}}var A=F.tooltip.text.formatString;for(var v=0,D=A.length,z=x.length;v<z;v++){if(v<D){q.push(A[v])}else{q.push(A[D-1])}}var A=F.tooltip.mainValue.formatString;for(var v=0,D=A.length,z=x.length;v<z;v++){if(v<D){C.push(A[v])}else{C.push(A[D-1])}}var A=F.tooltip.subValue.formatString;for(var v=0,D=A.length,z=x.length;v<z;v++){if(v<D){G.push(A[v])}else{G.push(A[D-1])}}r.colorList=w;r.legendNumberFormat=E;r.tooltipeTextNumberFormat=q;r.tooltipeMainValueNumberFormat=C;r.tooltipeSubValueNumberFormat=G;r.legendLabels=x;r.legendTitle=this._metaData.dimension[this._metaData.dimension.length-1].name;r.alertUtils=this._alertUtils;this._pie_options._additional=r}},_getEffectiveLables:function(){var D=this._dataTree;var q=this._metaData.dimension;var A=this._metaData.axisNum;var u=0;if(A==2){u=1}var C=[];for(var v=0,z=q.length;v<z;v++){var t=q[v];if(t.analysisAxisIndex===u){break}else{C.push(0)}}var w=D.getSubMemberLabels(C);var x=[],r,B;var s=w.length;for(var v=0;v<s;v++){r=b.isExist(w[v].value)?w[v].value:w[v];x.push({category:r})}return x},_pie_relayout:function(q){if(this._layoutMgr.isLayoutChanged()||q){this._layoutMgr.addLayoutComponent(this._layoutMgr.supportedLayoutComponent.legend,this._legendComponent);this._layoutMgr.addLayoutComponent(this._layoutMgr.supportedLayoutComponent.title,this._titleComponent);this._layoutMgr.addLayoutComponent(this._layoutMgr.supportedLayoutComponent.background,this._backgroundComponent);this._layoutMgr.addLayoutComponent(this._layoutMgr.supportedLayoutComponent.plot,this._pieComponent);this._layoutMgr.layout()}},applyTheme:function(r){var q=this._pie_options;this._setThemes(q,r);this.updateProperties(q)},_setThemes:function(G,B){var w=k.getThemeSettings(B);if(b.isUndefined(w)){return}var C=w.global;G.background.color=w.background;var F=w.legend;var u=e.extend(true,{},C,F.title);var q=e.extend(true,{},C,F.label);G.legend.titleFont=(u["font-weight"]+" "+u["font-size"]+" "+u["font-family"]);G.legend.titleColor=(u.color);G.legend.labelFont=(q["font-weight"]+" "+q["font-size"]+" "+q["font-family"]);G.legend.labelColor=(q.color);var v=e.extend(true,{},C,w.title.mainTitle);var z=e.extend(true,{},C,w.title.subTitle);G.title.main.font=(v["font-weight"]+" "+v["font-size"]+" "+v["font-family"]);G.title.main.color=(v.color);G.title.sub.font=(z["font-weight"]+" "+z["font-size"]+" "+z["font-family"]);G.title.sub.color=(z.color);var E=w.pie;G.isShowPieInnerShadow=E.isShowInnerShadow;G.isShowPieOuterShadow=E.isShowOuterShadow;var t=E.donut;var s=e.extend(true,{},C,t.measureLabel);var A=E.tooltip;var D=e.extend(true,{},C,A.dimensionLabel);G.tooltip.text.font=D["font-weight"]+" "+D["font-size"]+" "+D["font-family"];G.tooltip.text.color=D.color;var r=e.extend(true,{},C,A.valueLabel);G.tooltip.mainValue.font=r["font-weight"]+" "+r["font-size"]+" "+r["font-family"];G.tooltip.mainValue.color=r.color;var x=e.extend(true,{},C,A.percentLabel);G.tooltip.subValue.font=x["font-weight"]+" "+x["font-size"]+" "+x["font-family"];G.tooltip.subValue.color=x.color},updateProperties:function(s){var r=this._propsMgr.properties(s);this._pie_options=e.extend(true,this._pie_options,r);this._alertUtils.parseOptions(this._pie_options.alert);this._attach_additional_properties();this._layoutMgr.updateProperties(this._pie_options);this._pie_relayout(false);this._backgroundComponent.updateProperties(this._pie_options);var q=false;for(var t in s){q=q||(t!="title")}if(q){this._pieComponent.updateProperties(this._pie_options)}this._titleComponent.updateProperties(this._pie_options);this._legendComponent.updateProperties(this._pie_options)},getProperties:function(){return this._propsMgr.properties()},getAllProperties:function(){return this._pie_options},setDataset:function(q){this._dataTree=q.dataTree;this._metaData=q.metaData;this._alertUtils.setMeasureMembers(this._metaData.measureMembers);this._initSubComponents(true);this._attach_additional_properties();this._pie_relayout(false);this._pieComponent.updateOptions({mode:this._mode,metaData:this._metaData,dataTree:this._dataTree,properties:this._pie_options});this._legendComponent.updateOptions({title:this._metaData.dimension[0],labels:this._dataTree.getSubMembersAt(),properties:this._pie_options});if(this._pie_options.layout.legendFirst==true){this._pie_relayout()}},getSupportedAppEvents:function(){return this._pieComponent.getSupportedAppEvents()},selectData:function(r,q){return this._pieComponent.selectData(r,q)},unSelectData:function(r,q){return this._pieComponent.unSelectData(r,q)},doPrint:function(q){}});return h});sap.riv.module({qname:"sap.riv.viz.shared.series.StackedColumnRenderer",version:"3.4.0"},[{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.utils.ColorSeriesGenerator",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.ColumnBarRenderer",version:"3.4.0"},{qname:"sap.riv.core.Math",version:"3.4.0"},{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.Animator",version:"3.4.0"}],function Setup(a,e,g,d,f,b){var c=f.derive(g,{constructor:function(j,h){},draw:function(){var j=this.getSeriesGroups();if(j.length===0){return}var h=j[0].getSeriesList();if(h.length===0){return}this._initSeries(h);this._update();this._regEvent()},_update:function(){var n=this.getSeriesGroups();if(n.length==0){return}var m=n[0].getSeriesList();if(m.length==0){return}var l=m[0].getXAxis();var j=l.getMajorTicks();var h=l.getTickInterval();var u=0;for(var q=0,r=m.length;q<r;q++){if(m[q].isVisible()===true){u++}}var o=m[0].getOptions().barMarkerSize;var k=this.calculateBarSize(o*this._scale);var t=-1;for(var q=0,r=m.length;q<r;q++){if(m[q].isVisible()===true){t++}this.calculateSeriesPoints(k);this._drawSeries(m[q])}var s=true;if(this._enableAllAnimation){if(this._isInitialization){s=!this._enableInitAnimation}}this._doAnimation(s)},calculateBarSize:function(h){var l=this.getSeriesGroups();if(l.length==0){return}var k=l[0].getSeriesList();if(k.length==0){return}var m=k[0].getXAxis();var j=m.getTickInterval();var n=2*j/3;if(a.isDefined(h)&&(n>h)){n=h}n=n<1?1:n;return n},calculateSeriesPoints:function(n){var o=this.getVisibleSeriesList();if(o.length===0){return}var m=o[0].getXAxis();var k=m.getMajorTicks();var x=[],B=[],t;for(var q=0,A=o.length;q<A;q++){var s=o[q];var h=s.getYAxis();var l=h.u2p(0);var u=s.getSeriesItems();for(var r=0,w=u.length;r<w;r++){var z={};var v=u[r].getData()[0];z.x1=k[r]-n/2;z.x2=z.x1+n;if(a.isNaN(v.value)){t=0}else{t=v.value}if(q===0){z.y1=l;x[r]=0;B[r]=0;if(t>0){x[r]+=t}else{B[r]+=t}z.y2=h.u2p(t)}else{if(t>=0){z.y1=h.u2p(x[r]);x[r]+=t;z.y2=h.u2p(x[r])}else{z.y1=h.u2p(B[r]);B[r]+=t;z.y2=h.u2p(B[r])}}u[r].setPosition(z)}}},_getDataLabelAnchor:function(j,h,m){var l={x:(h.x1+h.x2)/2};var k=(h.y1<h.y2);if(k){if(j=="insideEnd"){l.align="bottom";l.y=h.y2}else{if(j=="insideBase"){l.align="top";l.y=h.y1}}}else{if(j=="insideEnd"){l.align="top";l.y=h.y2}else{if(j=="insideBase"){l.align="bottom";l.y=h.y1}}}if(j=="center"){l.align="center";l.y=(h.y1+h.y2)/2}return l},_parseOptions:function(h){this._barStyle.isShowGradient=false;this._barStyle.isShowInnerBorder=h.bar.isShowInnerBorder;this._barStyle.isShowOutBorder=h.bar.isShowOutBorder},_drawBorderTopLine:function(h,j){return(h==(j-1))},getVisibleSeriesList:function(){var j=[];var l=this.getSeriesGroups()[0].getSeriesList();for(var k=0,h=l.length;k<h;k++){if(l[k].isVisible()){j.push(l[k])}}return j}});return c});sap.riv.module({qname:"sap.riv.vizkit.ImageManager",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.LinkedHashMap",version:"3.4.0"},{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"}],function Setup(g,h,d){var b=function(j){this._imgEl=j};b.prototype.getBitmap=function(){return this._imgEl};b.prototype.width=function(j){if(j!==undefined){this._imgEl.width=j;return this}return this._imgEl.width};b.prototype.height=function(j){if(j!==undefined){this._imgEl.height=j;return this}return this._imgEl.height};b.prototype.intrinsicHeight=function(){return this._imgEl.naturalHeight};b.prototype.intrinsicWidth=function(){return this._imgEl.naturalWidth};b.prototype.url=function(){return this._imgEl.src};var c=new h();var f=new h();var a={};var e={loadImage:function(m,j,l){if(m&&j){l=l||d.noop;if(f.has(m)){if(c.get(f.get(j))){l(true)}}var k=new Image();k.onabort=k.onerror=function(){l(false,{id:m,url:j})};k.onload=g.proxy(function(){var o=k.src;if(!c.has(o)){var n=new b(k);f.add(m,o);a[o]={ids:{id:m},length:1};c.add(o,n)}else{f.add(m,k.src);a[o].ids[m]=m;a[o].length++}l(true,{id:m,url:j})},this);k.src=j}},loadImages:function(r,q,o){q=q||d.noop;o=o||d.noop;var n=r.length;if(n==0){o(true)}else{var m=0;var k=function(s,t){m++;if(m<n){q(m/n,s,t)}else{o(true,t)}};for(var l=0,j=r.length;l<j;l++){e.loadImage(r[l].id,r[l].url,k)}}},hasImage:function(j){return f.has(j)},getImage:function(j){if(f.has(j)){return c.get(f.get(j))}},disposeImage:function(k){if(f.has(k)){var j=f.remove(k);delete a[j].ids[k];a[j].length--;if(a[j].length===0){delete a[j];c.remove(j)}}}};return e});sap.riv.module({qname:"sap.riv.viz.xychart.StackedColumnModule",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"},{qname:"sap.riv.core.Logger",version:"3.4.0"},{qname:"sap.riv.core.UADetector",version:"3.4.0"},{qname:"sap.riv.vizkit.GestureDetector",version:"3.4.0"},{qname:"sap.riv.core.Animator",version:"3.4.0"},{qname:"sap.riv.viz.shared.axis.Axis",version:"3.4.0"},{qname:"sap.riv.viz.shared.axis.FoucsCalculator",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.SeriesGroup",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.Series",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.SeriesItem",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.StackedColumnRenderer",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.LineRenderer",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.SeriesHighlighter",version:"3.4.0"},{qname:"sap.riv.viz.xychart.CombinationModule",version:"3.4.0"},{qname:"sap.riv.viz.shared.utils.ScrollBarRenderer",version:"3.4.0"},{qname:"sap.riv.viz.shared.context.Context",version:"3.4.0"}],function Setup(e,q,t,k,g,o,v,j,s,a,h,b,f,c,m,n,l,r){var u={xAxis:{showMajor:false,majorColor:"#c9c9c9",majorThickness:"1",showMinor:false,minorColor:"#c9c9c9",minorThickness:"1",showSub:false,subColor:"#c9c9c9"},yAxis:{showMajor:true,majorColor:"#c9c9c9",majorThickness:"1",showMinor:false,minorColor:"#c9c9c9",minorThickness:"1",showSub:false,subColor:"#c9c9c9"}};var d=e.derive(n,{events:["selectData","unSelectData","showTooltip","hideTooltip"],constructor:function(w){this._valueAxisRange=[];this._seriesList=null;this._seriesGroup=null;this._stackedColumnRenderer=null;this._hasDrawn=false;this._hasBacked=false;this._tooltipEnabled=w.properties.tooltip.enable},initAxes:function(){this.callParent("initAxes");this._yaxes=this._yaxes.slice(0,1)},_initXAxes:function(){this._xaxes=[];var D=this._chart_options.properties.xAxis;var E=this._dataTree.getSubMemberLabels();var A=[];for(var B=0;B<E.length;B++){A.push(E[B].value)}for(var B=0,z=D.length;B<z;B++){if(q.isExist(D[B].showTitle)&&D[B].showTitle&&!q.isExist(D[B].title)){D[B].title="X"+(B+1)}var C={mode:j.DIMENSION,position:"hb",index:B,labels:A};var w=new j(e.extend(true,C,D[B]));this._xaxes.push(w)}},_initYAxes:function(){this._yaxes=[];var B=this._chart_options.properties.yAxis;if(B&&B.length>0){var x=B[0];if(q.isExist(x.showTitle)&&x.showTitle&&!q.isExist(x.title)){x.title="Y"+(i+1)}var A=q.isExist(this._valueAxisRange[0])?this._valueAxisRange[0].max:0;var z=q.isExist(this._valueAxisRange[0])?this._valueAxisRange[0].min:0;var w={mode:j.LINEAR,position:"vl",index:0,maxValue:A,minValue:z};var C=new j(e.extend(true,w,x));this._yaxes.push(C)}},initSeries:function(){this._valueAxisRange=[];var C=this._chart_options.properties.measures;var O=this._metaData.measureMembers;var I=this._chart_options.properties.measureDefault.colors;var M=this._chart_options.properties.bar;delete this._seriesList;this._seriesList=[];this._seriesGroup=new a();var x=this._chart_options.properties._additional;var z=r.get(x.statesManagerId);var N=z.getStatesItemValue(z.CHANGESERIESVISIBILITY);for(var J=0,K=O.length;J<K;J++){var D=C[J]||{},E;var B=q.isExist(D.fillColor)?D.fillColor:I[J%I.length];D=e.extend(true,{},D,M);D.fillColor=B;E=new h(D);if(N[J]===false){D.visible=false}E.setVisible(D.visible);E.setName(O[J]);E.setData(this._data[J]);this._seriesGroup.addSeries(E);this._seriesList.push(E);var L=this._data[J];for(var H=0,F=L.length;H<F;H++){var G=new b();G.setData([L[H]]);G.setDataIndex(L[H].dimensionPath[0].dimensionItemIndex);if(D.visible===false){G.setStatus(G.getStatus()|b.status.invisible)}E.addSeriesItem(G)}if(E.isVisible()===true){this._updateValueAxisRange(E.getDataRange(),0)}}var w=this._chart_options.properties.selectability;var A=0;if(w.mode==="single"){A=1}if(w.mode==="multiple"){A=1000}this._highlighter=new m(this._seriesList,A);this.updateValueAxisRange()},updateValueAxisRange:function(){var D=this._chart_options.properties._additional;var B=r.get(D.statesManagerId);var x=B.getStatesItemValue(B.CHANGESERIESVISIBILITY);if(this._data.length<=0){return}var C=[];for(var z=0,w=this._data.length;z<w;z++){if(x[z]!==false){C.push(this._data[z])}}var A=s.calculateStackedBounds(C);this._valueAxisRange=[];this._updateValueAxisRange({min:A.min,max:A.max},0)},bindSeriesWithAxes:function(){var z=this._seriesGroup.getSeriesList();for(var x=0,w=this._metaData.measureMembers.length;x<w;x++){z[x].setXAxis(this._xaxes[0]);z[x].setYAxis(this._yaxes[0])}},initRenderer:function(w){if(this._stackedColumnRenderer==null){var x=this._chart_options.properties.bar;if(x&&q.isFunction(x.renderer)){this._stackedColumnRenderer=new x.renderer(w,this._chart_options.properties)}else{this._stackedColumnRenderer=new f(w,this._chart_options.properties)}}else{this._stackedColumnRenderer.resetSeriesGroups()}this._stackedColumnRenderer.addSeriesGroup(this._seriesGroup)},drawSeries:function(){if(!this._hasDrawn){this._stackedColumnRenderer.draw();this._hasDrawn=true}else{this._stackedColumnRenderer.redraw()}var x=this._chart_options.properties.selectability;if(this._defaultSelectionArmed){var z=x.defaultSelectedItems;if(x.mode!=="none"&&z.length!==0&&q.isDefined(z[0].measureIndex)){for(var B=0,w=z.length;B<w;B++){var A=z[B];if(q.isExist(A.dimensionItemIndex)&&q.isExist(A.dimensionPath)&&A.dimensionPath.length===0){A.dimensionPath=[{dimensionItemIndex:A.dimensionItemIndex,analysisAxisIndex:0,dimensionIndex:0}]}}this._highlighter.setTargets(x.defaultSelectedItems)}this._defaultSelectionArmed=false}this._highlighter.run()},updateProperties:function(F){var G={};G.properties=F;this._chart_options=e.extend(true,{},G);var E=this._chart_options.properties.measures;var x=this._chart_options.properties.measure;var A=[];var z=this._chart_options.properties.measureDefault.colors;var C=this._chart_options.properties.bar;this._tooltipEnabled=this._chart_options.properties.tooltip.enable;if(q.isExist(C)){this._stackedColumnRenderer.updateProperties(this._chart_options.properties)}for(var B=0,D=this._metaData.measureMembers.length;B<D;B++){var w=E[B]||{};w=e.extend(true,{},w,C);w.fillColor=q.isExist(w.fillColor)?w.fillColor:z[B%z.length];A.push(w)}this._seriesGroup.updateProperties(A);if(!this._hasDrawn){this.initSeries();this._stackedColumnRenderer.resetSeriesGroup();this._stackedColumnRenderer.addSeriesGroup(this._barSeriesGroup)}},applyTheme:function(w){if(this._stackedColumnRenderer){this._stackedColumnRenderer.applyTheme(w)}},clickOnPoint:function(x){if(this._columnBarRenderer===null&&this._lineRenderer===null){t.error("No renderer to handle event!")}var z=this._getSeriesItemsUnderPoint(x);if(z.length===0){this._highlighter.erase()}else{if(z[0].isHighlighted()){this._highlighter.remove(z[0])}else{this._highlighter.setTargets([z[0]])}}var C=this._highlighter.run();if(C){var B=[];for(var A=0,w=C.length;A<w;A++){B.push({dimensionPath:C[A].dimensionPath,dimensionItemIndex:C[A].dimensionPath[C[A].dimensionPath.length-1].dimensionItemIndex,measureIndex:C[A].measureIndex,dimensionLabel:C[A].dimensionLabel,measureValue:C[A].value})}this.fireEvent("selectData",{name:"selectData",data:B})}},scale:function(x,w,A){var z=this._seriesLayer.size();this._seriesLayer.size({width:z.width*x,height:z.height*w});this._stackedColumnRenderer.setScale(x);this._stackedColumnRenderer.redraw()},onclick:function(x){if(!this.isSelectable()){return}if(this._stackedColumnRenderer===null){t.error("No renderer to handle event!")}var z=this._getSeriesItemsUnderPoint(x);if(z.length===0){if(this.isDeselectable()){this._highlighter.erase()}}else{if(z[0].isHighlighted()){if(this.isDeselectable()){this._highlighter.remove(z[0])}}else{this._highlighter.setTargets([z[0]])}}var C=this._highlighter.run();if(C){var B=[];for(var A=0,w=C.length;A<w;A++){B.push({dimensionPath:C[A].dimensionPath,dimensionItemIndex:C[A].dimensionPath[C[A].dimensionPath.length-1].dimensionItemIndex,measureIndex:C[A].measureIndex,dimensionLabel:C[A].dimensionLabel,measureValue:C[A].value})}this.fireEvent("selectData",{name:"selectData",data:B})}},onhover:function(w){if(!this._tooltipEnabled||!this._stackedColumnRenderer){return}if(!this._hasVisibleSeries()){return}var x=this._stackedColumnRenderer.hoverAround(w);if(x){this.fireEvent("showTooltip",{name:"showTooltip",data:[{dimensionItemIndex:x.dimensionItemIndex,point:x.point}]})}},onblur:function(w){if(!this._tooltipEnabled){return}if(this._seriesGroup.getSeriesList().length>0){this._stackedColumnRenderer.blurOut(w)}this.fireEvent("hideTooltip",{name:"hideTooltip",data:[{}]})},_getSeriesItemsUnderPoint:function(w){var x=[];var z=this._seriesGroup.getSeriesList();this._findSeriesItemsUnderPoint(w,z,x);return x},selectData:function(A){if(this._chart_options.properties.selectability.mode==="single"){A=A.slice(0,1)}this._highlighter.setTargets(A);var A=this._highlighter.run();if(A.length>0){var z=[];for(var x=0,w=A.length;x<w;x++){z.push({dimensionPath:A[x].dimensionPath,dimensionItemIndex:A[x].dimensionPath[A[x].dimensionPath.length-1].dimensionItemIndex,measureIndex:A[x].measureIndex,dimensionLabel:A[x].dimensionLabel,measureValue:A[x].value})}this.fireEvent("selectData",{name:"selectData",data:z})}},getPlotArea:function(){return{top:this._topBound,left:0,bottom:0,right:0}},updateSeriesVisibilty:function(){var B=this._chart_options.properties._additional;var A=r.get(B.statesManagerId);var x=A.getStatesItemValue(A.CHANGESERIESVISIBILITY);for(var z=0,w=this._seriesList.length;z<w;z++){this._seriesList[z].setVisible(x[z])}},clearDrawing:function(){if(this._stackedColumnRenderer!==null){this._stackedColumnRenderer.clearDrawing()}},getSupportedAppEvents:function(){return["selectData","unSelectData","showTooltip","hideTooltip"]}});return d});sap.riv.module({qname:"sap.riv.vizkit.UIController",version:"3.4.0"},[{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"},{qname:"sap.riv.vizkit.UIComponent",version:"3.4.0"}],function Setup(c,b){var a=function(e){this._defaultWidth=1;this._defaultHeight=1;this._app;this._uiComp};var d=a.prototype;d.rootUIComponent=function(){if(!this._uiComp){this._uiComp=this.initUIComponent(this._defaultWidth,this._defaultHeight);this._uiComp.on({eventName:"beforeShow",listener:this._handleBeforeShow,scope:this});this._uiComp.on({eventName:"beforeHide",listener:this._handleBeforeHide,scope:this});this._uiComp.on({eventName:"afterShow",listener:this._handleAfterShow,scope:this});this._uiComp.on({eventName:"afterHide",listener:this._handleAfterHide,scope:this});this.afterUIComponentLoaded()}return this._uiComp};d._handleBeforeHide=function(e){this.beforeUIComponentDisappear()};d._handleBeforeShow=function(e){this.beforeUIComponentAppear()};d._handleAfterHide=function(e){this.afterUIComponentDisappear()};d._handleAfterShow=function(e){this.afterUIComponentAppear()};d._setApplication_=function(e){this._app=e};d.getApplication=function(){return this._app};d.fireAppEvent=function(e,f){this._app._fireEvent(e,f)};d.initUIComponent=function(e,f){return new b({size:{w:e,h:f}})};d.afterUIComponentLoaded=c.noop;d.beforeUIComponentAppear=c.noop;d.afterUIComponentAppear=c.noop;d.beforeUIComponentDisappear=c.noop;d.afterUIComponentDisappear=c.noop;d.doThemeApplied=c.noop;d.doThemeUpdated=c.noop;return a});sap.riv.module({qname:"sap.riv.viz.AbstractXYChart",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.viz.AbstractVisualization",version:"3.4.0"}],function Setup(c,b){var a=c.derive(b,{constructor:function(d,e,f){}});return a});sap.riv.module({qname:"sap.riv.viz.shared.series.StackedBarRenderer",version:"3.4.0"},[{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.ColorUtils",version:"3.4.0"},{qname:"sap.riv.core.Math",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.BarRenderer",version:"3.4.0"},{qname:"sap.riv.graphics.shape.Rectangle",version:"3.4.0"},{qname:"sap.riv.graphics.shape.Paths",version:"3.4.0"},{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.Animator",version:"3.4.0"},{qname:"sap.riv.vizkit.ThemeManager",version:"3.4.0"}],function Setup(b,j,c,e,k,h,d,a,f){var g=d.derive(e,{constructor:function(m,l){this._fillToZero=true;this._barStyle={isShowGradient:false,isShowInnerBorder:false,isShowOutBorder:false,isShowShadow:false};this._seriesBackUpPoints=[];this._seriesColor=[];this._parseOptions(l);this._tpDecorativeRenderer=m.addShape(new k())},_update:function(){var r=this.getSeriesGroups();if(r.length==0){return}var o=r[0].getSeriesList();if(o.length==0){return}var q=o[0].getOptions().barMarkerSize;q=this.calculateBarSize(q*this._scale);this.calculateSeriesPoints(q);for(var n=0,l=o.length;n<l;n++){this._drawSeries(o[n])}var m=true;if(this._enableAllAnimation){if(this._isInitialization){m=!this._enableInitAnimation}}this._doAnimation(m)},calculateBarSize:function(l){var q=this.getSeriesGroups();if(q.length==0){return}var o=q[0].getSeriesList();if(o.length==0){return}var n=o[0].getYAxis();var m=n.getTickInterval();var r=2*m/3;if(b.isDefined(l)&&(r>l)){r=l}r=r<1?1:r;return r},calculateSeriesPoints:function(A){var x=this.getVisibleSeriesList();if(x.length===0){return}var l=x[0].getYAxis();var w=l.getMajorTicks();var t=[],n=[],F;for(var B=0,v=x.length;B<v;B++){var u=x[B];var r=u.getXAxis();var o=0;var s=r.u2p(0);var q=this._fillToZero?s:o;var m=u.getSeriesItems();for(var C=0,D=m.length;C<D;C++){var z={};var E=m[C].getData()[0];z.y1=w[C]-A/2;z.y2=z.y1+A;if(b.isNaN(E.value)){F=0}else{F=E.value}if(B===0){z.x1=q;t[C]=0;n[C]=0;if(F>0){t[C]+=F}else{n[C]+=F}z.x2=r.u2p(F)}else{if(F>=0){z.x1=r.u2p(t[C]);t[C]+=F;z.x2=r.u2p(t[C])}else{z.x1=r.u2p(n[C]);n[C]+=F;z.x2=r.u2p(n[C])}}m[C].setPosition(z)}}},_parseOptions:function(l){this._barStyle.isShowGradient=false;this._barStyle.isShowInnerBorder=l.bar.isShowInnerBorder;this._barStyle.isShowOutBorder=l.bar.isShowOutBorder},_drawBorderRightLine:function(l,m){return(l==(m-1))},getVisibleSeriesList:function(){var m=[];var o=this.getSeriesGroups()[0].getSeriesList();for(var n=0,l=o.length;n<l;n++){if(o[n].isVisible()){m.push(o[n])}}return m}});return g});sap.riv.module({qname:"sap.riv.viz.xychart.BarModule",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"},{qname:"sap.riv.core.Logger",version:"3.4.0"},{qname:"sap.riv.core.UADetector",version:"3.4.0"},{qname:"sap.riv.vizkit.GestureDetector",version:"3.4.0"},{qname:"sap.riv.core.Animator",version:"3.4.0"},{qname:"sap.riv.viz.shared.axis.Axis",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.SeriesGroup",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.Series",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.SeriesItem",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.SeriesHighlighter",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.BarRenderer",version:"3.4.0"},{qname:"sap.riv.viz.xychart.ChartModule",version:"3.4.0"},{qname:"sap.riv.viz.shared.utils.ScrollBarRenderer",version:"3.4.0"},{qname:"sap.riv.viz.shared.context.Context",version:"3.4.0"}],function Setup(c,o,r,k,e,n,t,h,a,g,b,m,d,j,l,q){var s={xAxis:{showMajor:true,majorColor:"#c9c9c9",majorThickness:"1",showMinor:false,minorColor:"#c9c9c9",minorThickness:"1",showSub:false,subColor:"#c9c9c9"},yAxis:{showMajor:false,majorColor:"#c9c9c9",majorThickness:"1",showMinor:false,minorColor:"#c9c9c9",minorThickness:"1",showSub:false,subColor:"#c9c9c9"}};var f=c.derive(j,{events:["selectData","unSelectData","showTooltip","hideTooltip"],constructor:function(u){this._seriesGroup=null;this._barRenderer=null;this._hasDrawn=false;this._hasBacked=false;this._valueAxisRange=null;this._selections=[];this._highlighter=null},initAxes:function(){this._initXAxes();this._initYAxes()},_initXAxes:function(){this._xaxes=[];var A=this._chart_options.properties.xAxis;for(var w=0,v=A.length;w<v;w++){if(o.isExist(A[w].showTitle)&&A[w].showTitle&&!o.isExist(A[w].title)){A[w].title="X"+(w+1)}var z={mode:h.NUMERIC,position:w==0?"hb":"ht",index:w,maxValue:o.isExist(this._valueAxisRange[w])?this._valueAxisRange[w].max:0,minValue:o.isExist(this._valueAxisRange[w])?this._valueAxisRange[w].min:0};var u=new h(c.extend(true,z,A[w]));this._xaxes.push(u)}},_initYAxes:function(){this._yaxes=[];var z=this._chart_options.properties.yAxis;var B=this._dataTree.getSubMemberLabels();var v=[];for(var w=0;w<B.length;w++){v.push(B[w].value)}for(var w=0,u=z.length;w<u;w++){if(o.isExist(z[w].showTitle)&&z[w].showTitle&&!o.isExist(z[w].title)){z[w].title="Y"+(w+1)}var x={mode:h.DIMENSION,position:"vl",index:w,labels:v};var A=new h(c.extend(true,x,z[w]));this._yaxes.push(A)}},initGridLineProperties:function(){this._xAxis_gridLine_option=c.extend(true,s.xAxis,this._chart_options.properties.xAxis[0].gridLine);this._yAxis_gridLine_option=c.extend(true,s.yAxis,this._chart_options.properties.yAxis[0].gridLine);this._gridLine.setXAxisOptions(this._xAxis_gridLine_option);this._gridLine.setYAxisOptions(this._yAxis_gridLine_option)},gridLinePropertiesCheck:function(){if((!this._xAxis_gridLine_option.showMajor&&this._xAxis_gridLine_option.showSub)||this._yAxis_gridLine_option.showMajor||this._yAxis_gridLine_option.showMinor){r.error("Wrong settings for grid line of bar chart")}},initSeries:function(){delete this._highlighter;this._valueAxisRange=[];var K=this._chart_options.properties.bar;var z=this._chart_options.properties.measures;var M=this._metaData.measureMembers;var F=this._chart_options.properties.measureDefault.colors;this._seriesGroup=new a();var v=this._chart_options.properties._additional;var w=q.get(v.statesManagerId);var L=w.getStatesItemValue(w.CHANGESERIESVISIBILITY);for(var G=0,I=this._metaData.measureMembers.length;G<I;G++){var C=c.extend(true,{},K,z[G]);C.fillColor=o.isExist(C.fillColor)?C.fillColor:F[G%F.length];if(L[G]===false){C.visible=false}else{C.visible=true}var A=new g(C);A.setIndex(G);A.setName(M[G].value);A.setData(this._data[G]);var J=this._data[G];for(var E=0,B=J.length;E<B;E++){var D=new b();D.setData([J[E]]);D.setDataIndex(J[E].dimensionPath[0].dimensionItemIndex);if(C.visible===false){D.setStatus(D.getStatus()|b.status.invisible)}A.addSeriesItem(D)}this._seriesGroup.addSeries(A);if(C.visible){var H=C.valueAxis||0;this._updateValueAxisRange(A.getDataRange(),H)}}var u=this._chart_options.properties.selectability;var x=0;if(u.mode==="single"){x=1}if(u.mode==="multiple"){x=1000}this._highlighter=new m(this._seriesGroup.getSeriesList(),x)},initScrollBar:function(){if(this._scrollBar.length>0){for(var u=0;u<this._scrollBar.length;u++){this._scrollBar[u].remove()}}this._scrollBar=[];this._scrollBar[0]=new l()},updateValueAxisRange:function(){var u=this._chart_options.properties._additional;var D=q.get(u.statesManagerId);var v=D.getStatesItemValue(D.CHANGESERIESVISIBILITY);this._valueAxisRange=[];var C=this._chart_options.properties.measures;var x=this._seriesGroup.getSeriesList();var z;for(var A=0,B=this._metaData.measureMembers.length;A<B;A++){var w=C[A]||{};w.visible=o.isExist(w.visible)?w.visible:true;if(v[A]!==false){var E=w.valueAxis||0;z=x[A];this._updateValueAxisRange(z.getDataRange(),E)}}},_updateValueAxisRange:function(u,v){if(this._valueAxisRange[v]==undefined){this._valueAxisRange[v]={max:Number.NEGATIVE_INFINITY,min:Number.POSITIVE_INFINITY}}if(u.max>this._valueAxisRange[v].max){this._valueAxisRange[v].max=u.max}if(u.min<this._valueAxisRange[v].min){this._valueAxisRange[v].min=u.min}},bindSeriesWithAxes:function(){var v=this._chart_options.properties.measures;var z=this._seriesGroup.getSeriesList();for(var w=0,u=this._metaData.measureMembers.length;w<u;w++){var x=v[w]||{};var A=x.valueAxis||0;z[w].setXAxis(this._xaxes[A]);z[w].setYAxis(this._yaxes[0])}},_createCustomizedRenderer:function(u){var v=this._chart_options.properties.bar;if(v&&o.isFunction(v.renderer)){return new v.renderer(u,this._chart_options.properties)}return null},initRenderer:function(u){if(this._barRenderer==null){this._barRenderer=this._createCustomizedRenderer(u);if(this._barRenderer==null){this._barRenderer=new d(u,this._chart_options.properties)}}else{this._barRenderer.resetSeriesGroups()}this._barRenderer.addSeriesGroup(this._seriesGroup)},drawSeries:function(){if(!this._hasDrawn){this._barRenderer.draw();this._hasDrawn=true}else{this._barRenderer.redraw()}var v=this._chart_options.properties.selectability;if(this._defaultSelectionArmed){var w=v.defaultSelectedItems;if(v.mode!=="none"&&w.length!==0&&o.isDefined(w[0].measureIndex)){for(var z=0,u=w.length;z<u;z++){var x=w[z];if(o.isExist(x.dimensionItemIndex)&&o.isExist(x.dimensionPath)&&x.dimensionPath.length===0){x.dimensionPath=[{dimensionItemIndex:x.dimensionItemIndex,analysisAxisIndex:0,dimensionIndex:0}]}}this._highlighter.setTargets(v.defaultSelectedItems);this._highlighter.run()}this._defaultSelectionArmed=false}},doChartLayout:function(G,D,z,w,E){this._seriesLayer=E;var J={width:0,height:0};var v={width:0,height:0};var x={width:0,height:0};x.width+=this._yaxes[0].getPreferredWidth();var B=this._xaxes[0].getAxisMetrics(),A,M=B.right,I=Math.max(x.width,B.left);if(this._xaxes.length>1){A=this._xaxes[1].getAxisMetrics();M=Math.max(M,A.right);I=Math.max(I,A.left)}var H=G.width-I-M,F=this._xaxes[0].getLabelDirection();this._xaxes[0].updateProperties({distance:H});var L=this._xaxes[0].getAxisMetrics(),C=false;if(F!=this._xaxes[0].getLabelDirection()){C=true}else{v.height=this._xaxes[0].getPreferredHeight();v.width=this._xaxes[0].getPreferredWidth()}if(this._xaxes.length>1){F=this._xaxes[1].getLabelDirection();this._xaxes[1].updateProperties({distance:H});var u=this._xaxes[1].getAxisMetrics();if(F!=this._xaxes[1].getLabelDirection()){C=true}else{J.width=this._xaxes[1].getPreferredWidth();J.height=this._xaxes[1].getPreferredHeight()}}if(C){B=this._xaxes[0].getAxisMetrics();M=B.right;I=Math.max(x.width,B.left);if(this._xaxes.length>1){A=this._xaxes[1].getAxisMetrics();M=Math.max(M,A.right);I=Math.max(I,A.left)}H=G.width-I-M;this._xaxes[0].setInternalDistance(H);v.height=this._xaxes[0].getPreferredHeight();v.width=this._xaxes[0].getPreferredWidth();if(this._xaxes.length>1){this._xaxes[1].setInternalDistance(H);J.width=this._xaxes[1].getPreferredWidth();J.height=this._xaxes[1].getPreferredHeight()}}var K=G.height-v.height-J.height;this._yaxes[0].updateProperties({distance:K});x.height+=this._yaxes[0].getPreferredHeight();D[0].size({width:x.width,height:x.height});D[0].position({x:I-x.width,y:J.height});z[0].size({width:v.width,height:v.height});z[0].position({x:I-B.left-this._yaxes[0].getLineThickness()/2,y:J.height+x.height-this._xaxes[0].getMajorTickWidth()/2});if(J.height>0){z[1].size({width:J.width,height:J.height});z[1].position({x:I-A.left-this._yaxes[0].getLineThickness()/2,y:this._xaxes[1].getMajorTickWidth()/2})}w.size({width:H+1,height:K});w.position({x:I,y:J.height});E.size(w.size());E.position({x:0,y:0});this._scrollBar[0].init(w,E,"vertical");if(this._visibleRangeChanged){this._visibleRangeChanged=false;this._updateVisibleRange()}else{this.restore()}this._rightBound=z[0].position().x+this._xaxes[0].getFirstTickOffset()+this._xaxes[0].getDistance()},_updateVisibleRange:function(){var A=this._chart_options.properties.visibleRange;var x=A.start;var z=A.end;if(x<0||z<0||x>this._dataTree.getSubMemberLabels().length-1||z>this._dataTree.getSubMemberLabels().length-1||x>z){x=0;z=this._dataTree.getSubMemberLabels().length-1}if(x===0&&z===this._dataTree.getSubMemberLabels().length-1){return}var v=z-x+1;var B=(this._yaxes[0]._sax_renderer.getMaxValue()-this._yaxes[0]._sax_renderer.getMinValue())/v;this._yaxes[0].setVisibleRange(1,B,B);var u=this._yaxes[0].getTickInterval();this._yaxes[0].position(0,-u*(this._yaxes[0]._sax_renderer.getMaxValue()-z-1.5));var w=this._seriesLayer.size();this._seriesLayer.size({width:w.width,height:w.height*B});this.position(0,-u*(this._yaxes[0]._sax_renderer.getMaxValue()-z-1.5));if(e.os()==="iPad"){this._scrollBar[0].update();this._scrollBar[0].unHighLight()}},updateProperties:function(C){j.prototype.updateProperties.apply(this,arguments);var v=this._chart_options.properties.measures;var B=this._chart_options.properties.measureDefault.colors;var z=this._chart_options.properties.bar;var w=[];if(o.isExist(z)){this._barRenderer.updateProperties(this._chart_options.properties)}for(var x=0,u=this._metaData.measureMembers.length;x<u;x++){var A=c.extend(true,{},z,v[x]);A.fillColor=o.isExist(A.fillColor)?A.fillColor:B[x%B.length];w.push(A)}this._seriesGroup.updateProperties(w);if(!this._hasDrawn){this.initSeries();this._barRenderer.resetSeriesGroups();this._barRenderer.addSeriesGroup(this._seriesGroup)}},getSupportedAppEvents:function(){return["selectData","unSelectData","showTooltip","hideTooltip"]},onclick:function(u){if(!this.isSelectable()){return}if(this._barRenderer==null){r.error("No renderer to handle event!")}var x=true;var v=this._getSeriesItemsUnderPoint(u);if(v.length===0){if(this.isDeselectable()){var w=this._highlighter.getHighlightedSeriesItemsContext();this._fireUnSelectDataEvent(w);this._highlighter.erase()}}else{if(v[0].isHighlighted()){if(this.isDeselectable()){this._highlighter.remove(v[0]);this._fireUnSelectDataEvent(v[0].getData())}x=false}else{this._highlighter.setTargets([v[0]])}}var w=this._highlighter.run();if(x){this._fireSelectDataEvent(w)}},_fireSelectDataEvent:function(x){if(x.length>0){var w=[];for(var v=0,u=x.length;v<u;v++){w.push({dimensionPath:x[v].dimensionPath,dimensionItemIndex:x[v].dimensionPath[x[v].dimensionPath.length-1].dimensionItemIndex,measureIndex:x[v].measureIndex,dimensionLabel:x[v].dimensionLabel,measureValue:x[v].value})}this.fireEvent("selectData",{name:"selectData",data:w})}},_fireUnSelectDataEvent:function(x){if(x.length>0){var w=[];for(var v=0,u=x.length;v<u;v++){w.push({dimensionPath:x[v].dimensionPath,dimensionItemIndex:x[v].dimensionPath[x[v].dimensionPath.length-1].dimensionItemIndex,measureIndex:x[v].measureIndex,dimensionLabel:x[v].dimensionLabel,measureValue:x[v].value})}}this.fireEvent("unSelectData",{name:"unSelectData",data:w})},_getSeriesItemsUnderPoint:function(D){var A=[];var u=this._seriesGroup.getSeriesList();for(var w=0,z=u.length;w<z;w++){var x=u[w].getSeriesItems();for(var v=0,F=x.length;v<F;v++){var C=x[v].getMainShapes()[0];var E=C.topLeft();var B=C.bottomLeft();if(E.y<=D.y&&B.y>=D.y){A.push(x[v])}}}return A},panMove:(function(){var v;var A;var z;var w;var u;var x;var B;return function(Q){var I=Q.attachedComponent();var H=Q.rangeInXY();if(Q.state()===n.TransitionState.Began){x=I._seriesLayer.position();w=I._yaxes[0]._sax_renderer._subLayer.size();u=I._yaxes[0]._sax_renderer._subLayer.position();z=I._yaxes[0]._sax_renderer._layer.size();A=new Date().getTime();if(w.height>z.height){I._chartModule._scrollBar[0].highLight()}B=false}else{if(Q.state()===n.TransitionState.Changed){if(Q.attachedComponent().islongPressGesture===true){var E=Q.globalLocOfGesture();var L=I.convertPointFromGlobal(E);var C=I._rootLayer;var M=I._seriesLayer.convertPointFromLayer(L,C);var N=I._seriesMaskLayer.convertPointFromLayer(L,C);if(!I._seriesMaskLayer.containsPoint(N)){I._chartModule.onblur()}else{I._chartModule.onhover(M)}return}B=true;var F=0;if((x.y+H.y)>0){F=-x.y}else{if(x.y+H.y+I._seriesLayer.size().height<=I._seriesMaskLayer.size().height){F=I._seriesMaskLayer.size().height-x.y-I._seriesLayer.size().height}else{F=H.y}}I._chartModule.position(x.x,x.y+F);I._chartModule._scrollBar[0].update();var K=I._yaxes;for(var G=K.length;G--;){K[G].position(0,x.y+F)}v=Q.velocityInXY().y;A=new Date().getTime()}else{if(Q.state()===n.TransitionState.Ended){if((x.y+H.y)>=0||(x.y+H.y+I._yaxes[0]._sax_renderer._subLayer.size().height<=I._yaxes[0]._sax_renderer._layer.size().height)){if(w.height>z.height){I._chartModule._scrollBar[0].unHighLight();I._rootLayer.setNeedsDisplay()}B=false;return}if(B){if(v==0){B=false;I._chartModule._scrollBar[0].unHighLight();I._rootLayer.setNeedsDisplay();return}var J=(v-0)/(new Date().getTime()-A);var O=I;var D=O._seriesLayer.position();var P=v*v/(2*J)*10;t.animate({values:[{type:"FLOAT",from:0,to:P}],duration:600,easing:"EaseOut",onStep:function(R){if((D.y+R[0])>0||D.y+R[0]+O._yaxes[0]._sax_renderer._subLayer.size().height<=O._yaxes[0]._sax_renderer._layer.size().height){return}O._seriesLayer.position({x:D.x,y:D.y+R[0]});O._yaxes[0].position(0,D.y+R[0]);O._chartModule._scrollBar[0].update();O._rootLayer.setNeedsDisplay()},onComplete:function(){var S=I._yaxes[0]._sax_renderer._subLayer.position().y;var R=I._yaxes[0]._sax_renderer._subLayer.size().height+S;if(S>0){t.animate({values:[{type:"FLOAT",from:S,to:0}],duration:500,easing:"EaseOut",onStep:function(T){O._seriesLayer.position({x:0,y:T[0]});O._yaxes[0].position(0,T[0]);O._chartModule._scrollBar[0].update();O._rootLayer.setNeedsDisplay()},onComplete:function(){O._chartModule._scrollBar[0].unHighLight()}})}else{if(R<z.height){t.animate({values:[{type:"FLOAT",from:S,to:(z.height-R+S)}],duration:500,easing:"EaseOut",onStep:function(T){O._seriesLayer.position({x:0,y:T[0]});O._yaxes[0].position(0,T[0]);O._chartModule._scrollBar[0].update();O._rootLayer.setNeedsDisplay()},onComplete:function(){O._chartModule._scrollBar[0].unHighLight()}})}else{O._chartModule._scrollBar[0].unHighLight()}}}});B=false}else{I._chartModule._scrollBar[0].unHighLight();I._rootLayer.setNeedsDisplay()}}else{if(Q.state()===n.TransitionState.Cancelled){}}}}}})(),translateChart:function(A,u){var z=0;var x=u._seriesLayer.position();if((x.y+A.y)>0){z=-x.y}else{if(x.y+A.y+u._seriesLayer.size().height<=u._seriesMaskLayer.size().height){z=u._seriesMaskLayer.size().height-x.y-u._seriesLayer.size().height}else{z=A.y}}u._chartModule.position(x.x,x.y+z);u._chartModule._scrollBar[0].update();var w=u._yaxes;for(var v=w.length;v--;){w[v].position(0,x.y+z)}},scaleChart:function(w,K,E){var u=E._yaxes[0].getTickInterval();var A=E._metaData.measureMembers.length>20?20:E._metaData.measureMembers.length;var H=E._dataTree.getSubMemberLabels().length;var J=E._seriesLayer.size();var v=E._seriesMaskLayer.size();var D=E._seriesLayer.position();var C=E._yaxes[0].getMajorTicks();K.y=K.y-E._seriesMaskLayer.position().y;if(w>=1&&u*w>=v.height){return}if(w<1&&u*w<=v.height/(2*H)){return}var L=u/2;var I=-1;for(var B=0,F=C.length;B<F;B++){if(Math.abs(C[B]-K.y+D.y)<=L){I=B;break}}if(I===-1){I=Math.floor(C.length/2)}u*=w;var G=E._yaxes;for(var B=G.length;B--;){G[B].zoom(1,w,w)}var z={x:0,y:0};var x=E._yaxes[0].getMajorTicks();if(w>=1){z.y=C[I]-x[I]+D.y}else{z.y=D.y-(x[I]-C[I])}J.height=J.height*w;E._chartModule.position(z.x,z.y);E._chartModule.scale(1,w,v);E._chartModule._scrollBar[0].update();G[0].position(0,z.y);E._rootLayer.setNeedsDisplay()},scaleChartEnd:function(v){var A=v._seriesMaskLayer.size();v._chartModule.scale(1,1);v._chartModule._scrollBar[0].update();v._chartModule._scrollBar[0].unHighLight();v._rootLayer.setNeedsDisplay();var x=v._seriesLayer.size();if(x.height<=A.height){var u=A.height/x.height;var z=v._yaxes;for(var w=z.length;w--;){z[w].zoom(1,u,u);z[w].position(0,0)}v._chartModule.scale(1,u);v._seriesLayer.position({x:0,y:0});v._chartModule._scrollBar[0].update();v._chartModule._scrollBar[0].hidden();v._rootLayer.setNeedsDisplay()}},scale:function(v,u){var w=this._seriesLayer.size();this._seriesLayer.size({width:w.width*v,height:w.height*u});this._barRenderer.setScale(u);this._barRenderer.redraw()},pinchingResize:(function(){var F;var B;var x;var G;var C;var A;var E;var z;var D;var w;var v;var u;return function(I){var P=I.attachedComponent();var T=I.scale();T=Math.round(T*100)/100;if(I.state()===n.TransitionState.Began){F=P._seriesLayer.size();B=P._seriesLayer.position();x=P._seriesMaskLayer.size();G=I.globalLocOfGesture();G.y=G.y-P._seriesMaskLayer.position().y;C=new Date().getTime();A=P._yaxes[0].getMajorTicks();w=P._yaxes[0].getTickInterval();var V=w/2;E=-1;for(var O=0,Q=A.length;O<Q;O++){if(Math.abs(A[O]-G.y+B.y)<=V){E=O;break}}if(E===-1){E=Math.floor(A.length/2)}z=P._metaData.measureMembers.length>20?20:P._metaData.measureMembers.length;D=P._dataTree.getSubMemberLabels().length;P._chartModule._scrollBar[0].highLight();P._rootLayer.setNeedsDisplay();v=T;if(P.islongPressGesture===true){P.islongPressGesture=false;P._chartModule.onblur()}}else{if(I.state()==n.TransitionState.Changed){var K=0;K=Math.round((T/v)*100)/100;if(T===v){return}v=T;var J=new Date().getTime();if((J-C)>5){C=J;if(K>=1&&w*K>=x.height){return}if(K<1&&w*K<=x.height/(2*D)){return}w*=K;var R=P._yaxes;for(var O=R.length;O--;){R[O].zoom(1,K,K)}var N={x:0,y:0};var M=P._yaxes[0].getMajorTicks();if(K>=1){N.y=A[E]-M[E]+B.y}else{N.y=B.y-(M[E]-A[E])}F.height=F.height*K;P._chartModule.scale(1,K,x);var S=P._seriesLayer.size();var L=0;if(S.height>x.height){if(N.y>0){L=0-N.y;u="top"}else{if((S.height+N.y)<x.height){L=x.height-(S.height+N.y);u="bottom"}}}else{if(u==="top"){L=0-N.y}else{L=x.height-(S.height+N.y)}}N.y=N.y+L;P._chartModule.position(N.x,N.y);P._chartModule._scrollBar[0].update();R[0].position(0,N.y);P._rootLayer.setNeedsDisplay()}}else{if(I.state()==n.TransitionState.Ended||I.state()==n.TransitionState.Cancelled){P._chartModule.scale(1,1);P._chartModule._scrollBar[0].update();P._chartModule._scrollBar[0].unHighLight();P._rootLayer.setNeedsDisplay();var U=P._seriesLayer.size();if(U.height<=x.height){var H=x.height/U.height;var R=P._yaxes;for(var O=R.length;O--;){R[O].zoom(1,H,H);R[O].position(0,0)}P._chartModule.scale(1,H);P._seriesLayer.position({x:0,y:0});P._chartModule._scrollBar[0].update();P._chartModule._scrollBar[0].hidden();P._rootLayer.setNeedsDisplay()}}}}}})(),longPressHandler:(function(){return function(v){var w=v.attachedComponent();if(v.state()===n.TransitionState.Began){var B=v.globalLocOfGesture();var A=w.convertPointFromGlobal(B);var z=w._rootLayer;var u=w._seriesLayer.convertPointFromLayer(A,z);var x=w._seriesMaskLayer.convertPointFromLayer(A,z);if(w._seriesMaskLayer.containsPoint(x)){w.islongPressGesture=true;w._chartModule.onhover(u)}}}})(),tapHandler:function(v){var w=v.attachedComponent();if(v.state()===n.TransitionState.Ended){var A=v.globalLocOfGesture();var z=w.convertPointFromGlobal(A);var x=w._rootLayer;var u=w._seriesLayer.convertPointFromLayer(z,x);w._chartModule.onclick(u)}},backUp:function(){this._backedYScale=this._yaxes[0]._sax_renderer._subLayer.size().height/this._yaxes[0]._sax_renderer._layer.size().height;if(this._backedYScale>1.0000001){this._hasBacked=true;var u=this._yaxes[0]._sax_renderer._subLayer.position().y;this._backedYPercentage=u/this._yaxes[0]._sax_renderer._subLayer.height()}},restore:function(){if(this._hasBacked&&o.isExist(this._backedYScale)&&o.isExist(this._backedYPercentage)){if(this._backedYScale<=1.00000000001){return}this._yaxes[0].setVisibleRange(1,this._backedYScale,this._backedYScale);var u=this._seriesLayer.size();var w=u.height*this._backedYScale;var v=w*this._backedYPercentage;this._yaxes[0].position(0,v);this._seriesLayer.size({width:u.width,height:w});this.position(0,v);if(e.os()==="iPad"){this._scrollBar[0].update();this._scrollBar[0].unHighLight()}}},applyTheme:function(u){this._barRenderer.applyTheme(u)},onhover:function(C){if(!this._tooltipEnabled||!this._barRenderer){return}if(!this._hasVisibleSeries()){return}this._barRenderer.hoverAround(C);var w=this._seriesGroup.getSeriesList();if(w.length===0){return}var u=w[0].getYAxis();var A=u.getMajorTicks();var B=u.getTickInterval()/2;var v=0,x=A.length-1;var E=false;var D;while(!E&&v<=x){D=Math.round((v+x)/2);var z=A[D]-C.y;if(Math.abs(z)<=B){E=true}else{if(z>=0){v=D+1}else{x=D-1}}}if(!E){return}C.y=A[D];this.fireEvent("showTooltip",{name:"showTooltip",data:[{dimensionItemIndex:D,point:C}]})},onblur:function(u){if(!this._tooltipEnabled){return}this._barRenderer.blurOut(u);this.fireEvent("hideTooltip",{name:"hideTooltip",data:[{}]})},selectData:function(v,u){if(this._barRenderer===null){r.error("No renderer to handle event!")}if(this._chart_options.properties.selectability.mode==="single"){v=v.slice(0,1)}this._highlighter.setTargets(v);var v=this._highlighter.run();if(!(o.isDefined(u)&&u===true)){this._fireSelectDataEvent(v)}},unSelectData:function(A,w){if(this._barRenderer===null){r.error("No renderer to handle event!")}var v=[],z;for(var x=0,u=A.length;x<u;x++){z=this._highlighter.remove(A[x]);if(o.isExist(z)){v.push(z)}}if(!(o.isDefined(w)&&w===true)){this._fireUnSelectDataEvent(v)}this._highlighter.run()},getPlotArea:function(){return{top:0,left:0,bottom:0,right:this._rightBound}},updateSeriesVisibilty:function(){var A=this._chart_options.properties._additional;var z=q.get(A.statesManagerId);var v=z.getStatesItemValue(z.CHANGESERIESVISIBILITY);var x=this._seriesGroup.getSeriesList();for(var w=0,u=x.length;w<u;w++){x[w].setVisible(v[w])}},clearDrawing:function(){if(this._barRenderer!==null){this._barRenderer.clearDrawing()}}});return f});sap.riv.module({qname:"sap.riv.viz.xychart.WaterfallModule",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"},{qname:"sap.riv.core.Logger",version:"3.4.0"},{qname:"sap.riv.core.UADetector",version:"3.4.0"},{qname:"sap.riv.vizkit.GestureDetector",version:"3.4.0"},{qname:"sap.riv.core.Animator",version:"3.4.0"},{qname:"sap.riv.viz.shared.axis.Axis",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.SeriesGroup",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.Series",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.SeriesItem",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.WaterfallRenderer",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.LineRenderer",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.SeriesHighlighter",version:"3.4.0"},{qname:"sap.riv.viz.xychart.CombinationModule",version:"3.4.0"},{qname:"sap.riv.viz.shared.utils.ScrollBarRenderer",version:"3.4.0"},{qname:"sap.riv.viz.shared.context.Context",version:"3.4.0"}],function Setup(d,q,s,k,e,o,v,g,a,f,b,h,c,m,n,l,r){var u={xAxis:{showMajor:false,majorColor:"#c9c9c9",majorThickness:"1",showMinor:false,minorColor:"#c9c9c9",minorThickness:"1",showSub:false,subColor:"#c9c9c9"},yAxis:{showMajor:true,majorColor:"#c9c9c9",majorThickness:"1",showMinor:false,minorColor:"#c9c9c9",minorThickness:"1",showSub:false,subColor:"#c9c9c9"}};var t=function(A){var x={max:0,min:0};var B=0;for(var z=0,w=A._data.length;z<w;z++){var C=A._data[z].value;if(C==null||isNaN(C)){C=0}if(z<A._data.length-1){B=B+C}else{B=0+C}if(x.max<B){x.max=B}if(x.min>B){x.min=B}}return x};var j=d.derive(n,{constructor:function(w){this._valueAxisRange=[];this._seriesList=null;this._seriesGroup=null;this._waterfallRenderer=null;this._hasDrawn=false;this._hasBacked=false;this._tooltipEnabled=w.properties.tooltip.enable},initRenderer:function(w){if(this._waterfallRenderer==null){this._waterfallRenderer=new h(w,this._chart_options.properties)}else{this._waterfallRenderer.resetSeriesGroups()}this._waterfallRenderer.addSeriesGroup(this._seriesGroup)},drawSeries:function(){if(!this._hasDrawn){this._waterfallRenderer.draw();this._hasDrawn=true}else{this._waterfallRenderer.redraw()}var x=this._chart_options.properties.selectability;if(this._defaultSelectionArmed){var z=x.defaultSelectedItems;if(x.mode!=="none"&&z.length!==0&&q.isDefined(z[0].measureIndex)){for(var B=0,w=z.length;B<w;B++){var A=z[B];if(q.isExist(A.dimensionItemIndex)&&q.isExist(A.dimensionPath)&&A.dimensionPath.length===0){A.dimensionPath=[{dimensionItemIndex:A.dimensionItemIndex,analysisAxisIndex:0,dimensionIndex:0}]}}this._highlighter.setTargets(x.defaultSelectedItems)}this._defaultSelectionArmed=false}this._highlighter.run()},onblur:function(w){if(!this._tooltipEnabled){return}if(this._seriesGroup.getSeriesList().length>0){this._waterfallRenderer.blurOut(w)}this.fireEvent("hideTooltip",{name:"hideTooltip",data:[{}]})},initSeries:function(){delete this._highlighter;this._valueAxisRange=[];var C=this._chart_options.properties.measures;var P=this._metaData.measureMembers;var I=this._chart_options.properties.measureDefault.colors;var N=this._chart_options.properties.bar;delete this._seriesList;this._seriesList=[];this._seriesGroup=new a();var x=this._chart_options.properties._additional;var z=r.get(x.statesManagerId);var O=z.getStatesItemValue(z.CHANGESERIESVISIBILITY);for(var J=0,L=P.length;J<L;J++){var D=C[J]||{},E;var B=q.isExist(D.fillColor)?D.fillColor:I[J%I.length];D=d.extend(true,{},N,D);D.fillColor=B;E=new f(D);E.setIndex(J);if(O[J]===false){D.visible=false}E.setVisible(D.visible);E.setName(P[J].value);E.setData(this._data[J]);this._seriesGroup.addSeries(E);this._seriesList.push(E);var M=this._data[J];for(var H=0,F=M.length;H<F;H++){var G=new b();G.setData([M[H]]);G.setDataIndex(M[H].dimensionPath[0].dimensionItemIndex);if(D.visible===false){G.setStatus(G.getStatus()|b.status.invisible)}E.addSeriesItem(G)}if(E.isVisible()){var K=D.valueAxis||0;this._updateValueAxisRange(t(E),K)}}var w=this._chart_options.properties.selectability;var A=0;if(w.mode==="single"){A=1}if(w.mode==="multiple"){A=1000}this._highlighter=new m(this._seriesList,A,true)},updateValueAxisRange:function(){this._valueAxisRange=[];var G=this._chart_options.properties.measures;var x=this._chart_options.properties.measure;var C=0;var B=this._seriesGroup.getSeriesList();var w=this._chart_options.properties._additional;var H=r.get(w.statesManagerId);var z=H.getStatesItemValue(H.CHANGESERIESVISIBILITY);var E;for(var D=0,F=this._metaData.measureMembers.length;D<F;D++){var A=G[D]||{};A.visible=z[D];var I=A.valueAxis||0;E=B[C];C++;if(A.visible&&E){this._updateValueAxisRange(t(E),I)}}},bindSeriesWithAxes:function(){var x=this._chart_options.properties.measures;var z=0;var E=this._seriesGroup.getSeriesList();var B;for(var A=0,w=this._metaData.measureMembers.length;A<w;A++){var C=x[A]||{};var D=C.valueAxis||0;B=E[z];if(B){B.setXAxis(this._xaxes[0]);B.setYAxis(this._yaxes[D])}z++}},updateProperties:function(F){var G={};G.properties=F;this._chart_options=d.extend(true,{},G);var E=this._chart_options.properties.measures;var x=this._chart_options.properties.measure;var A=[];var z=this._chart_options.properties.measureDefault.colors;var C=this._chart_options.properties.bar;this._guideLineColor=this._chart_options.properties.tooltip.guideLineColor;if(q.isExist(C)){this._waterfallRenderer.updateProperties(this._chart_options.properties)}for(var B=0,D=this._metaData.measureMembers.length;B<D;B++){var w=E[B]||{};w=d.extend(true,{},w,C);w.fillColor=q.isExist(w.fillColor)?w.fillColor:z[B%z.length];A.push(w)}this._seriesGroup.updateProperties(A);if(!this._hasDrawn){this.initSeries();this._waterfallRenderer.resetSeriesGroups();this._waterfallRenderer.addSeriesGroup(this._seriesGroup)}},applyTheme:function(w){if(this._waterfallRenderer){this._waterfallRenderer.applyTheme(w)}},clickOnPoint:function(x){if(this._waterfallRenderer===null){s.error("No renderer to handle event!")}var z=this._getSeriesItemsUnderPoint(x);if(z.length===0){this._highlighter.erase()}else{if(z[0].isHighlighted()){this._highlighter.remove(z[0])}else{this._highlighter.setTargets([z[0]])}}var C=this._highlighter.run();if(C){var B=[];for(var A=0,w=C.length;A<w;A++){B.push({dimensionPath:C[A].dimensionPath,dimensionItemIndex:C[A].dimensionPath[C[A].dimensionPath.length-1].dimensionItemIndex,measureIndex:C[A].measureIndex,dimensionLabel:C[A].dimensionLabel,measureValue:C[A].value})}this.fireEvent("selectData",{name:"selectData",data:B})}},scale:function(x,w,A){var z=this._seriesLayer.size();this._seriesLayer.size({width:z.width*x,height:z.height*w});this._waterfallRenderer.setScale(x);this._waterfallRenderer.redraw()},onclick:function(x){if(!this.isSelectable()){return}if(this._waterfallRenderer===null){s.error("No renderer to handle event!")}var z=this._getSeriesItemsUnderPoint(x);if(z.length===0){if(this.isDeselectable()){this._highlighter.erase()}}else{if(z[0].isHighlighted()){if(this.isDeselectable()){this._highlighter.remove(z[0])}}else{this._highlighter.setTargets([z[0]])}}var C=this._highlighter.run();if(C){var B=[];for(var A=0,w=C.length;A<w;A++){B.push({dimensionPath:C[A].dimensionPath,dimensionItemIndex:C[A].dimensionPath[C[A].dimensionPath.length-1].dimensionItemIndex,measureIndex:C[A].measureIndex,dimensionLabel:C[A].dimensionLabel,measureValue:C[A].value})}this.fireEvent("selectData",{name:"selectData",data:B})}},onhover:function(w){if(!this._tooltipEnabled||!this._waterfallRenderer){return}if(!this._hasVisibleSeries()){return}var x=this._waterfallRenderer.hoverAround(w);if(x){this.fireEvent("showTooltip",{name:"showTooltip",data:[{dimensionItemIndex:x.dimensionItemIndex,point:x.point}]})}},selectData:function(A){if(this._chart_options.properties.selectability.mode==="single"){A=A.slice(0,1)}this._highlighter.setTargets(A);var A=this._highlighter.run();if(A.length>0){var z=[];for(var x=0,w=A.length;x<w;x++){z.push({dimensionPath:A[x].dimensionPath,dimensionItemIndex:A[x].dimensionPath[A[x].dimensionPath.length-1].dimensionItemIndex,measureIndex:A[x].measureIndex,dimensionLabel:A[x].dimensionLabel,measureValue:A[x].value})}this.fireEvent("selectData",{name:"selectData",data:z})}},_getSeriesItemsUnderPoint:function(w){var x=[];var z=this._seriesGroup.getSeriesList();this._findSeriesItemsUnderPoint(w,z,x);return x},clearDrawing:function(){if(this._waterfallRenderer!==null){this._waterfallRenderer.clearDrawing()}}});return j});sap.riv.module({qname:"sap.riv.viz.shared.series.BubbleRenderer",version:"3.4.0"},[{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.core.Math",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.BaseRenderer",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.Series",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.SeriesItem",version:"3.4.0"},{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.utils.NumericFormatUtils",version:"3.4.0"},{qname:"sap.riv.core.Animator",version:"3.4.0"},{qname:"sap.riv.vizkit.ThemeManager",version:"3.4.0"},{qname:"sap.riv.graphics.Layer",version:"3.4.0"},{qname:"sap.riv.graphics.shape.Line",version:"3.4.0"},{qname:"sap.riv.graphics.shape.Circle",version:"3.4.0"},{qname:"sap.riv.graphics.shape.Paths",version:"3.4.0"},{qname:"sap.riv.viz.shared.shape.Cross",version:"3.4.0"},{qname:"sap.riv.graphics.shape.TextLine",version:"3.4.0"},{qname:"sap.riv.core.utils.TextRuler",version:"3.4.0"}],function Setup(b,e,m,q,k,h,f,a,o,g,j,d,s,l,r,n){var c=h.derive(m,{renderParameters:{hiddenBorderWidth:2,hoveringBorderWidthFactor:1.5,highlightBorderWidthFactor:1.7},constructor:function(u,t){this._markerShadowVisible=false;this._maxBubbleDiameter=25;this._guideLine=u.addShape(new j());this._parseOptions(t);this._isInitialization=true},_parseOptions:function(t){this._lineShadowVisible=t.line.isShowLineShadow;this._markerShadowVisible=t.line.isShowMarkerShadow;this._hiddenBorderColor=t.background.color;this._maxBubbleDiameter=t.bubble.size},draw:function(){var u=this.getSeriesGroups();if(u.length===0){return}var t=u[0].getSeriesList();if(t.length===0){return}this._initSeries(t);this._update();this._regEvent()},_update:function(){var z=this.getSeriesGroups();var x=z[0].getSeriesList();var A=x[0].getXAxis();var u=A.getMajorTicks();this._calculateBubbleRadiusMultiplier(x);for(var w=0,t=x.length;w<t;w++){this._calculateSeriesPoints(x[w],u)}var v=true;if(this._enableAllAnimation){if(this._isInitialization){v=!this._enableInitAnimation}}if(v){for(var w=0;w<x.length;w++){this._drawSeries(x[w])}}this._doAnimation(v)},_calculateBubbleRadiusMultiplier:function(u){var D=this._maxBubbleDiameter/2;var A=0;for(var w=0,C=u.length;w<C;w++){var x=u[w].getSeriesItems();for(var t=0,B=x.length;t<B;t++){var v=x[t].getData()[0];if(v!=null){var E=Number(v.z);if(!isNaN(E)){A=e.max(A,E)}}}}this._bubbleRadiusMultiplier=D*D/A},_calculateBubbleRadius:function(u){var v=u.getData()[0];if(v==null){return 0}var w=Number(v.z);if(!isNaN(w)){var t=e.sqrt(w*this._bubbleRadiusMultiplier*this._scale);if(isNaN(t)){t=2}return t}else{return Number.NaN}},redraw:function(){var u=this.getSeriesGroups();if(u.length===0){return}var t=u[0].getSeriesList();if(t.length===0){return}this._update();this.refresh()},_getMarkerObject:function(){return d},getDataLabelLayer:function(){var t=this.getLayer();if(this._dataLabelLayer==null){this._dataLabelLayer=new g({anchor:{x:0,y:0}});this._dataLabelLayer.clipToBounds(true);t.addSubLayer(this._dataLabelLayer)}this._dataLabelLayer.size(t.size());return this._dataLabelLayer},_calculateSeriesPoints:function(B,u){var t=B.getYAxis();var v=B.getXAxis();var A=this.verticalAxes0Offset;var C=B.getSeriesItems();var z,F;for(var x=0,D=C.length;x<D;x++){F={};z=C[x].getData()[0];if(z!=null){if(z.x!=null){var w=Number(z.x);if(!isNaN(w)){F.x=v.u2p(w)}}if(z.y!=null){var E=Number(z.y);if(!isNaN(E)){F.y=t.u2p(E)+A}}}C[x].setPosition(F)}},_initSeries:function(u){var B=this.getLayer(),w,v;var t=this.getDataLabelLayer();var D;for(w=0,len=u.length;w<len;w++){var x=u[w];var z=x.getOptions().dataLabel;var A=x.getSeriesItems();for(v=0,jlen=A.length;v<jlen;v++){var C=this._getMarkerObject();D=B.addShape(new C());A[v].setDecoratingShapes({});A[v].setMainShapes([D]);if(z&&z.visible){A[v].setDataLabelShapes([t.addShape(new r())])}}}},_drawSeries:function(A,H,G){var C=A.getSeriesItems();var t=C.length;if(arguments.length===3&&G<t){t=G}var u=A.getOptions();var v,w,B=0,z=0;for(var x=0;x<t;x++){if((b.isExist(H))&&(H[x]!==1)){break}var E=C[x];var F=E.getMainShapes()[0];var D=E.getDecoratingShapes();if(!E.isVisible()){F.visible(false);if(b.isDefined(D.border)){D.border.visible(false)}if(b.isDefined(D.cross)){D.cross.visible(false)}}else{F.visible(true);if(b.isDefined(D.border)){D.border.visible(true)}if(b.isDefined(D.cross)){D.cross.visible(true)}}this._drawDataLabel(E);this._drawMarkShadow(F)}this._drawMarkAndLine(C,A,H,t)},_drawMarkShadow:function(t){if(this._markerShadowVisible){t.shadow({offsetX:1,offsetY:2,blur:2,color:"rgba(0,0,0,0.5)"})}else{t.shadow({offsetX:0,offsetY:0,blur:0,color:"rgba(0,0,0,0.5)"})}},_removeMarkShadow:function(t){t.shadow({offsetX:0,offsetY:0,blur:0,color:"rgba(0,0,0,0.5)"})},_doAnimation:function(u){var t=this;if(!u){var z=t._highlights;var w=t.getSeriesGroups()[0].getSeriesList();for(var v=0,x=z.length;v<x;v++){this._removeHighlight(z[v])}for(var v=0,x=z.length;v<x;v++){this._doHighlight(z[v],w[z[v].measureIndex])}a.animate({values:[{type:"FLOAT",from:0,to:1}],duration:this._animationDuration,onStep:function(C){var B=w[0].getSeriesItems();var D=B.length;var F=t.getLayer().size().width*C[0];for(var E=0,A=B.length;E<A;E++){if(B[E].getPosition().x>=F){D=E;break}}if(D>=1&&D<=B.length){for(var E=0,A=w.length;E<A;E++){t._drawSeries(w[E],undefined,D)}}t.refresh()},onComplete:function(){for(var A=0;A<w.length;A++){t._drawSeries(w[A])}}})}else{var w=t.getSeriesGroups()[0].getSeriesList();var z=t._highlights;for(var v=0,x=z.length;v<x;v++){this._removeHighlight(z[v])}for(var v=0,x=z.length;v<x;v++){this._doHighlight(z[v],w[z[v].measureIndex])}var z=t._highlights;for(var v=0,x=z.length;v<x;v++){z[v].crossShape.visible(true);z[v].borderShape.visible(true)}t.refresh()}this._isInitialization=false},_drawMarkAndLine:function(z,w,E,D){var t=z.length;if(arguments.length==4){t=D}var u=w.getOptions();var v=u.fillColor;for(var x=0;x<t;x++){var A=z[x].getMainShapes()[0];var C=z[x].getPosition();var B=this._calculateBubbleRadius(z[x]);if(b.isExist(E)){if(E[x]===1){A.fillingColor(v);this._drawBubble(A,C,B)}}else{A.fillingColor(v);this._drawBubble(A,C,B)}}},_getDataLabelTexts:function(E,z,A,B,u){var w,D,G;var F=E.getSeries().getName();if(F.hasOwnProperty("value")){F=F.value}var t=E.getDataIndex();var C=f.getFormatString(A.valueFormatString,t);var v=A.measureVisible&&(F!=null)&&(F.toString().length>0);if(u){w=[F,z.x,z.y,z.z];D=[v,A.xVisible,A.yVisible,A.zVisible];G=[A.measureFormatString,C.x,C.y,C.z]}else{w=[F,B,z.x,B,z.y,B,z.z];D=[v,v&&(A.xVisible||A.yVisible||A.zVisible),A.xVisible,A.xVisible&&(A.yVisible||A.zVisible),A.yVisible,A.yVisible&&A.zVisible,A.zVisible];G=[A.measureFormatString,null,C.x,null,C.y,null,C.z]}var H=[];for(var x=0;x<w.length;x++){if(D[x]){H.push({text:w[x],formatString:G[x]})}}return H},_getDataLabelAnchor:function(u,t,w){if(t==null||!(t.x>=0&&t.y>=0)){return null}var v={x:t.x,y:t.y};var x=this._calculateBubbleRadius(w);if(isNaN(x)){return null}if(u=="above"){v.align="bottom";v.y=t.y-x}else{if(u=="below"){v.align="top";v.y=t.y+x}else{if(u=="left"){v.align="right";v.x=t.x-x}else{if(u=="right"){v.align="left";v.x=t.x+x}else{v.align="center"}}}}return v},_clearSeriesItemDrawing:function(v){var u=v.getMainShapes()[0];var t=v.getDecoratingShapes();var A=v.getDataLabelShapes();var z=this.getLayer();z.removeShape(u);z.removeShape(t.line);z.removeShape(t.border);z.removeShape(t.cross);z.removeShape(t.hoveringBorder);z.removeShape(t.hiddenHoveringBorder);z.removeShape(t.hiddenMark);var x=this.getDataLabelLayer();if(A!=null&&A.length>0){for(var w=0;w<A.length;w++){x.removeShape(A[w])}}},_regEvent:function(){},_highlightSeriesItem:function(v){var x=this.getLayer(),w;var u=v.getSeries().getSeriesItems();for(w=0,len=u.length;w<len;w++){if(u[w].getMainShapes()!=null){var t=u[w].getMainShapes()[0];if(t){x.removeShape(t);x.addShape(t)}}}this._doHighlight(v);v.setStatus(v.getStatus()|k.status.highlighted);this.refresh()},_doHighlight:function(w){var v=w.getSeries().getOptions();var u={};u.color=v.fillColor;u.size=this.renderParameters.highlightBorderWidthFactor*(this._calculateBubbleRadius(w)*2);u.lineMarkerVisible=true;if(!b.isExist(w.getMainShapes())){return}var t=w.getDecoratingShapes();var A=this._createBorder(w,u);t.border=A;A.visible(u.lineMarkerVisible&&w.isVisible());var x=this._drawSelectionMarkup(w,u,A);t.cross=x;x.visible(u.lineMarkerVisible&&w.isVisible());var z=w.getMainShapes()[0];this._removeMarkShadow(z)},_removeHighlight:function(u){var v=this.getLayer();var t=u.getDecoratingShapes();if(t.border){v.removeShape(t.border)}if(t.cross){v.removeShape(t.cross)}if(!u.isHovered()){this._drawMarkShadow(u.getMainShapes()[0])}else{v.removeShape(u.getDecoratingShapes().hoveringBorder);v.addShape(u.getDecoratingShapes().hoveringBorder);v.removeShape(u.getMainShapes()[0]);v.addShape(u.getMainShapes()[0])}},_clearSeriesItemHighlight:function(t){this._removeHighlight(t);t.setStatus(t.getStatus()&(~k.status.highlighted));this.refresh()},updateProperties:function(t){m.prototype.updateProperties.apply(this,arguments);this._parseOptions(t)},_isValidSeriesItem:function(v,x){var u=v.getPosition();if(u==null){return false}var w=v.getMainShapes();if(w!=null&&w.length>0){var t=w[0].radius();if(t>0&&(u.x+t)>0&&(u.y+t)>0&&(u.x-t)<x.x&&(u.y-t)<x.y){return true}}return false},_containsPoint:function(v,x){var u=v.getPosition();if(u==null){return false}var w=v.getMainShapes();if(w!=null&&w.length>0){var t=w[0].radius();if(t>0&&w[0].doPointInTest(x)){return true}}return false},_getSeriesItemNearPoint:function(B,C,z,x){z.sort(function(E,D){var G=E.getData()[0];var F=D.getData()[0];if(G.x<F.x){return -1}else{if(G.x>F.x){return 1}else{if(G.y<F.y){return -1}else{if(G.y>F.y){return 1}else{return 0}}}}});var A=z.length-1;while(A>=0){if(!this._isValidSeriesItem(z[A],x)){A--}else{break}}if(A<0){return null}if(this._containsPoint(z[A],C)){return z[A]}var w=z[A].getData()[0];var u=e.abs(w.x-B.x);var t=e.abs(w.y-B.y);for(var v=z.length-2;v>=0;v--){if(!this._isValidSeriesItem(z[v],x)){continue}w=z[v].getData()[0];if(this._containsPoint(z[v],C)){A=v;break}else{if(e.abs(w.x-B.x)<u){u=e.abs(w.x-B.x);t=e.abs(w.y-B.y);A=v}else{if(e.abs(w.x-B.x)==u){if(e.abs(w.y-B.y)<t){t=e.abs(w.y-B.y);A=v}}else{break}}}}return z[A]},hoverAround:function(H,u,w){var A=this.getSeriesGroups(),z,F=[];if(A.length===0){return}z=A[0].getSeriesList();if(z.length===0){return}var x=false,D,C;for(D=0;D<z.length;D++){if(z[D].isVisible()){x=true;break}}if(!x){return}for(D=0;D<z.length;D++){for(C=0;C<z[D].getSeriesItems().length;C++){F.push(z[D].getSeriesItems()[C])}}var v=z[0].getXAxis();var t=z[0].getYAxis();var I={x:v.p2u(H.x),y:t.p2u(H.y)};var E={x:v.u2p(v.getMaxValue()),y:t.u2p(t.getMinValue())};var B=this._getSeriesItemNearPoint(I,H,F.slice(),E);if(B==null){return}itemIndex=B.getDataIndex();if(this._lastHoveredItem===B){return}if(this._lastHoveredItem!=null){this._removeHoverEffect(this._lastHoveredItem)}var G=B.getData()[0];H.x=v.u2p(G.x);if(u){this._guideLine.visible(true).color(w).update(2,{x:H.x,y:0},{x:H.x,y:this.getLayer().size().height});this._guideLine.shadow({offsetX:0,offsetY:0,blur:5,color:"rgba(80,80,80,1)"});this.refresh()}this._setHoverEffect(B);this._lastHoveredItem=B;return{dimensionItemIndex:itemIndex,point:H,seriesItem:B}},_setHoverEffect:function(x){var w=this.getLayer();var v={};var u=x.getSeries().getOptions();v.lineMarkerVisible=true;v.color=u.fillColor;v.size=this.renderParameters.hoveringBorderWidthFactor*(this._calculateBubbleRadius(x)*2);var t=this._createBorder(x,v);x.getDecoratingShapes().hoveringBorder=t;var z=x.getMainShapes()[0];w.removeShape(t);w.addShape(t);w.removeShape(z);w.addShape(z);t.visible(x.isVisible());z.shadow({offsetX:0,offsetY:0,blur:0,color:"rgba(0, 0, 0, 0.5)"});if(x.isHighlighted()){x.getDecoratingShapes().border.visible(false);x.getDecoratingShapes().cross.visible(false)}x.setStatus(x.getStatus()|k.status.hovered)},_removeHoverEffect:function(u){var t=u.getDecoratingShapes();if(b.isDefined(t.hoveringBorder)){t.hoveringBorder.visible(false)}if(b.isDefined(t.hiddenHoveringBorder)){t.hiddenHoveringBorder.visible(false)}if(b.isDefined(t.hiddenMark)){t.hiddenMark.visible(false)}if(u.isHighlighted()){t.border.visible(u.isVisible());t.cross.visible(u.isVisible())}else{u.getMainShapes()[0].shadow({offsetX:1,offsetY:2,blur:2,color:"rgba(0, 0, 0, 0.5)"})}u.setStatus(u.getStatus()&(~k.status.hovered))},blurOut:function(){var z=this.getSeriesGroups(),x,t=[],w,v;if(z.length===0){return}x=z[0].getSeriesList();if(x.length===0){return}for(w=0;w<x.length;w++){for(v=0;v<x[w].getSeriesItems().length;v++){t.push(x[w].getSeriesItems()[v])}}var A,u;for(w=0;w<t.length;w++){A=t[w].getMainShapes()[0];u=t[w].getDecoratingShapes();if(t[w].isHovered()){if(b.isDefined(u.hoveringBorder)){u.hoveringBorder.visible(false)}if(b.isDefined(u.hiddenHoveringBorder)){u.hiddenHoveringBorder.visible(false)}if(b.isDefined(u.hiddenMark)){u.hiddenMark.visible(false)}}if(t[w].isHighlighted()){u.border.visible(t[w].isVisible());u.cross.visible(t[w].isVisible())}else{A.shadow({offsetX:1,offsetY:2,blur:2,color:"rgba(0, 0, 0, 0.5)"})}t[w].setStatus(t[w].getStatus()&(~k.status.hovered))}this._lastHoveredItem=null;this._guideLine.visible(false);this.refresh()},_createBorder:function(v,u){var A=null;var z=v.getMainShapes()[0];var w=this.getLayer();var t=this._getMarkerObject();A=w.insertShapeBefore(new t(),z);if(u.lineMarkerVisible){A.fillingColor("white").borderWidth(1).borderColor(u.color)}else{A.fillingColor(u.color)}A.visible(false);var x=v.getPosition();this._drawBubble(A,x,u.size/2);return A},_drawSelectionMarkup:function(v,u,x){var w=v.getPosition();selectionMark=new l();selectionMark.reset();var t=e.max(0,e.floor(u.size-2));selectionMark.size(t).centerPoint(w);selectionMark=selectionMark.doDrawSelectionMarkup();selectionMark.borderWidth(1).borderColor(u.color).visible(false);selectionMark=this.getLayer().insertShapeAfter(selectionMark,x);return selectionMark},_drawBubble:function(v,u,t){v.center({x:u.x,y:u.y}).radius(t)}});return c});sap.riv.module({qname:"sap.riv.vizkit.TouchEvent",version:"3.4.0"},[{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.vizkit.Event",version:"3.4.0"}],function Setup(m,e,n){var f=jQuery;if(!f){m.error("Cannot find jQuery")}var b=function(q,r,o,s){this._id=q;this._target=r;this._localXY=o;this._pageXY=s};var j=b.prototype;j.identifier=function(){return this._id};j.target=function(){return this._target};j.localXY=function(){return{x:this._localXY.x,y:this._localXY.y}};j.pageXY=function(){return{x:this._pageXY.x,y:this._pageXY.y}};var c=function(o,q){this.tA=o,this.tM=q};var k=c.prototype;k.length=function(){return this.tA.length};k.item=function(o){if(o>=0&&(o<this.tA.length)){return this.tA[o]}};k.identifiedTouch=function(o){if(o!=null){return this.tM[o]}};var a=e.derive(n,{constructor:function(q,u,s,t,r,o){this._relatedTarget=undefined;this._touches=t;this._targetTouches=r;this._changedTouches=o},touches:function(){return this._touches},targetTouches:function(){return this._targetTouches},changedTouches:function(){return this._changedTouches}});var d=function(t){var q=[],u={};for(var s=0,r,v,o=t.length;s<o;s++){r=l(t.item(s));if(r){v=g(t.item(s),r);q.push(v);u[v.identifier()]=v}}return new c(q,u)};var h=function(t){var q=[],u={};for(var s=0,r,v,o=t.length;s<o;s++){r=l(t[s]);if(r){v=g(t[s],r);q.push(v);u[v.identifier()]=v}}return new c(q,u)};var l=function(q){var o=f(q.target);while(o.length&&!o.data("selfComp")){o=o.parent()}return o.data("selfComp")};var g=function(s,q){var r=q.pagePosition();var o={x:s.pageX-r.x,y:s.pageY-r.y};return new b(s.identifier,q,o,{x:s.pageX,y:s.pageY})};a.buildFrom3TouchArray=function(w,u,s,x,v,t){var q=h(s);var o=h(v);var r=h(x);return new a(w,u,t,q,o,r)};a.buildFromDomTouchEvent=function(s,v,o,u){var r=d(o.touches);var t=d(o.targetTouches);var q=d(o.changedTouches);return new a(s,v,u,r,t,q)};return a});sap.riv.module({qname:"sap.riv.viz.xychart.BubbleModule",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"},{qname:"sap.riv.core.Logger",version:"3.4.0"},{qname:"sap.riv.core.UADetector",version:"3.4.0"},{qname:"sap.riv.vizkit.GestureDetector",version:"3.4.0"},{qname:"sap.riv.core.Animator",version:"3.4.0"},{qname:"sap.riv.viz.shared.axis.Axis",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.SeriesGroup",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.Series",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.SeriesItem",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.SeriesHighlighter",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.BubbleRenderer",version:"3.4.0"},{qname:"sap.riv.viz.xychart.ChartModule",version:"3.4.0"},{qname:"sap.riv.viz.shared.utils.ScrollBarRenderer",version:"3.4.0"},{qname:"sap.riv.viz.shared.context.Context",version:"3.4.0"}],function Setup(d,o,r,j,e,m,t,g,a,f,b,l,c,h,k,q){var s={xAxis:{showMajor:true,majorColor:"#c9c9c9",majorThickness:"1",showMinor:false,minorColor:"#c9c9c9",minorThickness:"1",showSub:false,subColor:"#c9c9c9"},yAxis:{showMajor:false,majorColor:"#c9c9c9",majorThickness:"1",showMinor:false,minorColor:"#c9c9c9",minorThickness:"1",showSub:false,subColor:"#c9c9c9"}};var n=d.derive(h,{events:["selectData","unSelectData","showTooltip","hideTooltip"],constructor:function(u){this._seriesGroup=null;this._bubbleRender=null;this._hasDrawn=false;this._hasBacked=false;this._valueAxisRange=null;this._selections=[];this._highlighter=null;this._parseGuideLineColor()},_parseGuideLineColor:function(){if(this._chart_options.properties.tooltip.guideLineColor!=null){this._guideLineColor=this._chart_options.properties.tooltip.guideLineColor}else{this._guideLineColor="#333333"}},initAxes:function(){this._initXAxes();this._initYAxes()},_initXAxes:function(){this._xaxes=[];var A=this._chart_options.properties.xAxis;for(var w=0,v=1;w<v;w++){if(o.isExist(A[w].showTitle)&&A[w].showTitle&&!o.isExist(A[w].title)){A[w].title="X"+(w+1)}var z={mode:g.NUMERIC,position:w==0?"hb":"ht",index:w,maxValue:o.isExist(this._valueAxisRange[0])?this._valueAxisRange[0].max:0,minValue:o.isExist(this._valueAxisRange[0])?this._valueAxisRange[0].min:0};var u=new g(d.extend(true,z,A[w]));this._xaxes.push(u)}},_initYAxes:function(){this._yaxes=[];var z=this._chart_options.properties.yAxis;var B=this._dataTree.getSubMemberLabels();var v=[];for(var w=0;w<B.length;w++){v.push(B[w].value)}for(var w=0,u=1;w<u;w++){if(o.isExist(z[w].showTitle)&&z[w].showTitle&&!o.isExist(z[w].title)){z[w].title="Y"+(w+1)}var x={mode:g.NUMERIC,position:"vl",index:w,maxValue:o.isExist(this._valueAxisRange[1])?this._valueAxisRange[1].max:0,minValue:o.isExist(this._valueAxisRange[1])?this._valueAxisRange[1].min:0};var A=new g(d.extend(true,x,z[w]));this._yaxes.push(A)}},initGridLineProperties:function(){this._xAxis_gridLine_option=d.extend(true,s.xAxis,this._chart_options.properties.xAxis[0].gridLine);this._yAxis_gridLine_option=d.extend(true,s.yAxis,this._chart_options.properties.yAxis[0].gridLine);this._gridLine.setXAxisOptions(this._xAxis_gridLine_option);this._gridLine.setYAxisOptions(this._yAxis_gridLine_option)},initSeries:function(){delete this._highlighter;this._valueAxisRange=[];var K=this._chart_options.properties.bar;var z=this._chart_options.properties.measures;var M=this._metaData.measureMembers;var G=this._chart_options.properties.measureDefault.colors;this._seriesGroup=new a();var v=this._chart_options.properties._additional;var w=q.get(v.statesManagerId);var L=w.getStatesItemValue(w.CHANGESERIESVISIBILITY);var C=v.data.data();for(var H=0,I=C.length;H<I;H++){var D=d.extend(true,{},K,z[H]);D.fillColor=o.isExist(D.fillColor)?D.fillColor:G[H%G.length];if(L[H]===false){D.visible=false}else{D.visible=true}var A=new f(D);A.setIndex(H);A.setName(M[H].value);A.setData(C[H]);var J=C[H];for(var F=0,B=J.length;F<B;F++){var E=new b();E.setData([J[F]]);E.setDataIndex(F);if(D.visible===false){E.setStatus(E.getStatus()|b.status.invisible)}A.addSeriesItem(E)}this._seriesGroup.addSeries(A);if(D.visible){this._updateSeriesDataRange(A)}}var u=this._chart_options.properties.selectability;var x=0;if(u.mode==="single"){x=1}if(u.mode==="multiple"){x=1000}this._highlighter=new l(this._seriesGroup.getSeriesList(),x)},initScrollBar:function(){if(this._scrollBar.length>0){for(var u=0;u<this._scrollBar.length;u++){this._scrollBar[u].remove()}}this._scrollBar=[];this._scrollBar[0]=new k();this._scrollBar[1]=new k()},_updateSeriesDataRange:function(C){var B=C.getData();var A={x:{max:Number.NEGATIVE_INFINITY,min:Number.POSITIVE_INFINITY},y:{max:Number.NEGATIVE_INFINITY,min:Number.POSITIVE_INFINITY},z:{max:Number.NEGATIVE_INFINITY,min:Number.POSITIVE_INFINITY}};for(var w=0,v=B.length;w<v;w++){if(B[w]==null){continue}var u=B[w].x;var E=B[w].y;var D=B[w].z;if(!isNaN(u)){A.x.max=Math.max(A.x.max,u);A.x.min=Math.min(A.x.min,u)}if(!isNaN(E)){A.y.max=Math.max(A.y.max,E);A.y.min=Math.min(A.y.min,E)}if(!isNaN(D)){A.z.max=Math.max(A.z.max,D);A.z.min=Math.min(A.z.min,D)}}this._updateValueAxisRange(A.x,0);this._updateValueAxisRange(A.y,1);this._updateValueAxisRange(A.z,2)},updateValueAxisRange:function(){var C=this._chart_options.properties._additional;var A=q.get(C.statesManagerId);var w=A.getStatesItemValue(A.CHANGESERIESVISIBILITY);this._valueAxisRange=[];var v=this._chart_options.properties.measures;var z=this._seriesGroup.getSeriesList();for(var x=0,u=this._metaData.measureMembers.length;x<u;x++){var B=v[x]||{};B.visible=o.isExist(B.visible)?B.visible:true;if(w[x]!==false){this._updateSeriesDataRange(z[x])}}},_updateValueAxisRange:function(u,v){if(this._valueAxisRange[v]==undefined){this._valueAxisRange[v]={max:Number.NEGATIVE_INFINITY,min:Number.POSITIVE_INFINITY}}if(u.max>this._valueAxisRange[v].max){this._valueAxisRange[v].max=u.max}if(u.min<this._valueAxisRange[v].min){this._valueAxisRange[v].min=u.min}},bindSeriesWithAxes:function(){var v=this._chart_options.properties.measures;var z=this._seriesGroup.getSeriesList();for(var w=0,u=this._metaData.measureMembers.length;w<u;w++){var x=v[w]||{};var A=x.valueAxis||0;z[w].setXAxis(this._xaxes[A]);z[w].setYAxis(this._yaxes[0])}},_createCustomizedRenderer:function(u){var v=this._chart_options.properties.bar;if(v&&o.isFunction(v.renderer)){return new v.renderer(u,this._chart_options.properties)}return null},initRenderer:function(u){if(this._bubbleRender==null){this._bubbleRender=this._createCustomizedRenderer(u);if(this._bubbleRender==null){this._bubbleRender=new c(u,this._chart_options.properties)}}else{this._bubbleRender.resetSeriesGroups()}this._bubbleRender.addSeriesGroup(this._seriesGroup)},drawSeries:function(){if(!this._hasDrawn){this._bubbleRender.draw();this._hasDrawn=true}else{this._bubbleRender.redraw()}var v=this._chart_options.properties.selectability;if(this._defaultSelectionArmed){var w=v.defaultSelectedItems;if(v.mode!=="none"&&w.length!==0&&o.isDefined(w[0].measureIndex)){for(var z=0,u=w.length;z<u;z++){var x=w[z];if(o.isExist(x.dimensionItemIndex)&&o.isExist(x.dimensionPath)&&x.dimensionPath.length===0){x.dimensionPath=[{dimensionItemIndex:x.dimensionItemIndex,analysisAxisIndex:0,dimensionIndex:0}]}}this._highlighter.setTargets(this._getSelectedSeriesItems(v.defaultSelectedItems))}this._defaultSelectionArmed=false}var A=this._xaxes[0]._sax_renderer._axisLineLayer.position().x;var B=this._yaxes[0]._sax_renderer._axisLineLayer.position().y;if(B!=0&&A!=0){this._gridLine.gestureUpdate(A,B)}this._highlighter.run()},_getSelectedSeriesItems:function(v){var u=[];if(v&&v.length>0){var A=this._seriesGroup.getSeriesList();for(var z=0;z<v.length;z++){var x=A[v[z].measureIndex];if(x!=null){var w=x.getSeriesItems();if(w!=null&&w.length>v[z].dimensionItemIndex){u.push(w[v[z].dimensionItemIndex])}}}}return u},doChartLayout:function(A,w,B,D,z){this._seriesLayer=z;var x={width:0,height:0};var u={width:0,height:0};u.width+=this._yaxes[0].getPreferredWidth();var H=this._xaxes[0].getAxisMetrics(),G=H.right,F=Math.max(u.width,H.left);var v=A.width-F-G,C=this._xaxes[0].getLabelDirection();this._xaxes[0].updateProperties({distance:v});var I=this._xaxes[0].getAxisMetrics(),K=false;if(C!=this._xaxes[0].getLabelDirection()){K=true}else{x.height=this._xaxes[0].getPreferredHeight();x.width=this._xaxes[0].getPreferredWidth()}if(K){H=this._xaxes[0].getAxisMetrics();G=H.right;F=Math.max(u.width,H.left);v=A.width-F-G;this._xaxes[0].setInternalDistance(v);x.height=this._xaxes[0].getPreferredHeight();x.width=this._xaxes[0].getPreferredWidth()}var E=this._yaxes[0].getAxisMetrics();var J=A.height-E.top-Math.max(x.height,E.bottom);this._yaxes[0].updateProperties({distance:J});u.height+=this._yaxes[0].getPreferredHeight();w[0].ignoreHitTest(true);w[0].size({width:u.width,height:u.height});w[0].position({x:F-u.width,y:0});B[0].ignoreHitTest(true);B[0].size({width:x.width,height:x.height});B[0].position({x:F-H.left-this._yaxes[0].getMajorTickWidth()/2,y:A.height-Math.max(x.height,E.bottom)-this._xaxes[0].getMajorTickWidth()/2});this._bubbleRender.verticalAxes0Offset=-E.top;D.size({width:v+1,height:J});D.position({x:F-this._yaxes[0].getMajorTickWidth()/2,y:E.top});z.size(D.size());z.position({x:0,y:0});this._scrollBar[0].init(D,z,"vertical");this._scrollBar[1].init(D,z,"horizontal");if(this._visibleRangeChanged){this._visibleRangeChanged=false;this._updateVisibleRange()}else{this.restore()}this._rightBound=B[0].position().x+this._xaxes[0].getFirstTickOffset()+this._xaxes[0].getDistance()},scale:function(v,u){var w=this._seriesLayer.size();this._seriesLayer.size({width:w.width*v,height:w.height*u});this._bubbleRender.setScale(v);this._bubbleRender.redraw()},_updateVisibleRange:function(){var A=this._chart_options.properties.visibleRange;var x=A.start;var z=A.end;if(x<0||z<0||x>this._dataTree.getSubMemberLabels().length-1||z>this._dataTree.getSubMemberLabels().length-1||x>z){x=0;z=this._dataTree.getSubMemberLabels().length-1}if(x===0&&z===this._dataTree.getSubMemberLabels().length-1){return}var v=z-x+1;var B=(this._yaxes[0]._sax_renderer.getMaxValue()-this._yaxes[0]._sax_renderer.getMinValue())/v;this._yaxes[0].setVisibleRange(1,B,B);var u=this._yaxes[0].getTickInterval();this._yaxes[0].position(0,-u*(this._yaxes[0]._sax_renderer.getMaxValue()-z-1.5));var w=this._seriesLayer.size();this._seriesLayer.size({width:w.width,height:w.height*B});this.position(0,-u*(this._yaxes[0]._sax_renderer.getMaxValue()-z-1.5));if(e.os()==="iPad"){this._scrollBar[0].update();this._scrollBar[0].unHighLight();this._scrollBar[1].update();this._scrollBar[1].unHighLight()}},updateProperties:function(C){h.prototype.updateProperties.apply(this,arguments);var v=this._chart_options.properties.measures;var B=this._chart_options.properties.measureDefault.colors;var z=this._chart_options.properties.bar;var w=[];if(o.isExist(z)){this._bubbleRender.updateProperties(this._chart_options.properties)}for(var x=0,u=this._metaData.measureMembers.length;x<u;x++){var A=d.extend(true,{},z,v[x]);A.fillColor=o.isExist(A.fillColor)?A.fillColor:B[x%B.length];w.push(A)}this._seriesGroup.updateProperties(w);if(!this._hasDrawn){this.initSeries();this._bubbleRender.resetSeriesGroups();this._bubbleRender.addSeriesGroup(this._seriesGroup)}},getSupportedAppEvents:function(){return["selectData","unSelectData","showTooltip","hideTooltip"]},onclick:function(u){if(!this.isSelectable()){return}if(this._bubbleRender==null){r.error("No renderer to handle event!")}var v=this._getSeriesItemsUnderPoint(u);if(v&&v.length>0&&!v[0].isHighlighted()){v.splice(1);this._highlighter.setTargets(v);this._fireSelectDataEvent(v);isFireSelectDataEvent=false}this._highlighter.run()},_fireSelectDataEvent:function(v){if(v!=null&&v.length>0){var x=[];for(var w=0,u=v.length;w<u;w++){x.push({dimensionPath:null,dimensionItemIndex:v[w].getDataIndex(),measureIndex:v[w].getSeries().getIndex(),dimensionLabel:null,measureValue:null})}this.fireEvent("selectData",{name:"selectData",data:x})}},_fireUnSelectDataEvent:function(x){if(x.length>0){var w=[];for(var v=0,u=x.length;v<u;v++){w.push({dimensionPath:x[v].dimensionPath,dimensionItemIndex:x[v].dimensionPath[x[v].dimensionPath.length-1].dimensionItemIndex,measureIndex:x[v].measureIndex,dimensionLabel:x[v].dimensionLabel,measureValue:x[v].value})}}this.fireEvent("unSelectData",{name:"unSelectData",data:w})},_getSeriesItemsUnderPoint:function(u){var x=[];var A=this._seriesGroup.getSeriesList();for(var z=A.length-1;z>=0;z--){var v=A[z].getSeriesItems();for(var w=v.length-1;w>=0;w--){if(v[w].containsPoint(u)&&v[w].isVisible()){x.push(v[w]);return x}}}return x},pinchingResize:(function(){var G;var B;var w;var H;var C;var I,D;var x,A;var z;var E;var F,v;var u;return function(T){var Z=T.attachedComponent();var M=T.scale();M=Math.round(M*100)/100;if(T.state()===m.TransitionState.Began){G=Z._seriesLayer.size();B=Z._seriesLayer.position();w=Z._seriesMaskLayer.size();H=T.globalLocOfGesture();H.x=H.x-Z._seriesMaskLayer.position().x;C=new Date().getTime();I=Z._xaxes[0].getMajorTicks();F=Z._xaxes[0].getTickInterval();var Q=F/2;x=-1;D=Z._yaxes[0].getMajorTicks();v=Z._yaxes[0].getTickInterval();var Y=v/2;yCloseMark=-1;for(var V=0,X=I.length;V<X;V++){if(Math.abs(I[V]-H.x+B.x)<=Q){x=V;break}}if(x===-1){x=Math.floor(I.length/2)}for(var V=0,X=D.length;V<X;++V){if(Math.abs(D[V]-H.y)+B.y<=Y){yCloseMark=V;break}}if(yCloseMark===-1){yCloseMark=Math.floor(D.length/2)}z=Z._metaData.measureMembers.length>20?20:Z._metaData.measureMembers.length;E=Z._dataTree.getSubMemberLabels().length;Z._chartModule._scrollBar[0].highLight();Z._chartModule._scrollBar[1].highLight();Z._rootLayer.setNeedsDisplay();u=M;if(Z.islongPressGesture===true){Z.islongPressGesture=false;Z._chartModule.onblur()}}else{if(T.state()==m.TransitionState.Changed){var ad=0;ad=Math.round((M/u)*100)/100;if(M===u){return}var P=new Date().getTime();if((P-C)>5){C=P;if(ad>=1&&(F*ad>=w.width||v*ad>=w.height)){return}if(ad<1&&Z._seriesLayer.size().width*ad<=w.width){ad=w.width/Z._seriesLayer.size().width;M=1}if(u===1&&M===1){return}u=M;F*=ad;v*=ad;var L=Z._xaxes;for(var V=L.length;V--;){L[V].zoom(ad,1,ad)}var W=Z._yaxes;for(var V=W.length;V--;){W[V].zoom(1,ad,ad)}var O={x:0,y:0};var N=Z._xaxes[0].getMajorTicks();var R=Z._yaxes[0].getMajorTicks();if(ad>=1){O.x=I[x]-N[x]+B.x;O.y=D[yCloseMark]-R[yCloseMark]+B.y}else{O.x=B.x-(N[x]-I[x]);O.y=B.y-(R[yCloseMark]-D[yCloseMark])}G.width=G.width*ad;G.height=G.height*ad;Z._chartModule.scale(ad,ad,w);var J=Z._seriesLayer.size();var ab=0,aa=0;if(O.x>0){ab=0-O.x}else{if((J.width+O.x)<w.width){ab=w.width-(J.width+O.x)}}if(O.y>0){aa=0-O.y}else{if((J.height+O.y)<w.height){aa=w.height-(J.height+O.y)}}O.x=O.x+ab;O.y=O.y+aa;Z._chartModule.position(O.x,O.y);Z._chartModule._scrollBar[0].update();Z._chartModule._scrollBar[1].update();Z._chartModule._gridLine.drawGridLine();Z._chartModule._gridLine.gestureUpdate(O.x,O.y);L[0].position(O.x,0);W[0].position(0,O.y);Z._chartModule._highlighter.run();Z._rootLayer.setNeedsDisplay()}}else{if(T.state()==m.TransitionState.Ended||T.state()==m.TransitionState.Cancelled){Z._chartModule.scale(1,1);Z._chartModule._highlighter.run();Z._rootLayer.setNeedsDisplay();var U=Z._seriesLayer.size();var ac=Z._seriesLayer.position();var K=Z._seriesMaskLayer.size();if(U.width<=w.width){var S=w.width/U.width;var L=Z._xaxes;for(var V=L.length;V--;){L[V].zoom(S,1,S);L[V].position(0,0)}var W=Z._yaxes;for(var V=W.length;V--;){W[V].zoom(1,S,S);W[V].position(0,0)}Z._chartModule.scale(S,S);Z._seriesLayer.position({x:0,y:0});Z._chartModule._gridLine.drawGridLine();Z._chartModule._gridLine.gestureUpdate(0,0);Z._chartModule._scrollBar[0].update();Z._chartModule._scrollBar[0].hidden();Z._chartModule._scrollBar[1].update();Z._chartModule._scrollBar[1].hidden();Z._chartModule._highlighter.run();Z._rootLayer.setNeedsDisplay()}else{Z._chartModule._scrollBar[0].update();Z._chartModule._scrollBar[0].unHighLight();Z._chartModule._scrollBar[1].update();Z._chartModule._scrollBar[1].unHighLight()}}}}}})(),panMove:(function(){var u,E;var v;var C,F;var x,w;var A,B;var D;var z;return function(P){var X=P.attachedComponent();var Q=P.rangeInXY();if(P.state()===m.TransitionState.Began){D=X._seriesLayer.position();w=X._xaxes[0]._sax_renderer._axisLineLayer.size();x=X._yaxes[0]._sax_renderer._axisLineLayer.size();B=X._xaxes[0]._sax_renderer._axisLineLayer.position();A=X._yaxes[0]._sax_renderer._axisLineLayer.position();F=X._xaxes[0]._sax_renderer._layer.size();C=X._yaxes[0]._sax_renderer._layer.size();v=new Date().getTime();if(x.height>C.height){X._chartModule._scrollBar[0].highLight();X._chartModule._scrollBar[1].highLight()}z=false}else{if(P.state()===m.TransitionState.Changed){if(P.attachedComponent().islongPressGesture===true){var M=P.globalLocOfGesture();var G=X.convertPointFromGlobal(M);var S=X._rootLayer;var T=X._seriesLayer.convertPointFromLayer(G,S);var N=X._seriesMaskLayer.convertPointFromLayer(G,S);if(!X._seriesMaskLayer.containsPoint(N)){X._chartModule.onblur()}else{X._chartModule.onhover(T)}return}z=true;var O=0;if((D.y+Q.y)>0){O=-D.y}else{if(D.y+Q.y+X._seriesLayer.size().height<=X._seriesMaskLayer.size().height){O=X._seriesMaskLayer.size().height-D.y-X._seriesLayer.size().height}else{O=Q.y}}var Y=0;if((D.x+Q.x)>0){Y=-D.x}else{if(D.x+Q.x+X._seriesLayer.size().width<=X._seriesMaskLayer.size().width){Y=X._seriesMaskLayer.size().width-D.x-X._seriesLayer.size().width}else{Y=Q.x}}X._chartModule.position(D.x+Y,D.y+O);X._chartModule._gridLine.drawGridLine();X._chartModule._gridLine.gestureUpdate(D.x+Y,D.y+O);X._chartModule._scrollBar[0].update();X._chartModule._scrollBar[1].update();var V=X._yaxes;for(var U=V.length;U--;){V[U].position(0,D.y+O)}var I=X._xaxes;for(var U=I.length;U--;){I[U].position(D.x+Y,0)}E=P.velocityInXY().x;u=P.velocityInXY().y;v=new Date().getTime()}else{if(P.state()===m.TransitionState.Ended){if((D.y+Q.y)>=0||(D.y+Q.y+X._seriesLayer.size().height<=X._seriesMaskLayer.size().height)||(D.x+Q.x)>=0||(D.x+Q.x+X._seriesLayer.size().width<=X._seriesMaskLayer.size().width)){if(x.height>C.height||w.width>F.width){X._chartModule._scrollBar[0].unHighLight();X._chartModule._scrollBar[1].unHighLight();X._rootLayer.setNeedsDisplay()}z=false;return}if(z){if(u==0&&E==0){z=false;X._chartModule._scrollBar[0].unHighLight();X._chartModule._scrollBar[1].unHighLight();X._rootLayer.setNeedsDisplay();return}var H=(u-0)/(new Date().getTime()-v);var J=(E-0)/(new Date().getTime()-v);var R=X;var W=R._seriesLayer.position();var K=(u==0)?0:u*u/(2*H)*10;var L=(E==0)?0:E*E/(2*J)*10;t.animate({values:[{type:"FLOAT",from:0,to:K},{type:"FLOAT",from:0,to:L}],duration:600,easing:"EaseOut",onStep:function(Z){if((W.y+Z[0])>0||W.y+Z[0]+R._yaxes[0]._sax_renderer._axisLineLayer.size().height<=R._yaxes[0]._sax_renderer._layer.size().height||((W.x+Z[1])>0)||W.x+Z[1]+R._xaxes[0]._sax_renderer._axisLineLayer.size().width<=R._xaxes[0]._sax_renderer._layer.size().width){return}R._seriesLayer.position({x:W.x+Z[1],y:W.y+Z[0]});R._chartModule._gridLine.drawGridLine();R._yaxes[0].position(0,W.y+Z[0]);R._xaxes[0].position(W.x+Z[1],0);R._chartModule._gridLine.gestureUpdate(W.x+Z[1],W.y+Z[0]);R._chartModule._scrollBar[0].update();R._chartModule._scrollBar[1].update();R._rootLayer.setNeedsDisplay()},onComplete:function(){var ad=X._seriesLayer.position().y;var ae=X._seriesLayer.position().x;var aa=X._seriesLayer.size().height+ad;var Z=X._seriesLayer.size().width+ae;var ac,ab;if(ad>0&&ae>0){ac=0;ab=0}else{if(ae>0){ac=0;if(aa<C.height){ab=C.height-aa+ad}else{ab=ad}}else{if(ad>0&&Z<F.width){ab=0;if(Z<F.width){ac=F.width-Z+ae}else{ac=ae}}else{if(aa<C.height){ab=C.height-aa+ad}else{ab=ad}if(Z<F.width){ac=F.width-Z+ae}else{ac=ae}}}}t.animate({values:[{type:"FLOAT",from:ad,to:ab},{type:"FLOAT",from:ae,to:ac}],duration:500,easing:"EaseOut",onStep:function(af){R._seriesLayer.position({x:af[1],y:af[0]});R._xaxes[0].position(af[1],0);R._yaxes[0].position(0,af[0]);R._chartModule._gridLine.drawGridLine();R._chartModule._gridLine.gestureUpdate(af[1],af[0]);R._chartModule._scrollBar[0].update();R._chartModule._scrollBar[1].update();R._rootLayer.setNeedsDisplay()},onComplete:function(){R._chartModule._scrollBar[0].unHighLight();R._chartModule._scrollBar[1].unHighLight()}})}});z=false}else{X._chartModule._scrollBar[0].unHighLight();X._chartModule._scrollBar[1].unHighLight();X._rootLayer.setNeedsDisplay()}}else{if(P.state()===m.TransitionState.Cancelled){}}}}}})(),longPressHandler:(function(){return function(v){var w=v.attachedComponent();if(v.state()===m.TransitionState.Began){var B=v.globalLocOfGesture();var A=w.convertPointFromGlobal(B);var z=w._rootLayer;var u=w._seriesLayer.convertPointFromLayer(A,z);var x=w._seriesMaskLayer.convertPointFromLayer(A,z);if(w._seriesMaskLayer.containsPoint(x)){w.islongPressGesture=true;w._chartModule.onhover(u)}}}})(),tapHandler:function(v){var w=v.attachedComponent();if(v.state()===m.TransitionState.Ended){var A=v.globalLocOfGesture();var z=w.convertPointFromGlobal(A);var x=w._rootLayer;var u=w._seriesLayer.convertPointFromLayer(z,x);w._chartModule.onclick(u)}},backUp:function(){var u=this._yaxes[0]._sax_renderer._axisLineLayer.size().height/this._yaxes[0]._sax_renderer._axisLineVisibleWindow.size().height;var w=this._xaxes[0]._sax_renderer._axisLineLayer.size().width/this._xaxes[0]._sax_renderer._axisLineVisibleWindow.size().width;if(!isNaN(u)){this._backedYScale=u}if(!isNaN(w)){this._backedXScale=w}if((u>1.0000001||w>1.0000001)&&!isNaN(u)&&!isNaN(w)){this._hasBacked=true;var v=this._yaxes[0]._sax_renderer._axisLineLayer.position().y;this._backedYPercentage=v/this._yaxes[0]._sax_renderer._axisLineLayer.height();var x=this._xaxes[0]._sax_renderer._axisLineLayer.position().x;this._backedXPercentage=x/this._xaxes[0]._sax_renderer._axisLineLayer.width()}},restore:function(){if(this._hasBacked&&o.isExist(this._backedYScale)&&o.isExist(this._backedYPercentage)){if(this._backedYScale<=1.00000000001){return}this._xaxes[0].setVisibleRange(this._backedXScale,1,this._backedXScale);this._yaxes[0].setVisibleRange(1,this._backedYScale,this._backedYScale);var u=this._seriesLayer.size();var z=u.height*this._backedYScale;var w=u.width*this._backedXScale;var v=z*this._backedYPercentage;var x=w*this._backedXPercentage;this._yaxes[0].position(0,v);this._xaxes[0].position(x,0);this._seriesLayer.size({width:w,height:z});this.position(x,v);if(e.os()==="iPad"){this._scrollBar[0].update();this._scrollBar[0].unHighLight();this._scrollBar[1].update();this._scrollBar[1].unHighLight()}}},applyTheme:function(u){this._bubbleRender.applyTheme(u)},onhover:function(u){if(!this._tooltipEnabled||!this._bubbleRender){return}if(!this._hasVisibleSeries()){return}var v=this._bubbleRender.hoverAround(u,true,this._guideLineColor);if(v!=null){this.fireEvent("showTooltip",{name:"showTooltip",data:[v]})}},onblur:function(u){if(!this._tooltipEnabled){return}this._bubbleRender.blurOut(u);this.fireEvent("hideTooltip",{name:"hideTooltip",data:[{}]})},selectData:function(v,u){if(this._bubbleRender===null){r.error("No renderer to handle event!")}if(this._chart_options.properties.selectability.mode==="single"){v=v.slice(0,1)}var w=this._getSelectedSeriesItems(v);this._highlighter.setTargets(w);this._highlighter.run();if(!(o.isDefined(u)&&u===true)){this._fireSelectDataEvent(w)}},unSelectData:function(A,w){if(this._bubbleRender===null){r.error("No renderer to handle event!")}var v=[],z;for(var x=0,u=A.length;x<u;x++){z=this._highlighter.remove(A[x]);if(o.isExist(z)){v.push(z)}}if(!(o.isDefined(w)&&w===true)){this._fireUnSelectDataEvent(v)}this._highlighter.run()},getPlotArea:function(){return{top:0,left:0,bottom:0,right:this._rightBound}},updateSeriesVisibilty:function(){var A=this._chart_options.properties._additional;var z=q.get(A.statesManagerId);var v=z.getStatesItemValue(z.CHANGESERIESVISIBILITY);var x=this._seriesGroup.getSeriesList();for(var w=0,u=x.length;w<u;w++){x[w].setVisible(v[w])}},clearDrawing:function(){if(this._bubbleRender!==null){this._bubbleRender.clearDrawing()}}});return n});sap.riv.module({qname:"sap.riv.vizkit.VizAppDelegate",version:"3.4.0"},[{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"},{qname:"sap.riv.vizkit.ThemeManager",version:"3.4.0"}],function Setup(c,b){var d=function(){this._publicMethodsRegistry={};this._theme=b.defaultTheme();this._application};var a=d.prototype;a._afterLaunched=function(g,f){this._application=g;this.appDidFinishLaunching(g,f);var e=this.rootController();e._setApplication_(this._application);this._application._setRootController(e)};a.appDidFinishLaunching=c.noop;a.rootController=c.unimplemented;a.registerPublicMethod=function(e,f){this._publicMethodsRegistry[e]=f};a._invokePublicMethod=function(f,e){if(this._publicMethodsRegistry.hasOwnProperty(f)){this._publicMethodsRegistry[f].call(this,e)}};a._currentTheme=function(){return this._theme};a._applyTheme=function(e){if(this._theme!==e){this.rootController().doThemeApplied(e)}};a._updateThemeSetting=function(h,f,e,g){if(this._theme===h){this.rootController().doThemeUpdated(f,e,g)}};a.getProperties=function(){return{}};a.updateProperties=c.noop;a.setDataset=c.noop;a.getPreloadAssets=function(){return[]};a.getSupportedEvents=function(){return[]};a.getSupportedMethods=function(){var e=[];for(var f in this._publicMethodsRegistry){e.push(f)}return e};return d});sap.riv.module({qname:"sap.riv.core.utils.DomWatcher",version:"3.4.0"},[{qname:"sap.riv.core.UADetector",version:"3.4.0"},{qname:"sap.riv.core.utils.LinkedHashMap",version:"3.4.0"}],function Setup(l,u){var k=0;var j=1;var f=function(){return k++};var n=function(){return j++};var r=function(x){for(var z in x){if(x.hasOwnProperty(z)){return false}}return true};var o=function(z,A){var x=null;if(window.getComputedStyle){x=window.getComputedStyle(z,null)[A]}else{if(z.currentStyle){x=z.currentStyle[A]}}return x};var s=function(x,z){if(!this._data){this._data={}}if(arguments.length===2){this._data[x]=z}else{return this._data[x]}};var q=new u();var t=function(A){var x;var C=A.srcElement||A.target;var z=s.call(C,"domId");if(!z){return}var B=q.get(z).getIterator();while(B.hasMore()){x=B.nextValue();x.checkChange()}};var a=function(B){var x=w.get(B);var A=x.domElem;var z=s.call(A,"domId");if(!z){z=n();s.call(A,"domId",z);q.add(z,new u())}q.get(z).add(x.id,x);if(!s.call(A,"eventHandler")){if(typeof(A.onpropertychange)=="object"){A.attachEvent("onpropertychange",t)}else{if(l.isFirefox()&&parseFloat(l.version())>3.6){A.addEventListener("DOMAttrModified",t)}}s.call(A,"eventHandler",t)}};var b=function(x){var B=x.domElem;var A=s.call(B,"domId");if(!A){return}if(q.get(A).has(x.id)){q.get(A).remove(x.id)}if(q.get(A).isEmpty()){var z=s.call(B,"eventHandler");if(typeof(B.onpropertychange)=="object"){B.detachEvent("onpropertychange",z)}else{if(l.isFirefox()&&parseFloat(l.version())>3.6){B.removeEventListener("DOMAttrModified",z)}}s.call(B,"eventHandler",null)}};var e=undefined;var w=new u();var g=function(){var z=w.getIterator();var x;while(z.hasMore()){x=z.nextValue();x.checkChange()}};var h=function(x){if(!e){e=setInterval(g,100)}if(!w.has(x.id)){w.add(x.id,x)}};var v=function(x){if(w.has(x)){w.remove(x)}if(w.isEmpty()){clearInterval(e);e=undefined}};var m=function(x){var z=x.domElem;if(typeof(z.onpropertychange)=="object"||(l.isFirefox()&&parseFloat(l.version())>3.6)){a(x.id)}else{h(x)}};var c=function(F){var z=w.get(F);if(!z){return}var E=z.domElem;if(!z.callback){return}var D=false;var B=0;var C=[];for(var x=z.cssProps.length;B<x;B++){var A=o(E,z.cssProps[B]);if(z.lastestVals[B]!=A){z.lastestVals[B]=A;D=true;C.push(z.cssProps[B])}}if(D){z.callback(C)}};var d={watch:function(E,C,D){var F=f();var A=function(){c(F)};var z={id:F,domElem:E,cssProps:C.split(","),lastestVals:[C.split(",").length],callback:D,checkChange:A};for(var B=0,x=z.cssProps.length;B<x;B++){z.lastestVals[B]=o(E,z.cssProps[B])}if(!w.has(z.id)){w.add(z.id,z)}m(z);return F},unwatch:function(B){var x=w.get(B);var A=x.domElem;try{if(typeof(A.onpropertychange)=="object"||(l.isFirefox()&&parseFloat(l.version())>3.6)){b(x)}else{v(x.id)}}catch(z){}}};return(d)});sap.riv.module({qname:"sap.riv.viz.xychart.XYChartController",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"},{qname:"sap.riv.vizkit.UIController",version:"3.4.0"},{qname:"sap.riv.vizkit.DataTree",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.tooltip.BaseTooltip",version:"3.4.0"},{qname:"sap.riv.viz.xychart.XYChartComponent",version:"3.4.0"}],function Setup(f,h,d,g,b,a,c){var e=f.derive(d,{constructor:function(j){this._dataset=this._convertDataset(j.dataset);this._chartComponent=undefined;this._option=j.option;this._chartModule=j.chartModule;this._descriptor=j.descriptor;this._tooltip=null},initUIComponent:function(k,j){this._chartComponent=new c({id:"rootComponent",dataset:this._dataset,xyChartOptions:this._option,chartModule:this._chartModule,descriptor:this._descriptor,clipToBound:false,size:{w:k,h:j}});return this._chartComponent},doThemeApplied:function(j){this._chartComponent.applyTheme(j)},_resetTooltip:function(){this._tooltip.reset({parent:this._chartComponent,metaData:this._dataset.metaData,dataTree:this._dataset.dataTree,properties:this._chartComponent.getOptions()})},updateProperties:function(j){this._chartComponent.updateProperties(j);this._resetTooltip()},getProperties:function(){return this._chartComponent.getProperties()},getSupportedEvents:function(){return this._chartComponent.getSupportedEvents()},getSupportedAppEvents:function(){return this._chartComponent.getSupportedAppEvents()},afterUIComponentLoaded:h.noop,beforeUIComponentAppear:h.noop,_createTooltip:function(){return new a({parent:this._chartComponent,metaData:this._dataset.metaData,dataTree:this._dataset.dataTree,properties:this._chartComponent.getOptions()})},afterUIComponentAppear:function(){this._tooltip=this._createTooltip();var j=this._tooltip.getCustomization();if(b.isExist(j)){j.prototype=this._tooltip;j.constructor=j;delete this._tooltip;this._tooltip=new j()}var l=this._chartComponent.getSupportedAppEvents();for(var k=l.length;k--||k==0;){this._chartComponent._chartComponent._chartModule.on({eventName:l[k],listener:this._fireInternalAppEvent,scope:this})}},beforeUIComponentDisappear:h.noop,afterUIComponentDisappear:h.noop,setDataset:function(j){this._dataset=this._convertDataset(j);this._chartComponent.setDataset(this._dataset);this._resetTooltip()},_convertDataset:function(l){var k=l.exportTree();var j={dataTree:g.dataTreeFromObject(k.dataTree),metaData:k.metaData};j.data=this._buildData(j.dataTree,j.metaData);return j},_buildData:function(l,m){var q=[];var u=l.getSubMembersAt();var t=l.getSubMemberLabels();for(var v=0,r=m.measureMembers.length;v<r;v++){var x=[];var k=m.measureMembers[v];for(var s=0,B=u.length;s<B;s++){var w=[u[s]];var n=l.getMeasuresAt(w)[k.key].sum;var A=n.result;var o=t[w];var z=n.tags.dimensionPath;x.push({value:(b.isNumber(A))?A:"NaN",dimensionItemIndex:z[z.length-1].dimensionItemIndex,measureIndex:n.tags.measureIndex,dimensionPath:z,dimensionLabel:b.isExist(o.value)?o.value:o})}q.push(x)}return q},_fireInternalAppEvent:function(k){if(k.name==="showTooltip"){var m=k.data[0].point;var j=this._chartComponent._chartComponent._rootLayer.convertPointFromLayer(m,this._chartComponent._chartComponent._seriesLayer);var l={};var n=this._chartComponent._chartComponent.position();l.x=j.x+n.x;l.y=j.y+n.y;k.data[0].point=l;this._tooltip.show(k)}else{if(k.name=="hideTooltip"){this._tooltip.hide(k)}}this.fireAppEvent(k.name,k)},selectData:function(k,j){this._chartComponent.selectData(k,j)},unSelectData:function(k,j){this._chartComponent.unSelectData(k,j)},});return e});sap.riv.module({qname:"sap.riv.vizkit.MouseEvent",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.vizkit.Event",version:"3.4.0"}],function Setup(c,a){var b=c.derive(a,{constructor:function(e,g,f,d,h){this._relatedTarget=undefined;this._currentLocalXY=this._targetLocalXY=d;this._pageXY=h},_setCurrentLocalXY_:function(d){this._currentLocalXY=d},_setRelatedTarget_:function(d){this._relatedTarget=d},targetLocalXY:function(){return{x:this._targetLocalXY.x,y:this._targetLocalXY.y}},currentLocalXY:function(){return{x:this._currentLocalXY.x,y:this._currentLocalXY.y}},pageXY:function(){return{x:this._pageXY.x,y:this._pageXY.y}}});return b});sap.riv.module({qname:"sap.riv.vizkit.VizFrame",version:"3.4.0"},[{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.vizkit.UIComponent",version:"3.4.0"},{qname:"sap.riv.vizkit.GestureDetector",version:"3.4.0"},{qname:"sap.riv.core.utils.DomWatcher",version:"3.4.0"},{qname:"sap.riv.vizkit.Event",version:"3.4.0"},{qname:"sap.riv.vizkit.MouseEvent",version:"3.4.0"},{qname:"sap.riv.vizkit.TouchEvent",version:"3.4.0"},{qname:"sap.riv.core.Math",version:"3.4.0"}],function Setup(h,g,k,q,a,o,r,b,d){var j=jQuery;if(!j){FuncUtils.error("Cannot find jQuery")}var e=function(t){var s=undefined;do{if(t.nodeName=="BODY"){s=t;break}else{t=t.parentNode}}while(t);return s};var m=function(t){var u=t._holder;if(u.css("position")=="static"||u.css("position")=="fix"){var s=u.position();t.frame({x:s.left,y:s.top,width:parseFloat(u.css("width")),height:parseFloat(u.css("height"))})}else{t.frame({x:0,y:0,width:parseFloat(u.css("width")),height:parseFloat(u.css("height"))})}};var f=function(u){for(var t=0,s=u.length;t<s;t++){if(u[t]==="position"){m(this);break}}};var c=function(s){var t=j(s.target);while(!t.data("selfComp")){t=t.parent()}return t.data("selfComp")};var l=q.TransitionState;var n=g.derive(k,{constructor:function(s){if(s.container){this._holder=j(s.container);if(!e(this._holder.get(0))){h.error("The holder DIV must be a child of Body element.")}if(this._holder.css("display")==="none"){this.markHide()}this.clipToBound(false);this._regDOMEventHandlers();this._holder.append(this._container);this.anchorPoint({x:0,y:0});m(this);a.watch(this._holder.get(0),"position",g.proxy(f,this));this._parentVisible=true;this._attached=true;this._msTracking=[];this._touchSeqTracking={}}else{throw new Error("you have to provide a container for viz frame")}},_regDOMEventHandlers:function(){this._container.bind("click",g.proxy(this._handleDomEvent,this));this._container.bind("dblclick",g.proxy(this._handleDomEvent,this));this._container.bind("focusin",g.proxy(this._handleDomEvent,this));this._container.bind("focusout",g.proxy(this._handleDomEvent,this));this._container.bind("focus",g.proxy(this._handleDomEvent,this));this._container.bind("blur",g.proxy(this._handleDomEvent,this));this._container.bind("mousedown",g.proxy(this._handleDomEvent,this));this._container.bind("mouseup",g.proxy(this._handleDomEvent,this));this._container.bind("mouseenter",g.proxy(this._handleDomEvent,this));this._container.bind("mouseleave",g.proxy(this._handleDomEvent,this));this._container.bind("mousemove",g.proxy(this._handleDomEvent,this));this._container.bind("DOMNodeInsertedIntoDocument",g.proxy(this._registerDOMTouchHandler,this));this._container.bind("DOMNodeRemovedFromDocument",g.proxy(this._unregisterDOMTouchHandler,this))},_registerDOMTouchHandler:function(){this._container.bind("touchstart",g.proxy(this._handleDomEvent,this));this._container.bind("touchmove",g.proxy(this._handleDomEvent,this));this._container.bind("touchend",g.proxy(this._handleDomEvent,this));this._container.bind("touchcancel",g.proxy(this._handleDomEvent,this))},_unregisterDOMTouchHandler:function(){this._container.unbind("touchstart");this._container.unbind("touchmove");this._container.unbind("touchend");this._container.unbind("touchcancel")},_handleDomEvent:function(O){O.preventDefault();var u=c(O);switch(O.type){case"mousemove":if(u){var w=u.pagePosition();var E={x:O.pageX-w.x,y:O.pageY-w.y};if(this._msTracking.length){if(this._msTracking[this._msTracking.length-1]!==u){var F=[];var S=u;while(S){F.push(S);S=S.superComponent()}var t=0,A=false,K=d.min(this._msTracking.length,F.length);while(true){var x=undefined;if(!A&&this._msTracking[t]===F[F.length-1-t]){t++;A=t===K}else{while(this._msTracking.length>t){x=this._msTracking.pop();var z=new r("mouseleave",x,false,x.convertPointFromComp(E,u),{x:O.pageX,y:O.pageY});z._setRelatedTarget_(u);x._fireMouseEvent_(z)}while(t<F.length){var S=F.shift();x=this._msTracking[F.length-1];this._msTracking[F.length]=S;var z=new r("mouseenter",S,false,S.convertPointFromComp(E,u),{x:O.pageX,y:O.pageY});z._setRelatedTarget_(x);S._fireMouseEvent_(z)}break}}}}else{var S=u;do{this._msTracking.push(S);S._fireMouseEvent_(new r("mouseenter",S,false,E,{x:O.pageX,y:O.pageY}));S=S.superComponent()}while(S);this._msTracking.reverse()}u._fireMouseEvent_(new r("mousemove",u,true,E,{x:O.pageX,y:O.pageY}))}else{while(this._msTracking.length){var x=this._msTracking.pop();var D=this.pagePosition();x._fireMouseEvent_(new r("mouseleave",x,false,{x:O.pageX-D.x,y:O.pageY-D.y},{x:O.pageX,y:O.pageY}))}}break;case"mouseleave":while(this._msTracking.length){var x=this._msTracking.pop();var N=x.pagePosition();x._fireMouseEvent_(new r("mouseleave",x,false,{x:O.pageX-N.x,y:O.pageY-N.y},{x:O.pageX,y:O.pageY}))}break;case"mouseup":if(u){var w=u.pagePosition();u._fireMouseEvent_(new r("mouseup",u,true,{x:O.pageX-w.x,y:O.pageY-w.y},{x:O.pageX,y:O.pageY}))}break;case"mousedown":if(u){var w=u.pagePosition();u._fireMouseEvent_(new r("mousedown",u,true,{x:O.pageX-w.x,y:O.pageY-w.y},{x:O.pageX,y:O.pageY}))}break;case"dblclick":if(u){if(this._focusedComp){if(this._focusedComp.id()!==u.id()){this._focusedComp._fireEvent_(new o("blur",this._focusedComp,false));this._focusedComp._fireEvent_(new o("focusout",this._focusedLayer,true));this._focusedComp=u;this._focusedComp._fireEvent_(new o("focus",this._focusedComp,false));this._focusedComp._fireEvent_(new o("focusin",this._focusedComp,true))}}else{this._focusedComp=u;this._focusedComp._fireEvent_(new o("focus",this._focusedComp,false));this._focusedComp._fireEvent_(new o("focusin",this._focusedComp,true))}var w=u.pagePosition();this._focusedComp._fireMouseEvent_(new r("dblclick",this._focusedComp,true,{x:O.pageX-w.x,y:O.pageY-w.y},{x:O.pageX,y:O.pageY}))}else{if(this._focusedComp){this._focusedComp._fireEvent_(new o("blur",this._focusedLayer,false));this._focusedComp._fireEvent_(new o("focusout",this._focusedLayer,true));this._focusedComp=undefined}}break;case"click":if(u){if(this._focusedComp){if(this._focusedComp.id()!==u.id()){this._focusedComp._fireEvent_(new o("blur",this._focusedComp,false));this._focusedComp._fireEvent_(new o("focusout",this._focusedComp,true));this._focusedComp=u;this._focusedComp._fireEvent_(new o("focus",this._focusedComp,false));this._focusedComp._fireEvent_(new o("focusin",this._focusedComp,true))}}else{this._focusedComp=u;this._focusedComp._fireEvent_(new o("focus",this._focusedComp,false));this._focusedComp._fireEvent_(new o("focusin",this._focusedComp,true))}var w=u.pagePosition();this._focusedComp._fireMouseEvent_(new r("click",this._focusedComp,true,{x:O.pageX-w.x,y:O.pageY-w.y},{x:O.pageX,y:O.pageY}))}else{if(this._focusedComp){this._focusedComp._fireEvent_(new o("blur",this._focusedComp,false));this._focusedComp._fireEvent_(new o("focusout",this._focusedComp,true));this._focusedComp=undefined}}break;case"touchstart":for(var P=0,C,v=O.originalEvent.changedTouches,Q=v.length;P<Q;P++){C=v.item(P);this._touchSeqTracking[C.identifier]=false}this._handleGestureDetect(u,O.originalEvent);var J=b.buildFromDomTouchEvent("touchstart",u,O.originalEvent);u._fireTouchEvent_(J);break;case"touchmove":if(!this._handleGestureDetect(u,O.originalEvent)){var J=b.buildFromDomTouchEvent("touchmove",u,O.originalEvent);u._fireTouchEvent_(J)}break;case"touchend":this._handleGestureDetect(u,O.originalEvent);var s=[],H=[],B=[],M=[];for(var P=0,C,v=O.originalEvent.changedTouches,Q=v.length;P<Q;P++){C=v.item(P);this._touchSeqTracking[C.identifier]===true?H.push(C):s.push(C);delete this._touchSeqTracking[C.identifier]}if(s.length){for(var P=0,C,R=O.originalEvent.targetTouches,Q=R.length;P<Q;P++){C=R.item(P);M.push(C)}for(var P=0,C,G=O.originalEvent.touches,Q=G.length;P<Q;P++){C=G.item(P);B.push(C)}var L=b.buildFrom3TouchArray("touchcancel",u,B,H,M);u._fireTouchEvent_(L);var I=b.buildFrom3TouchArray("touchend",u,B,s,M);u._fireTouchEvent_(I)}else{var J=b.buildFromDomTouchEvent("touchcancel",u,O.originalEvent);u._fireTouchEvent_(J)}break;case"touchcancel":this._handleGestureDetect(u,O.originalEvent);for(var P=0,C,v=O.originalEvent.changedTouches,Q=v.length;P<Q;P++){C=v.item(P);delete this._touchSeqTracking[C.identifier]}var J=b.buildFromDomTouchEvent("touchcancel",u,O.originalEvent);u._fireTouchEvent_(J);break}},_handleGestureDetect:function(z,x){var D=[];var B=z;while(!B._gestureDetectors.length&&B._superComp){B=B._superComp}D=B._gestureDetectors;var u=false,t,F=false;for(var w=0,s,E,A=D.length;w<A;w++){E=D[w];switch(x.type){case"touchstart":E.touchBegin(x);break;case"touchmove":E.touchMove(x);break;case"touchend":E.touchEnd(x);break;case"touchcancel":E.touchCancel(x);break}s=E.state();t=(s===l.Began)||(s===l.Changed)||(s===l.Recognized);u=u||t;F=F||(t&&E.cancelTouches())}if(F){for(var w=0,v,C=x.changedTouches,A=C.length;w<A;w++){v=C.item(w);this._touchSeqTracking[v.identifier]=true}}return u},hidden:function(s){s?this._holder.hide():this._holder.show();if(s){this.markHide()}else{this.markShow()}}});return n});sap.riv.module({qname:"sap.riv.viz.pie.PieController",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"},{qname:"sap.riv.vizkit.UIController",version:"3.4.0"},{qname:"sap.riv.viz.pie.PieComponent",version:"3.4.0"}],function Setup(d,e,b,a){var c=d.derive(b,{constructor:function(f){this._dataset=f.dataset;this._pieComponent=undefined;this._option=f.option},initUIComponent:function(g,f){this._pieComponent=new a({id:"rootComponent",dataset:this._dataset,pieOptions:this._option,size:{w:g,h:f}});return this._pieComponent},doThemeApplied:function(f){this._pieComponent.applyTheme(f)},updateProperties:function(f){this._pieComponent.updateProperties(f)},getProperties:function(){return this._pieComponent.getProperties()},afterUIComponentLoaded:e.noop,beforeUIComponentAppear:e.noop,afterUIComponentAppear:function(){var g=this._pieComponent.getSupportedAppEvents();for(var f=g.length;f--;){this._pieComponent._pieComponent._chartModule.on({eventName:g[f],listener:this._fireInternalAppEvent,scope:this})}},beforeUIComponentDisappear:e.noop,afterUIComponentDisappear:e.noop,setDataset:function(f){this._dataset=f;this._pieComponent.setDataset(f)},_fireInternalAppEvent:function(f){this.fireAppEvent(f.name,f)},selectData:function(g,f){this._pieComponent.selectData(g,f)},unSelectData:function(g,f){this._pieComponent.unSelectData(g,f)}});return c});sap.riv.module({qname:"sap.riv.vizkit.VizApplication",version:"3.4.0"},[{qname:"sap.riv.core.Observable",version:"3.4.0"},{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.vizkit.ThemeManager",version:"3.4.0"},{qname:"sap.riv.vizkit.ImageManager",version:"3.4.0"},{qname:"sap.riv.vizkit.VizFrame",version:"3.4.0"},{qname:"sap.riv.graphics.CanvasHelper",version:"3.4.0"},{qname:"sap.riv.vizkit.UIComponent",version:"3.4.0"},{qname:"sap.riv.core.Logger",version:"3.4.0"}],function Setup(k,n,e,m,d,o,h,j,q){var b=0;function a(){return b++}var c=j.Autosizing;var g=jQuery;if(!g){n.error("Cannot find jQuery")}var l=function(r){var u=a();this._id=r.id?r.id+"_"+u:u;q.debug("Chart Application["+this._id+"] initializing.","perf");if(!r.delegateClass){n.error("You have to specify a delegate for visualization custom behavior.")}if(!r.wrapperDivEl){n.error("You have to specify a div element for holding the visualization.")}this._vizFrame=new o({container:r.wrapperDivEl});this._canvasForPrinting=h.createCanvasElement(1,1);this._delegate=new r.delegateClass();var s=this._delegate.getPreloadAssets();d.loadImages(s,undefined,e.proxy(function(){this._delegate._afterLaunched(this,r.launchOption)},this));var t=this._vizFrame.subComponents().getIterator();while(t.hasMore()){q.debug("application["+this._id+"]component["+t.nextValue().id()+"] initialized.","perf")}this._eventBridge=new k();this._addEvents(this._delegate.getSupportedEvents());m.on({eventName:"defaultThemeChanged",listener:this._handleDefaultThemeChanged,scope:this});m.on({eventName:"themeSettingChanged",listener:this._handleThemeSettingChanged,scope:this})};var f=l.prototype;f.id=function(){return this._id};f.printTo=function(C){if(C.targetCanvas){var w=h.getCanvasElement(g(C.targetCanvas));var z=this._canvasForPrinting;var s=z.getContext("2d");var A=w.getContext("2d");var B=this.size();z[0].style.width=B.width+"px";z[0].style.height=B.height+"px";A.clearRect(0,0,parseFloat(w.css("width")),parseFloat(w.css("height")));A.save();A.scale(parseFloat(w.css("width"))/B.width,parseFloat(w.css("height"))/B.height);A.translate(0,0);A.rect(0,0,B.width,B.height);A.clip();var x=[{processed:false,uiComp:this._vizFrame,subCompItr:this._vizFrame.subComponents().getIterator()}],t,u;while(x.length){t=x[x.length-1];u=t.uiComp;if(u.printable()&&!u.hidden()){if(!t.processed){u.printTo(s);A.drawImage(z,0,0);t.processed=true}if(t.subCompItr.hasMore()){var v=t.subCompItr.next().value;z[0].style.width=v.css("width");z[0].style.height=v.css("height");var r=v.frame();A.save();A.translate(r.x,r.y);A.beginPath();A.moveTo(0,0);A.lineTo(r.width,0);A.lineTo(r.width,r.height);A.lineTo(0,r.height);A.closePath();A.clip();x.push({processed:false,uiComp:v,subCompItr:v.subComponents().getIterator()})}else{A.restore();x.pop()}}else{A.restore();x.pop()}}}};f.size=function(r){if(r!==undefined){this._vizFrame.size(r);return this}else{return this._vizFrame.size()}};f.hidden=function(r){if(r!==undefined){if(this._vizFrame.hidden()!==r){this._vizFrame.hidden(r)}return this}else{return this._vizFrame.hidden()}};f.getSupportedEvent=function(){return this._eventBridge.getSupportedEvents()};f.addListener=function(r,s){this._eventBridge.addListeners({eventName:r,listener:s})};f.removeListener=function(r,s){this._eventBridge.removeListener(r,s)};f._addEvents=function(t){for(var s=0,r=t.length;s<r;s++){this._eventBridge.addEvents(t[s])}};f._fireEvent=function(){this._eventBridge.fireEvent.apply(this._eventBridge,arguments)};f.getPublicMethods=function(){return this._delegate.getSupportedMethods()};f.invokePublicMethod=function(s,r){this._delegate._invokePublicMethod(s,r)};f.applyTheme=function(r){this._delegate._applyTheme(r)};f.properties=function(r){if(r!==undefined){this._delegate.updateProperties(r)}return this._delegate.getProperties()};f.setDataset=function(r){if(r){this._delegate.setDataset(r)}};f._setRootController=function(r){if(r){var s=r.rootUIComponent();s.frame(this._vizFrame.bounds());s.autoresizingMask(c.FlexibleWidth|c.FlexibleHeight);this._vizFrame.addSubComponent(s)}};f._handleDefaultThemeChanged=function(r,s){if(this._delegate._currentTheme()===r){this._delegate._applyTheme(s)}};f._handleThemeSettingChanged=function(u,s,r,t){this._delegate._updateThemeSetting(u,s,r,t)};return l});sap.riv.module({qname:"sap.riv.viz.pie.AppDelegate",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.vizkit.VizAppDelegate",version:"3.4.0"},{qname:"sap.riv.vizkit.DataTree",version:"3.4.0"},{qname:"sap.riv.viz.pie.PieController",version:"3.4.0"}],function Setup(c,e,d,b){var a=c.derive(e,{constructor:function(){this._rootController=undefined},appDidFinishLaunching:function(g,f){var k=f.data.rawData;var h=k.exportTree();var j={dataTree:d.dataTreeFromObject(h.dataTree),metaData:h.metaData};this._rootController=new b({dataset:j,option:f.option});this.registerPublicMethod("selectData",this.selectData);this.registerPublicMethod("unSelectData",this.unSelectData)},rootController:function(){return this._rootController},getPreloadAssets:function(){return[]},updateProperties:function(f){this._rootController.updateProperties(f)},getProperties:function(){return this._rootController.getProperties()},getSupportedEvents:function(){return["selectData","unSelectData"]},setDataset:function(f){var h=f.exportTree();var g={dataTree:d.dataTreeFromObject(h.dataTree),metaData:h.metaData};this._rootController.setDataset(g)},selectData:function(f){this._rootController.selectData(f[0],f[1])},unSelectData:function(f){this._rootController.unSelectData(f[0],f[1])}});return a});sap.riv.module({qname:"sap.riv.viz.xychart.AppDelegate",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.vizkit.VizAppDelegate",version:"3.4.0"},{qname:"sap.riv.viz.xychart.XYChartController",version:"3.4.0"}],function Setup(c,d,b){var a=c.derive(d,{constructor:function(){this._rootController=undefined},appDidFinishLaunching:function(f,e){var h=e.data.rawData;var g;if(e.chartController!=null){g=e.chartController}else{g=b}this._rootController=new g({dataset:h,chartModule:e.chartModule,descriptor:e.descriptor,option:e.option});this.registerPublicMethod("selectData",this.selectData);this.registerPublicMethod("unSelectData",this.unSelectData)},rootController:function(){return this._rootController},getPreloadAssets:function(){return[]},updateProperties:function(e){this._rootController.updateProperties(e)},getProperties:function(){return this._rootController.getProperties()},getSupportedEvents:function(){return["selectData","unSelectData"]},setDataset:function(e){this._rootController.setDataset(e)},selectData:function(e){this._rootController.selectData(e[0],e[1])},unSelectData:function(e){this._rootController.unSelectData(e[0],e[1])}});return a});sap.riv.module({qname:"sap.riv.viz.AbstractPieChart",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.viz.AbstractVisualization",version:"3.4.0"}],function Setup(c,a){var b=c.derive(a,{constructor:function(d,e,f){}});return b});sap.riv.module({qname:"sap.riv.viz.BarChart",version:"3.4.0",exported:true},[{qname:"sap.riv.vizkit.VizApplication",version:"3.4.0"},{qname:"sap.riv.viz.xychart.AppDelegate",version:"3.4.0"},{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.AbstractXYChart",version:"3.4.0"},{qname:"sap.riv.viz.xychart.BarModule",version:"3.4.0"},{qname:"sap.riv.viz.shared.descriptor.Descriptor",version:"3.4.0"},{qname:"sap.riv.core.Logger",version:"3.4.0"}],function Setup(e,g,b,a,f,d,h,j){var c=b.derive(f,{constructor:function(k,l,n){var m;a.isExist(l)?m=l:m={};m.type="bar";if(!a.isExist(m.measure)){m.measure={}}m.measure.type="bar";j.debug("Chart["+this._id+"] initializing.","perf");this._viz=new e({wrapperDivEl:k,delegateClass:g,launchOption:{chartModule:d,descriptor:h.getBarDescriptor(),option:m,data:{rawData:n}}});j.debug("Chart["+this.id()+"]application["+this._viz.id()+"] initialized.","perf")}});return c});sap.riv.module({qname:"sap.riv.viz.PieChart",version:"3.4.0",exported:true},[{qname:"sap.riv.vizkit.VizApplication",version:"3.4.0"},{qname:"sap.riv.viz.pie.AppDelegate",version:"3.4.0"},{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.AbstractPieChart",version:"3.4.0"},{qname:"sap.riv.core.Logger",version:"3.4.0"}],function Setup(g,d,f,b,e,c){var a=f.derive(e,{constructor:function(h,j,l){var k;b.isExist(j)?k=j:k={};k.type="pie";c.debug("Chart["+this._id+"] initializing.","perf");this._viz=new g({id:"PieApplication",wrapperDivEl:h,delegateClass:d,launchOption:{option:k,data:{rawData:l}}});c.debug("Chart["+this.id()+"]application["+this._viz.id()+"] initialized.","perf")},});return a});sap.riv.module({qname:"sap.riv.viz.ColumnChart",version:"3.4.0",exported:true},[{qname:"sap.riv.vizkit.VizApplication",version:"3.4.0"},{qname:"sap.riv.viz.xychart.AppDelegate",version:"3.4.0"},{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.AbstractXYChart",version:"3.4.0"},{qname:"sap.riv.viz.xychart.CombinationModule",version:"3.4.0"},{qname:"sap.riv.viz.shared.descriptor.Descriptor",version:"3.4.0"},{qname:"sap.riv.core.Logger",version:"3.4.0"}],function Setup(e,g,c,b,f,a,h,j){var d=c.derive(f,{constructor:function(k,l,n){var m;b.isExist(l)?m=l:m={};m.type="combination";if(!b.isExist(m.measure)){m.measure={}}m.measure.type="bar";j.debug("Chart["+this._id+"] initializing.","perf");this._viz=new e({wrapperDivEl:k,delegateClass:g,launchOption:{chartModule:a,descriptor:h.getColumnDescriptor(),option:m,data:{rawData:n}}});j.debug("Chart["+this.id()+"]application["+this._viz.id()+"] initialized.","perf")}});return d});sap.riv.module({qname:"sap.riv.viz.WaterfallChart",version:"3.4.0",exported:true},[{qname:"sap.riv.vizkit.VizApplication",version:"3.4.0"},{qname:"sap.riv.viz.xychart.AppDelegate",version:"3.4.0"},{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.AbstractXYChart",version:"3.4.0"},{qname:"sap.riv.viz.xychart.WaterfallModule",version:"3.4.0"},{qname:"sap.riv.viz.shared.descriptor.Descriptor",version:"3.4.0"},{qname:"sap.riv.core.Logger",version:"3.4.0"}],function Setup(e,g,b,a,f,c,h,j){var d=b.derive(f,{constructor:function(k,l,n){var m;a.isExist(l)?m=l:m={};m.type="combination";if(!a.isExist(m.measure)){m.measure={}}m.measure.type="bar";j.debug("Chart["+this._id+"] initializing.","perf");this._viz=new e({wrapperDivEl:k,delegateClass:g,launchOption:{chartModule:c,descriptor:h.getWaterfallDescriptor(),option:m,data:{rawData:n}}});j.debug("Chart["+this.id()+"]application["+this._viz.id()+"] initialized.","perf")}});return d});sap.riv.module({qname:"sap.riv.viz.shared.dataConverter.BaseDataset",version:"3.4.0"},[{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"}],function Setup(b){var a=function(){this.DEFAULT_MEASURE_PREFIX="Measure"};a.prototype.exportTree=b.noop;return a});sap.riv.module({qname:"sap.riv.viz.CombinationChart",version:"3.4.0",exported:true},[{qname:"sap.riv.vizkit.VizApplication",version:"3.4.0"},{qname:"sap.riv.viz.xychart.AppDelegate",version:"3.4.0"},{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.AbstractXYChart",version:"3.4.0"},{qname:"sap.riv.viz.xychart.CombinationModule",version:"3.4.0"},{qname:"sap.riv.viz.shared.descriptor.Descriptor",version:"3.4.0"},{qname:"sap.riv.core.Logger",version:"3.4.0"}],function Setup(d,f,c,b,e,a,g,h){var j=c.derive(e,{constructor:function(k,l,n){var m;b.isExist(l)?m=l:m={};m.type="combination";if(!b.isExist(m.measure)){m.measure={}}m.measure.type="combination";h.debug("Chart["+this._id+"] initializing.","perf");this._viz=new d({wrapperDivEl:k,delegateClass:f,launchOption:{chartModule:a,descriptor:g.getCombinationDescriptor(),option:m,data:{rawData:n}}});h.debug("Chart["+this.id()+"]application["+this._viz.id()+"] initialized.","perf")}});return j});sap.riv.module({qname:"sap.riv.viz.shared.tooltip.BubbleTooltipRenderer",version:"3.4.0"},[{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TextRuler",version:"3.4.0"},{qname:"sap.riv.graphics.shape.TextLine",version:"3.4.0"},{qname:"sap.riv.graphics.shape.Line",version:"3.4.0"},{qname:"sap.riv.graphics.shape.Circle",version:"3.4.0"},{qname:"sap.riv.viz.shared.utils.NumericFormatUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.tooltip.TooltipRenderer",version:"3.4.0"}],function Setup(a,d,h,j,e,b,c,g){var f=d.derive(g,{constructor:function(k,l){}});f.prototype._parseOptions=function(k){this.callParent("_parseOptions",k);this._data=k.data};f.prototype._getTitleAndFormat=function(m,l){if(this._options.tooltip!=null&&this._options.tooltip.title!=null){var n=this._options.tooltip.title.description;if(n!=null&&n.length>0){if(n.length>l){return{title:n[l],formatString:c.getFormatString(this._options.tooltip.title.descriptionFormatString,l)}}else{return{title:"",formatString:""}}}}var k=this._metaData.measureMembers;return{title:k[m].value,formatString:c.getFormatString(this._display.title.formatString,m)}};f.prototype.getShapeSize=function(){if(this._data==null){return{width:0,height:0}}var k=this._data.data();var v=0;var w=0;var u=0;var n=0;var l=this._statesManager.getStatesItemValue(this._statesManager.CHANGESERIESVISIBILITY);for(var o=0;o<k.length;o++){if(l[o]===false){continue}for(var r=0,q=k[o].length;r<q;r++){var m=this._getTitleAndFormat(o,r);var t=c.formatToText(m.title,m.formatString,true);if(!a.isExist(t)){t=""}var x=h.measureText(this._display.title.font,t);u=Math.max(u,x.width);n=Math.max(n,x.height);var z=this._calculateMeasureSize(k[o][r]);v=Math.max(v,z.width);w=Math.max(w,z.height)}}var s=this._display.singleMeasure;return{width:Math.max(u,v)+s.padding.horizontal*2,height:n+w}};f.prototype._calculateMeasureSize=function(r){var q=["x","y","z"];var n=0;var o=this._display.singleMeasure;for(var l=0;l<q.length;l++){var m=r[q[l]];m=a.isNaN(m)?"":m;var s=c.getFormatString(this._display.valueFormat,0)[q[l]];m=c.formatToText(m,s,true);n+=h.measureText(o.value.font,m).width}var k=h.measureText(o.value.font,",");n+=(k.width)*2;return{width:n,height:k.height+o.padding.vertical*3}};f.prototype._getMarkerPos=function(){return"bottom"};f.prototype._drawValue=function(m,k,o){var t=m[k];t=a.isNaN(t)?"":t;var r=this._display.singleMeasure;var q=c.getFormatString(this._display.valueFormat,0)[k];var s=c.formatToTextWithColor(t,q,true);t=s.text;var n=s.color?s.color:r.value.color;var l=h.measureText(r.value.font,t).width;this._shapes.valueLabels[o].text(t).font(r.value.font).textColor(n).width(l).visible(true).textAlign("r")};f.prototype.drawContent=function(D){var w=D.seriesItem;var o=w.getData()[0];var n=this._shapeLayout.padding;var r=this._shapeLayout.padding;var z=this._display.singleMeasure;if(this._shapes.dimensionLabel===null){this._shapes.dimensionLabel=this._layer.addShape(new j())}else{this._shapes.dimensionLabel=this._layer.replaceShape(this._shapes.dimensionLabel,new j())}var v=5;var q;if(this._shapes.valueLabels.length===0){for(q=0;q<v;q++){this._shapes.valueLabels[q]=this._layer.addShape(new j())}}else{for(q=0;q<v;q++){this._shapes.valueLabels[q]=this._layer.replaceShape(this._shapes.valueLabels[q],new j())}}var m=this._getTitleAndFormat(w.getSeries().getIndex(),w.getDataIndex());var A=c.formatToTextWithColor(m.title,m.formatString,true);var E=A.text;var x=A.color?A.color:this._display.title.color;if(!a.isExist(E)){E=""}var F=h.measureText(this._display.title.font,E).width;this._shapes.dimensionLabel.text(E).textAlign("c").font(this._display.title.font).textColor(x).width(F).visible(true);this._drawValue(o,"x",0);this._drawValue(o,"y",2);this._drawValue(o,"z",4);var l=",";var u=h.measureText(z.value.font,l).width;this._shapes.valueLabels[1].text(l).font(z.value.font).textColor(z.value.color).width(u).visible(true);this._shapes.valueLabels[3].text(l).font(z.value.font).textColor(z.value.color).width(u).visible(true);var C;if(this._markerPos==="top"||this._markerPos==="bottom"){var s=n+this._size.width/2;this._shapes.dimensionLabel.topCenter([s,r+z.padding.vertical]);C=this._shapes.dimensionLabel.bottomLeft().y;var k=0;for(q=0;q<v;q++){k+=this._shapes.valueLabels[q].width()}var B=s-k/2;for(q=0;q<v;q++){var t=this._shapes.valueLabels[q].width();this._shapes.valueLabels[q].topCenter([B+t/2,C+z.padding.vertical]);B+=t}}};return f});sap.riv.module({qname:"sap.riv.viz.StackedColumnChart",version:"3.4.0",exported:true},[{qname:"sap.riv.vizkit.VizApplication",version:"3.4.0"},{qname:"sap.riv.viz.xychart.AppDelegate",version:"3.4.0"},{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.AbstractXYChart",version:"3.4.0"},{qname:"sap.riv.viz.xychart.StackedColumnModule",version:"3.4.0"},{qname:"sap.riv.viz.shared.descriptor.Descriptor",version:"3.4.0"},{qname:"sap.riv.core.Logger",version:"3.4.0"}],function Setup(e,g,c,b,f,a,h,j){var d=c.derive(f,{constructor:function(k,l,n){var m;b.isExist(l)?m=l:m={};m.type="stackedColumn";if(!b.isExist(m.measure)){m.measure={}}m.measure.type="stackedColumn";j.debug("Chart["+this._id+"] initializing.","perf");this._viz=new e({wrapperDivEl:k,delegateClass:g,launchOption:{chartModule:a,descriptor:h.getStackedColumnDescriptor(),option:m,data:{rawData:n}}});j.debug("Chart["+this.id()+"]application["+this._viz.id()+"] initialized.","perf")}});return d});sap.riv.module({qname:"sap.riv.viz.xychart.BubbleChartController",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"},{qname:"sap.riv.viz.xychart.XYChartController",version:"3.4.0"},{qname:"sap.riv.vizkit.DataTree",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.tooltip.BaseTooltip",version:"3.4.0"},{qname:"sap.riv.viz.shared.tooltip.BubbleTooltipRenderer",version:"3.4.0"},{qname:"sap.riv.viz.xychart.XYChartComponent",version:"3.4.0"}],function Setup(b,d,e,h,a,j,f,g){var c=b.derive(e,{_createTooltip:function(){return new j({parent:this._chartComponent,metaData:this._dataset.metaData,dataTree:this._dataset.dataTree,data:this._dataset.data,properties:this._chartComponent.getOptions()},f)},_resetTooltip:function(){this._tooltip.reset({parent:this._chartComponent,metaData:this._dataset.metaData,dataTree:this._dataset.dataTree,data:this._dataset.data,properties:this._chartComponent.getOptions()})},_validateData:function(q){var k=q.data();if(k==null||k.length==0){return}var u=/(^-?\d+$)|(^(-?\d+)(\.\d+)?$)/;var t=["x","y","z"];for(var r=0;r<k.length;r++){var l=k[r];if(l==null||l.length==0){continue}for(var s=0;s<l.length;s++){var o=l[s];if(o==null){continue}for(var m=0;m<3;m++){var v=t[m];if(!a.isNumber(o[v])&&!u.test(o[v])){o[v]=Number.NaN}}}}},_convertDataset:function(m){var l=m.exportTree();var k={dataTree:h.dataTreeFromObject(l.dataTree),metaData:l.metaData};this._validateData(m);k.data=m;return k}});return c});sap.riv.module({qname:"sap.riv.viz.BubbleChart",version:"3.4.0",exported:true},[{qname:"sap.riv.vizkit.VizApplication",version:"3.4.0"},{qname:"sap.riv.viz.xychart.AppDelegate",version:"3.4.0"},{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.AbstractXYChart",version:"3.4.0"},{qname:"sap.riv.viz.xychart.BubbleModule",version:"3.4.0"},{qname:"sap.riv.viz.xychart.BubbleChartController",version:"3.4.0"},{qname:"sap.riv.viz.shared.descriptor.Descriptor",version:"3.4.0"},{qname:"sap.riv.core.Logger",version:"3.4.0"}],function Setup(e,h,b,a,g,c,f,k,j){var d=b.derive(g,{constructor:function(l,m,o){var n;a.isExist(m)?n=m:n={};n.type="bubble";if(!a.isExist(n.measure)){n.measure={}}n.measure.type="bubble";j.debug("Chart["+this._id+"] initializing.","perf");this._viz=new e({wrapperDivEl:l,delegateClass:h,launchOption:{chartModule:c,chartController:f,descriptor:k.getBubbleDescriptor(),option:n,data:{rawData:o}}});j.debug("Chart["+this.id()+"]application["+this._viz.id()+"] initialized.","perf")}});return d});sap.riv.module({qname:"sap.riv.viz.LineChart",version:"3.4.0",exported:true},[{qname:"sap.riv.vizkit.VizApplication",version:"3.4.0"},{qname:"sap.riv.viz.xychart.AppDelegate",version:"3.4.0"},{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.AbstractXYChart",version:"3.4.0"},{qname:"sap.riv.viz.xychart.CombinationModule",version:"3.4.0"},{qname:"sap.riv.viz.shared.descriptor.Descriptor",version:"3.4.0"},{qname:"sap.riv.core.Logger",version:"3.4.0"}],function Setup(e,g,d,b,f,a,h,j){var c=d.derive(f,{constructor:function(k,l,n){var m;b.isExist(l)?m=l:m={};m.type="combination";if(!b.isExist(m.measure)){m.measure={}}m.measure.type="line";j.debug("Chart["+this._id+"] initializing.","perf");this._viz=new e({wrapperDivEl:k,delegateClass:g,launchOption:{chartModule:a,descriptor:h.getLineDescriptor(),option:m,data:{rawData:n}}});j.debug("Chart["+this.id()+"]application["+this._viz.id()+"] initialized.","perf")}});return c});sap.riv.module({qname:"sap.riv.viz.xychart.StackedBarModule",version:"3.4.0"},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"},{qname:"sap.riv.core.Logger",version:"3.4.0"},{qname:"sap.riv.core.UADetector",version:"3.4.0"},{qname:"sap.riv.vizkit.GestureDetector",version:"3.4.0"},{qname:"sap.riv.core.Animator",version:"3.4.0"},{qname:"sap.riv.viz.shared.axis.Axis",version:"3.4.0"},{qname:"sap.riv.viz.shared.axis.FoucsCalculator",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.SeriesGroup",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.Series",version:"3.4.0"},{qname:"sap.riv.viz.shared.series.StackedBarRenderer",version:"3.4.0"},{qname:"sap.riv.viz.xychart.BarModule",version:"3.4.0"},{qname:"sap.riv.viz.shared.utils.ScrollBarRenderer",version:"3.4.0"},{qname:"sap.riv.viz.shared.context.Context",version:"3.4.0"}],function Setup(e,b,h,s,j,r,a,l,c,q,m,o,g,d,n){var f={xAxis:{showMajor:true,majorColor:"#c9c9c9",majorThickness:"1",showMinor:false,minorColor:"#c9c9c9",minorThickness:"1",showSub:false,subColor:"#c9c9c9"},yAxis:{showMajor:false,majorColor:"#c9c9c9",majorThickness:"1",showMinor:false,minorColor:"#c9c9c9",minorThickness:"1",showSub:false,subColor:"#c9c9c9"}};var k=e.derive(g,{events:["selectData","unSelectData","showTooltip","hideTooltip"],constructor:function(t){this._seriesGroup=null;this._barRenderer=null;this._hasDrawn=false;this._hasBacked=false;this._valueAxisRange=null;this._selections=[]},_initXAxes:function(){this._xaxes=[];var w=this._chart_options.properties.xAxis;if(w&&w.length>0){var u=w[0];if(b.isExist(u.showTitle)&&u.showTitle&&!b.isExist(u.title)){u.title="X"+(i+1)}var A=b.isExist(this._valueAxisRange[0])?this._valueAxisRange[0].max:0;var z=b.isExist(this._valueAxisRange[0])?this._valueAxisRange[0].min:0;var v={mode:l.NUMERIC,position:"hb",index:0,maxValue:A,minValue:z};var t=new l(e.extend(true,v,u));this._xaxes.push(t)}},initRenderer:function(t){if(this._barRenderer==null){this._barRenderer=this._createCustomizedRenderer(t);if(this._barRenderer==null){this._barRenderer=new o(t,this._chart_options.properties)}}else{this._barRenderer.resetSeriesGroups()}this._barRenderer.addSeriesGroup(this._seriesGroup)},initSeries:function(){this.callParent("initSeries");this.updateValueAxisRange()},updateValueAxisRange:function(){var A=this._chart_options.properties._additional;var x=n.get(A.statesManagerId);var u=x.getStatesItemValue(x.CHANGESERIESVISIBILITY);if(this._data.length<=0){return}var z=[];for(var v=0,t=this._data.length;v<t;v++){if(u[v]!==false){z.push(this._data[v])}}var w=c.calculateStackedBounds(z);this._valueAxisRange=[];this._updateValueAxisRange({min:w.min,max:w.max},0)},_getSeriesItemsUnderPoint:function(t){var u=[];var v=this._seriesGroup.getSeriesList();this._findSeriesItemsUnderPoint(t,v,u);return u}});return k});sap.riv.module({qname:"sap.riv.viz.MultiPieChart",version:"3.4.0",exported:true},[{qname:"sap.riv.vizkit.VizApplication",version:"3.4.0"},{qname:"sap.riv.viz.pie.AppDelegate",version:"3.4.0"},{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.AbstractPieChart",version:"3.4.0"},{qname:"sap.riv.core.Logger",version:"3.4.0"}],function Setup(g,d,f,a,e,b){var c=f.derive(e,{constructor:function(h,j,l){var k;a.isExist(j)?k=j:k={};k.type="multipie";b.debug("Chart["+this._id+"] initializing.","perf");this._viz=new g({wrapperDivEl:h,delegateClass:d,launchOption:{option:k,data:{rawData:l}}});b.debug("Chart["+this.id()+"]application["+this._viz.id()+"] initialized.","perf")}});return c});sap.riv.module({qname:"sap.riv.viz.shared.utils.Validator",version:"3.4.0",exported:true},[{qname:"sap.riv.viz.shared.type.TypeManager",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.descriptor.Descriptor",version:"3.4.0"},{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"}],function Setup(k,b,j,d){var a=function(r,q,n){if(!b.isExist(q)){return}if(r[n]===q.name&&r.length===(++n)){return q}var m=r[n];if(q.supportedValueType==="ObjectArray"&&b.isNumber(m)){r[n]=q.supportedValues[0].name;return a(r,q.supportedValues[0],n)}else{for(var l=q.supportedValues,o=l.length;o--;){if(l[o].name===r[n]){return a(r,l[o],n)}}}};var g=function(l){switch(l){case"riv/pie":return j.getPieDescriptor();case"riv/multipie":return j.getMultiPieDescriptor();case"riv/bar":return j.getBarDescriptor();case"riv/line":return j.getLineDescriptor();case"riv/column":return j.getColumnDescriptor();case"riv/combination":return j.getCombinationDescriptor();case"riv/waterfall":return j.getWaterfallDescriptor();default:d.error("Unsupported chart type")}};var f=function(o,n,s){var r=[];if(n.supportedValueType==="Object"){if(!b.isExist(o)){return r}if(!e(n.supportedValueType,o,n)){r=r.concat(s);return r}var l=n.supportedValues;for(var m=l.length;m--;){var q=l[m].name;r=r.concat(f(o[q],l[m],s+"/"+q.toString()))}}else{if(n.supportedValueType==="ObjectArray"){if(!b.isExist(o)){return r}if(!e(n.supportedValueType,o,n)){r=r.concat(s);return r}var l=n.supportedValues;for(var m=o.length;m--;){r=r.concat(f(o[m],l[0],s+"/"+m))}}else{r=r.concat(h(o,n,s))}}return r};var h=function(o,n,q){var m;if(n.supportedValueType.indexOf("[")!=-1){var l=n.supportedValueType.substring(n.supportedValueType.indexOf("[")+1,n.supportedValueType.indexOf("]"));if(b.isExist(o)&&(!b.isArray(o)||o.length!==parseInt(l))){return q}m=n.supportedValueType.substring(0,n.supportedValueType.indexOf("["))}else{m=n.supportedValueType}if(!e(m,o,n)){return q}return[]};var e=function(n,m,l){var o=k.getTypeObj(n);if(o!=null){if(!o.validateValue(m,l)){return false}}return true};var c={constructor:function(){},validateItem:function(q,u,s){var l=g(q);if(!b.isExist(u)||!b.isString(u)){d.error("Invalid option path")}if(l!==null){var t=u.split("/");if(t.length>0){var m=a(t,l[t[1]],1);if(m===undefined){d.error("Invalid option path")}var r=m.supportedValueType;if(r.indexOf("[")!==-1){var o=parseFloat(r.substring(r.indexOf("[")+1,r.indexOf("]")));if(o!==s.length){return false}r=r.substring(0,r.indexOf("["))}var n=k.getTypeObj(r);return n.validateValue(s,m)}}},validate:function(m,l){var q=g(m);if(!b.isPlainObject(l)&&l!==null&&l!==undefined){d.error("Invalid chart options")}var o=[];for(var n in l){if(q.hasOwnProperty(n)){o=o.concat(f(l[n],q[n],"/"+n.toString()))}}return o}};return c});sap.riv.module({qname:"sap.riv.viz.Visualization",version:"3.4.0",exported:true},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.viz.AbstractVisualization",version:"3.4.0"},{qname:"sap.riv.viz.PieChart",version:"3.4.0"},{qname:"sap.riv.viz.MultiPieChart",version:"3.4.0"},{qname:"sap.riv.viz.BarChart",version:"3.4.0"},{qname:"sap.riv.viz.LineChart",version:"3.4.0"},{qname:"sap.riv.viz.ColumnChart",version:"3.4.0"},{qname:"sap.riv.viz.CombinationChart",version:"3.4.0"},{qname:"sap.riv.viz.WaterfallChart",version:"3.4.0"},{qname:"sap.riv.viz.StackedColumnChart",version:"3.4.0"},{qname:"sap.riv.viz.BubbleChart",version:"3.4.0"},{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"}],function Setup(d,e,m,f,c,b,a,n,l,j,k,h){var g=d.derive(e,{constructor:function(r,o,q,t){var s=null;switch(r){case"riv/pie":s=new m(o,q,t);break;case"riv/multipie":s=new f(o,q,t);break;case"riv/bar":s=new c(o,q,t);break;case"riv/column":s=new a(o,q,t);break;case"riv/line":s=new b(o,q,t);break;case"riv/combination":s=new n(o,q,t);break;case"riv/waterfall":s=new l(o,q,t);break;case"riv/stackedBar":s=new StackedBarChart(o,q,t);break;case"riv/stackedColumn":s=new j(o,q,t);break;case"riv/bubble":s=new k(o,q,t);break;default:h.error("Unsupported chart type");break}if(s){this._viz=s.getVizApplication()}}});return g});sap.riv.module({qname:"sap.riv.viz.shared.log.LogAnalyzer",version:"3.4.0",exported:true},[{qname:"sap.riv.core.utils.LinkedHashMap",version:"3.4.0"}],function Setup(d){var h;var j={};var e={};var g={};var c=new d();var b=/Chart\[(.+?)\]\sinitializing\./;var a=/Chart\[(.+?)\]application\[(.+?)\]\sinitialized\./;var f=/application\[(.+?)\]component\[(.+?)\]\sinitialized\./;var o=/chartComponent\[(.+?)\]subComponent\[(.+?)\]initialized\./;var q=/layer\[(.+?)\]rendering\send\./;var l=/#(\d+)#/;function n(s){while(s.hasMore()){if(s.nextValue()===-1){return false}}return true}function m(v){var s=v[0];var u=v.length;for(var t=1;t<u;t++){s=v[t]>s?v[t]:s}return s}function r(v,s,u,t){return"#"+v+"#"+t}var k={analyze:function(x,u,C,G){if(C!=="perf"){return}var z=r(x,u,C,G);var v=b.exec(z);if(v){var H=l.exec(z)[1];j[v[1]]=H;h=h||H;return}v=f.exec(z);if(v){g[v[2]]=v[1];return}v=a.exec(z);if(v){e[v[2]]=v[1];return}v=o.exec(z);if(v){if(!c.has(v[1])){c.add(v[1],new d())}c.get(v[1]).add(v[2],-1);return}v=q.exec(z);if(v){var A=l.exec(z)[1];var D=c.getIterator();while(D.hasMore()){var B=D.next();var E=B.value;if(E.has(v[1])&&E.get(v[1])===-1){E.add(v[1],A);var F=E.getIterator();if(n(F)){F.reset();var I=[];while(F.hasMore()){I.push(F.nextValue())}var s=e[g[B.key]];var t=j[s],w=A;c.remove(B.key);return("chart["+s+"] start time:"+t+" end time:"+w+" time consume["+(w-t)+"] total consume["+(w-h)+"]")}}}}}};return k});sap.riv.module({qname:"sap.riv.viz.Environment",version:"3.4.0",exported:true},[{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.core.Logger",version:"3.4.0"}],function Setup(c,d){var e="en_US";var b=function(h){if(c.isExist(h)){e=h;sap.common.globalization.NumericFormatManager.setPVL(h)}};var g=function(h){if(c.isExist(h)){d.setLevel(h)}};var a=function(k){if(!k){return}if(k.enable){d.enable()}if(!k.appenders){return}for(var m=0,j=k.appenders.length;m<j;m++){var h=k.appenders[m];if(h.appenderKey){d.addAppender(h.appenderKey,h.appender)}else{d.addAppender(h.appender)}}};var f={constructor:function(){},initialize:function(h){b(h.locale);a(h.log)},setLocale:function(h){b(h)},getLocale:function(){return e},setLoggerEnable:function(h){if(h===true){d.enable()}else{if(h===false){d.disable()}}},addLogAppender:function(){if(arguments.length===1){return d.addAppender(arguments[0])}else{if(arguments.length===2){return d.addAppender(arguments[0],arguments[1])}}},removeLogAppender:function(h){return d.removeAppender(h)},};return f});sap.riv.module({qname:"sap.riv.viz.shared.dataConverter.SimpleDMDataset",version:"3.4.0",exported:true},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.dataConverter.BaseDataset",version:"3.4.0"},{qname:"sap.riv.core.utils.FunctionUtils",version:"3.4.0"}],function Setup(d,c,b,a){var f=void (0);var e=d.derive(b,{constructor:function(){this._measureNames=[];this._dimensionLabels=[];this._dimensionName=[""];this._data=null;this._inValidData=null;this.ERROR_CHAR="NaN"},measureNames:function(h){if(arguments.length==1){if(c.isExist(arguments[0])){var k=[];for(var g=0;g<h.length;g++){if(h[g] instanceof Object){k.push(h[g])}else{var j={value:h[g],key:g};k.push(j)}}this._measureNames=k;return this}else{a.error("Measure Name doesn't exist")}}return this._measureNames},dimensionLabels:function(h){if(arguments.length==1){if(c.isExist(arguments[0])){var j=[];for(var g=0;g<h.length;g++){if(h[g] instanceof Object){j.push(h[g])}else{var k={value:h[g],key:g};j.push(k)}}this._dimensionLabels=j;return this}else{a.error("Dimension Label doesn't exist")}}return this._dimensionLabels},dimensionName:function(g){if(arguments.length==1){if(c.isExist(arguments[0])){this._dimensionName=g;return this}else{a.error("Dimension Name doesn't exist")}}return this._dimensionName},data:function(g){if(arguments.length>0){if((c.isExist(g))&&(c.isExist(g.length))){this._data=g}else{a.error("Data is invalid")}}return this._data},exportTree:function(){var l={};l.member="root";l.measureValues={};l.subNodes=[];this._cleanData();for(var o=0,h=this._measureNames.length;o<h;o++){l.measureValues[this._measureNames[o].key]=this._measureNames[o]}for(var o=0,n=this._dimensionLabels.length;o<n;o++){l.subNodes[o]={member:o,label:c.isExist(this._dimensionLabels[o])?this._dimensionLabels[o]:"",subNodes:[],measureValues:{}};for(var m=0,k=this._measureNames.length;m<k;m++){var q;if((this._inValidData[m]!==f)&&(this._inValidData[m][o]!==f)&&(this._inValidData[m][o]===this.ERROR_CHAR)){q=this.ERROR_CHAR}else{q=this._data[m][o]}l.subNodes[o].measureValues[this._measureNames[m].key]={sum:{result:q,tags:{dimensionPath:[{analysisAxisIndex:0,dimensionIndex:0,dimensionItemIndex:o,dimensionItemKey:o}],measureIndex:m}}}}}var g={dataTree:l,metaData:{measureMembers:this._measureNames,dimension:[{name:this._dimensionName,analysisAxisIndex:0}],axisNum:1}};return g},_cleanData:function(){var n=this._data;if(!c.isExist(n)){n=this._data=[]}this._inValidData=[];var o=false;var k=this._measureNames.length;var q=this._dimensionLabels.length;if(k===0){for(var h=0;h<n.length;h++){this._measureNames.push({value:this.DEFAULT_MEASURE_PREFIX+(h+1).toString(),key:h})}k=this._measureNames.length}if(q===0){var m=0;for(var h=0;h<n.length;h++){if((c.isExist(n[h]))&&(c.isExist(n[h].length))&&(n[h].length>m)){m=n[h].length}}for(var h=0;h<m;h++){this._dimensionLabels.push({value:(h+1).toString(),key:h})}q=this._dimensionLabels.length}for(var h=0;h<k;h++){if(!c.isExist(n[h])){n[h]=[]}for(var g=0;g<q;g++){if(!c.isExist(n[h][g])){this._inValidData[h]=this._inValidData[h]||[];this._inValidData[h][g]=this.ERROR_CHAR}else{if(!c.isNumber(n[h][g])){var l=/(^-?\d+$)|(^(-?\d+)(\.\d+)?$)/;if(!l.test(n[h][g])){this._inValidData[h]=this._inValidData[h]||[];this._inValidData[h][g]=this.ERROR_CHAR}}}}}}});return e});sap.riv.module({qname:"sap.riv.viz.StackedBarChart",version:"3.4.0",exported:true},[{qname:"sap.riv.vizkit.VizApplication",version:"3.4.0"},{qname:"sap.riv.viz.xychart.AppDelegate",version:"3.4.0"},{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.AbstractXYChart",version:"3.4.0"},{qname:"sap.riv.viz.xychart.StackedBarModule",version:"3.4.0"},{qname:"sap.riv.viz.shared.descriptor.Descriptor",version:"3.4.0"},{qname:"sap.riv.core.Logger",version:"3.4.0"}],function Setup(e,g,b,a,f,c,h,j){var d=b.derive(f,{constructor:function(k,l,n){var m;a.isExist(l)?m=l:m={};m.type="stackedBar";if(!a.isExist(m.measure)){m.measure={}}m.measure.type="stackedBar";j.debug("Chart["+this._id+"] initializing.","perf");this._viz=new e({wrapperDivEl:k,delegateClass:g,launchOption:{chartModule:c,descriptor:h.getStackedBarDescriptor(),option:m,data:{rawData:n}}});j.debug("Chart["+this.id()+"]application["+this._viz.id()+"] initialized.","perf")}});return d});sap.riv.module({qname:"sap.riv.viz.shared.dataConverter.CrossTableDataset",version:"3.4.0",exported:true},[{qname:"sap.riv.core.utils.ObjectUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.ArrayUtils",version:"3.4.0"},{qname:"sap.riv.core.utils.TypeUtils",version:"3.4.0"},{qname:"sap.riv.viz.shared.dataConverter.BaseDataset",version:"3.4.0"}],function Setup(e,d,b,a){var c=e.derive(a,{constructor:function(){this.metadata={columnAxis:[],rowAxis:[]};this.origData=[];this.data=[];this.aggregation=[];this.chartInstances={};this._axisCounter=0;this.ERROR_CHAR="NaN";this.AXIS_TYPE_MEASURE="measure";this.AXIS_TYPE_DIMENSION="dimension";this.AXIS_KEY_TYPE="type";this.AXIS_KEY_LEVEL="level";this.AGGREGATION_DEFAULTTYPE="default";this.AGGREGATION_INLINETYPE="inline"},_verifyAxesName:function(h,f){if(b.isString(f)&&f.length>0){for(var g=0;g<h.length;g++){if(h[g].name==f){throw new Error("Axis with this name already exists!")}}return f}else{return""}},_updateAxesLevels:function(g){var h=(g?this.metadata.rowAxis:this.metadata.columnAxis);for(var f=0;f<h.length;f++){h[f].level=parseInt(f,10)}},_addAxis:function(h,g,f,j){var k=(h?this.metadata.rowAxis:this.metadata.columnAxis);return this._addAxisAt(h,k.length,g,f,j)},_addAxisAt:function(o,f,g,h,m){var l=(o?this.metadata.rowAxis:this.metadata.columnAxis);if(!h){throw new Error("Invalid params!")}if(!h.length){throw new Error("Invalid params!")}if(f<0||f>l.length){throw new Error("Invalid params! Level out of range!")}if(typeof m=="undefined"){m=this.AXIS_TYPE_DIMENSION}if(m!=this.AXIS_TYPE_MEASURE&&m!=this.AXIS_TYPE_DIMENSION){throw new Error("Invalid params!")}g=this._verifyAxesName(l,g);var k=[];e.extend(true,k,h);var j=(o?"d":"c")+this._axisCounter;this._axisCounter++;var n={uid:j,level:f,name:g,members:k,type:m};if(f==l.length){l[l.length]=n}else{l.splice(f,0,n);this._updateAxesLevels(o)}this.markDirty();return j},_modifyAxis:function(h,l,g,f,j){var k=(h?this.metadata.rowAxis:this.metadata.columnAxis);if(!f){throw new Error("Invalid params!")}if(!f.length){throw new Error("Invalid params!")}if(l<0||l>=k.length){throw new Error("Invalid params! Level out of range!")}if(g!=k[l].name){g=this._verifyAxesName(k,g)}if(typeof j=="undefined"){j=this.AXIS_TYPE_DIMENSION}if(j!=this.AXIS_TYPE_MEASURE&&j!=this.AXIS_TYPE_DIMENSION){throw new Error("Invalid params!")}k[l].name=g;k[l].type=j;k[l].members=[];e.extend(true,k[l].members,f);this.markDirty();return{uid:k[l].uid,level:l,name:g,type:j}},_modifyAxisByUid:function(l,k,h,g,m){var n=(l?this.metadata.rowAxis:this.metadata.columnAxis);var f=null;for(var j=0;j<n.length;j++){if(n[j].uid==k){return this._modifyAxis(l,n[j].level,h,g,m)}}return f},_getAxesInfo:function(g){var h=(g?this.metadata.rowAxis:this.metadata.columnAxis);var f=[];e.extend(true,f,h);e.each(f,function(j,k){delete k.members});return !f.length?null:f},_getAxisInfo:function(f,h){var g=(f?this.metadata.rowAxis:this.metadata.columnAxis);if(h<0||h>=g.length){throw new Error("Level out of range!")}return{uid:g[h].uid,level:h,name:g[h].name,type:g[h].type}},_getAxisInfoByUid:function(h,g){var j=(h?this.metadata.rowAxis:this.metadata.columnAxis);for(var f=0;f<j.length;f++){if(j[f].uid==g){return{uid:g,level:j[f].level,name:j[f].name,type:j[f].type}}}return null},_getAxisMembersByUid:function(j,h){var k=(j?this.metadata.rowAxis:this.metadata.columnAxis);var f=[];for(var g=0;g<k.length;g++){if(k[g].uid==h){e.extend(true,f,k[g].members);return f}}return null},_getAxisMembers:function(g,j){var h=(g?this.metadata.rowAxis:this.metadata.columnAxis);if(j<0||j>=h.length){throw new Error("Invalid params! Level out of range!")}var f=[];e.extend(true,f,h[j].members);return f},_removeAxis:function(g,j){var h=(g?this.metadata.rowAxis:this.metadata.columnAxis);if(j<0||j>=h.length){throw new Error("Invalid params! Level out of range!")}var f={uid:h[j].uid,level:j,name:h[j].name,type:h[j].type};h.splice(j,1);this._updateAxesLevels(g);this.markDirty();return f},_removeAxisByUid:function(j,h){var k=(j?this.metadata.rowAxis:this.metadata.columnAxis);if(!h){throw new Error("Invalid uid!")}var f={};for(var g=0;g<k.length;g++){if(k[g].uid==h){return this._removeAxis(j,g)}}return null},_getAxisUniqueMembersByType:function(g,h){var l=this._getAxesInfo(g);var k=[];for(var j=0;j<l.length;j++){if(h==l[j].type){var f=l[j].uid;k=this._getAxisMembersByUid(g,f);return this._unique(k)}}return null},_unique:function(h){var f={};for(var g=0;g<h.length;g++){f[h[g]["key"]]=h[g]}h=[];for(key in f){h.push(f[key])}return h},_getAxisUniqueMembersByLevel:function(f,j){try{var h=this._getAxisMembers(f,j);return this._unique(h)}catch(g){return null}},_getAxisUniqueMembers:function(g,f,h){switch(f){case this.AXIS_KEY_TYPE:return this._getAxisUniqueMembersByType(g,h);case this.AXIS_KEY_LEVEL:return this._getAxisUniqueMembersByLevel(g,h);default:return null}},_cleanData:function(){this.data=[];e.extend(true,this.data,this.origData);if(this.metadata.columnAxis.length==0){throw new Error("There should be at least one column measure axis!")}if(this.metadata.rowAxis.length==0){throw new Error("There should be at least one row dimension axis!")}var g=this.metadata.columnAxis[0].members.length;var m=this.metadata.rowAxis.length;var n=this.metadata.rowAxis[m-1].members.length;var k=g;var o=n;if(!this.metadata.dataByColumn){k=n;o=g}if(!b.isExist(this.data)){this.data=[]}for(var h=0;h<k;h++){if(!b.isExist(this.data[h])){this.data[h]=[]}for(var f=0;f<o;f++){if(!b.isExist(this.data[h][f])){this.data[h][f]=this.ERROR_CHAR}else{if(!b.isNumber(this.data[h][f])){var l=/(^-?\d+$)|(^(-?\d+)(\.\d+)?$)/;if(!l.test(this.data[h][f])){this.data[h][f]=this.ERROR_CHAR}}}}if(this.data[h].length>o){this.data[h].splice(o,this.data[h].length-o)}}},addColumnAxis:function(g,f,k){var j=[];for(var h=0;h<f.length;h++){if(!(f[h] instanceof Object)){var l={value:f[h],key:f[h]};j.push(l)}else{j.push(f[h])}}return this._addAxis(false,g,j,k)},addColumnAxisAt:function(j,g,f,h){return this._addAxisAt(false,j,g,f,h)},modifyColumnAxis:function(j,g,f,h){return this._modifyAxis(false,j,g,f,h)},modifyColumnAxisByUid:function(h,g,f,j){return this._modifyAxisByUid(false,h,g,f,j)},getColumnAxesInfo:function(){return this._getAxesInfo(false)},getColumnAxisInfo:function(f){return this._getAxisInfo(false,f)},getColumnAxisInfoByUid:function(f){return this._getAxisInfoByUid(false,f)},getColumnAxisMembersByUid:function(f){return this._getAxisMembersByUid(false,f)},getColumnAxisMembers:function(f){return this._getAxisMembers(false,f)},getColumnAxisUniqueMembers:function(f,g){return this._getAxisUniqueMembers(false,f,g)},removeColumnAxis:function(f){return this._removeAxis(false,f)},removeColumnAxisByUid:function(f){return this._removeAxisByUid(false,f)},addRowAxis:function(g,f,k){var j=[];for(var h=0;h<f.length;h++){if(!(f[h] instanceof Object)){var l={value:f[h],key:f[h]};j.push(l)}else{j.push(f[h])}}return this._addAxis(true,g,j,k)},addRowAxisAt:function(j,g,f,h){return this._addAxisAt(true,j,g,f,h)},modifyRowAxis:function(j,g,f,h){return this._modifyAxis(true,j,g,f,h)},modifyRowAxisByUid:function(h,g,f,j){return this._modifyAxisByUid(true,h,g,f,j)},getRowAxesInfo:function(){return this._getAxesInfo(true)},getRowAxisInfo:function(f){return this._getAxisInfo(true,f)},getRowAxisInfoByUid:function(f){return this._getAxisInfoByUid(true,f)},getRowAxisMembersByUid:function(f){return this._getAxisMembersByUid(true,f)},getRowAxisMembers:function(f){return this._getAxisMembers(true,f)},getRowAxisUniqueMembers:function(f,g){return this._getAxisUniqueMembers(true,f,g)},removeRowAxis:function(f){return this._removeAxis(true,f)},removeRowAxisByUid:function(f){return this._removeAxisByUid(true,f)},setData:function(f,g){if(typeof(f)!="boolean"||!g){throw new Error("Invalid params!")}if(!g.length){throw new Error("Invalid params!")}this.metadata.dataByColumn=f;this.origData=[];e.extend(true,this.origData,g);this._cleanData();this.markDirty()},getData:function(f){var k=[];if(f==this.metadata.dataByColumn){e.extend(true,k,this.data)}else{for(var h=0;h<this.data[0].length;h++){k[h]=[];for(var g=0;g<this.data.length;g++){k[h][g]=this.data[g][h]}}}return k},getValue:function(g,f){if(this.metadata.dataByColumn){return this.data[g][f]}else{return this.data[f][g]}},getColumnCount:function(){if(this.metadata.dataByColumn){return this.data.length}else{if(this.data.length>0){return this.data[0].length}else{return 0}}},getRowCount:function(){if(!this.metadata.dataByColumn){return this.data.length}else{if(this.data.length>0){return this.data[0].length}else{return 0}}},exportJsonStr:function(){function m(s){var t=(s?this.metadata.rowAxis:this.metadata.columnAxis);var u=(s?"rowAxis":"columnAxis");var r=[];r.push('"'+u+'":[');for(var q=0;q<t.length;q++){r.push('{"uid":"'+t[q].uid+'","level":'+t[q].level+',"name":"'+t[q].name+'","members":[');for(var o=0;o<t[q].members.length;o++){r.push('"'+t[q].members[o]+'"');if(o!=t[q].members.length-1){r.push(",")}}r.push("]");r.push(',"type":"'+t[q].type+'"}');if(q!=t.length-1){r.push(",")}}r.push("]");if(!s){r.push(",")}return r}function g(){var s=[];s.push('"aggregation":[');for(var r=0;r<this.aggregation.length;r++){if(b.type(this.aggregation[r].label)=="string"){s.push('{"label":"'+this.aggregation[r].label+'","rowDimension":[')}else{s.push('{"label":[');for(var o=0;o<this.aggregation[r].label.length;o++){s.push('"'+this.aggregation[r].label[o]+'"');if(o!=this.aggregation[r].label.length-1){s.push(",")}}s.push('],"rowDimension":[')}for(var o=0;o<this.aggregation[r].rowDimension.length;o++){s.push('"'+this.aggregation[r].rowDimension[o]+'"');if(o!=this.aggregation[r].rowDimension.length-1){s.push(",")}}s.push("]");s.push(',"value":[');for(var q=0;q<this.aggregation[r].value.length;q++){s.push(this.aggregation[r].value[q]);if(q!=this.aggregation[r].value.length-1){s.push(",")}}s.push("],");s.push('"type":"'+this.aggregation[r].type+'"');s.push("}");if(r!=this.aggregation.length-1){s.push(",")}}s.push("]");return s}var l=new Array();l.push("{");l.push('"metadata":{');l=l.concat(m.call(this,false));l=l.concat(m.call(this,true));l.push(",");l.push('"dataByColumn":'+(typeof(this.metadata.dataByColumn)=="boolean"?this.metadata.dataByColumn:null));l.push("},");l.push('"data":[');for(var k=0;k<this.data.length;k++){l.push("[");for(var h=0,f=this.data[k].length;h<f;h++){var n=this.data[k][h];if(n==this.ERROR_CHAR){l.push("null")}else{l.push(n)}if(h!=f-1){l.push(",")}}l.push("]");if(k!=this.data.length-1){l.push(",")}}l.push("],");l=l.concat(g.call(this));l.push("}");return l.join("")},importJsonStr:function(f){if(typeof(f)!="string"){throw new Error("Invalid JSON string!")}var g=e.parseJSON(f);if(!g.metadata){throw new Error("JSON object does not contain metadata!")}if(!g.data){throw new Error("JSON object does not contain data!")}e.extend(true,this.metadata,g.metadata);this.origData=[];e.extend(true,this.origData,g.data);this.aggregation=[];e.extend(true,this.aggregation,g.aggregation);this._cleanData();this.markDirty()},clone:function(){var f={};e.extend(true,f,this);return f},empty:function(){this.metadata={columnAxis:[],rowAxis:[]};this.data=[];this.origData=[];this.aggregation=[]},registerChartInstance:function(g){if(b.isExist(g)){var f=this.chartInstances;if(!f.hasOwnProperty(g)){f[g]={dirtyDS:false};return true}else{return true}}throw new Error("Failed to register chart instance in dataset!")},markDirty:function(){var f=this.chartInstances;for(var g in f){if(f.hasOwnProperty(g)){f[g].dirtyDS=true}}},checkDirty:function(h){var f=this.chartInstances;if(b.isExist(f[h])){var g=f[h];if(g.dirtyDS){g.dirtyDS=false;return true}else{return false}}throw new Error("Failed to check dirty for the chart:"+h+"!")},addAggregation:function(o,q,g){if(b.isString(o)&&!(o instanceof Array)){throw new Error("Invalid params!")}else{if(""==o){return}}if(!b.isExist(q)||typeof(q)!="object"){throw new Error("Invalid params!")}if(b.isExist(g)){if(typeof(g)!="object"){throw new Error("Invalid params!")}if(g.length>=this.getRowAxesInfo().length){return}var f=false;for(var m=0;m<this.getRowCount();m++){var n=0;for(var k=0;k<g.length;k++){if(g[k]==this.getRowAxisMembers(k)[m]){n++}}if(n==g.length){f=true;break}}if(!f){throw new Error("Invalid params!")}}var r=o;var s=q;var h=b.isExist(g)?g:[];var l=b.isString(o)?this.AGGREGATION_DEFAULTTYPE:this.AGGREGATION_INLINETYPE;s.length=this.getColumnCount();this.aggregation.push({label:r,value:s,rowDimension:h,type:l})},getAggregation:function(m){if(!b.isExist(m)){return this.aggregation}var g=[];for(var h=0;h<this.aggregation.length;h++){var l=this.aggregation[h];if(m.length==0&&l.rowDimension.length==0){g.push(l)}else{if(m.length>0){var k=0;for(var f=0;f<m.length;f++){if(f>=l.rowDimension.length||l.rowDimension[f]!=m[f]){k=0;break}k++}if(k==m.length){g.push(l)}}}}return g},modifyAggregation:function(g,o,q,h){if(b.isString(o)&&!(o instanceof Array)){throw new Error("Invalid params!")}else{if(""==o){return}}if(!b.isExist(q)||typeof(q)!="object"){throw new Error("Invalid params!")}if(b.isExist(h)){if(typeof(h)!="object"){throw new Error("Invalid params!")}if(h.length>=this.getRowAxesInfo().length){return}var f=false;for(var l=0;l<this.getRowCount();l++){var m=0;for(var k=0;k<h.length;k++){if(h[k]==this.getRowAxisMembers(k)[l]){m++}}if(m==h.length){f=true;break}}if(!f){throw new Error("Invalid params!")}}var n=b.isString(o)?this.AGGREGATION_DEFAULTTYPE:this.AGGREGATION_INLINETYPE;this.aggregation[g].label=o;this.aggregation[g].value=q;this.aggregation[g].rowDimension=[];e.extend(true,this.aggregation[g].rowDimension,h);this.markDirty();return{level:g,label:o,value:q,rowDimension:h,type:n}},exportTree:function(){var B=this.getColumnAxisUniqueMembers(this.AXIS_KEY_TYPE,this.AXIS_TYPE_MEASURE);var D=this.getColumnAxisMembers(0);var n=this.metadata.columnAxis;var m=this.metadata.rowAxis;var l=n.slice(1);var g=0;var A=[];for(var v=0;v<m.length;v++){A.push({name:m[v].name,analysisAxisIndex:0})}if(m.length>0){g++}for(var v=0;v<l.length;v++){A.push({name:l[v].name,analysisAxisIndex:1})}if(l.length>0){g++}var h=function(O,Q,H,E,F,K,N){var L=Q[H];var J=null;for(var G=0;G<O.subNodes.length;G++){if(L.name===O.subNodes[G].label.value){J=O.subNodes[G];break}}var P={value:L.name,key:L.dimensionItemKey};if(J==null){J={};J.member=G;J.label=P;J.measureValues={};J.subNodes=[];for(var G=0;G<B.length;G++){J.measureValues[B[G].value]={}}O.subNodes.push(J)}if(H==Q.length-1){var M=[];for(var G=0,I=Q.length;G<I;G++){var j=Q[G];M.push({analysisAxisIndex:j.analysisAxisIndex,dimensionIndex:j.dimensionIndex,dimensionItemIndex:j.dimensionItemIndex,dimensionItemKey:j.dimensionItemKey})}J.measureValues[k]={sum:{result:N,tags:{dimensionPath:M,measureIndex:K,measureKey:F}}}}else{h(J,Q,H+1,k,F,K,N)}};var z=[];for(var w=0,x=this.getColumnCount();w<x;w++){z[w]=[];for(var v=0;v<l.length;v++){var q={name:b.isExist(l[v].members[w])?l[v].members[w].value:null,dimensionItemKey:b.isExist(l[v].members[w])?l[v].members[w].key:null,analysisAxisIndex:1,dimensionIndex:v,dimensionItemIndex:w};z[w].push(q)}}var f=[];for(var w=0,x=this.getRowCount();w<x;w++){f[w]=[];for(var v=0;v<m.length;v++){var q={name:b.isExist(m[v].members[w])?m[v].members[w].value:null,dimensionItemKey:b.isExist(m[v].members[w])?m[v].members[w].key:null,analysisAxisIndex:0,dimensionIndex:v,dimensionItemIndex:w};f[w].push(q)}}var u={};u.member="root";u.measureValues={};u.subNodes=[];for(var w=0;w<B.length;w++){u.measureValues[B[w].value]={}}for(var w=0,x=this.getColumnCount();w<x;w++){for(var v=0,s=this.getRowCount();v<s;v++){var C=this.getValue(w,v);var t=f[v].concat(z[w]);var k=D[w].value;var r=D[w].key;h(u,t,0,k,r,w,C)}}var o={dataTree:u,metaData:{measureMembers:B,dimension:A,axisNum:g}};return o}});return c});